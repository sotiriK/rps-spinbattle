(()=>{var t={973:t=>{"use strict";function e(t,e,s){s=s||2;var r,o,a,h,d,u,f,_=e&&e.length,g=_?e[0]*s:t.length,m=i(t,0,g,s,!0),x=[];if(!m||m.next===m.prev)return x;if(_&&(m=function(t,e,s,n){var r,o,a,h=[];for(r=0,o=e.length;r<o;r++)(a=i(t,e[r]*n,r<o-1?e[r+1]*n:t.length,n,!1))===a.next&&(a.steiner=!0),h.push(p(a));for(h.sort(l),r=0;r<h.length;r++)s=c(h[r],s);return s}(t,e,m,s)),t.length>80*s){r=a=t[0],o=h=t[1];for(var y=s;y<g;y+=s)(d=t[y])<r&&(r=d),(u=t[y+1])<o&&(o=u),d>a&&(a=d),u>h&&(h=u);f=0!==(f=Math.max(a-r,h-o))?32767/f:0}return n(m,x,s,r,o,f,0),x}function i(t,e,i,s,n){var r,o;if(n===T(t,e,i,s)>0)for(r=e;r<i;r+=s)o=S(r,t[r],t[r+1],o);else for(r=i-s;r>=e;r-=s)o=S(r,t[r],t[r+1],o);return o&&m(o,o.next)&&(A(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var i,s=t;do{if(i=!1,s.steiner||!m(s,s.next)&&0!==g(s.prev,s,s.next))s=s.next;else{if(A(s),(s=e=s.prev)===s.next)break;i=!0}}while(i||s!==e);return e}function n(t,e,i,l,c,d,p){if(t){!p&&d&&function(t,e,i,s){var n=t;do{0===n.z&&(n.z=u(n.x,n.y,e,i,s)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,s,n,r,o,a,h,l=1;do{for(i=t,t=null,r=null,o=0;i;){for(o++,s=i,a=0,e=0;e<l&&(a++,s=s.nextZ);e++);for(h=l;a>0||h>0&&s;)0!==a&&(0===h||!s||i.z<=s.z)?(n=i,i=i.nextZ,a--):(n=s,s=s.nextZ,h--),r?r.nextZ=n:t=n,n.prevZ=r,r=n;i=s}r.nextZ=null,l*=2}while(o>1)}(n)}(t,l,c,d);for(var f,_,g=t;t.prev!==t.next;)if(f=t.prev,_=t.next,d?o(t,l,c,d):r(t))e.push(f.i/i|0),e.push(t.i/i|0),e.push(_.i/i|0),A(t),t=_.next,g=_.next;else if((t=_)===g){p?1===p?n(t=a(s(t),e,i),e,i,l,c,d,2):2===p&&h(t,e,i,l,c,d):n(s(t),e,i,l,c,d,1);break}}}function r(t){var e=t.prev,i=t,s=t.next;if(g(e,i,s)>=0)return!1;for(var n=e.x,r=i.x,o=s.x,a=e.y,h=i.y,l=s.y,c=n<r?n<o?n:o:r<o?r:o,d=a<h?a<l?a:l:h<l?h:l,u=n>r?n>o?n:o:r>o?r:o,p=a>h?a>l?a:l:h>l?h:l,_=s.next;_!==e;){if(_.x>=c&&_.x<=u&&_.y>=d&&_.y<=p&&f(n,a,r,h,o,l,_.x,_.y)&&g(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function o(t,e,i,s){var n=t.prev,r=t,o=t.next;if(g(n,r,o)>=0)return!1;for(var a=n.x,h=r.x,l=o.x,c=n.y,d=r.y,p=o.y,_=a<h?a<l?a:l:h<l?h:l,m=c<d?c<p?c:p:d<p?d:p,x=a>h?a>l?a:l:h>l?h:l,y=c>d?c>p?c:p:d>p?d:p,v=u(_,m,e,i,s),b=u(x,y,e,i,s),w=t.prevZ,S=t.nextZ;w&&w.z>=v&&S&&S.z<=b;){if(w.x>=_&&w.x<=x&&w.y>=m&&w.y<=y&&w!==n&&w!==o&&f(a,c,h,d,l,p,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,S.x>=_&&S.x<=x&&S.y>=m&&S.y<=y&&S!==n&&S!==o&&f(a,c,h,d,l,p,S.x,S.y)&&g(S.prev,S,S.next)>=0)return!1;S=S.nextZ}for(;w&&w.z>=v;){if(w.x>=_&&w.x<=x&&w.y>=m&&w.y<=y&&w!==n&&w!==o&&f(a,c,h,d,l,p,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;S&&S.z<=b;){if(S.x>=_&&S.x<=x&&S.y>=m&&S.y<=y&&S!==n&&S!==o&&f(a,c,h,d,l,p,S.x,S.y)&&g(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function a(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!m(r,o)&&x(r,n,n.next,o)&&b(r,o)&&b(o,r)&&(e.push(r.i/i|0),e.push(n.i/i|0),e.push(o.i/i|0),A(n),A(n.next),n=t=o),n=n.next}while(n!==t);return s(n)}function h(t,e,i,r,o,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&_(h,l)){var c=w(h,l);return h=s(h,h.next),c=s(c,c.next),n(h,e,i,r,o,a,0),void n(c,e,i,r,o,a,0)}l=l.next}h=h.next}while(h!==t)}function l(t,e){return t.x-e.x}function c(t,e){var i=function(t,e){var i,s=e,n=t.x,r=t.y,o=-1/0;do{if(r<=s.y&&r>=s.next.y&&s.next.y!==s.y){var a=s.x+(r-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(a<=n&&a>o&&(o=a,i=s.x<s.next.x?s:s.next,a===n))return i}s=s.next}while(s!==e);if(!i)return null;var h,l=i,c=i.x,u=i.y,p=1/0;s=i;do{n>=s.x&&s.x>=c&&n!==s.x&&f(r<u?n:o,r,c,u,r<u?o:n,r,s.x,s.y)&&(h=Math.abs(r-s.y)/(n-s.x),b(s,t)&&(h<p||h===p&&(s.x>i.x||s.x===i.x&&d(i,s)))&&(i=s,p=h)),s=s.next}while(s!==l);return i}(t,e);if(!i)return e;var n=w(i,t);return s(n,n.next),s(i,i.next)}function d(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function u(t,e,i,s,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-s)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function f(t,e,i,s,n,r,o,a){return(n-o)*(e-a)>=(t-o)*(r-a)&&(t-o)*(s-a)>=(i-o)*(e-a)&&(i-o)*(r-a)>=(n-o)*(s-a)}function _(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&x(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){var i=t,s=!1,n=(t.x+e.x)/2,r=(t.y+e.y)/2;do{i.y>r!==i.next.y>r&&i.next.y!==i.y&&n<(i.next.x-i.x)*(r-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next}while(i!==t);return s}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||m(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function m(t,e){return t.x===e.x&&t.y===e.y}function x(t,e,i,s){var n=v(g(t,e,i)),r=v(g(t,e,s)),o=v(g(i,s,t)),a=v(g(i,s,e));return n!==r&&o!==a||(!(0!==n||!y(t,i,e))||(!(0!==r||!y(t,s,e))||(!(0!==o||!y(i,t,s))||!(0!==a||!y(i,e,s)))))}function y(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function v(t){return t>0?1:t<0?-1:0}function b(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function w(t,e){var i=new C(t.i,t.x,t.y),s=new C(e.i,e.x,e.y),n=t.next,r=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,s.next=i,i.prev=s,r.next=s,s.prev=r,s}function S(t,e,i,s){var n=new C(t,e,i);return s?(n.next=s.next,n.prev=s,s.next.prev=n,s.next=n):(n.prev=n,n.next=n),n}function A(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(t,e,i,s){for(var n=0,r=e,o=i-s;r<i;r+=s)n+=(t[o]-t[r])*(t[r+1]+t[o+1]),o=r;return n}t.exports=e,t.exports.default=e,e.deviation=function(t,e,i,s){var n=e&&e.length,r=n?e[0]*i:t.length,o=Math.abs(T(t,0,r,i));if(n)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,c=a<h-1?e[a+1]*i:t.length;o-=Math.abs(T(t,l,c,i))}var d=0;for(a=0;a<s.length;a+=3){var u=s[a]*i,p=s[a+1]*i,f=s[a+2]*i;d+=Math.abs((t[u]-t[f])*(t[p+1]-t[u+1])-(t[u]-t[p])*(t[f+1]-t[u+1]))}return 0===o&&0===d?0:Math.abs((d-o)/o)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},s=0,n=0;n<t.length;n++){for(var r=0;r<t[n].length;r++)for(var o=0;o<e;o++)i.vertices.push(t[n][r][o]);n>0&&(s+=t[n-1].length,i.holes.push(s))}return i}},7283:t=>{"use strict";var e=Object.prototype.hasOwnProperty,i="~";function s(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function r(t,e,s,r,o){if("function"!==typeof s)throw new TypeError("The listener must be a function");var a=new n(s,r||t,o),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function o(t,e){0===--t._eventsCount?t._events=new s:delete t._events[e]}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),a.prototype.eventNames=function(){var t,s,n=[];if(0===this._eventsCount)return n;for(s in t=this._events)e.call(t,s)&&n.push(i?s.slice(1):s);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=i?i+t:t,s=this._events[e];if(!s)return[];if(s.fn)return[s.fn];for(var n=0,r=s.length,o=new Array(r);n<r;n++)o[n]=s[n].fn;return o},a.prototype.listenerCount=function(t){var e=i?i+t:t,s=this._events[e];return s?s.fn?1:s.length:0},a.prototype.emit=function(t,e,s,n,r,o){var a=i?i+t:t;if(!this._events[a])return!1;var h,l,c=this._events[a],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,s),!0;case 4:return c.fn.call(c.context,e,s,n),!0;case 5:return c.fn.call(c.context,e,s,n,r),!0;case 6:return c.fn.call(c.context,e,s,n,r,o),!0}for(l=1,h=new Array(d-1);l<d;l++)h[l-1]=arguments[l];c.fn.apply(c.context,h)}else{var u,p=c.length;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,s);break;case 4:c[l].fn.call(c[l].context,e,s,n);break;default:if(!h)for(u=1,h=new Array(d-1);u<d;u++)h[u-1]=arguments[u];c[l].fn.apply(c[l].context,h)}}return!0},a.prototype.on=function(t,e,i){return r(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return r(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,s,n){var r=i?i+t:t;if(!this._events[r])return this;if(!e)return o(this,r),this;var a=this._events[r];if(a.fn)a.fn!==e||n&&!a.once||s&&a.context!==s||o(this,r);else{for(var h=0,l=[],c=a.length;h<c;h++)(a[h].fn!==e||n&&!a[h].once||s&&a[h].context!==s)&&l.push(a[h]);l.length?this._events[r]=1===l.length?l[0]:l:o(this,r)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&o(this,e)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a},4100:t=>{t.exports=function(t){var n=[];return t.replace(i,(function(t,i,r){var o=i.toLowerCase();for(r=function(t){var e=t.match(s);return e?e.map(Number):[]}(r),"m"==o&&r.length>2&&(n.push([i].concat(r.splice(0,2))),o="l",i="m"==i?"l":"L");;){if(r.length==e[o])return r.unshift(i),n.push(r);if(r.length<e[o])throw new Error("malformed path data");n.push([i].concat(r.splice(0,e[o])))}})),n};var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},8379:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});const s=i(7283)},8656:(t,e,i)=>{"use strict";i.d(e,{l:()=>r});var s=i(279),n=i(1685);const r=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||(0,s.R)("[Assets] Asset id ".concat(t," was not found in the Cache")),e}set(t,e){const i=(0,n.z)(t);let r;for(let s=0;s<this.parsers.length;s++){const t=this.parsers[s];if(t.test(e)){r=t.getCacheableAssets(i,e);break}}const o=new Map(Object.entries(r||{}));r||i.forEach((t=>{o.set(t,e)}));const a=[...o.keys()],h={cacheKeys:a,keys:i};i.forEach((t=>{this._cacheMap.set(t,h)})),a.forEach((t=>{const i=r?r[t]:e;this._cache.has(t)&&this._cache.get(t)!==i&&(0,s.R)("[Cache] already has key:",t),this._cache.set(t,o.get(t))}))}remove(t){if(!this._cacheMap.has(t))return void(0,s.R)("[Assets] Asset id ".concat(t," was not found in the Cache"));const e=this._cacheMap.get(t);e.cacheKeys.forEach((t=>{this._cache.delete(t)})),e.keys.forEach((t=>{this._cacheMap.delete(t)}))}get parsers(){return this._parsers}}},366:(t,e,i)=>{"use strict";i.d(e,{T:()=>s});var s=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(s||{})},1451:(t,e,i)=>{"use strict";i.d(e,{x:()=>l});var s=i(279),n=i(6268),r=i(1685);function o(t,e,i,s,n){const r=e[i];for(let a=0;a<r.length;a++){const h=r[a];i<e.length-1?o(t.replace(s[i],h),e,i+1,s,n):n.push(t.replace(s[i],h))}}function a(t){const e=t.match(/\{(.*?)\}/g),i=[];if(e){const s=[];e.forEach((t=>{const e=t.substring(1,t.length-1).split(",");s.push(e)})),o(t,s,0,e,i)}else i.push(t);return i}var h=i(6340);class l{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>"".concat(t).concat(this._bundleIdConnector).concat(e),extractAssetIdFromBundle:(t,e)=>e.replace("".concat(t).concat(this._bundleIdConnector),"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){var e,i,s;if(this._bundleIdConnector=null!==(e=t.connector)&&void 0!==e?e:this._bundleIdConnector,this._createBundleAssetId=null!==(i=t.createBundleAssetId)&&void 0!==i?i:this._createBundleAssetId,this._extractAssetIdFromBundle=null!==(s=t.extractAssetIdFromBundle)&&void 0!==s?s:this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach((t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))})),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if("string"===typeof t)this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map((t=>"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t])))).join("&")}}getAlias(t){const{alias:e,src:i}=t;return(0,r.z)(e||i,(t=>"string"===typeof t?t:Array.isArray(t)?t.map((t=>{var e;return null!==(e=null===t||void 0===t?void 0:t.src)&&void 0!==e?e:t})):null!==t&&void 0!==t&&t.src?t.src:t),!0)}addManifest(t){this._manifest&&(0,s.R)("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach((t=>{this.addBundle(t.name,t.assets)}))}addBundle(t,e){const i=[];let s=e;Array.isArray(e)||(s=Object.entries(e).map((t=>{let[e,i]=t;return"string"===typeof i||Array.isArray(i)?{alias:e,src:i}:{alias:e,...i}}))),s.forEach((e=>{const s=e.src,n=e.alias;let r;if("string"===typeof n){const e=this._createBundleAssetId(t,n);i.push(e),r=[n,e]}else{const e=n.map((e=>this._createBundleAssetId(t,e)));i.push(...e),r=[...n,...e]}this.add({...e,alias:r,src:s})})),this._bundles[t]=i}add(t){const e=[];let i;Array.isArray(t)?e.push(...t):e.push(t),i=t=>{this.hasKey(t)&&(0,s.R)("[Resolver] already has key: ".concat(t," overwriting"))};(0,r.z)(e).forEach((t=>{const{src:e}=t;let{data:s,format:n,loadParser:o}=t;const h=(0,r.z)(e).map((t=>"string"===typeof t?a(t):Array.isArray(t)?t:[t])),l=this.getAlias(t);Array.isArray(l)?l.forEach(i):i(l);const c=[];h.forEach((t=>{t.forEach((t=>{let e={};if("object"!==typeof t){e.src=t;for(let i=0;i<this._parsers.length;i++){const s=this._parsers[i];if(s.test(t)){e=s.parse(t);break}}}else{var i,r,a;s=null!==(i=t.data)&&void 0!==i?i:s,n=null!==(r=t.format)&&void 0!==r?r:n,o=null!==(a=t.loadParser)&&void 0!==a?a:o,e={...e,...t}}if(!l)throw new Error("[Resolver] alias is undefined for this asset: ".concat(e.src));e=this._buildResolvedAsset(e,{aliases:l,data:s,format:n,loadParser:o}),c.push(e)}))})),l.forEach((t=>{this._assetMap[t]=c}))}))}resolveBundle(t){const e=(0,h.a)(t);t=(0,r.z)(t);const i={};return t.forEach((t=>{const e=this._bundles[t];if(e){const s=this.resolve(e),n={};for(const e in s){const i=s[e];n[this._extractAssetIdFromBundle(t,e)]=i}i[t]=n}})),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if("string"!==typeof t){const t={};for(const i in e)t[i]=e[i].src;return t}return e.src}resolve(t){const e=(0,h.a)(t);t=(0,r.z)(t);const i={};return t.forEach((t=>{if(!this._resolverHash[t])if(this._assetMap[t]){let e=this._assetMap[t];const i=this._getPreferredOrder(e);null===i||void 0===i||i.priority.forEach((t=>{i.params[t].forEach((i=>{const s=e.filter((e=>!!e[t]&&e[t]===i));s.length&&(e=s)}))})),this._resolverHash[t]=e[0]}else this._resolverHash[t]=this._buildResolvedAsset({alias:[t],src:t},{});i[t]=this._resolverHash[t]})),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const e=t[0],i=this._preferredOrder.find((t=>t.params.format.includes(e.format)));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return"".concat(t).concat(e).concat(this._defaultSearchParams)}_buildResolvedAsset(t,e){var i,s;const{aliases:r,data:o,loadParser:a,format:h}=e;return(this._basePath||this._rootPath)&&(t.src=n.A.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=null!==(i=null!==r&&void 0!==r?r:t.alias)&&void 0!==i?i:[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...o||{},...t.data},t.loadParser=null!==a&&void 0!==a?a:t.loadParser,t.format=null!==(s=null!==h&&void 0!==h?h:t.format)&&void 0!==s?s:t.src.split(".").pop().split("?").shift().split("#").shift(),t}}l.RETINA_PREFIX=/@([0-9\.]+)x/},1685:(t,e,i)=>{"use strict";i.d(e,{z:()=>s});const s=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Array.isArray(t)||(t=[t]),e?t.map((t=>"string"===typeof t||i?e(t):t)):t}},7960:(t,e,i)=>{"use strict";i.d(e,{Y:()=>s});const s=(t,e)=>{const i=e.split("?")[1];return i&&(t+="?".concat(i)),t}},6340:(t,e,i)=>{"use strict";i.d(e,{a:()=>s});const s=t=>!Array.isArray(t)},5242:(t,e,i)=>{"use strict";i.d(e,{Q:()=>I});var s={grad:.9,turn:360,rad:360/(2*Math.PI)},n=function(t){return"string"==typeof t?t.length>0:"number"==typeof t},r=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=Math.pow(10,e)),Math.round(i*t)/i+0},o=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=1),t>i?i:t>e?t:e},a=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},h=function(t){return{r:o(t.r,0,255),g:o(t.g,0,255),b:o(t.b,0,255),a:o(t.a)}},l=function(t){return{r:r(t.r),g:r(t.g),b:r(t.b),a:r(t.a,3)}},c=/^#([0-9a-f]{3,8})$/i,d=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},u=function(t){var e=t.r,i=t.g,s=t.b,n=t.a,r=Math.max(e,i,s),o=r-Math.min(e,i,s),a=o?r===e?(i-s)/o:r===i?2+(s-e)/o:4+(e-i)/o:0;return{h:60*(a<0?a+6:a),s:r?o/r*100:0,v:r/255*100,a:n}},p=function(t){var e=t.h,i=t.s,s=t.v,n=t.a;e=e/360*6,i/=100,s/=100;var r=Math.floor(e),o=s*(1-i),a=s*(1-(e-r)*i),h=s*(1-(1-e+r)*i),l=r%6;return{r:255*[s,a,o,o,h,s][l],g:255*[h,s,s,a,o,o][l],b:255*[o,o,h,s,s,a][l],a:n}},f=function(t){return{h:a(t.h),s:o(t.s,0,100),l:o(t.l,0,100),a:o(t.a)}},_=function(t){return{h:r(t.h),s:r(t.s),l:r(t.l),a:r(t.a,3)}},g=function(t){return p((i=(e=t).s,{h:e.h,s:(i*=((s=e.l)<50?s:100-s)/100)>0?2*i/(s+i)*100:0,v:s+i,a:e.a}));var e,i,s},m=function(t){return{h:(e=u(t)).h,s:(n=(200-(i=e.s))*(s=e.v)/100)>0&&n<200?i*s/100/(n<=100?n:200-n)*100:0,l:n/2,a:e.a};var e,i,s,n},x=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,b=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,w={string:[[function(t){var e=c.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?r(parseInt(t[3]+t[3],16)/255,2):1}:6===t.length||8===t.length?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:8===t.length?r(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=v.exec(t)||b.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:h({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:void 0===e[7]?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=x.exec(t)||y.exec(t);if(!e)return null;var i,n,r=f({h:(i=e[1],n=e[2],void 0===n&&(n="deg"),Number(i)*(s[n]||1)),s:Number(e[3]),l:Number(e[4]),a:void 0===e[5]?1:Number(e[5])/(e[6]?100:1)});return g(r)},"hsl"]],object:[[function(t){var e=t.r,i=t.g,s=t.b,r=t.a,o=void 0===r?1:r;return n(e)&&n(i)&&n(s)?h({r:Number(e),g:Number(i),b:Number(s),a:Number(o)}):null},"rgb"],[function(t){var e=t.h,i=t.s,s=t.l,r=t.a,o=void 0===r?1:r;if(!n(e)||!n(i)||!n(s))return null;var a=f({h:Number(e),s:Number(i),l:Number(s),a:Number(o)});return g(a)},"hsl"],[function(t){var e=t.h,i=t.s,s=t.v,r=t.a,h=void 0===r?1:r;if(!n(e)||!n(i)||!n(s))return null;var l=function(t){return{h:a(t.h),s:o(t.s,0,100),v:o(t.v,0,100),a:o(t.a)}}({h:Number(e),s:Number(i),v:Number(s),a:Number(h)});return p(l)},"hsv"]]},S=function(t,e){for(var i=0;i<e.length;i++){var s=e[i][0](t);if(s)return[s,e[i][1]]}return[null,void 0]},A=function(t){return"string"==typeof t?S(t.trim(),w.string):"object"==typeof t&&null!==t?S(t,w.object):[null,void 0]},C=function(t,e){var i=m(t);return{h:i.h,s:o(i.s+100*e,0,100),l:i.l,a:i.a}},T=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},P=function(t,e){var i=m(t);return{h:i.h,s:i.s,l:o(i.l+100*e,0,100),a:i.a}},M=function(){function t(t){this.parsed=A(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return null!==this.parsed},t.prototype.brightness=function(){return r(T(this.rgba),2)},t.prototype.isDark=function(){return T(this.rgba)<.5},t.prototype.isLight=function(){return T(this.rgba)>=.5},t.prototype.toHex=function(){return e=(t=l(this.rgba)).r,i=t.g,s=t.b,o=(n=t.a)<1?d(r(255*n)):"","#"+d(e)+d(i)+d(s)+o;var t,e,i,s,n,o},t.prototype.toRgb=function(){return l(this.rgba)},t.prototype.toRgbString=function(){return e=(t=l(this.rgba)).r,i=t.g,s=t.b,(n=t.a)<1?"rgba("+e+", "+i+", "+s+", "+n+")":"rgb("+e+", "+i+", "+s+")";var t,e,i,s,n},t.prototype.toHsl=function(){return _(m(this.rgba))},t.prototype.toHslString=function(){return e=(t=_(m(this.rgba))).h,i=t.s,s=t.l,(n=t.a)<1?"hsla("+e+", "+i+"%, "+s+"%, "+n+")":"hsl("+e+", "+i+"%, "+s+"%)";var t,e,i,s,n},t.prototype.toHsv=function(){return t=u(this.rgba),{h:r(t.h),s:r(t.s),v:r(t.v),a:r(t.a,3)};var t},t.prototype.invert=function(){return k({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},t.prototype.saturate=function(t){return void 0===t&&(t=.1),k(C(this.rgba,t))},t.prototype.desaturate=function(t){return void 0===t&&(t=.1),k(C(this.rgba,-t))},t.prototype.grayscale=function(){return k(C(this.rgba,-1))},t.prototype.lighten=function(t){return void 0===t&&(t=.1),k(P(this.rgba,t))},t.prototype.darken=function(t){return void 0===t&&(t=.1),k(P(this.rgba,-t))},t.prototype.rotate=function(t){return void 0===t&&(t=15),this.hue(this.hue()+t)},t.prototype.alpha=function(t){return"number"==typeof t?k({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):r(this.rgba.a,3);var e},t.prototype.hue=function(t){var e=m(this.rgba);return"number"==typeof t?k({h:t,s:e.s,l:e.l,a:e.a}):r(e.h)},t.prototype.isEqual=function(t){return this.toHex()===k(t).toHex()},t}(),k=function(t){return t instanceof M?t:new M(t)},B=[];!function(t){t.forEach((function(t){B.indexOf(t)<0&&(t(M,w),B.push(t))}))}([function(t,e){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var n in i)s[i[n]]=n;var r={};t.prototype.toName=function(e){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var n,o,a=s[this.toHex()];if(a)return a;if(null==e?void 0:e.closest){var h=this.toRgb(),l=1/0,c="black";if(!r.length)for(var d in i)r[d]=new t(i[d]).toRgb();for(var u in i){var p=(n=h,o=r[u],Math.pow(n.r-o.r,2)+Math.pow(n.g-o.g,2)+Math.pow(n.b-o.b,2));p<l&&(l=p,c=u)}return c}},e.string.push([function(e){var s=e.toLowerCase(),n="transparent"===s?"#0000":i[s];return n?new t(n).toRgb():null},"name"])}]);const R=class t{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16777215;this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(e){if(e instanceof t)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(null===e)throw new Error("Cannot set Color#value to null");null!==this._value&&this._isSourceEqual(this._value,e)||(this._normalize(e),this._value=this._cloneSource(e))}}get value(){return this._value}_cloneSource(t){return"string"===typeof t||"number"===typeof t||t instanceof Number||null===t?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):"object"===typeof t&&null!==t?{...t}:t}_isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if("number"===i||"string"===i||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length===e.length&&t.every(((t,i)=>t===e[i]));if(null!==t&&null!==e){const i=Object.keys(t),s=Object.keys(e);return i.length===s.length&&i.every((i=>t[i]===e[i]))}return t===e}toRgba(){const[t,e,i,s]=this._components;return{r:t,g:e,b:i,a:s}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return"rgba(".concat(t,",").concat(e,",").concat(i,",").concat(this.alpha,")")}toUint8RgbArray(t){const[e,i,s]=this._components;return this._arrayRgb||(this._arrayRgb=[]),(t=t||this._arrayRgb)[0]=Math.round(255*e),t[1]=Math.round(255*i),t[2]=Math.round(255*s),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t=t||this._arrayRgba;const[e,i,s,n]=this._components;return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t=t||this._arrayRgb;const[e,i,s]=this._components;return t[0]=e,t[1]=i,t[2]=s,t}toNumber(){return this._int}toBgrNumber(){const[t,e,i]=this.toUint8RgbArray();return(i<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(65280&t)+((255&t)<<16)}multiply(e){const[i,s,n,r]=t._temp.setValue(e)._components;return this._components[0]*=i,this._components[1]*=s,this._components[2]*=n,this._components[3]*=r,this._refreshInt(),this._value=null,this}premultiply(t){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(1===t)return(255<<24)+this._int;if(0===t)return e?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,n=255&this._int;return e&&(i=i*t+.5|0,s=s*t+.5|0,n=n*t+.5|0),(255*t<<24)+(i<<16)+(s<<8)+n}toHex(){const t=this._int.toString(16);return"#".concat("000000".substring(0,6-t.length)+t)}toHexa(){const t=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(e){let i,s,n,r;if(("number"===typeof e||e instanceof Number)&&e>=0&&e<=16777215){i=(e>>16&255)/255,s=(e>>8&255)/255,n=(255&e)/255,r=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[i,s,n,r=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[i,s,n,r=255]=e,i/=255,s/=255,n/=255,r/=255;else if("string"===typeof e||"object"===typeof e){if("string"===typeof e){const i=t.HEX_PATTERN.exec(e);i&&(e="#".concat(i[2]))}const o=k(e);o.isValid()&&(({r:i,g:s,b:n,a:r}=o.rgba),i/=255,s/=255,n/=255)}if(void 0===i)throw new Error("Unable to convert color ".concat(e));this._components[0]=i,this._components[1]=s,this._components[2]=n,this._components[3]=r,this._refreshInt()}_refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(255*t<<16)+(255*e<<8)+(255*i|0)}_clamp(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return"number"===typeof t?Math.min(Math.max(t,e),i):(t.forEach(((s,n)=>{t[n]=Math.min(Math.max(s,e),i)})),t)}static isColorLike(e){return"number"===typeof e||"string"===typeof e||e instanceof Number||e instanceof t||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||void 0!==e.r&&void 0!==e.g&&void 0!==e.b||void 0!==e.r&&void 0!==e.g&&void 0!==e.b&&void 0!==e.a||void 0!==e.h&&void 0!==e.s&&void 0!==e.l||void 0!==e.h&&void 0!==e.s&&void 0!==e.l&&void 0!==e.a||void 0!==e.h&&void 0!==e.s&&void 0!==e.v||void 0!==e.h&&void 0!==e.s&&void 0!==e.v&&void 0!==e.a}};R.shared=new R,R._temp=new R,R.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let I=R},3144:(t,e,i)=>{"use strict";i.d(e,{e:()=>n});let s={createCanvas:(t,e)=>{const i=document.createElement("canvas");return i.width=t,i.height=e,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>{var t;return null!==(t=document.baseURI)&&void 0!==t?t:window.location.href},getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>(new DOMParser).parseFromString(t,"text/xml")};const n={get:()=>s,set(t){s=t}}},1478:(t,e,i)=>{"use strict";i.d(e,{Ag:()=>s,XO:()=>o});var s=(t=>(t.Application="application",t.WebGLPipes="webgl-pipes",t.WebGLPipesAdaptor="webgl-pipes-adaptor",t.WebGLSystem="webgl-system",t.WebGPUPipes="webgpu-pipes",t.WebGPUPipesAdaptor="webgpu-pipes-adaptor",t.WebGPUSystem="webgpu-system",t.CanvasSystem="canvas-system",t.CanvasPipesAdaptor="canvas-pipes-adaptor",t.CanvasPipes="canvas-pipes",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t.MaskEffect="mask-effect",t.BlendMode="blend-mode",t.TextureSource="texture-source",t.Environment="environment",t))(s||{});const n=t=>{if("function"===typeof t||"object"===typeof t&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={..."object"!==typeof t.extension?{type:t.extension}:t.extension,ref:t}}if("object"!==typeof t)throw new Error("Invalid extension type");return"string"===typeof(t={...t}).type&&(t.type=[t.type]),t},r=(t,e)=>{var i;return null!==(i=n(t).priority)&&void 0!==i?i:e},o={_addHandlers:{},_removeHandlers:{},_queue:{},remove(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.map(n).forEach((t=>{t.type.forEach((e=>{var i,s;return null===(i=(s=this._removeHandlers)[e])||void 0===i?void 0:i.call(s,t)}))})),this},add(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.map(n).forEach((t=>{t.type.forEach((e=>{const i=this._addHandlers,s=this._queue;var n,r;i[e]?null===(n=i[e])||void 0===n||n.call(i,t):(s[e]=s[e]||[],null===(r=s[e])||void 0===r||r.push(t))}))})),this},handle(t,e,i){const s=this._addHandlers,n=this._removeHandlers;if(s[t]||n[t])throw new Error("Extension type ".concat(t," already has a handler"));s[t]=e,n[t]=i;const r=this._queue;var o;r[t]&&(null===(o=r[t])||void 0===o||o.forEach((t=>e(t))),delete r[t]);return this},handleByMap(t,e){return this.handle(t,(t=>{t.name&&(e[t.name]=t.ref)}),(t=>{t.name&&delete e[t.name]}))},handleByNamedList(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return this.handle(t,(t=>{e.findIndex((e=>e.name===t.name))>=0||(e.push({name:t.name,value:t.ref}),e.sort(((t,e)=>r(e.value,i)-r(t.value,i))))}),(t=>{const i=e.findIndex((e=>e.name===t.name));-1!==i&&e.splice(i,1)}))},handleByList(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return this.handle(t,(t=>{e.includes(t.ref)||(e.push(t.ref),e.sort(((t,e)=>r(e,i)-r(t,i))))}),(t=>{const i=e.indexOf(t.ref);-1!==i&&e.splice(i,1)}))}}},2290:(t,e,i)=>{"use strict";i.d(e,{a:()=>s});class s{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}},3596:(t,e,i)=>{"use strict";i.d(e,{u:()=>r});var s=i(6887),n=i(1960);class r{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this.array=null,this.a=t,this.b=e,this.c=i,this.d=s,this.tx=n,this.ty=r}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,s,n,r){return this.a=t,this.b=e,this.c=i,this.d=s,this.tx=n,this.ty=r,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new n.b;const i=t.x,s=t.y;return e.x=this.a*i+this.c*s+this.tx,e.y=this.b*i+this.d*s+this.ty,e}applyInverse(t,e){e=e||new n.b;const i=this.a,s=this.b,r=this.c,o=this.d,a=this.tx,h=this.ty,l=1/(i*o+r*-s),c=t.x,d=t.y;return e.x=o*l*c+-r*l*d+(h*r-a*o)*l,e.y=i*l*d+-s*l*c+(-h*i+a*s)*l,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.a,n=this.c,r=this.tx;return this.a=s*e-this.b*i,this.b=s*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=r*e-this.ty*i,this.ty=r*i+this.ty*e,this}append(t){const e=this.a,i=this.b,s=this.c,n=this.d;return this.a=t.a*e+t.b*s,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*s,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*s+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this}appendFrom(t,e){const i=t.a,s=t.b,n=t.c,r=t.d,o=t.tx,a=t.ty,h=e.a,l=e.b,c=e.c,d=e.d;return this.a=i*h+s*c,this.b=i*l+s*d,this.c=n*h+r*c,this.d=n*l+r*d,this.tx=o*h+a*c+e.tx,this.ty=o*l+a*d+e.ty,this}setTransform(t,e,i,s,n,r,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*r,this.d=Math.cos(o-a)*r,this.tx=t-(i*this.a+s*this.c),this.ty=e-(i*this.b+s*this.d),this}prepend(t){const e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){const e=this.a,i=this.c;this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,n=this.c,r=this.d,o=t.pivot,a=-Math.atan2(-n,r),h=Math.atan2(i,e),l=Math.abs(a+h);return l<1e-5||Math.abs(s.TO-l)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx+(o.x*e+o.y*n),t.position.y=this.ty+(o.x*i+o.y*r),t}invert(){const t=this.a,e=this.b,i=this.c,s=this.d,n=this.tx,r=t*s-e*i;return this.a=s/r,this.b=-e/r,this.c=-i/r,this.d=t/r,this.tx=(i*this.ty-s*n)/r,this.ty=-(t*this.ty-e*n)/r,this}isIdentity(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.tx&&0===this.ty}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return"[pixi.js:Matrix a=".concat(this.a," b=").concat(this.b," c=").concat(this.c," d=").concat(this.d," tx=").concat(this.tx," ty=").concat(this.ty,"]")}static get IDENTITY(){return a.identity()}static get shared(){return o.identity()}}const o=new r,a=new r},6887:(t,e,i)=>{"use strict";i.d(e,{TO:()=>s,Td:()=>r,bO:()=>n});const s=2*Math.PI,n=180/Math.PI,r=Math.PI/180},8186:(t,e,i)=>{"use strict";function s(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function n(t){return!(t&t-1)&&!!t}i.d(e,{U5:()=>s,f3:()=>n})},4973:(t,e,i)=>{"use strict";i.d(e,{o:()=>s});class s{constructor(t,e,i){this._x=e||0,this._y=i||0,this._observer=t}clone(t){return new s(null!==t&&void 0!==t?t:this._observer,this._x,this._y)}set(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this._x===t&&this._y===e||(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return"[pixi.js/math:ObservablePoint x=".concat(0," y=",0," scope=",this._observer,"]")}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}},1960:(t,e,i)=>{"use strict";i.d(e,{b:()=>s});class s{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new s(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this.x=t,this.y=e,this}toString(){return"[pixi.js/math:Point x=".concat(this.x," y=").concat(this.y,"]")}static get shared(){return n.x=0,n.y=0,n}}const n=new s},4307:(t,e,i)=>{"use strict";i.d(e,{M:()=>r});var s=i(1960);const n=[new s.b,new s.b,new s.b,new s.b];class r{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(s)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new r(0,0,0,0)}clone(){return new r(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)}strokeContains(t,e,i){const{width:s,height:n}=this;if(s<=0||n<=0)return!1;const r=this.x,o=this.y;return t>=r-i/2&&t<=r+s+i/2&&e>=o-i/2&&e<=o+n+i/2&&!(t>r+i/2&&t<r+s-i/2&&e>o+i/2&&e<o+n-i/2)}intersects(t,e){if(!e){const e=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=e)return!1;const i=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>i}const i=this.left,s=this.right,r=this.top,o=this.bottom;if(s<=i||o<=r)return!1;const a=n[0].set(t.left,t.top),h=n[1].set(t.left,t.bottom),l=n[2].set(t.right,t.top),c=n[3].set(t.right,t.bottom);if(l.x<=a.x||h.y<=a.y)return!1;const d=Math.sign(e.a*e.d-e.b*e.c);if(0===d)return!1;if(e.apply(a,a),e.apply(h,h),e.apply(l,l),e.apply(c,c),Math.max(a.x,h.x,l.x,c.x)<=i||Math.min(a.x,h.x,l.x,c.x)>=s||Math.max(a.y,h.y,l.y,c.y)<=r||Math.min(a.y,h.y,l.y,c.y)>=o)return!1;const u=d*(h.y-a.y),p=d*(a.x-h.x),f=u*i+p*r,_=u*s+p*r,g=u*i+p*o,m=u*s+p*o;if(Math.max(f,_,g,m)<=u*a.x+p*a.y||Math.min(f,_,g,m)>=u*c.x+p*c.y)return!1;const x=d*(a.y-l.y),y=d*(l.x-a.x),v=x*i+y*r,b=x*s+y*r,w=x*i+y*o,S=x*s+y*o;return!(Math.max(v,b,w,S)<=x*a.x+y*a.y||Math.min(v,b,w,S)>=x*c.x+y*c.y)}pad(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),s=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=s,this.height=Math.max(n-s,0),this}ceil(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001;const i=Math.ceil((this.x+this.width-e)*t)/t,s=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=s-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),s=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=s,this.height=n-s,this}getBounds(t){return(t=t||new r).copyFrom(this),t}toString(){return"[pixi.js/math:Rectangle x=".concat(this.x," y=").concat(this.y," width=").concat(this.width," height=").concat(this.height,"]")}}},6667:(t,e,i)=>{"use strict";i.d(e,{J:()=>h});var s=i(5202),n=i(6333),r=i(9801);const o=new Float32Array(1),a=new Uint32Array(1);class h extends r.V{constructor(){const t=new s.h({data:o,label:"attribute-batch-buffer",usage:n.S.VERTEX|n.S.COPY_DST,shrinkToFit:!1});super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:24,offset:0,location:1},aUV:{buffer:t,format:"float32x2",stride:24,offset:8,location:3},aColor:{buffer:t,format:"unorm8x4",stride:24,offset:16,location:0},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:24,offset:20,location:2}},indexBuffer:new s.h({data:a,label:"index-batch-buffer",usage:n.S.INDEX|n.S.COPY_DST,shrinkToFit:!1})})}}},9530:(t,e,i)=>{"use strict";i.d(e,{w:()=>a});var s=i(2590),n=i(6675),r=i(2606);const o={};function a(t,e){let i=0;for(let s=0;s<e;s++)i=31*i+t[s].uid>>>0;return o[i]||function(t,e){const i={};let a=0;h||(h=(0,r.c)());for(let s=0;s<h;s++){const e=s<t.length?t[s]:n.g.EMPTY.source;i[a++]=e.source,i[a++]=e.style}const l=new s.T(i);return o[e]=l,l}(t,i)}let h=0},4496:(t,e,i)=>{"use strict";i.d(e,{i:()=>p});var s=i(2026);class n{constructor(t){"number"===typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this["".concat(t,"View")]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error("".concat(t," isn't a valid view type"))}}}var r=i(7799),o=i(7358);function a(t,e){return"no-premultiply-alpha"===e.alphaMode&&o.Q[t]||t}var h=i(2606);class l{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}class c{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.blendMode="normal",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}let d=0;const u=class t{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.uid=(0,s.L)("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._vertexSize=6,this._elements=[],this._batchPool=[],this._batchPoolIndex=0,this._textureBatchPool=[],this._textureBatchPoolIndex=0,e={...t.defaultOptions,...e};const{vertexSize:i,indexSize:r}=e;this.attributeBuffer=new n(i*this._vertexSize*4),this.indexBuffer=new Uint16Array(r),this._maxTextures=(0,h.c)()}begin(){this.batchIndex=0,this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0,this._batchPoolIndex=0,this._textureBatchPoolIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t.indexStart=this.indexSize,t.location=this.attributeSize,t.batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.vertexSize*this._vertexSize}checkAndUpdateTexture(t,e){const i=t.batch.textures.ids[e._source.uid];return!(!i&&0!==i)&&(t.textureId=i,t.texture=e,!0)}updateElement(t){this.dirty=!0,t.packAttributes(this.attributeBuffer.float32View,this.attributeBuffer.uint32View,t.location,t.textureId)}break(t){const e=this._elements;let i=this._textureBatchPool[this._textureBatchPoolIndex++]||new l;if(i.clear(),!e[this.elementStart])return;const s=e[this.elementStart];let n=a(s.blendMode,s.texture._source);4*this.attributeSize>this.attributeBuffer.size&&this._resizeAttributeBuffer(4*this.attributeSize),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const r=this.attributeBuffer.float32View,o=this.attributeBuffer.uint32View,h=this.indexBuffer;let u=this._batchIndexSize,p=this._batchIndexStart,f="startBatch",_=this._batchPool[this._batchPoolIndex++]||new c;const g=this._maxTextures;for(let m=this.elementStart;m<this.elementSize;++m){const s=e[m];e[m]=null;const x=s.texture._source,y=a(s.blendMode,x),v=n!==y;x._batchTick!==d||v?(x._batchTick=d,(i.count>=g||v)&&(this._finishBatch(_,p,u-p,i,n,t,f),f="renderBatch",p=u,n=y,i=this._textureBatchPool[this._textureBatchPoolIndex++]||new l,i.clear(),_=this._batchPool[this._batchPoolIndex++]||new c,++d),s.textureId=x._textureBindLocation=i.count,i.ids[x.uid]=i.count,i.textures[i.count++]=x,s.batch=_,u+=s.indexSize,s.packAttributes(r,o,s.location,s.textureId),s.packIndex(h,s.indexStart,s.location/this._vertexSize)):(s.textureId=x._textureBindLocation,u+=s.indexSize,s.packAttributes(r,o,s.location,s.textureId),s.packIndex(h,s.indexStart,s.location/this._vertexSize),s.batch=_)}i.count>0&&(this._finishBatch(_,p,u-p,i,n,t,f),p=u,++d),this.elementStart=this.elementSize,this._batchIndexStart=p,this._batchIndexSize=u}_finishBatch(t,e,i,s,n,r,o){t.gpuBindGroup=null,t.action=o,t.batcher=this,t.textures=s,t.blendMode=n,t.start=e,t.size=i,++d,r.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){4*t<=this.attributeBuffer.size||this._resizeAttributeBuffer(4*t)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,2*this.attributeBuffer.size),i=new n(e);(0,r.W)(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(t){const e=this.indexBuffer;let i=Math.max(t,1.5*e.length);i+=i%2;const s=i>65535?new Uint32Array(i):new Uint16Array(i);if(s.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let n=0;n<e.length;n++)s[n]=e[n];else(0,r.W)(e.buffer,s.buffer);this.indexBuffer=s}destroy(){for(let t=0;t<this.batches.length;t++)this.batches[t].destroy();this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t].batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};u.defaultOptions={vertexSize:4,indexSize:6};let p=u},3993:(t,e,i)=>{"use strict";var s=i(1478),n=i(4853),r=i(6373),o=i(5076);const a=new r.c;function h(t,e,i){const s=a;t.measurable=!0,(0,o.fB)(t,i,s),e.addBoundsMask(s),t.measurable=!1}var l=i(1232),c=i(8263),d=i(279);function u(t,e,i){const s=c.o.get();t.measurable=!0;const n=c.u.get().identity(),r=p(t,i,n);(0,l.n)(t,s,r),t.measurable=!1,e.addBoundsMask(s),c.u.return(n),c.o.return(s)}function p(t,e,i){return t?(t!==e&&(p(t.parent,e,i),t.updateLocalTransform(),i.append(t.localTransform)),i):((0,d.R)("Mask bounds, renderable is not inside the root container"),i)}class f{constructor(t){this.priority=0,this.pipe="alphaMask",null!==t&&void 0!==t&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof n.k),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){h(this.mask,t,e)}addLocalBounds(t,e){u(this.mask,t,e)}containsPoint(t,e){return e(this.mask,t)}destroy(){this.reset()}static test(t){return t instanceof n.k}}f.extension=s.Ag.MaskEffect;class _{constructor(t){this.priority=0,this.pipe="colorMask",null!==t&&void 0!==t&&t.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return"number"===typeof t}}_.extension=s.Ag.MaskEffect;var g=i(4028);class m{constructor(t){this.priority=0,this.pipe="stencilMask",null!==t&&void 0!==t&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){h(this.mask,t,e)}addLocalBounds(t,e){u(this.mask,t,e)}containsPoint(t,e){return e(this.mask,t)}destroy(){this.reset()}static test(t){return t instanceof g.mc}}m.extension=s.Ag.MaskEffect;var x=i(5852),y=i(5937),v=i(3682),b=i(5368);i(9258);s.XO.add(f,_,m,b.$,v.b,y.q,x.P)},7422:(t,e,i)=>{"use strict";i.d(e,{u:()=>s});var s=(t=>(t[t.NONE=0]="NONE",t[t.COLOR=16384]="COLOR",t[t.STENCIL=1024]="STENCIL",t[t.DEPTH=256]="DEPTH",t[t.COLOR_DEPTH=16640]="COLOR_DEPTH",t[t.COLOR_STENCIL=17408]="COLOR_STENCIL",t[t.DEPTH_STENCIL=1280]="DEPTH_STENCIL",t[t.ALL=17664]="ALL",t))(s||{})},87:(t,e,i)=>{"use strict";i.d(e,{W:()=>r});var s=i(3144);let n;function r(){var t;if(!n||null!==(t=n)&&void 0!==t&&t.isContextLost()){const t=s.e.get().createCanvas();n=t.getContext("webgl",{})}return n}},2590:(t,e,i)=>{"use strict";i.d(e,{T:()=>s});class s{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const i in t){const s=t[i];this.setResource(s,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const i in this.resources)t[e++]=this.resources[i]._resourceId;this._key=t.join("|")}setResource(t,e){var i;const s=this.resources[e];if(t!==s){var n;if(s)null===(n=t.off)||void 0===n||n.call(t,"change",this.onResourceChange,this);null===(i=t.on)||void 0===i||i.call(t,"change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0}}getResource(t){return this.resources[t]}_touch(t){const e=this.resources;for(const i in e)e[i]._touched=t}destroy(){const t=this.resources;for(const i in t){var e;const s=t[i];null===(e=s.off)||void 0===e||e.call(s,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const i in e)e[i]===t&&(e[i]=null)}else this._updateKey()}}},5202:(t,e,i)=>{"use strict";i.d(e,{h:()=>o});var s=i(8379),n=i(2026),r=i(6333);class o extends s.A{constructor(t){var e,i;let{data:s,size:r}=t;const{usage:o,label:a,shrinkToFit:h}=t;super(),this.uid=(0,n.L)("buffer"),this._resourceType="buffer",this._resourceId=(0,n.L)("resource"),this._touched=0,this._updateID=1,this.shrinkToFit=!0,this.destroyed=!1,s instanceof Array&&(s=new Float32Array(s)),this._data=s,r=null!==(e=r)&&void 0!==e?e:null===(i=s)||void 0===i?void 0:i.byteLength;const l=!!s;this.descriptor={size:r,usage:o,mappedAtCreation:l,label:a},this.shrinkToFit=null===h||void 0===h||h}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get static(){return!!(this.descriptor.usage&r.S.STATIC)}set static(t){t?this.descriptor.usage|=r.S.STATIC:this.descriptor.usage&=~r.S.STATIC}setDataWithSize(t,e,i){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t)return void(i&&this.emit("update",this));const s=this._data;this._data=t,s.length===t.length||!this.shrinkToFit&&t.byteLength<s.byteLength?i&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=(0,n.L)("resource"),this.emit("change",this))}update(t){this._updateSize=null!==t&&void 0!==t?t:this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}},6333:(t,e,i)=>{"use strict";i.d(e,{S:()=>s});var s=(t=>(t[t.MAP_READ=1]="MAP_READ",t[t.MAP_WRITE=2]="MAP_WRITE",t[t.COPY_SRC=4]="COPY_SRC",t[t.COPY_DST=8]="COPY_DST",t[t.INDEX=16]="INDEX",t[t.VERTEX=32]="VERTEX",t[t.UNIFORM=64]="UNIFORM",t[t.STORAGE=128]="STORAGE",t[t.INDIRECT=256]="INDIRECT",t[t.QUERY_RESOLVE=512]="QUERY_RESOLVE",t[t.STATIC=1024]="STATIC",t))(s||{})},7799:(t,e,i)=>{"use strict";function s(t,e){const i=t.byteLength/8|0,s=new Float64Array(t,0,i);new Float64Array(e,0,i).set(s);const n=t.byteLength-8*i;if(n>0){const s=new Uint8Array(t,8*i,n);new Uint8Array(e,8*i,n).set(s)}}i.d(e,{W:()=>s})},9801:(t,e,i)=>{"use strict";i.d(e,{V:()=>c});var s=i(8379),n=i(6373),r=i(2026),o=i(5202),a=i(6333);function h(t,e){if(!(t instanceof o.h)){let i=e?a.S.INDEX:a.S.VERTEX;t instanceof Array&&(e?(t=new Uint32Array(t),i=a.S.INDEX|a.S.COPY_DST):(t=new Float32Array(t),i=a.S.VERTEX|a.S.COPY_DST)),t=new o.h({data:t,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:i})}return t}function l(t){return(t instanceof o.h||Array.isArray(t)||t.BYTES_PER_ELEMENT)&&(t={buffer:t}),t.buffer=h(t.buffer,!1),t}class c extends s.A{constructor(t){const{attributes:e,indexBuffer:i,topology:s}=t;super(),this.uid=(0,r.L)("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new n.c,this._boundsDirty=!0,this.attributes=e,this.buffers=[],this.instanceCount=t.instanceCount||1;for(const n in e){const t=e[n]=l(e[n]);-1===this.buffers.indexOf(t.buffer)&&(this.buffers.push(t.buffer),t.buffer.on("update",this.onBufferUpdate,this),t.buffer.on("change",this.onBufferUpdate,this))}i&&(this.indexBuffer=h(i,!0),this.buffers.push(this.indexBuffer)),this.topology=s||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,function(t,e,i){const s=t.getAttribute(e);if(!s)return i.minX=0,i.minY=0,i.maxX=0,i.maxY=0,i;const n=s.buffer.data;let r=1/0,o=1/0,a=-1/0,h=-1/0;const l=n.BYTES_PER_ELEMENT,c=(s.offset||0)/l,d=(s.stride||8)/l;for(let u=c;u<n.length;u+=d){const t=n[u],e=n[u+1];t>a&&(a=t),e>h&&(h=e),t<r&&(r=t),e<o&&(o=e)}return i.minX=r,i.minY=o,i.maxX=a,i.maxY=h,i}(this,"aPosition",this._bounds)):this._bounds}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach((t=>t.destroy())),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}},347:(t,e,i)=>{"use strict";i.d(e,{L:()=>n});var s=i(2026);class n{constructor(){this.uid=(0,s.L)("instructionSet"),this.instructions=[],this.instructionSize=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}},7358:(t,e,i)=>{"use strict";i.d(e,{K:()=>n,Q:()=>s});const s={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var n=(t=>(t[t.DISABLED=0]="DISABLED",t[t.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",t[t.MASK_ACTIVE=2]="MASK_ACTIVE",t[t.RENDERING_MASK_REMOVE=3]="RENDERING_MASK_REMOVE",t[t.NONE=4]="NONE",t))(n||{})},5853:(t,e,i)=>{"use strict";i.d(e,{k:()=>_});var s=i(5242),n=i(1478);const r=[];async function o(t){if(!t)for(let e=0;e<r.length;e++){const t=r[e];if(t.value.test())return void await t.value.load()}}n.XO.handleByNamedList(n.Ag.Environment,r);var a=i(4028),h=i(4668),l=i(4811),c=i(7422),d=i(7574),u=i(8379);const p=["init","destroy","contextChange","resolutionChange","reset","renderEnd","renderStart","render","update","postrender","prerender"],f=class t extends u.A{constructor(t){var e;super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const i=[...p,...null!==(e=this.config.runners)&&void 0!==e?e:[]];this._addRunners(...i),this._unsafeEvalCheck()}async init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=!0===e.skipExtensionImports||!1===e.manageImports;await o(i),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const t in this._systemsHash){e={...this._systemsHash[t].constructor.defaultOptions,...e}}e={...t.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let t=0;t<this.runners.init.items.length;t++)await this.runners.init.items[t].init(e);this._initOptions=e}render(t,e){let i=t;if(i instanceof a.mc&&(i={container:i},e&&((0,l.t)(l.l,"passing a second argument is deprecated, please use render options instead"),i.target=e.renderTexture)),i.target||(i.target=this.view.renderTarget),i.target===this.view.renderTarget&&(this._lastObjectRendered=i.container,i.clearColor=this.background.colorRgba),i.clearColor){const t=Array.isArray(i.clearColor)&&4===i.clearColor.length;i.clearColor=t?i.clearColor:s.Q.shared.setValue(i.clearColor).toArray()}i.transform||(i.container.updateLocalTransform(),i.transform=i.container.localTransform),this.runners.prerender.emit(i),this.runners.renderStart.emit(i),this.runners.render.emit(i),this.runners.renderEnd.emit(i),this.runners.postrender.emit(i)}resize(t,e,i){this.view.resize(t,e,i),this.emit("resize",this.view.screen.width,this.view.screen.height)}clear(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.target||(e.target=this.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),null!==(t=e.clear)&&void 0!==t||(e.clear=c.u.ALL);const{clear:i,clearColor:n,target:r}=e;s.Q.shared.setValue(null!==n&&void 0!==n?n:this.background.colorRgba),this.renderTarget.clear(r,i,s.Q.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach((t=>{this.runners[t]=new d.C(t)}))}_addSystems(t){let e;for(e in t){const i=t[e];this._addSystem(i.value,i.name)}}_addSystem(t,e){const i=new t(this);if(this[e])throw new Error('Whoops! The name "'.concat(e,'" is already in use'));this[e]=i,this._systemsHash[e]=i;for(const s in this.runners)this.runners[s].add(i);return this}_addPipes(t,e){const i=e.reduce(((t,e)=>(t[e.name]=e.value,t)),{});t.forEach((t=>{const e=t.value,s=t.name,n=i[s];this.renderPipes[s]=new e(this,n?new n:null)}))}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach((t=>{t.destroy()})),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!(0,h.f)())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}};f.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let _=f},7574:(t,e,i)=>{"use strict";i.d(e,{C:()=>s});class s{constructor(t){this.items=[],this._name=t}emit(t,e,i,s,n,r,o,a){const{name:h,items:l}=this;for(let c=0,d=l.length;c<d;c++)l[c][h](t,e,i,s,n,r,o,a);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return-1!==e&&this.items.splice(e,1),this}contains(t){return-1!==this.items.indexOf(t)}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}},9445:(t,e,i)=>{"use strict";i.d(e,{N:()=>r});var s=i(3144),n=i(8186);const r=new class{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,e){const i=s.e.get().createCanvas();i.width=t,i.height=e;const n=i.getContext("2d");return{canvas:i,context:n}}getOptimalCanvasAndContext(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t=Math.ceil(t*i-1e-6),e=Math.ceil(e*i-1e-6);const s=((t=(0,n.U5)(t))<<17)+((e=(0,n.U5)(e))<<1);this._canvasPool[s]||(this._canvasPool[s]=[]);let r=this._canvasPool[s].pop();return r||(r=this._createCanvasAndContext(t,e)),r}returnCanvasAndContext(t){const{width:e,height:i}=t.canvas,s=(e<<17)+(i<<1);this._canvasPool[s].push(t)}clear(){this._canvasPool={}}}},6675:(t,e,i)=>{"use strict";i.d(e,{g:()=>v});var s=i(8379),n=i(3596);const r=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],o=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],a=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],h=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],l=[],c=[],d=Math.sign;!function(){for(let t=0;t<16;t++){const e=[];l.push(e);for(let i=0;i<16;i++){const s=d(r[t]*r[i]+a[t]*o[i]),n=d(o[t]*r[i]+h[t]*o[i]),l=d(r[t]*a[i]+a[t]*h[i]),c=d(o[t]*a[i]+h[t]*h[i]);for(let t=0;t<16;t++)if(r[t]===s&&o[t]===n&&a[t]===l&&h[t]===c){e.push(t);break}}}for(let t=0;t<16;t++){const e=new n.u;e.set(r[t],o[t],a[t],h[t],0,0),c.push(e)}}();const u={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>r[t],uY:t=>o[t],vX:t=>a[t],vY:t=>h[t],inv:t=>8&t?15&t:7&-t,add:(t,e)=>l[t][e],sub:(t,e)=>l[t][u.inv(e)],rotate180:t=>4^t,isVertical:t=>2===(3&t),byDirection:(t,e)=>2*Math.abs(t)<=Math.abs(e)?e>=0?u.S:u.N:2*Math.abs(e)<=Math.abs(t)?t>0?u.E:u.W:e>0?t>0?u.SE:u.SW:t>0?u.NE:u.NW,matrixAppendRotationInv:function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const n=c[u.inv(e)];n.tx=i,n.ty=s,t.append(n)}};var p=i(4307),f=i(2026),_=i(4811);const g=()=>{};var m=i(5852),x=i(2497),y=i(4055);class v extends s.A{constructor(){var t;let{source:e,label:i,frame:s,orig:n,trim:r,defaultAnchor:o,defaultBorders:a,rotate:h,dynamic:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(super(),this.uid=(0,f.L)("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new p.M,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=i,this.source=null!==(t=null===e||void 0===e?void 0:e.source)&&void 0!==t?t:new x.v,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:t,height:e}=this._source;this.frame.width=t,this.frame.height=e}this.orig=n||this.frame,this.trim=r,this.rotate=null!==h&&void 0!==h?h:0,this.defaultAnchor=o,this.defaultBorders=a,this.destroyed=!1,this.dynamic=l||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new y.N(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:i,height:s}=this._source,n=e.x/i,r=e.y/s,o=e.width/i,a=e.height/s;let h=this.rotate;if(h){const e=o/2,i=a/2,s=n+e,l=r+i;h=u.add(h,u.NW),t.x0=s+e*u.uX(h),t.y0=l+i*u.uY(h),h=u.add(h,2),t.x1=s+e*u.uX(h),t.y1=l+i*u.uY(h),h=u.add(h,2),t.x2=s+e*u.uX(h),t.y2=l+i*u.uY(h),h=u.add(h,2),t.x3=s+e*u.uX(h),t.y3=l+i*u.uY(h)}else t.x0=n,t.y0=r,t.x1=n+o,t.y1=r,t.x2=n+o,t.y2=r+a,t.x3=n,t.y3=r+a}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return(0,_.t)(_.l,"Texture.baseTexture is now Texture.source"),this._source}}v.EMPTY=new v({label:"EMPTY",source:new x.v({label:"EMPTY"})}),v.EMPTY.destroy=g,v.WHITE=new v({source:new m.P({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"}),v.WHITE.destroy=g},4055:(t,e,i)=>{"use strict";i.d(e,{N:()=>r});var s=i(3596);const n=new s.u;class r{constructor(t,e){this.mapCoord=new s.u,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin="undefined"===typeof e?t.width<10?0:.5:e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){var e;this.texture!==t&&(null===(e=this._texture)||void 0===e||e.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){void 0===e&&(e=t);const i=this.mapCoord;for(let s=0;s<t.length;s+=2){const n=t[s],r=t[s+1];e[s]=n*i.a+r*i.c+i.tx,e[s+1]=n*i.b+r*i.d+i.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const i=t.orig,s=t.trim;s&&(n.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(n));const r=t.source,o=this.uClampFrame,a=this.clampMargin/r._resolution,h=this.clampOffset;return o[0]=(t.frame.x+a+h)/r.width,o[1]=(t.frame.y+a+h)/r.height,o[2]=(t.frame.x+t.frame.width-a+h)/r.width,o[3]=(t.frame.y+t.frame.height-a+h)/r.height,this.uClampOffset[0]=h/r.pixelWidth,this.uClampOffset[1]=h/r.pixelHeight,this.isSimple=t.frame.width===r.width&&t.frame.height===r.height&&0===t.rotate,!0}}},5852:(t,e,i)=>{"use strict";i.d(e,{P:()=>r});var s=i(1478),n=i(2497);class r extends n.v{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let i=t.format;i||(i=e instanceof Float32Array?"rgba32float":e instanceof Int32Array||e instanceof Uint32Array?"rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?"rgba16uint":(Int8Array,"bgra8unorm")),super({...t,resource:e,format:i}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}r.extension=s.Ag.TextureSource},5937:(t,e,i)=>{"use strict";i.d(e,{q:()=>o});var s=i(3144),n=i(1478),r=i(2497);class o extends r.v{constructor(t){t.resource||(t.resource=s.e.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity;const e=t.resource;this.pixelWidth===e.width&&this.pixelWidth===e.height||this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width="".concat(this.width,"px"),this.resource.style.height="".concat(this.height,"px")),this.resource.width===this.pixelWidth&&this.resource.height===this.pixelHeight||(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.width,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.height,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._resolution;const s=super.resize(t,e,i);return s&&this.resizeCanvas(),s}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}}o.extension=n.Ag.TextureSource},3682:(t,e,i)=>{"use strict";i.d(e,{b:()=>a});var s=i(3144),n=i(1478),r=i(279),o=i(2497);class a extends o.v{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){const e=s.e.get().createCanvas(t.resource.width,t.resource.height);e.getContext("2d").drawImage(t.resource,0,0),t.resource=e,(0,r.R)("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap}}a.extension=n.Ag.TextureSource},2497:(t,e,i)=>{"use strict";i.d(e,{v:()=>d});var s=i(8379),n=i(8186);var r=i(2026),o=i(4811);const a=Object.create(null);const h=class t extends s.A{constructor(){var e,i,s,n,r,o,a;let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,h={...t.defaultOptions,...h},this.addressMode=h.addressMode,this.addressModeU=null!==(e=h.addressModeU)&&void 0!==e?e:this.addressModeU,this.addressModeV=null!==(i=h.addressModeV)&&void 0!==i?i:this.addressModeV,this.addressModeW=null!==(s=h.addressModeW)&&void 0!==s?s:this.addressModeW,this.scaleMode=h.scaleMode,this.magFilter=null!==(n=h.magFilter)&&void 0!==n?n:this.magFilter,this.minFilter=null!==(r=h.minFilter)&&void 0!==r?r:this.minFilter,this.mipmapFilter=null!==(o=h.mipmapFilter)&&void 0!==o?o:this.mipmapFilter,this.lodMinClamp=h.lodMinClamp,this.lodMaxClamp=h.lodMaxClamp,this.compare=h.compare,this.maxAnisotropy=null!==(a=h.maxAnisotropy)&&void 0!==a?a:1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){(0,o.t)(o.l,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t="".concat(this.addressModeU,"-").concat(this.addressModeV,"-").concat(this.addressModeW,"-").concat(this.magFilter,"-").concat(this.minFilter,"-").concat(this.mipmapFilter,"-").concat(this.lodMinClamp,"-").concat(this.lodMaxClamp,"-").concat(this.compare,"-").concat(this._maxAnisotropy);return this._sharedResourceId=function(t){const e=a[t];return void 0===e&&(a[t]=(0,r.L)("resource")),e}(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};h.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let l=h;const c=class t extends s.A{constructor(){var e;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var s,n;(super(),this.options=i,this.uid=(0,r.L)("textureSource"),this._resourceType="textureSource",this._resourceId=(0,r.L)("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,i={...t.defaultOptions,...i},this.label=null!==(e=i.label)&&void 0!==e?e:"",this.resource=i.resource,this.autoGarbageCollect=i.autoGarbageCollect,this._resolution=i.resolution,i.width)?this.pixelWidth=i.width*this._resolution:this.pixelWidth=this.resource&&null!==(s=this.resourceWidth)&&void 0!==s?s:1;i.height?this.pixelHeight=i.height*this._resolution:this.pixelHeight=this.resource&&null!==(n=this.resourceHeight)&&void 0!==n?n:1;this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=i.format,this.dimension=i.dimensions,this.mipLevelCount=i.mipLevelCount,this.autoGenerateMipmaps=i.autoGenerateMipmaps,this.sampleCount=i.sampleCount,this.antialias=i.antialias,this.alphaMode=i.alphaMode,this.style=new l(function(t){const e={};for(const i in t)void 0!==t[i]&&(e[i]=t[i]);return e}(i)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){var e,i;this.style!==t&&(null===(e=this._style)||void 0===e||e.off("change",this._onStyleChange,this),this._style=t,null===(i=this._style)||void 0===i||i.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=(0,r.L)("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,i){i=i||this._resolution,t=t||this.width,e=e||this.height;const s=Math.round(t*i),n=Math.round(e*i);return this.width=s/i,this.height=n/i,this._resolution=i,(this.pixelWidth!==s||this.pixelHeight!==n)&&(this._refreshPOT(),this.pixelWidth=s,this.pixelHeight=n,this.emit("resize",this),this._resourceId=(0,r.L)("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=(0,n.f3)(this.pixelWidth)&&(0,n.f3)(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};c.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let d=c},5368:(t,e,i)=>{"use strict";i.d(e,{$:()=>h});var s=i(1478),n=i(1456),r=i(5813),o=i(2497);const a=class t extends o.v{constructor(e){var i;super(e),this.isReady=!1,this.uploadMethodId="video",e={...t.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this.alphaMode=null!==(i=e.alphaMode)&&void 0!==i?i:"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),!1!==e.autoLoad&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=n.R.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await(0,r.C)(),this._load=new Promise(((i,s)=>{this.isValid?i(this):(this._resolve=i,this._reject=s,void 0!==e.preloadTimeoutMs&&(this._preloadTimeout=setTimeout((()=>{this._onError(new ErrorEvent("Preload exceeded timeout of ".concat(e.preloadTimeoutMs,"ms")))}))),t.load())})),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(n.R.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(n.R.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(n.R.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||globalThis.VideoFrame&&t instanceof VideoFrame}};a.extension=s.Ag.TextureSource,a.defaultOptions={...o.v.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1},a.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let h=a},2606:(t,e,i)=>{"use strict";i.d(e,{c:()=>r});var s=i(87);let n=null;function r(){if(n)return n;const t=(0,s.W)();return n=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),n}},9258:(t,e,i)=>{"use strict";var s=i(8656),n=i(1478),r=i(2497),o=i(6675);const a=[];function h(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=t&&t.resource,i=e?t.resource:t,s=e?t:{resource:t};for(let n=0;n<a.length;n++){const t=a[n];if(t.test(i))return new t(s)}throw new Error("Could not find a source type for resource: ".concat(s.resource))}n.XO.handleByList(n.Ag.TextureSource,a),o.g.from=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"string"===typeof t?s.l.get(t):t instanceof r.v?new o.g({source:t}):function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=t&&t.resource,n=i?t.resource:t,r=i?t:{resource:t};if(!e&&s.l.has(n))return s.l.get(n);const a=new o.g({source:h(r)});return a.on("destroy",(()=>{s.l.has(n)&&s.l.remove(n)})),e||s.l.set(n,a),a}(t,e)}},4028:(t,e,i)=>{"use strict";i.d(e,{mc:()=>O,u:()=>L,ig:()=>F,fR:()=>z});var s=i(8379),n=i(5242);var r=i(3596),o=i(6887),a=i(4973),h=i(2026),l=i(4811),c=i(3772);const d={allowChildren:!0,removeChildren(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;const i=null!==e&&void 0!==e?e:this.children.length,s=i-t,n=[];if(s>0&&s<=i){for(let s=i-1;s>=t;s--){const t=this.children[s];t&&(n.push(t),t.parent=null)}(0,c.d)(this.children,t,i);const e=this.renderGroup||this.parentRenderGroup;e&&e.removeChildren(n);for(let t=0;t<n.length;++t)this.emit("childRemoved",n[t],this,t),n[t].emit("removed",this);return n}if(0===s&&0===this.children.length)return n;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(t){const e=this.getChildAt(t);return this.removeChild(e)},getChildAt(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index (".concat(t,") does not exist."));return this.children[t]},setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error("The index ".concat(e," supplied is out of bounds ").concat(this.children.length));this.getChildIndex(t),this.addChildAt(t,e)},getChildIndex(t){const e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(t,e){this.allowChildren||(0,l.t)(l.l,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:i}=this;if(e<0||e>i.length)throw new Error("".concat(t,"addChildAt: The index ").concat(e," supplied is out of bounds ").concat(i.length));if(t.parent){const i=t.parent.children.indexOf(t);if(t.parent===this&&i===e)return t;-1!==i&&t.parent.children.splice(i,1)}e===i.length?i.push(t):i.splice(e,0,t),t.parent=this,t.didChange=!0,t.didViewUpdate=!1,t._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(t),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",t,this,e),t.emit("added",this),t},swapChildren(t,e){if(t===e)return;const i=this.getChildIndex(t),s=this.getChildIndex(e);this.children[i]=e,this.children[s]=t},removeFromParent(){var t;null===(t=this.parent)||void 0===t||t.removeChild(this)}};var u=i(2290),p=i(1478),f=i(9769);const _=new class{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach((t=>{this.add({test:t.test,maskClass:t})})))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const i=this._tests[e];if(i.test(t))return f.Z.get(i.maskClass,t)}return t}returnMaskEffect(t){f.Z.return(t)}};p.XO.handleByList(p.Ag.MaskEffect,_._effectClasses);const g={_maskEffect:null,_filterEffect:null,effects:[],addEffect(t){if(-1!==this.effects.indexOf(t))return;this.effects.push(t),this.effects.sort(((t,e)=>t.priority-e.priority));const e=this.renderGroup||this.parentRenderGroup;e&&(e.structureDidChange=!0),this._updateIsSimple()},removeEffect(t){const e=this.effects.indexOf(t);-1!==e&&(this.effects.splice(e,1),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateIsSimple())},set mask(t){const e=this._maskEffect;(null===e||void 0===e?void 0:e.mask)!==t&&(e&&(this.removeEffect(e),_.returnMaskEffect(e),this._maskEffect=null),null!==t&&void 0!==t&&(this._maskEffect=_.getMaskEffect(t),this.addEffect(this._maskEffect)))},get mask(){var t;return null===(t=this._maskEffect)||void 0===t?void 0:t.mask},set filters(t){var e,i;!Array.isArray(t)&&t&&(t=[t]);const s=this._filterEffect||(this._filterEffect=new u.a),n=(null===(e=t)||void 0===e?void 0:e.length)>0,r=n!==(null===(i=s.filters)||void 0===i?void 0:i.length)>0;var o;(t=Array.isArray(t)?t.slice(0):t,s.filters=Object.freeze(t),r)&&(n?this.addEffect(s):(this.removeEffect(s),s.filters=null!==(o=t)&&void 0!==o?o:null))},get filters(){var t;return null===(t=this._filterEffect)||void 0===t?void 0:t.filters},set filterArea(t){this._filterEffect||(this._filterEffect=new u.a),this._filterEffect.filterArea=t},get filterArea(){var t;return null===(t=this._filterEffect)||void 0===t?void 0:t.filterArea}},m={label:null,get name(){return(0,l.t)(l.l,"Container.name property has been removed, use Container.label instead"),this.label},set name(t){(0,l.t)(l.l,"Container.name property has been removed, use Container.label instead"),this.label=t},getChildByName(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getChildByLabel(t,e)},getChildByLabel(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.children;for(let s=0;s<i.length;s++){const e=i[s];if(e.label===t||t instanceof RegExp&&t.test(e.label))return e}if(e)for(let s=0;s<i.length;s++){const e=i[s].getChildByLabel(t,!0);if(e)return e}return null},getChildrenByLabel(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const s=this.children;for(let n=0;n<s.length;n++){const e=s[n];(e.label===t||t instanceof RegExp&&t.test(e.label))&&i.push(e)}if(e)for(let n=0;n<s.length;n++)s[n].getChildrenByLabel(t,!0,i);return i}};var x=i(6373),y=i(5076),v=i(1232);function b(t,e){const i=t.children;for(let s=0;s<i.length;s++){const t=i[s],n=(255&t.uid)<<24|16777215&t._didChangeId;e.data[e.index]!==n&&(e.data[e.index]=n,e.didChange=!0),e.index++,t.children.length&&b(t,e)}return e.didChange}const w=new r.u,S={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(t,e){const i=Math.sign(this.scale.x)||1;this.scale.x=0!==e?t/e*i:i},_setHeight(t,e){const i=Math.sign(this.scale.y)||1;this.scale.y=0!==e?t/e*i:i},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new x.c});const t=this._localBoundsCacheData;return t.index=1,t.didChange=!1,t.data[0]!==this._didChangeId>>12&&(t.didChange=!0,t.data[0]=this._didChangeId>>12),b(this,t),t.didChange&&(0,v.n)(this,t.localBounds,w),t.localBounds},getBounds(t,e){return(0,y.fB)(this,t,e||new x.c)}},A={_onRender:null,set onRender(t){const e=this.renderGroup||this.parentRenderGroup;if(!t)return this._onRender&&(null===e||void 0===e||e.removeOnRender(this)),void(this._onRender=null);this._onRender||null===e||void 0===e||e.addOnRender(this),this._onRender=t},get onRender(){return this._onRender}},C={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(T))}};function T(t,e){return t._zIndex-e._zIndex}var P=i(1960);const M={getGlobalPosition(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new P.b,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this._position,t,e):(t.x=this._position.x,t.y=this._position.y),t},toGlobal(t,e){if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])){this.updateLocalTransform();const i=(0,y.Ek)(this,new r.u);return i.append(this.localTransform),i.apply(t,e)}return this.worldTransform.apply(t,e)},toLocal(t,e,i,s){if(e&&(t=e.toGlobal(t,i,s)),!s){this.updateLocalTransform();const e=(0,y.Ek)(this,new r.u);return e.append(this.localTransform),e.applyInverse(t,i)}return this.worldTransform.applyInverse(t,i)}};var k=i(347);class B{constructor(t){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new r.u,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new k.L,this._onRenderContainers=[],this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const e=t.children;for(let i=0;i<e.length;i++)this.addChild(e[i])}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup)return void this.addRenderGroupChild(t.renderGroup);t._onRender&&this.addOnRender(t);const e=t.children;for(let i=0;i<e.length;i++)this.addChild(e[i])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup)return void this._removeRenderGroupChild(t.renderGroup);const e=t.children;for(let i=0;i<e.length;i++)this.removeChild(e[i])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(t.didViewUpdate=!1,this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t))}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return 7===this.root.localDisplayStatus&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender()}destroy(){this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=this.root.children;for(let i=0;i<e.length;i++)this._getChildren(e[i],t);return t}_getChildren(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.push(t),t.renderGroup)return e;const i=t.children;for(let s=0;s<i.length;s++)this._getChildren(i[s],e);return e}}const R=new a.o(null),I=new a.o(null),E=new a.o(null,1,1),F=1,L=2,z=4;class O extends s.A{constructor(){var t,e;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.uid=(0,h.L)("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new r.u,this.relativeGroupTransform=new r.u,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new a.o(this,0,0),this._scale=E,this._pivot=I,this._skew=R,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didChangeId=0,this._didLocalTransformChangeId=-1,function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(const s in e)i[s]||void 0===e[s]||(t[s]=e[s])}(this,i,{children:!0,parent:!0,effects:!0}),null===(t=i.children)||void 0===t||t.forEach((t=>this.addChild(t))),this.effects=[],null===(e=i.parent)||void 0===e||e.addChild(this)}static mixin(t){Object.defineProperties(O.prototype,Object.getOwnPropertyDescriptors(t))}addChild(){if(this.allowChildren||(0,l.t)(l.l,"addChild: Only Containers will be allowed to add children in v8.0.0"),arguments.length>1){for(let t=0;t<arguments.length;t++)this.addChild(t<0||arguments.length<=t?void 0:arguments[t]);return arguments.length<=0?void 0:arguments[0]}const t=arguments.length<=0?void 0:arguments[0];if(t.parent===this)return this.children.splice(this.children.indexOf(t),1),this.children.push(t),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),t;t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t.didViewUpdate=!1,t._updateFlags=15;const e=this.renderGroup||this.parentRenderGroup;return e&&e.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didChangeId+=4096,0!==t._zIndex&&t.depthOfChildModified(),t}removeChild(){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.removeChild(t<0||arguments.length<=t?void 0:arguments[t]);return arguments.length<=0?void 0:arguments[0]}const t=arguments.length<=0?void 0:arguments[0],e=this.children.indexOf(t);return e>-1&&(this._didChangeId+=4096,this.children.splice(e,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parent=null,this.emit("childRemoved",t,this,e),t.emit("removed",this)),t}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didChangeId++,this.didChange||(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){if(this.renderGroup&&!1===t)throw new Error("[Pixi] cannot undo a render group just yet");t&&this.enableRenderGroup()}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t&&t.removeChild(this),this.renderGroup=new B(this),t&&t.addChild(this),this._updateIsSimple(),this.groupTransform=r.u.IDENTITY}_updateIsSimple(){this.isSimple=!this.renderGroup&&0===this.effects.length}get worldTransform(){return this._worldTransform||(this._worldTransform=new r.u),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*o.bO}set angle(t){this.rotation=t*o.Td}get pivot(){return this._pivot===I&&(this._pivot=new a.o(this,0,0)),this._pivot}set pivot(t){this._pivot===I&&(this._pivot=new a.o(this,0,0)),"number"===typeof t?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===R&&(this._skew=new a.o(this,0,0)),this._skew}set skew(t){this._skew===R&&(this._skew=new a.o(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===E&&(this._scale=new a.o(this,1,1)),this._scale}set scale(t){this._scale===E&&(this._scale=new a.o(this,0,0)),"number"===typeof t?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const i=this.getLocalBounds();let s,n;var r;"object"!==typeof t?(s=t,n=null!==e&&void 0!==e?e:t):(s=t.width,n=null!==(r=t.height)&&void 0!==r?r:t.width);void 0!==s&&this._setWidth(s,i.width),void 0!==n&&this._setHeight(n,i.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set("number"===typeof t.x?t.x:this.position.x,"number"===typeof t.y?t.y:this.position.y),this.scale.set("number"===typeof t.scaleX?t.scaleX||1:this.scale.x,"number"===typeof t.scaleY?t.scaleY||1:this.scale.y),this.rotation="number"===typeof t.rotation?t.rotation:this.rotation,this.skew.set("number"===typeof t.skewX?t.skewX:this.skew.x,"number"===typeof t.skewY?t.skewY:this.skew.y),this.pivot.set("number"===typeof t.pivotX?t.pivotX:this.pivot.x,"number"===typeof t.pivotY?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){if((15&this._didLocalTransformChangeId)===this._didChangeId)return;this._didLocalTransformChangeId=this._didChangeId;const t=this.localTransform,e=this._scale,i=this._pivot,s=this._position,n=e._x,r=e._y,o=i._x,a=i._y;t.a=this._cx*n,t.b=this._sx*n,t.c=this._cy*r,t.d=this._sy*r,t.tx=s._x-(o*t.a+a*t.c),t.ty=s._y-(o*t.b+a*t.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=F,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const e=n.Q.shared.setValue(null!==t&&void 0!==t?t:16777215).toBgrNumber();e!==this.localColor&&(this.localColor=e,this._updateFlags|=F,this._onUpdate())}get tint(){const t=this.localColor;return((255&t)<<16)+(65280&t)+(t>>16&255)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=L,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(2&this.localDisplayStatus)}set visible(t){const e=t?1:0;(2&this.localDisplayStatus)>>1!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=z,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(4&this.localDisplayStatus)}set culled(t){const e=t?1:0;(4&this.localDisplayStatus)>>2!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=z,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(1&this.localDisplayStatus)}set renderable(t){const e=t?1:0;(1&this.localDisplayStatus)!==e&&(this._updateFlags|=z,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return 7===this.localDisplayStatus&&this.groupAlpha>0}destroy(){var t;let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.destroyed)return;this.destroyed=!0;const i=this.removeChildren(0,this.children.length);this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners();if("boolean"===typeof e?e:null===e||void 0===e?void 0:e.children)for(let s=0;s<i.length;++s)i[s].destroy(e);null===(t=this.renderGroup)||void 0===t||t.destroy(),this.renderGroup=null}}O.mixin(d),O.mixin(M),O.mixin(A),O.mixin(S),O.mixin(g),O.mixin(m),O.mixin(C),O.mixin({cullArea:null,cullable:!1,cullableChildren:!0})},6373:(t,e,i)=>{"use strict";i.d(e,{c:()=>o});var s=i(3596),n=i(4307);const r=new s.u;class o{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1/0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1/0;this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=r,this.minX=t,this.minY=e,this.maxX=i,this.maxY=s}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new n.M);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=r,this}set(t,e,i,s){this.minX=t,this.minY=e,this.maxX=i,this.maxY=s}addFrame(t,e,i,s,n){n||(n=this.matrix);const r=n.a,o=n.b,a=n.c,h=n.d,l=n.tx,c=n.ty;let d=this.minX,u=this.minY,p=this.maxX,f=this.maxY,_=r*t+a*e+l,g=o*t+h*e+c;_<d&&(d=_),g<u&&(u=g),_>p&&(p=_),g>f&&(f=g),_=r*i+a*e+l,g=o*i+h*e+c,_<d&&(d=_),g<u&&(u=g),_>p&&(p=_),g>f&&(f=g),_=r*t+a*s+l,g=o*t+h*s+c,_<d&&(d=_),g<u&&(u=g),_>p&&(p=_),g>f&&(f=g),_=r*i+a*s+l,g=o*i+h*s+c,_<d&&(d=_),g<u&&(u=g),_>p&&(p=_),g>f&&(f=g),this.minX=d,this.minY=u,this.maxX=p,this.maxY=f}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,i=this.minY,s=this.maxX,n=this.maxY,{a:r,b:o,c:a,d:h,tx:l,ty:c}=t;let d=r*e+a*i+l,u=o*e+h*i+c;this.minX=d,this.minY=u,this.maxX=d,this.maxY=u,d=r*s+a*i+l,u=o*s+h*i+c,this.minX=d<this.minX?d:this.minX,this.minY=u<this.minY?u:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=u>this.maxY?u:this.maxY,d=r*e+a*n+l,u=o*e+h*n+c,this.minX=d<this.minX?d:this.minX,this.minY=u<this.minY?u:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=u>this.maxY?u:this.maxY,d=r*s+a*n+l,u=o*s+h*n+c,this.minX=d<this.minX?d:this.minX,this.minY=u<this.minY?u:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=u>this.maxY?u:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,i,s){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<i&&(this.minY=i),this.maxY>s&&(this.maxY=s),this}pad(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new o(this.minX,this.minY,this.maxX,this.maxY)}scale(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,i,s){let n=this.minX,r=this.minY,o=this.maxX,a=this.maxY;s||(s=this.matrix);const h=s.a,l=s.b,c=s.c,d=s.d,u=s.tx,p=s.ty;for(let f=e;f<i;f+=2){const e=t[f],i=t[f+1],s=h*e+c*i+u,_=l*e+d*i+p;n=s<n?s:n,r=_<r?_:r,o=s>o?s:o,a=_>a?_:a}this.minX=n,this.minY=r,this.maxX=o,this.maxY=a}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return"[pixi.js:Bounds minX=".concat(this.minX," minY=").concat(this.minY," maxX=").concat(this.maxX," maxY=").concat(this.maxY," width=").concat(this.width," height=").concat(this.height,"]")}}},5076:(t,e,i)=>{"use strict";i.d(e,{Ek:()=>a,fB:()=>r});var s=i(3596),n=i(8263);function r(t,e,i){let r,h;return i.clear(),t.parent?e?r=t.parent.worldTransform:(h=n.u.get().identity(),r=a(t,h)):r=s.u.IDENTITY,o(t,i,r,e),h&&n.u.return(h),i.isValid||i.set(0,0,0,0),i}function o(t,e,i,r){if(!t.visible||!t.measurable)return;let a;r?a=t.worldTransform:(t.updateLocalTransform(),a=n.u.get(),a.appendFrom(t.localTransform,i));const h=e,l=!!t.effects.length;if(l&&(e=n.o.get().clear()),t.boundsArea)e.addRect(t.boundsArea,a);else{t.addBounds&&(e.matrix=a,t.addBounds(e));for(let i=0;i<t.children.length;i++)o(t.children[i],e,a,r)}if(l){for(let i=0;i<t.effects.length;i++){var c,d;null===(c=(d=t.effects[i]).addBounds)||void 0===c||c.call(d,e)}h.addBounds(e,s.u.IDENTITY),n.o.return(e)}r||n.u.return(a)}function a(t,e){const i=t.parent;return i&&(a(i,e),i.updateLocalTransform(),e.append(i.localTransform)),e}},1232:(t,e,i)=>{"use strict";i.d(e,{n:()=>r});var s=i(3596),n=i(8263);function r(t,e,i){return e.clear(),i||(i=s.u.IDENTITY),o(t,e,i,t,!0),e.isValid||e.set(0,0,0,0),e}function o(t,e,i,r,a){let h;if(a)h=n.u.get(),h=i.copyTo(h);else{if(!t.visible||!t.measurable)return;t.updateLocalTransform();const e=t.localTransform;h=n.u.get(),h.appendFrom(e,i)}const l=e,c=!!t.effects.length;if(c&&(e=n.o.get().clear()),t.boundsArea)e.addRect(t.boundsArea,h);else{t.renderPipeId&&(e.matrix=h,t.addBounds(e));const i=t.children;for(let t=0;t<i.length;t++)o(i[t],e,h,r,!1)}if(c){for(let i=0;i<t.effects.length;i++){var d,u;null===(d=(u=t.effects[i]).addLocalBounds)||void 0===d||d.call(u,e,r)}l.addBounds(e,s.u.IDENTITY),n.o.return(e)}n.u.return(h)}},8263:(t,e,i)=>{"use strict";i.d(e,{o:()=>a,u:()=>o});var s=i(3596),n=i(8152),r=i(6373);const o=new n.b(s.u),a=new n.b(r.c)},9141:(t,e,i)=>{"use strict";i.d(e,{G:()=>s});class s{constructor(){this.batcher=null,this.batch=null,this.applyTransform=!0,this.roundPixels=0}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}packIndex(t,e,i){const s=this.geometryData.indices;for(let n=0;n<this.indexSize;n++)t[e++]=s[n+this.indexOffset]+i-this.vertexOffset}packAttributes(t,e,i,s){const n=this.geometryData,r=this.renderable,o=n.vertices,a=n.uvs,h=2*this.vertexOffset,l=2*(this.vertexOffset+this.vertexSize),c=this.color,d=c>>16|65280&c|(255&c)<<16;if(this.applyTransform){const n=(u=d,p=r.groupColor,(16777215!==u&&p?16777215!==p&&u?((u>>16&255)*(p>>16&255)/255<<16)+((u>>8&255)*(p>>8&255)/255<<8)+(255&u)*(255&p)/255:u:p)+(this.alpha*r.groupAlpha*255<<24)),c=r.groupTransform,f=s<<16|65535&this.roundPixels,_=c.a,g=c.b,m=c.c,x=c.d,y=c.tx,v=c.ty;for(let s=h;s<l;s+=2){const r=o[s],h=o[s+1];t[i]=_*r+m*h+y,t[i+1]=g*r+x*h+v,t[i+2]=a[s],t[i+3]=a[s+1],e[i+4]=n,e[i+5]=f,i+=6}}else{const n=d+(255*this.alpha<<24);for(let r=h;r<l;r+=2)t[i]=o[r],t[i+1]=o[r+1],t[i+2]=a[r],t[i+3]=a[r+1],e[i+4]=n,e[i+5]=s<<16,i+=6}var u,p}get vertSize(){return this.vertexSize}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.vertexOffset=this.vertexOffset,t.vertexSize=this.vertexSize,t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData}reset(){this.applyTransform=!0}}},4395:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var s=i(4811),n=i(4028),r=i(7861);class o extends n.mc{constructor(t){t instanceof r.T&&(t={context:t});const{context:e,roundPixels:i,...s}=t||{};super({label:"Graphics",...s}),this.canBundle=!0,this.renderPipeId="graphics",this._roundPixels=0,this._context=e||(this._ownedContext=new r.T),this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=null!==i&&void 0!==i&&i}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}addBounds(t){t.addBounds(this._context.bounds)}containsPoint(t){return this._context.containsPoint(t)}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}onViewUpdate(){if(this._didChangeId+=4096,this._didGraphicsUpdate=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):!0!==t&&!0!==(null===t||void 0===t?void 0:t.context)||this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("setFillStyle",e)}setStrokeStyle(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("setStrokeStyle",e)}fill(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("fill",e)}stroke(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("stroke",e)}texture(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("arc",e)}arcTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("arcTo",e)}arcToSvg(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("arcToSvg",e)}bezierCurveTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("ellipse",e)}circle(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("circle",e)}path(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("path",e)}lineTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("lineTo",e)}moveTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("moveTo",e)}quadraticCurveTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("quadraticCurveTo",e)}rect(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("rect",e)}roundRect(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("roundRect",e)}poly(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("poly",e)}regularPoly(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("regularPoly",e)}roundPoly(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("roundPoly",e)}roundShape(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("roundShape",e)}filletRect(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("filletRect",e)}chamferRect(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("chamferRect",e)}star(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("star",e)}svg(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("svg",e)}restore(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("rotate",e)}scaleTransform(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("scale",e)}setTransform(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("setTransform",e)}transform(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("transform",e)}translateTransform(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return new o(this._context.clone());this._ownedContext=null;return new o(this._context)}lineStyle(t,e,i){(0,s.t)(s.l,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const n={};return t&&(n.width=t),e&&(n.color=e),i&&(n.alpha=i),this.context.strokeStyle=n,this}beginFill(t,e){(0,s.t)(s.l,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const i={};return t&&(i.color=t),e&&(i.alpha=e),this.context.fillStyle=i,this}endFill(){(0,s.t)(s.l,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return t.width===r.T.defaultStrokeStyle.width&&t.color===r.T.defaultStrokeStyle.color&&t.alpha===r.T.defaultStrokeStyle.alpha||this.context.stroke(),this}drawCircle(){(0,s.t)(s.l,"Graphics#drawCircle has been renamed to Graphics#circle");for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("circle",e)}drawEllipse(){(0,s.t)(s.l,"Graphics#drawEllipse has been renamed to Graphics#ellipse");for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("ellipse",e)}drawPolygon(){(0,s.t)(s.l,"Graphics#drawPolygon has been renamed to Graphics#poly");for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("poly",e)}drawRect(){(0,s.t)(s.l,"Graphics#drawRect has been renamed to Graphics#rect");for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("rect",e)}drawRoundedRect(){(0,s.t)(s.l,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect");for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("roundRect",e)}drawStar(){(0,s.t)(s.l,"Graphics#drawStar has been renamed to Graphics#star");for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this._callContextMethod("star",e)}}},7861:(t,e,i)=>{"use strict";i.d(e,{T:()=>J});var s=i(8379),n=i(5242),r=i(3596),o=i(1960),a=i(6675),h=i(2026),l=i(4811),c=i(6373),d=i(279),u=i(4100);var p=i(4307);class f{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.type="circle",this.x=t,this.y=e,this.radius=i}clone(){return new f(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let s=this.x-t,n=this.y-e;return s*=s,n*=n,s+n<=i}strokeContains(t,e,i){if(0===this.radius)return!1;const s=this.x-t,n=this.y-e,r=this.radius,o=i/2,a=Math.sqrt(s*s+n*n);return a<r+o&&a>r-o}getBounds(t){return(t=t||new p.M).x=this.x-this.radius,t.y=this.y-this.radius,t.width=2*this.radius,t.height=2*this.radius,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return"[pixi.js/math:Circle x=".concat(this.x," y=").concat(this.y," radius=").concat(this.radius,"]")}}class _{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.type="ellipse",this.x=t,this.y=e,this.halfWidth=i,this.halfHeight=s}clone(){return new _(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(t-this.x)/this.halfWidth,s=(e-this.y)/this.halfHeight;return i*=i,s*=s,i+s<=1}strokeContains(t,e,i){const{halfWidth:s,halfHeight:n}=this;if(s<=0||n<=0)return!1;const r=i/2,o=s-r,a=n-r,h=s+r,l=n+r,c=t-this.x,d=e-this.y;return c*c/(o*o)+d*d/(a*a)>1&&c*c/(h*h)+d*d/(l*l)<=1}getBounds(){return new p.M(this.x-this.halfWidth,this.y-this.halfHeight,2*this.halfWidth,2*this.halfHeight)}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return"[pixi.js/math:Ellipse x=".concat(this.x," y=").concat(this.y," halfWidth=").concat(this.halfWidth," halfHeight=").concat(this.halfHeight,"]")}}function g(t,e,i,s,n,r){const o=n-i,a=r-s,h=o*o+a*a;let l,c,d=-1;0!==h&&(d=((t-i)*o+(e-s)*a)/h),d<0?(l=i,c=s):d>1?(l=n,c=r):(l=i+d*o,c=s+d*a);const u=t-l,p=e-c;return u*u+p*p}class m{constructor(){this.type="polygon";for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];let s=Array.isArray(e[0])?e[0]:e;if("number"!==typeof s[0]){const t=[];for(let e=0,i=s.length;e<i;e++)t.push(s[e].x,s[e].y);s=t}this.points=s,this.closePath=!0}clone(){const t=this.points.slice(),e=new m(t);return e.closePath=this.closePath,e}contains(t,e){let i=!1;const s=this.points.length/2;for(let n=0,r=s-1;n<s;r=n++){const s=this.points[2*n],o=this.points[2*n+1],a=this.points[2*r],h=this.points[2*r+1];o>e!==h>e&&t<(e-o)/(h-o)*(a-s)+s&&(i=!i)}return i}strokeContains(t,e,i){const s=i/2,n=s*s,{points:r}=this,o=r.length-(this.closePath?0:2);for(let a=0;a<o;a+=2){if(g(t,e,r[a],r[a+1],r[(a+2)%r.length],r[(a+3)%r.length])<=n)return!0}return!1}getBounds(t){t=t||new p.M;const e=this.points;let i=1/0,s=-1/0,n=1/0,r=-1/0;for(let o=0,a=e.length;o<a;o+=2){const t=e[o],a=e[o+1];i=t<i?t:i,s=t>s?t:s,n=a<n?a:n,r=a>r?a:r}return t.x=i,t.width=s-i,t.y=n,t.height=r-n,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return"[pixi.js/math:PolygoncloseStroke=".concat(this.closePath,"points=").concat(this.points.reduce(((t,e)=>"".concat(t,", ").concat(e)),""),"]")}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const x=(t,e,i,s,n,r)=>{const o=t-i,a=e-s,h=Math.sqrt(o*o+a*a);return h>=n-r&&h<=n+r};class y{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;this.type="roundedRectangle",this.x=t,this.y=e,this.width=i,this.height=s,this.radius=n}getBounds(t){return(t=t||new p.M).x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new y(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let s=t-(this.x+i),n=e-(this.y+i);const r=i*i;if(s*s+n*n<=r)return!0;if(s=t-(this.x+this.width-i),s*s+n*n<=r)return!0;if(n=e-(this.y+this.height-i),s*s+n*n<=r)return!0;if(s=t-(this.x+i),s*s+n*n<=r)return!0}return!1}strokeContains(t,e,i){const{x:s,y:n,width:r,height:o,radius:a}=this,h=i/2,l=s+a,c=n+a,d=s+r,u=n+o;return(t>=s-h&&t<=s+h||t>=d-h&&t<=d+h)&&e>=c&&e<=c+(o-2*a)||((e>=n-h&&e<=n+h||e>=u-h&&e<=u+h)&&t>=l&&t<=l+(r-2*a)||(t<l&&e<c&&x(t,e,l,c,a,h)||t>d-a&&e<c&&x(t,e,d-a,c,a,h)||t>d-a&&e>u-a&&x(t,e,d-a,u-a,a,h)||t<l&&e>u-a&&x(t,e,l,u-a,a,h)))}toString(){return"[pixi.js/math:RoundedRectangle x=".concat(this.x," y=").concat(this.y,"width=").concat(this.width," height=").concat(this.height," radius=").concat(this.radius,"]")}}var v=i(7654);const b=8,w=1.1920929e-7,S=1,A=.01,C=0,T=0;function P(t,e,i,s,n,r,o,a,h,l){const c=Math.min(.99,Math.max(0,null!==l&&void 0!==l?l:v.GH.defaultOptions.bezierSmoothness));let d=(S-c)/1;return d*=d,function(t,e,i,s,n,r,o,a,h,l){M(t,e,i,s,n,r,o,a,h,l,0),h.push(o,a)}(e,i,s,n,r,o,a,h,t,d),t}function M(t,e,i,s,n,r,o,a,h,l,c){if(c>b)return;const d=Math.PI,u=(t+i)/2,p=(e+s)/2,f=(i+n)/2,_=(s+r)/2,g=(n+o)/2,m=(r+a)/2,x=(u+f)/2,y=(p+_)/2,v=(f+g)/2,S=(_+m)/2,P=(x+v)/2,k=(y+S)/2;if(c>0){let c=o-t,u=a-e;const p=Math.abs((i-o)*u-(s-a)*c),f=Math.abs((n-o)*u-(r-a)*c);let _,g;if(p>w&&f>w){if((p+f)*(p+f)<=l*(c*c+u*u)){if(C<A)return void h.push(P,k);const l=Math.atan2(r-s,n-i);if(_=Math.abs(l-Math.atan2(s-e,i-t)),g=Math.abs(Math.atan2(a-r,o-n)-l),_>=d&&(_=2*d-_),g>=d&&(g=2*d-g),_+g<C)return void h.push(P,k);if(0!==T){if(_>T)return void h.push(i,s);if(g>T)return void h.push(n,r)}}}else if(p>w){if(p*p<=l*(c*c+u*u)){if(C<A)return void h.push(P,k);if(_=Math.abs(Math.atan2(r-s,n-i)-Math.atan2(s-e,i-t)),_>=d&&(_=2*d-_),_<C)return h.push(i,s),void h.push(n,r);if(0!==T&&_>T)return void h.push(i,s)}}else if(f>w){if(f*f<=l*(c*c+u*u)){if(C<A)return void h.push(P,k);if(_=Math.abs(Math.atan2(a-r,o-n)-Math.atan2(r-s,n-i)),_>=d&&(_=2*d-_),_<C)return h.push(i,s),void h.push(n,r);if(0!==T&&_>T)return void h.push(n,r)}}else if(c=P-(t+o)/2,u=k-(e+a)/2,c*c+u*u<=l)return void h.push(P,k)}M(t,e,u,p,x,y,P,k,h,l,c+1),M(P,k,v,S,g,m,o,a,h,l,c+1)}const k=8,B=1.1920929e-7,R=.01,I=0;function E(t,e,i,s,n,r,o,a){let h=(1-Math.min(.99,Math.max(0,null!==a&&void 0!==a?a:v.GH.defaultOptions.bezierSmoothness)))/1;return h*=h,function(t,e,i,s,n,r,o,a){F(o,t,e,i,s,n,r,a,0),o.push(n,r)}(e,i,s,n,r,o,t,h),t}function F(t,e,i,s,n,r,o,a,h){if(h>k)return;const l=Math.PI,c=(e+s)/2,d=(i+n)/2,u=(s+r)/2,p=(n+o)/2,f=(c+u)/2,_=(d+p)/2;let g=r-e,m=o-i;const x=Math.abs((s-r)*m-(n-o)*g);if(x>B){if(x*x<=a*(g*g+m*m)){if(I<R)return void t.push(f,_);let a=Math.abs(Math.atan2(o-n,r-s)-Math.atan2(n-i,s-e));if(a>=l&&(a=2*l-a),a<I)return void t.push(f,_)}}else if(g=f-(e+r)/2,m=_-(i+o)/2,g*g+m*m<=a)return void t.push(f,_);F(t,e,i,c,d,f,_,a,h+1),F(t,f,_,u,p,r,o,a,h+1)}function L(t,e,i,s,n,r,o,a){let h=Math.abs(n-r);(!o&&n>r||o&&r>n)&&(h=2*Math.PI-h),a=a||Math.max(6,Math.floor(6*Math.pow(s,1/3)*(h/Math.PI)));let l=h/(a=Math.max(a,3)),c=n;l*=o?-1:1;for(let d=0;d<a+1;d++){const n=e+Math.cos(c)*s,r=i+Math.sin(c)*s;t.push(n,r),c+=l}}const z=2*Math.PI,O={centerX:0,centerY:0,ang1:0,ang2:0},D=(t,e,i,s,n,r,o,a)=>{let{x:h,y:l}=t;h*=e,l*=i;const c=s*h-n*l,d=n*h+s*l;return a.x=c+r,a.y=d+o,a};function G(t,e){const i=-1.5707963267948966===e?-.551915024494:4/3*Math.tan(e/4),s=1.5707963267948966===e?.551915024494:i,n=Math.cos(t),r=Math.sin(t),o=Math.cos(t+e),a=Math.sin(t+e);return[{x:n-r*s,y:r+n*s},{x:o+a*s,y:a-o*s},{x:o,y:a}]}const W=(t,e,i,s)=>{let n=t*i+e*s;return n>1&&(n=1),n<-1&&(n=-1),(t*s-e*i<0?-1:1)*Math.acos(n)};function U(t,e,i,s,n,r,o){let a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;if(0===r||0===o)return;const c=Math.sin(a*z/360),d=Math.cos(a*z/360),u=d*(e-s)/2+c*(i-n)/2,p=-c*(e-s)/2+d*(i-n)/2;if(0===u&&0===p)return;r=Math.abs(r),o=Math.abs(o);const f=Math.pow(u,2)/Math.pow(r,2)+Math.pow(p,2)/Math.pow(o,2);f>1&&(r*=Math.sqrt(f),o*=Math.sqrt(f)),((t,e,i,s,n,r,o,a,h,l,c,d,u)=>{const p=Math.pow(n,2),f=Math.pow(r,2),_=Math.pow(c,2),g=Math.pow(d,2);let m=p*f-p*g-f*_;m<0&&(m=0),m/=p*g+f*_,m=Math.sqrt(m)*(o===a?-1:1);const x=m*n/r*d,y=m*-r/n*c,v=l*x-h*y+(t+i)/2,b=h*x+l*y+(e+s)/2,w=(c-x)/n,S=(d-y)/r,A=(-c-x)/n,C=(-d-y)/r,T=W(1,0,w,S);let P=W(w,S,A,C);0===a&&P>0&&(P-=z),1===a&&P<0&&(P+=z),u.centerX=v,u.centerY=b,u.ang1=T,u.ang2=P})(e,i,s,n,r,o,h,l,c,d,u,p,O);let{ang1:_,ang2:g}=O;const{centerX:m,centerY:x}=O;let y=Math.abs(g)/(z/4);Math.abs(1-y)<1e-7&&(y=1);const v=Math.max(Math.ceil(y),1);g/=v;let b=t[t.length-2],w=t[t.length-1];const S={x:0,y:0};for(let A=0;A<v;A++){const e=G(_,g),{x:i,y:s}=D(e[0],r,o,d,c,m,x,S),{x:n,y:a}=D(e[1],r,o,d,c,m,x,S),{x:h,y:l}=D(e[2],r,o,d,c,m,x,S);P(t,b,w,i,s,n,a,h,l),b=h,w=l,_+=g}}const H=new p.M;class V{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new c.c,this._graphicsPath2D=t}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const i=this._currentPoly.points,s=i[i.length-2],n=i[i.length-1];return s===t&&n===e||i.push(t,e),this}arc(t,e,i,s,n,r){this._ensurePoly(!1);return L(this._currentPoly.points,t,e,i,s,n,r),this}arcTo(t,e,i,s,n){this._ensurePoly();return function(t,e,i,s,n,r){const o=t[t.length-2],a=t[t.length-1]-i,h=o-e,l=n-i,c=s-e,d=Math.abs(a*c-h*l);if(d<1e-8||0===r)return void(t[t.length-2]===e&&t[t.length-1]===i||t.push(e,i));const u=a*a+h*h,p=l*l+c*c,f=a*l+h*c,_=r*Math.sqrt(u)/d,g=r*Math.sqrt(p)/d,m=_*f/u,x=g*f/p,y=_*c+g*h,v=_*l+g*a,b=h*(g+m),w=a*(g+m),S=c*(_+x),A=l*(_+x);L(t,y+e,v+i,r,Math.atan2(w-v,b-y),Math.atan2(A-v,S-y),h*l>c*a)}(this._currentPoly.points,t,e,i,s,n),this}arcToSvg(t,e,i,s,n,r,o){return U(this._currentPoly.points,this._currentPoly.lastX,this._currentPoly.lastY,r,o,t,e,i,s,n),this}bezierCurveTo(t,e,i,s,n,r,o){this._ensurePoly();const a=this._currentPoly;return P(this._currentPoly.points,a.lastX,a.lastY,t,e,i,s,n,r,o),this}quadraticCurveTo(t,e,i,s,n){this._ensurePoly();const r=this._currentPoly;return E(this._currentPoly.points,r.lastX,r.lastY,t,e,i,s,n),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0)).transform(e);for(let i=0;i<t.instructions.length;i++){const e=t.instructions[i];this[e.action](...e.data)}return this}finish(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.endPoly(t)}rect(t,e,i,s,n){return this.drawShape(new p.M(t,e,i,s),n),this}circle(t,e,i,s){return this.drawShape(new f(t,e,i),s),this}poly(t,e,i){const s=new m(t);return s.closePath=e,this.drawShape(s,i),this}regularPoly(t,e,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5?arguments[5]:void 0;s=Math.max(0|s,3);const o=-1*Math.PI/2+n,a=2*Math.PI/s,h=[];for(let l=0;l<s;l++){const s=l*a+o;h.push(t+i*Math.cos(s),e+i*Math.sin(s))}return this.poly(h,!0,r),this}roundPoly(t,e,i,s,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6?arguments[6]:void 0;if(s=Math.max(0|s,3),n<=0)return this.regularPoly(t,e,i,s,r);const a=i*Math.sin(Math.PI/s)-.001;n=Math.min(n,a);const h=-1*Math.PI/2+r,l=2*Math.PI/s,c=(s-2)*Math.PI/s/2;for(let d=0;d<s;d++){const s=d*l+h,r=t+i*Math.cos(s),a=e+i*Math.sin(s),u=s+Math.PI+c,p=s-Math.PI-c,f=r+n*Math.cos(u),_=a+n*Math.sin(u),g=r+n*Math.cos(p),m=a+n*Math.sin(p);0===d?this.moveTo(f,_):this.lineTo(f,_),this.quadraticCurveTo(r,a,g,m,o)}return this.closePath()}roundShape(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;return t.length<3?this:(i?function(t,e,i,s){const n=(t,e)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),r=(t,e,i)=>({x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}),o=e.length;for(let h=0;h<o;h++){var a;const l=e[(h+1)%o],c=null!==(a=l.radius)&&void 0!==a?a:i;if(c<=0){0===h?t.moveTo(l.x,l.y):t.lineTo(l.x,l.y);continue}const d=e[h],u=e[(h+2)%o],p=n(d,l);let f;f=p<1e-4?l:r(l,d,Math.min(p/2,c)/p);const _=n(u,l);let g;g=_<1e-4?l:r(l,u,Math.min(_/2,c)/_),0===h?t.moveTo(f.x,f.y):t.lineTo(f.x,f.y),t.quadraticCurveTo(l.x,l.y,g.x,g.y,s)}}(this,t,e,s):function(t,e,i){const s=(t,e)=>{const i=e.x-t.x,s=e.y-t.y,n=Math.sqrt(i*i+s*s);return{len:n,nx:i/n,ny:s/n}},n=(e,i)=>{0===e?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y)};let r=e[e.length-1];for(let a=0;a<e.length;a++){var o;const h=e[a%e.length],l=null!==(o=h.radius)&&void 0!==o?o:i;if(l<=0){n(a,h),r=h;continue}const c=e[(a+1)%e.length],d=s(h,r),u=s(h,c);if(d.len<1e-4||u.len<1e-4){n(a,h),r=h;continue}let p=Math.asin(d.nx*u.ny-d.ny*u.nx),f=1,_=!1;d.nx*u.nx-d.ny*-u.ny<0?p<0?p=Math.PI+p:(p=Math.PI-p,f=-1,_=!0):p>0&&(f=-1,_=!0);const g=p/2;let m,x=Math.abs(Math.cos(g)*l/Math.sin(g));x>Math.min(d.len/2,u.len/2)?(x=Math.min(d.len/2,u.len/2),m=Math.abs(x*Math.sin(g)/Math.cos(g))):m=l;const y=h.x+u.nx*x+-u.ny*m*f,v=h.y+u.ny*x+u.nx*m*f,b=Math.atan2(d.ny,d.nx)+Math.PI/2*f,w=Math.atan2(u.ny,u.nx)-Math.PI/2*f;0===a&&t.moveTo(y+Math.cos(b)*m,v+Math.sin(b)*m),t.arc(y,v,m,b,w,_),r=h}}(this,t,e),this.closePath())}filletRect(t,e,i,s,n){if(0===n)return this.rect(t,e,i,s);const r=Math.min(i,s)/2,o=Math.min(r,Math.max(-r,n)),a=t+i,h=e+s,l=o<0?-o:0,c=Math.abs(o);return this.moveTo(t,e+c).arcTo(t+l,e+l,t+c,e,c).lineTo(a-c,e).arcTo(a-l,e+l,a,e+c,c).lineTo(a,h-c).arcTo(a-l,h-l,t+i-c,h,c).lineTo(t+c,h).arcTo(t+l,h-l,t,h-c,c).closePath()}chamferRect(t,e,i,s,n,r){if(n<=0)return this.rect(t,e,i,s);const o=Math.min(n,Math.min(i,s)/2),a=t+i,h=e+s,l=[t+o,e,a-o,e,a,e+o,a,h-o,a-o,h,t+o,h,t,h-o,t,e+o];for(let c=l.length-1;c>=2;c-=2)l[c]===l[c-2]&&l[c-1]===l[c-3]&&l.splice(c-1,2);return this.poly(l,!0,r)}ellipse(t,e,i,s,n){return this.drawShape(new _(t,e,i,s),n),this}roundRect(t,e,i,s,n,r){return this.drawShape(new y(t,e,i,s,n),r),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let i=this._currentPoly;return i&&this.endPoly(),i=new m,i.points.push(t,e),this._currentPoly=i,this}endPoly(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this._currentPoly&&(this._currentPoly=new m,t)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let e=t.shape.x,i=t.shape.y;if(!t.transform.isIdentity()){const s=t.transform,n=e;e=s.a*e+s.c*i+s.tx,i=s.b*n+s.d*i+s.ty}this._currentPoly.points.push(e,i)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const i=t.instructions[e];this[i.action](...i.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let i=0;i<e.length;i++){const s=e[i],n=s.shape.getBounds(H);s.transform?t.addRect(n,s.transform):t.addRect(n)}return t}}class Y{constructor(t){var e;(this.instructions=[],this.uid=(0,h.L)("graphicsPath"),this._dirty=!0,"string"===typeof t)?function(t,e){const i=u(t),s=[];let n=null,r=0,o=0;for(let a=0;a<i.length;a++){const t=i[a],h=t[0],l=t;switch(h){case"M":r=l[1],o=l[2],e.moveTo(r,o);break;case"m":r+=l[1],o+=l[2],e.moveTo(r,o);break;case"H":r=l[1],e.lineTo(r,o);break;case"h":r+=l[1],e.lineTo(r,o);break;case"V":o=l[1],e.lineTo(r,o);break;case"v":o+=l[1],e.lineTo(r,o);break;case"L":r=l[1],o=l[2],e.lineTo(r,o);break;case"l":r+=l[1],o+=l[2],e.lineTo(r,o);break;case"C":r=l[5],o=l[6],e.bezierCurveTo(l[1],l[2],l[3],l[4],r,o);break;case"c":e.bezierCurveTo(r+l[1],o+l[2],r+l[3],o+l[4],r+l[5],o+l[6]),r+=l[5],o+=l[6];break;case"S":r=l[3],o=l[4],e.bezierCurveToShort(l[1],l[2],r,o);break;case"s":e.bezierCurveToShort(r+l[1],o+l[2],r+l[3],o+l[4]),r+=l[3],o+=l[4];break;case"Q":r=l[3],o=l[4],e.quadraticCurveTo(l[1],l[2],r,o);break;case"q":e.quadraticCurveTo(r+l[1],o+l[2],r+l[3],o+l[4]),r+=l[3],o+=l[4];break;case"T":r=l[1],o=l[2],e.quadraticCurveToShort(r,o);break;case"t":r+=l[1],o+=l[2],e.quadraticCurveToShort(r,o);break;case"A":r=l[6],o=l[7],e.arcToSvg(l[1],l[2],l[3],l[4],l[5],r,o);break;case"a":r+=l[6],o+=l[7],e.arcToSvg(l[1],l[2],l[3],l[4],l[5],r,o);break;case"Z":case"z":e.closePath(),s.length>0&&(n=s.pop(),n?(r=n.startX,o=n.startY):(r=0,o=0)),n=null;break;default:(0,d.R)("Unknown SVG path command: ".concat(h))}"Z"!==h&&"z"!==h&&null===n&&(n={startX:r,startY:o},s.push(n))}}(t,this):this.instructions=null!==(e=null===t||void 0===t?void 0:t.slice())&&void 0!==e?e:[]}get shapePath(){return this._shapePath||(this._shapePath=new V(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(t,e,i,s,n){const r=this.instructions[this.instructions.length-1],a=this.getLastPoint(o.b.shared);let h=0,l=0;if(r&&"bezierCurveTo"===r.action){h=r.data[2],l=r.data[3];const t=a.x,e=a.y;h=t+(t-h),l=e+(e-l)}else h=a.x,l=a.y;return this.instructions.push({action:"bezierCurveTo",data:[h,l,t,e,i,s,n]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(t,e,i){const s=this.instructions[this.instructions.length-1],n=this.getLastPoint(o.b.shared);let r=0,a=0;if(s&&"quadraticCurveTo"===s.action){r=s.data[0],a=s.data[1];const t=n.x,e=n.y;r=t+(t-r),a=e+(e-a)}else r=n.x,a=n.y;return this.instructions.push({action:"quadraticCurveTo",data:[r,a,t,e,i]}),this._dirty=!0,this}rect(t,e,i,s,n){return this.instructions.push({action:"rect",data:[t,e,i,s,n]}),this._dirty=!0,this}circle(t,e,i,s){return this.instructions.push({action:"circle",data:[t,e,i,s]}),this._dirty=!0,this}roundRect(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(t,e,i,s,n,r,o){n=n||s/2;const a=-1*Math.PI/2+r,h=2*i,l=2*Math.PI/h,c=[];for(let d=0;d<h;d++){const i=d%2?n:s,r=d*l+a;c.push(t+i*Math.cos(r),e+i*Math.sin(r))}return this.poly(c,!0,o),this}clone(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=new Y;if(t)for(let i=0;i<this.instructions.length;i++){const t=this.instructions[i];e.instructions.push({action:t.action,data:t.data.slice()})}else e.instructions=this.instructions.slice();return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,i=t.b,s=t.c,n=t.d,r=t.tx,o=t.ty;let a=0,h=0,l=0,c=0,u=0,p=0,f=0,_=0;for(let g=0;g<this.instructions.length;g++){const m=this.instructions[g],x=m.data;switch(m.action){case"moveTo":case"lineTo":a=x[0],h=x[1],x[0]=e*a+s*h+r,x[1]=i*a+n*h+o;break;case"bezierCurveTo":l=x[0],c=x[1],u=x[2],p=x[3],a=x[4],h=x[5],x[0]=e*l+s*c+r,x[1]=i*l+n*c+o,x[2]=e*u+s*p+r,x[3]=i*u+n*p+o,x[4]=e*a+s*h+r,x[5]=i*a+n*h+o;break;case"quadraticCurveTo":l=x[0],c=x[1],a=x[2],h=x[3],x[0]=e*l+s*c+r,x[1]=i*l+n*c+o,x[2]=e*a+s*h+r,x[3]=i*a+n*h+o;break;case"arcToSvg":a=x[5],h=x[6],f=x[0],_=x[1],x[0]=e*f+s*_,x[1]=i*f+n*_,x[5]=e*a+s*h+r,x[6]=i*a+n*h+o;break;case"circle":x[4]=N(x[3],t);break;case"rect":x[4]=N(x[4],t);break;case"ellipse":x[8]=N(x[8],t);break;case"roundRect":x[5]=N(x[5],t);break;case"addPath":x[0].transform(t);break;case"poly":x[2]=N(x[2],t);break;default:(0,d.R)("unknown transform action",m.action)}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,i=this.instructions[e];if(!i)return t.x=0,t.y=0,t;for(;"closePath"===i.action;){if(e--,e<0)return t.x=0,t.y=0,t;i=this.instructions[e]}switch(i.action){case"moveTo":case"lineTo":t.x=i.data[0],t.y=i.data[1];break;case"quadraticCurveTo":t.x=i.data[2],t.y=i.data[3];break;case"bezierCurveTo":t.x=i.data[4],t.y=i.data[5];break;case"arc":case"arcToSvg":t.x=i.data[5],t.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(t)}return t}}function N(t,e){return t?t.prepend(e):e.clone()}function X(t,e){if("string"===typeof t){const e=document.createElement("div");e.innerHTML=t.trim(),t=e.querySelector("svg")}return j(t,{context:e,path:new Y},null,null),e}function j(t,e,i,s){const r=t.children,{fillStyle:o,strokeStyle:a}=function(t){const e=t.getAttribute("style"),i={},s={};let r=!1,o=!1;if(e){const t=e.split(";");for(let e=0;e<t.length;e++){const a=t[e],[h,l]=a.split(":");switch(h){case"stroke":"none"!==l&&(i.color=n.Q.shared.setValue(l).toNumber(),o=!0);break;case"stroke-width":i.width=Number(l);break;case"fill":"none"!==l&&(r=!0,s.color=n.Q.shared.setValue(l).toNumber());break;case"fill-opacity":s.alpha=Number(l);break;case"stroke-opacity":i.alpha=Number(l);break;case"opacity":s.alpha=Number(l),i.alpha=Number(l)}}}else{const e=t.getAttribute("stroke");e&&"none"!==e&&(o=!0,i.color=n.Q.shared.setValue(e).toNumber(),i.width=q(t,"stroke-width",1));const a=t.getAttribute("fill");a&&"none"!==a&&(r=!0,s.color=n.Q.shared.setValue(a).toNumber())}return{strokeStyle:o?i:null,fillStyle:r?s:null}}(t);let h,l,c,d,u,p,f,_,g,m,x,y,v,b,w,S,A;switch(o&&i?i={...i,...o}:o&&(i=o),a&&s?s={...s,...a}:a&&(s=a),e.context.fillStyle=i,e.context.strokeStyle=s,t.nodeName.toLowerCase()){case"path":b=t.getAttribute("d"),w=new Y(b),e.context.path(w),i&&e.context.fill(),s&&e.context.stroke();break;case"circle":f=q(t,"cx",0),_=q(t,"cy",0),g=q(t,"r",0),e.context.ellipse(f,_,g,g),i&&e.context.fill(),s&&e.context.stroke();break;case"rect":h=q(t,"x",0),l=q(t,"y",0),S=q(t,"width",0),A=q(t,"height",0),m=q(t,"rx",0),x=q(t,"ry",0),m||x?e.context.roundRect(h,l,S,A,m||x):e.context.rect(h,l,S,A),i&&e.context.fill(),s&&e.context.stroke();break;case"ellipse":f=q(t,"cx",0),_=q(t,"cy",0),m=q(t,"rx",0),x=q(t,"ry",0),e.context.beginPath(),e.context.ellipse(f,_,m,x),i&&e.context.fill(),s&&e.context.stroke();break;case"line":c=q(t,"x1",0),d=q(t,"y1",0),u=q(t,"x2",0),p=q(t,"y2",0),e.context.beginPath(),e.context.moveTo(c,d),e.context.lineTo(u,p),s&&e.context.stroke();break;case"polygon":v=t.getAttribute("points"),y=v.match(/\d+/g).map((t=>parseInt(t,10))),e.context.poly(y,!0),i&&e.context.fill(),s&&e.context.stroke();break;case"polyline":v=t.getAttribute("points"),y=v.match(/\d+/g).map((t=>parseInt(t,10))),e.context.poly(y,!1),s&&e.context.stroke();break;case"g":case"svg":break;default:console.info("[SVG parser] <".concat(t.nodeName,"> elements unsupported"))}for(let n=0;n<r.length;n++)j(r[n],e,i,s)}function q(t,e,i){const s=t.getAttribute(e);return s?Number(s):i}var K=i(4839);const Z=new o.b,Q=new r.u,$=class t extends s.A{constructor(){super(...arguments),this.uid=(0,h.L)("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Y,this._transform=new r.u,this._fillStyle={...t.defaultFillStyle},this._strokeStyle={...t.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new c.c,this._boundsDirty=!0}clone(){const e=new t;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=(0,K.w)(e,t.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=(0,K.T)(e,t.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=(0,K.w)(e,t.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=(0,K.w)(e,t.defaultStrokeStyle),this}texture(t,e,i,s,r,o){return this.instructions.push({action:"texture",data:{image:t,dx:i||0,dy:s||0,dw:r||t.frame.width,dh:o||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?n.Q.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Y,this}fill(e,i){let s;const n=this.instructions[this.instructions.length-1];return s=0===this._tick&&n&&"stroke"===n.action?n.data.path:this._activePath.clone(),s?(null!=e&&(void 0!==i&&"number"===typeof e&&((0,l.t)(l.l,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:i}),this._fillStyle=(0,K.w)(e,t.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(o.b.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(e){let i;const s=this.instructions[this.instructions.length-1];return i=0===this._tick&&s&&"fill"===s.action?s.data.path:this._activePath.clone(),i?(null!=e&&(this._strokeStyle=(0,K.T)(e,t.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],i=this._activePath.clone();if(e&&("stroke"===e.action||"fill"===e.action)){if(!e.data.hole){e.data.hole=i;break}e.data.hole.addPath(i)}}return this._initNextPathLocation(),this}arc(t,e,i,s,n,r){this._tick++;const o=this._transform;return this._activePath.arc(o.a*t+o.c*e+o.tx,o.b*t+o.d*e+o.ty,i,s,n,r),this}arcTo(t,e,i,s,n){this._tick++;const r=this._transform;return this._activePath.arcTo(r.a*t+r.c*e+r.tx,r.b*t+r.d*e+r.ty,r.a*i+r.c*s+r.tx,r.b*i+r.d*s+r.ty,n),this}arcToSvg(t,e,i,s,n,r,o){this._tick++;const a=this._transform;return this._activePath.arcToSvg(t,e,i,s,n,a.a*r+a.c*o+a.tx,a.b*r+a.d*o+a.ty),this}bezierCurveTo(t,e,i,s,n,r,o){this._tick++;const a=this._transform;return this._activePath.bezierCurveTo(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,a.a*i+a.c*s+a.tx,a.b*i+a.d*s+a.ty,a.a*n+a.c*r+a.tx,a.b*n+a.d*r+a.ty,o),this}closePath(){var t;return this._tick++,null===(t=this._activePath)||void 0===t||t.closePath(),this}ellipse(t,e,i,s){return this._tick++,this._activePath.ellipse(t,e,i,s,this._transform.clone()),this}circle(t,e,i){return this._tick++,this._activePath.circle(t,e,i,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty),this}moveTo(t,e){this._tick++;const i=this._transform,s=this._activePath.instructions,n=i.a*t+i.c*e+i.tx,r=i.b*t+i.d*e+i.ty;return 1===s.length&&"moveTo"===s[0].action?(s[0].data[0]=n,s[0].data[1]=r,this):(this._activePath.moveTo(n,r),this)}quadraticCurveTo(t,e,i,s,n){this._tick++;const r=this._transform;return this._activePath.quadraticCurveTo(r.a*t+r.c*e+r.tx,r.b*t+r.d*e+r.ty,r.a*i+r.c*s+r.tx,r.b*i+r.d*s+r.ty,n),this}rect(t,e,i,s){return this._tick++,this._activePath.rect(t,e,i,s,this._transform.clone()),this}roundRect(t,e,i,s,n){return this._tick++,this._activePath.roundRect(t,e,i,s,n,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5?arguments[5]:void 0;return this._tick++,this._activePath.regularPoly(t,e,i,s,n,r),this}roundPoly(t,e,i,s,n,r){return this._tick++,this._activePath.roundPoly(t,e,i,s,n,r),this}roundShape(t,e,i,s){return this._tick++,this._activePath.roundShape(t,e,i,s),this}filletRect(t,e,i,s,n){return this._tick++,this._activePath.filletRect(t,e,i,s,n),this}chamferRect(t,e,i,s,n,r){return this._tick++,this._activePath.chamferRect(t,e,i,s,n,r),this}star(t,e,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._tick++,this._activePath.star(t,e,i,s,n,r,this._transform.clone()),this}svg(t){return this._tick++,X(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this._transform.scale(t,e),this}setTransform(t,e,i,s,n,o){return t instanceof r.u?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,i,s,n,o),this)}transform(t,e,i,s,n,o){return t instanceof r.u?(this._transform.append(t),this):(Q.set(t,e,i,s,n,o),this._transform.append(Q),this)}translate(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const i=this.instructions[e],s=i.action;if("fill"===s){const e=i.data;t.addBounds(e.path.bounds)}else if("texture"===s){const e=i.data;t.addFrame(e.dx,e.dy,e.dx+e.dw,e.dy+e.dh,e.transform)}if("stroke"===s){const e=i.data,s=e.style.width/2,n=e.path.bounds;t.addFrame(n.minX-s,n.minY-s,n.maxX+s,n.maxY+s)}}return t}containsPoint(t){if(!this.bounds.containsPoint(t.x,t.y))return!1;const e=this.instructions;let i=!1;for(let n=0;n<e.length;n++){const r=e[n],o=r.data,a=o.path;if(!r.action||!a)continue;const h=o.style,l=a.shapePath.shapePrimitives;for(let e=0;e<l.length;e++){const n=l[e].shape;if(!h||!n)continue;const a=l[e].transform,c=a?a.applyInverse(t,Z):t;i="fill"===r.action?n.contains(c.x,c.y):n.strokeContains(c.x,c.y,h.width);const d=o.hole;if(d){var s;const t=null===(s=d.shapePath)||void 0===s?void 0:s.shapePrimitives;if(t)for(let e=0;e<t.length;e++)t[e].shape.contains(c.x,c.y)&&(i=!1)}if(i)return!0}}return i}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners();if("boolean"===typeof t?t:null===t||void 0===t?void 0:t.texture){const e="boolean"===typeof t?t:null===t||void 0===t?void 0:t.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(e),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(e)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};$.defaultFillStyle={color:16777215,alpha:1,texture:a.g.WHITE,matrix:null,fill:null},$.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:a.g.WHITE,matrix:null,fill:null};let J=$},7654:(t,e,i)=>{"use strict";i.d(e,{GH:()=>B});var s=i(1478),n=i(6667),r=i(9530),o=i(4496),a=i(347),h=i(9769),l=i(4307);function c(t,e,i,s,n){const r=e.a,o=e.b,a=e.c,h=e.d,l=e.tx,c=e.ty;i=i||0,s=s||2,n=n||t.length/s-i;let d=i*s;for(let u=0;u<n;u++){const e=t[d],i=t[d+1];t[d]=r*e+a*i+l,t[d+1]=o*e+h*i+c,d+=s}}var d=i(6675),u=i(9141);const p={build(t,e){let i,s,n,r,o,a;if("circle"===t.type){const e=t;i=e.x,s=e.y,o=a=e.radius,n=r=0}else if("ellipse"===t.type){const e=t;i=e.x,s=e.y,o=e.halfWidth,a=e.halfHeight,n=r=0}else{const e=t,h=e.width/2,l=e.height/2;i=e.x+h,s=e.y+l,o=a=Math.max(0,Math.min(e.radius,Math.min(h,l))),n=h-o,r=l-a}if(!(o>=0&&a>=0&&n>=0&&r>=0))return e;const h=Math.ceil(2.3*Math.sqrt(o+a)),l=8*h+(n?4:0)+(r?4:0);if(0===l)return e;if(0===h)return e[0]=e[6]=i+n,e[1]=e[3]=s+r,e[2]=e[4]=i-n,e[5]=e[7]=s-r,e;let c=0,d=4*h+(n?2:0)+2,u=d,p=l,f=n+o,_=r,g=i+f,m=i-f,x=s+_;if(e[c++]=g,e[c++]=x,e[--d]=x,e[--d]=m,r){const t=s-_;e[u++]=m,e[u++]=t,e[--p]=t,e[--p]=g}for(let v=1;v<h;v++){const t=Math.PI/2*(v/h),l=n+Math.cos(t)*o,f=r+Math.sin(t)*a,_=i+l,g=i-l,m=s+f,x=s-f;e[c++]=_,e[c++]=m,e[--d]=m,e[--d]=g,e[u++]=g,e[u++]=x,e[--p]=x,e[--p]=_}f=n,_=r+a,g=i+f,m=i-f,x=s+_;const y=s-_;return e[c++]=g,e[c++]=x,e[--p]=y,e[--p]=g,n&&(e[c++]=m,e[c++]=x,e[--p]=y,e[--p]=m),e},triangulate(t,e,i,s,n,r){if(0===t.length)return;let o=0,a=0;for(let c=0;c<t.length;c+=2)o+=t[c],a+=t[c+1];o/=t.length/2,a/=t.length/2;let h=s;e[h*i]=o,e[h*i+1]=a;const l=h++;for(let c=0;c<t.length;c+=2)e[h*i]=t[c],e[h*i+1]=t[c+1],c>0&&(n[r++]=h,n[r++]=l,n[r++]=h-1),h++;n[r++]=l+1,n[r++]=l,n[r++]=h-1}};var f=i(1960);const _=1e-4,g=1e-4;function m(t,e,i,s,n,r,o,a){let h,l;o?(h=s,l=-i):(h=-s,l=i);const c=t-i*n+h,d=e-s*n+l,u=t+i*r+h,p=e+s*r+l;return a.push(c,d),a.push(u,p),2}function x(t,e,i,s,n,r,o,a){const h=i-t,l=s-e;let c=Math.atan2(h,l),d=Math.atan2(n-t,r-e);a&&c<d?c+=2*Math.PI:!a&&c>d&&(d+=2*Math.PI);let u=c;const p=d-c,f=Math.abs(p),_=Math.sqrt(h*h+l*l),g=1+(15*f*Math.sqrt(_)/Math.PI|0),m=p/g;if(u+=m,a){o.push(t,e),o.push(i,s);for(let i=1,s=u;i<g;i++,s+=m)o.push(t,e),o.push(t+Math.sin(s)*_,e+Math.cos(s)*_);o.push(t,e),o.push(n,r)}else{o.push(i,s),o.push(t,e);for(let i=1,s=u;i<g;i++,s+=m)o.push(t+Math.sin(s)*_,e+Math.cos(s)*_),o.push(t,e);o.push(n,r),o.push(t,e)}return 2*g}var y=i(973);function v(t,e,i,s,n,r,o){const a=y(t,e,2);if(!a)return;for(let l=0;l<a.length;l+=3)r[o++]=a[l]+n,r[o++]=a[l+1]+n,r[o++]=a[l+2]+n;let h=n*s;for(let l=0;l<t.length;l+=2)i[h]=t[l],i[h+1]=t[l+1],h+=s}const b=[],w={build(t,e){for(let i=0;i<t.points.length;i++)e[i]=t.points[i];return e},triangulate(t,e,i,s,n,r){v(t,b,e,i,s,n,r)}},S={rectangle:{build(t,e){const i=t,s=i.x,n=i.y,r=i.width,o=i.height;return r>=0&&o>=0?(e[0]=s,e[1]=n,e[2]=s+r,e[3]=n,e[4]=s+r,e[5]=n+o,e[6]=s,e[7]=n+o,e):e},triangulate(t,e,i,s,n,r){let o=0;e[(s*=i)+o]=t[0],e[s+o+1]=t[1],o+=i,e[s+o]=t[2],e[s+o+1]=t[3],o+=i,e[s+o]=t[6],e[s+o+1]=t[7],o+=i,e[s+o]=t[4],e[s+o+1]=t[5],o+=i;const a=s/i;n[r++]=a,n[r++]=a+1,n[r++]=a+2,n[r++]=a+1,n[r++]=a+3,n[r++]=a+2}},polygon:w,triangle:{build:(t,e)=>(e[0]=t.x,e[1]=t.y,e[2]=t.x2,e[3]=t.y2,e[4]=t.x3,e[5]=t.y3,e),triangulate(t,e,i,s,n,r){let o=0;e[(s*=i)+o]=t[0],e[s+o+1]=t[1],o+=i,e[s+o]=t[2],e[s+o+1]=t[3],o+=i,e[s+o]=t[4],e[s+o+1]=t[5];const a=s/i;n[r++]=a,n[r++]=a+1,n[r++]=a+2}},circle:p,ellipse:p,roundedRectangle:p},A=new l.M;function C(t,e,i){const{vertices:s,uvs:n,indices:r}=i,o=r.length,a=s.length/2,l=[],d=S.rectangle,p=A,f=t.image;p.x=t.dx,p.y=t.dy,p.width=t.dw,p.height=t.dh;const _=t.transform;d.build(p,l),_&&c(l,_),d.triangulate(l,s,2,a,r,o);const g=f.uvs;n.push(g.x0,g.y0,g.x1,g.y1,g.x3,g.y3,g.x2,g.y2);const m=h.Z.get(u.G);m.indexOffset=o,m.indexSize=r.length-o,m.vertexOffset=a,m.vertexSize=s.length/2-a,m.color=t.style,m.alpha=t.alpha,m.texture=f,m.geometryData=i,e.push(m)}function T(t,e,i,s,n,r){const{vertices:o,uvs:a,indices:l}=r,p=t.shapePrimitives.length-1;t.shapePrimitives.forEach(((t,y)=>{let{shape:b,transform:w}=t;const A=l.length,C=o.length/2,T=[],P=S[b.type];if(P.build(b,T),w&&c(T,w),s){var M;const t=null===(M=b.closePath)||void 0===M||M;!function(t,e,i,s,n,r,o,a,h){const l=_;if(0===t.length)return;const c=e;let d=c.alignment;if(.5!==e.alignment){let e=function(t){const e=t.length;if(e<6)return 1;let i=0;for(let s=0,n=t[e-2],r=t[e-1];s<e;s+=2){const e=t[s],o=t[s+1];i+=(e-n)*(o+r),n=e,r=o}return i<0?-1:1}(t);i&&(e*=-1),d=(d-.5)*e+.5}const u=new f.b(t[0],t[1]),p=new f.b(t[t.length-2],t[t.length-1]),y=s,v=Math.abs(u.x-p.x)<l&&Math.abs(u.y-p.y)<l;if(y){t=t.slice(),v&&(t.pop(),t.pop(),p.set(t[t.length-2],t[t.length-1]));const e=.5*(u.x+p.x),i=.5*(p.y+u.y);t.unshift(e,i),t.push(e,i)}const b=n,w=t.length/2;let S=t.length;const A=b.length/2,C=c.width/2,T=C*C,P=c.miterLimit*c.miterLimit;let M=t[0],k=t[1],B=t[2],R=t[3],I=0,E=0,F=-(k-R),L=M-B,z=0,O=0,D=Math.sqrt(F*F+L*L);F/=D,L/=D,F*=C,L*=C;const G=2*(1-d),W=2*d;y||("round"===c.cap?S+=x(M-F*(G-W)*.5,k-L*(G-W)*.5,M-F*G,k-L*G,M+F*W,k+L*W,b,!0)+2:"square"===c.cap&&(S+=m(M,k,F,L,G,W,!0,b))),b.push(M-F*G,k-L*G),b.push(M+F*W,k+L*W);for(let f=1;f<w-1;++f){M=t[2*(f-1)],k=t[2*(f-1)+1],B=t[2*f],R=t[2*f+1],I=t[2*(f+1)],E=t[2*(f+1)+1],F=-(k-R),L=M-B,D=Math.sqrt(F*F+L*L),F/=D,L/=D,F*=C,L*=C,z=-(R-E),O=B-I,D=Math.sqrt(z*z+O*O),z/=D,O/=D,z*=C,O*=C;const e=B-M,i=k-R,s=B-I,n=E-R,r=e*s+i*n,o=i*s-n*e,a=o<0;if(Math.abs(o)<.001*Math.abs(r)){b.push(B-F*G,R-L*G),b.push(B+F*W,R+L*W),r>=0&&("round"===c.join?S+=x(B,R,B-F*G,R-L*G,B-z*G,R-O*G,b,!1)+4:S+=2,b.push(B-z*W,R-O*W),b.push(B+z*G,R+O*G));continue}const h=(-F+M)*(-L+R)-(-F+B)*(-L+k),l=(-z+I)*(-O+R)-(-z+B)*(-O+E),d=(e*l-s*h)/o,u=(n*h-i*l)/o,p=(d-B)*(d-B)+(u-R)*(u-R),_=B+(d-B)*G,g=R+(u-R)*G,m=B-(d-B)*W,y=R-(u-R)*W,v=a?G:W;p<=Math.min(e*e+i*i,s*s+n*n)+v*v*T?"bevel"===c.join||p/T>P?(a?(b.push(_,g),b.push(B+F*W,R+L*W),b.push(_,g),b.push(B+z*W,R+O*W)):(b.push(B-F*G,R-L*G),b.push(m,y),b.push(B-z*G,R-O*G),b.push(m,y)),S+=2):"round"===c.join?a?(b.push(_,g),b.push(B+F*W,R+L*W),S+=x(B,R,B+F*W,R+L*W,B+z*W,R+O*W,b,!0)+4,b.push(_,g),b.push(B+z*W,R+O*W)):(b.push(B-F*G,R-L*G),b.push(m,y),S+=x(B,R,B-F*G,R-L*G,B-z*G,R-O*G,b,!1)+4,b.push(B-z*G,R-O*G),b.push(m,y)):(b.push(_,g),b.push(m,y)):(b.push(B-F*G,R-L*G),b.push(B+F*W,R+L*W),"round"===c.join?S+=a?x(B,R,B+F*W,R+L*W,B+z*W,R+O*W,b,!0)+2:x(B,R,B-F*G,R-L*G,B-z*G,R-O*G,b,!1)+2:"miter"===c.join&&p/T<=P&&(a?(b.push(m,y),b.push(m,y)):(b.push(_,g),b.push(_,g)),S+=2),b.push(B-z*G,R-O*G),b.push(B+z*W,R+O*W),S+=2)}M=t[2*(w-2)],k=t[2*(w-2)+1],B=t[2*(w-1)],R=t[2*(w-1)+1],F=-(k-R),L=M-B,D=Math.sqrt(F*F+L*L),F/=D,L/=D,F*=C,L*=C,b.push(B-F*G,R-L*G),b.push(B+F*W,R+L*W),y||("round"===c.cap?S+=x(B-F*(G-W)*.5,R-L*(G-W)*.5,B-F*G,R-L*G,B+F*W,R+L*W,b,!1)+2:"square"===c.cap&&(S+=m(B,R,F,L,G,W,!1,b)));const U=g*g;for(let f=A;f<S+A-2;++f)M=b[2*f],k=b[2*f+1],B=b[2*(f+1)],R=b[2*(f+1)+1],I=b[2*(f+2)],E=b[2*(f+2)+1],Math.abs(M*(R-E)+B*(E-k)+I*(k-R))<U||a.push(f,f+1,f+2)}(T,e,!1,t,o,0,0,l)}else if(i&&p===y){0!==p&&console.warn("[Pixi Graphics] only the last shape have be cut out");const t=[],e=T.slice(),s=function(t){if(!t)return[];const e=t.shapePrimitives,i=[];for(let s=0;s<e.length;s++){const t=e[s].shape,n=[];S[t.type].build(t,n),i.push(n)}return i}(i.shapePath);s.forEach((i=>{t.push(e.length/2),e.push(...i)})),v(e,t,o,2,C,l,A)}else P.triangulate(T,o,2,C,l,A);const k=a.length/2,B=e.texture;if(B!==d.g.WHITE){const t=e.matrix;w&&t&&t.append(w.clone().invert()),function(t,e,i,s,n,r,o){let a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,h=0;i*=e,n*=r;const l=a.a,c=a.b,d=a.c,u=a.d,p=a.tx,f=a.ty;for(;h<o;){const o=t[i],a=t[i+1];s[n]=l*o+d*a+p,s[n+1]=c*o+u*a+f,n+=r,i+=e,h++}}(o,2,C,a,k,2,o.length/2-C,t)}else!function(t,e,i,s){let n=0;for(e*=i;n<s;)t[e]=0,t[e+1]=0,e+=i,n++}(a,k,2,o.length/2-C);const R=h.Z.get(u.G);R.indexOffset=A,R.indexSize=l.length-A,R.vertexOffset=C,R.vertexSize=o.length/2-C,R.color=e.color,R.alpha=e.alpha,R.texture=B,R.geometryData=r,n.push(R)}))}class P{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class M{constructor(){this.geometry=new n.J,this.instructions=new a.L}init(){this.instructions.reset()}}const k=class t{constructor(){this._activeBatchers=[],this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null)}init(e){var i;t.defaultOptions.bezierSmoothness=null!==(i=null===e||void 0===e?void 0:e.bezierSmoothness)&&void 0!==i?i:t.defaultOptions.bezierSmoothness}prerender(){this._returnActiveBatchers()}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),function(t,e){const{geometryData:i,batches:s}=e;s.length=0,i.indices.length=0,i.vertices.length=0,i.uvs.length=0;for(let n=0;n<t.instructions.length;n++){const e=t.instructions[n];if("texture"===e.action)C(e.data,s,i);else if("fill"===e.action||"stroke"===e.action){const t="stroke"===e.action,n=e.data.path.shapePath,r=e.data.style,o=e.data.hole;t&&o&&T(o.shapePath,r,null,!0,s,i),T(n,r,o,t,s,i)}}}(t,e);const i=t.batchMode;t.customShader||"no-batch"===i?e.isBatchable=!1:"auto"===i&&(e.isBatchable=e.geometryData.vertices.length<400),t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_returnActiveBatchers(){for(let t=0;t<this._activeBatchers.length;t++)h.Z.return(this._activeBatchers[t]);this._activeBatchers.length=0}_initContextRenderData(t){const e=h.Z.get(M),{batches:i,geometryData:s}=this._gpuContextHash[t.uid],n=s.vertices.length,a=s.indices.length;for(let r=0;r<i.length;r++)i[r].applyTransform=!1;const l=h.Z.get(o.i);this._activeBatchers.push(l),l.ensureAttributeBuffer(n),l.ensureIndexBuffer(a),l.begin();for(let r=0;r<i.length;r++){const t=i[r];l.add(t)}l.finish(e.instructions);const c=e.geometry;c.indexBuffer.setDataWithSize(l.indexBuffer,l.indexSize,!0),c.buffers[0].setDataWithSize(l.attributeBuffer.float32View,l.attributeSize,!0);const d=l.batches;for(let o=0;o<d.length;o++){const t=d[o];t.bindGroup=(0,r.w)(t.textures.textures,t.textures.count)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){const e=new P;return e.context=t,this._gpuContextHash[t.uid]=e,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(h.Z.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach((t=>{h.Z.return(t)}))}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};k.extension={type:[s.Ag.WebGLSystem,s.Ag.WebGPUSystem,s.Ag.CanvasSystem],name:"graphicsContext"},k.defaultOptions={bezierSmoothness:.5};let B=k},4325:(t,e,i)=>{"use strict";i.d(e,{_:()=>c});var s=i(5242),n=i(3144),r=i(3596),o=i(3682),a=i(6675),h=i(2026);const l=class t{constructor(t,e,i,s){this.uid=(0,h.L)("fillGradient"),this.type="linear",this.gradientStops=[],this._styleKey=null,this.x0=t,this.y0=e,this.x1=i,this.y1=s}addColorStop(t,e){return this.gradientStops.push({offset:t,color:s.Q.shared.setValue(e).toHex()}),this._styleKey=null,this}buildLinearGradient(){const e=t.defaultTextureSize,{gradientStops:i}=this,s=n.e.get().createCanvas();s.width=e,s.height=e;const h=s.getContext("2d"),l=h.createLinearGradient(0,0,t.defaultTextureSize,1);for(let t=0;t<i.length;t++){const e=i[t];l.addColorStop(e.offset,e.color)}h.fillStyle=l,h.fillRect(0,0,e,e),this.texture=new a.g({source:new o.b({resource:s,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});const{x0:c,y0:d,x1:u,y1:p}=this,f=new r.u,_=u-c,g=p-d,m=Math.sqrt(_*_+g*g),x=Math.atan2(g,_);f.translate(-c,-d),f.scale(1/e,1/e),f.rotate(-x),f.scale(256/m,1),this.transform=f,this._styleKey=null}get styleKey(){if(this._styleKey)return this._styleKey;const t=this.gradientStops.map((t=>"".concat(t.offset,"-").concat(t.color))).join("-"),e=this.texture.uid,i=this.transform.toArray().join("-");return"fill-gradient-".concat(this.uid,"-").concat(t,"-").concat(e,"-").concat(i,"-").concat(this.x0,"-").concat(this.y0,"-").concat(this.x1,"-").concat(this.y1)}};l.defaultTextureSize=256;let c=l},1201:(t,e,i)=>{"use strict";i.d(e,{m:()=>o});var s=i(3596),n=i(2026);const r={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class o{constructor(t,e){this.uid=(0,n.L)("fillPattern"),this.transform=new s.u,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=r[e].addressModeU,t.source.style.addressModeV=r[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._styleKey=null}get styleKey(){return this._styleKey||(this._styleKey="fill-pattern-".concat(this.uid,"-").concat(this.texture.uid,"-").concat(this.transform.toArray().join("-"))),this._styleKey}}},4839:(t,e,i)=>{"use strict";i.d(e,{T:()=>p,w:()=>u});var s=i(5242),n=i(3596),r=i(6675),o=i(4325),a=i(1201);function h(t){return t instanceof a.m}function l(t){return t instanceof o._}function c(t,e,i){return t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,{...i,...t}}function d(t,e,i){return e.buildLinearGradient(),t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,{...i,...t}}function u(t,e){if(void 0===t||null===t)return null;const i={},o=t;return function(t){return s.Q.isColorLike(t)}(t)?function(t,e,i){const n=s.Q.shared.setValue(null!==e&&void 0!==e?e:0);return t.color=n.toNumber(),t.alpha=1===n.alpha?i.alpha:n.alpha,t.texture=r.g.WHITE,{...i,...t}}(i,t,e):h(t)?c(i,t,e):l(t)?d(i,t,e):o.fill&&h(o.fill)?c(o,o.fill,e):o.fill&&l(o.fill)?d(o,o.fill,e):function(t,e){const i={...e,...t};if(i.texture){if(i.texture!==r.g.WHITE){var o;const t=(null===(o=i.matrix)||void 0===o?void 0:o.invert())||new n.u;t.scale(1/i.texture.frame.width,1/i.texture.frame.height),i.matrix=t}const t=i.texture.source.style;"clamp-to-edge"===t.addressMode&&(t.addressMode="repeat")}const a=s.Q.shared.setValue(i.color);return i.alpha*=a.alpha,i.color=a.toNumber(),i.matrix=i.matrix?i.matrix.clone():null,i}(o,e)}function p(t,e){const{width:i,alignment:s,miterLimit:n,cap:r,join:o,...a}=e,h=u(t,a);return h?{width:i,alignment:s,miterLimit:n,cap:r,join:o,...h}:null}},4853:(t,e,i)=>{"use strict";i.d(e,{k:()=>a});var s=i(4973),n=i(6675),r=i(3693),o=i(4028);class a extends o.mc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.g.EMPTY;t instanceof n.g&&(t={texture:t});const{texture:e=n.g.EMPTY,anchor:i,roundPixels:r,width:o,height:a,...h}=t;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._didSpriteUpdate=!1,this._bounds={minX:0,maxX:1,minY:0,maxY:0},this._sourceBounds={minX:0,maxX:1,minY:0,maxY:0},this._boundsDirty=!0,this._sourceBoundsDirty=!0,this._roundPixels=0,this._anchor=new s.o({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=null!==r&&void 0!==r&&r,o&&(this.width=o),a&&(this.height=a)}static from(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t instanceof n.g?new a(t):new a(n.g.from(t,e))}set texture(t){t||(t=n.g.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get sourceBounds(){return this._sourceBoundsDirty&&(this._updateSourceBounds(),this._sourceBoundsDirty=!1),this._sourceBounds}containsPoint(t){const e=this.sourceBounds;return t.x>=e.maxX&&t.x<=e.minX&&t.y>=e.maxY&&t.y<=e.minY}addBounds(t){const e=this._texture.trim?this.sourceBounds:this.bounds;t.addFrame(e.minX,e.minY,e.maxX,e.maxY)}onViewUpdate(){if(this._didChangeId+=4096,this._didSpriteUpdate=!0,this._sourceBoundsDirty=this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}_updateBounds(){(0,r.y)(this._bounds,this._anchor,this._texture,0)}_updateSourceBounds(){const t=this._anchor,e=this._texture,i=this._sourceBounds,{width:s,height:n}=e.orig;i.maxX=-t._x*s,i.minX=i.maxX+s,i.maxY=-t._y*n,i.minY=i.maxY+n}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super.destroy(t);if("boolean"===typeof t?t:null===t||void 0===t?void 0:t.texture){const e="boolean"===typeof t?t:null===t||void 0===t?void 0:t.textureSource;this._texture.destroy(e)}this._texture=null,this._bounds=null,this._sourceBounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){"number"===typeof t?this._anchor.set(t):this._anchor.copyFrom(t)}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){let i,s;var n;"object"!==typeof t?(i=t,s=null!==e&&void 0!==e?e:t):(i=t.width,s=null!==(n=t.height)&&void 0!==n?n:t.width);void 0!==i&&this._setWidth(i,this._texture.orig.width),void 0!==s&&this._setHeight(s,this._texture.orig.height)}}},8306:(t,e,i)=>{"use strict";i.d(e,{v:()=>r});var s=i(8379),n=i(4811);class r extends s.A{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return(0,n.t)(n.l,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return(0,n.t)(n.l,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return(0,n.t)(n.l,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return(0,n.t)(n.l,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return(0,n.t)(n.l,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.emit("destroy",this),this.removeAllListeners();for(const i in this.chars){var e;null===(e=this.chars[i].texture)||void 0===e||e.destroy()}this.chars=null,t&&(this.pages.forEach((t=>t.texture.destroy(!0))),this.pages=null)}}},4048:(t,e,i)=>{"use strict";i.d(e,{c:()=>x});var s=i(8656),n=i(4811),r=i(2100),o=i(5242),a=i(4307),h=i(9445),l=i(3682),c=i(6675),d=i(7821),u=i(1915),p=i(5435),f=i(8306);function _(t){if(""===t)return[];"string"===typeof t&&(t=[t]);const e=[];for(let i=0,s=t.length;i<s;i++){const s=t[i];if(Array.isArray(s)){if(2!==s.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got ".concat(s.length,"."));if(0===s[0].length||0===s[1].length)throw new Error("[BitmapFont]: Invalid character delimiter.");const t=s[0].charCodeAt(0),i=s[1].charCodeAt(0);if(i<t)throw new Error("[BitmapFont]: Invalid character range.");for(let s=t,n=i;s<=n;s++)e.push(String.fromCharCode(s))}else e.push(...Array.from(s))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}class g extends f.v{constructor(t){var e,i,s;super(),this.resolution=1,this.pages=[],this._padding=4,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const n=t,r=n.style.clone();n.overrideFill&&(r._fill.color=16777215,r._fill.alpha=1,r._fill.texture=c.g.WHITE,r._fill.fill=null);const o=r.fontSize;r.fontSize=this.baseMeasurementFontSize;const a=(0,u.Z)(r);n.overrideSize?r._stroke&&(r._stroke.width*=this.baseRenderedFontSize/o):r.fontSize=this.baseRenderedFontSize=o,this._style=r,this._skipKerning=null!==(e=n.skipKerning)&&void 0!==e&&e,this.resolution=null!==(i=n.resolution)&&void 0!==i?i:1,this._padding=null!==(s=n.padding)&&void 0!==s?s:4,this.fontMetrics=d.P.measureFont(a),this.lineHeight=r.lineHeight||this.fontMetrics.fontSize||r.fontSize}ensureCharacters(t){const e=_(t).filter((t=>!this._currentChars.includes(t))).filter(((t,e,i)=>i.indexOf(t)===e));if(!e.length)return;let i;this._currentChars=[...this._currentChars,...e],i=-1===this._currentPageIndex?this._nextPage():this.pages[this._currentPageIndex];let{canvas:s,context:n}=i.canvasAndContext,r=i.texture.source;const o=this._style;let h=this._currentX,l=this._currentY;const u=this.baseRenderedFontSize/this.baseMeasurementFontSize,p=this._padding*u,f="italic"===o.fontStyle?2:1;let g=0,m=!1;for(let _=0;_<e.length;_++){var x,y,v,b;const t=e[_],i=d.P.measureText(t,o,s,!1);i.lineHeight=i.height;const w=f*i.width*u,S=w+2*p,A=i.height*u+2*p;if(m=!1,"\n"!==t&&"\r"!==t&&"\t"!==t&&" "!==t&&(m=!0,g=Math.ceil(Math.max(A,g))),h+S>512&&(l+=g,g=A,h=0,l+g>512)){r.update();const t=this._nextPage();s=t.canvasAndContext.canvas,n=t.canvasAndContext.context,r=t.texture.source,l=0}const C=w/u-(null!==(x=null===(y=o.dropShadow)||void 0===y?void 0:y.distance)&&void 0!==x?x:0)-(null!==(v=null===(b=o._stroke)||void 0===b?void 0:b.width)&&void 0!==v?v:0);if(this.chars[t]={id:t.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:C,kerning:{}},m){this._drawGlyph(n,i,h+p,l+p,u,o);const e=r.width*u,s=r.height*u,d=new a.M(h/e*r.width,l/s*r.height,S/e*r.width,A/s*r.height);this.chars[t].texture=new c.g({source:r,frame:d}),h+=Math.ceil(S)}}r.update(),this._currentX=h,this._currentY=l,this._skipKerning&&this._applyKerning(e,n)}get pageTextures(){return(0,n.t)(n.l,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,e){const i=this._measureCache;for(let s=0;s<t.length;s++){const n=t[s];for(let t=0;t<this._currentChars.length;t++){const s=this._currentChars[t];let r=i[n];r||(r=i[n]=e.measureText(n).width);let o=i[s];o||(o=i[s]=e.measureText(s).width);let a=e.measureText(n+s).width,h=a-(r+o);h&&(this.chars[n].kerning[s]=h),a=e.measureText(n+s).width,h=a-(r+o),h&&(this.chars[s].kerning[n]=h)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,e=h.N.getOptimalCanvasAndContext(512,512,t);this._setupContext(e.context,this._style,t);const i=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),s={canvasAndContext:e,texture:new c.g({source:new l.b({resource:e.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload"})})};return this.pages[this._currentPageIndex]=s,s}_setupContext(t,e,i){var s;e.fontSize=this.baseRenderedFontSize,t.scale(i,i),t.font=(0,u.Z)(e),e.fontSize=this.baseMeasurementFontSize,t.textBaseline=e.textBaseline;const n=e._stroke,r=null!==(s=null===n||void 0===n?void 0:n.width)&&void 0!==s?s:0;if(n&&(t.lineWidth=r,t.lineJoin=n.join,t.miterLimit=n.miterLimit,t.strokeStyle=(0,p.r)(n,t)),e._fill&&(t.fillStyle=(0,p.r)(e._fill,t)),e.dropShadow){const s=e.dropShadow,n=o.Q.shared.setValue(s.color).toArray(),r=s.blur*i,a=s.distance*i;t.shadowColor="rgba(".concat(255*n[0],",").concat(255*n[1],",").concat(255*n[2],",").concat(s.alpha,")"),t.shadowBlur=r,t.shadowOffsetX=Math.cos(s.angle)*a,t.shadowOffsetY=Math.sin(s.angle)*a}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,e,i,s,n,r){var o;const a=e.text,h=e.fontProperties,l=r._stroke,c=(null!==(o=null===l||void 0===l?void 0:l.width)&&void 0!==o?o:0)*n,d=i+c/2,u=s-c/2,p=h.descent*n,f=e.lineHeight*n;r.stroke&&c&&t.strokeText(a,d,u+f-p),r._fill&&t.fillText(a,d,u+f-p)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:e,texture:i}=this.pages[t];h.N.returnCanvasAndContext(e),i.destroy(!0)}this.pages=null}}var m=i(5310);const x=new class{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(t,e){var i;let n="".concat(e.fontFamily,"-bitmap"),r=!0;if(e._fill.fill&&(n+=e._fill.fill.uid,r=!1),!s.l.has(n)){const t=new g({style:e,overrideFill:r,overrideSize:!0,...this.defaultOptions});t.once("destroy",(()=>s.l.remove(n))),s.l.set(n,t)}const o=s.l.get(n);return null===(i=o.ensureCharacters)||void 0===i||i.call(o,t),o}getLayout(t,e){const i=this.getFont(t,e);return(0,m.Z)([...t],e,i)}measureText(t,e){return this.getLayout(t,e)}install(){var t;let e=arguments.length<=0?void 0:arguments[0];var i,o,a,h;"string"===typeof e&&(e={name:e,style:arguments.length<=1?void 0:arguments[1],chars:null===(i=arguments.length<=2?void 0:arguments[2])||void 0===i?void 0:i.chars,resolution:null===(o=arguments.length<=2?void 0:arguments[2])||void 0===o?void 0:o.resolution,padding:null===(a=arguments.length<=2?void 0:arguments[2])||void 0===a?void 0:a.padding,skipKerning:null===(h=arguments.length<=2?void 0:arguments[2])||void 0===h?void 0:h.skipKerning},(0,n.t)(n.l,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const l=null===(t=e)||void 0===t?void 0:t.name;if(!l)throw new Error("[BitmapFontManager] Property `name` is required.");e={...this.defaultOptions,...e};const c=e.style,d=c instanceof r.x?c:new r.x(c),u=null!==d._fill.fill&&void 0!==d._fill.fill,p=new g({style:d,overrideFill:u,skipKerning:e.skipKerning,padding:e.padding,resolution:e.resolution,overrideSize:!1}),f=_(e.chars);return p.ensureCharacters(f.join("")),s.l.set("".concat(l,"-bitmap"),p),p.once("destroy",(()=>s.l.remove("".concat(l,"-bitmap")))),p}uninstall(t){const e="".concat(t,"-bitmap"),i=s.l.get(e);i&&(s.l.remove(e),i.destroy())}}},5310:(t,e,i)=>{"use strict";function s(t,e,i){const s={width:0,height:0,offsetY:0,scale:e.fontSize/i.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};s.offsetY=i.baseLineOffset;let n=s.lines[0],r=null,o=!0;const a={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},h=t=>{const e=n.width;for(let i=0;i<a.index;i++){const s=t.positions[i];n.chars.push(t.chars[i]),n.charPositions.push(s+e)}n.width+=t.width,o=!1,a.width=0,a.index=0,a.chars.length=0},l=()=>{let t=n.chars.length-1,e=n.chars[t];for(;" "===e;)n.width-=i.chars[e].xAdvance,e=n.chars[--t];s.width=Math.max(s.width,n.width),n={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},o=!0,s.lines.push(n),s.height+=i.lineHeight},c=i.baseMeasurementFontSize/e.fontSize,d=e.letterSpacing*c,u=e.wordWrapWidth*c;for(let p=0;p<t.length+1;p++){let s;const c=p===t.length;c||(s=t[p]);const f=i.chars[s]||i.chars[" "];if(/(?:\s)/.test(s)||"\r"===s||"\n"===s||c){if(!o&&e.wordWrap&&n.width+a.width-d>u?(l(),h(a),c||n.charPositions.push(0)):(a.start=n.width,h(a),c||n.charPositions.push(0)),"\r"===s||"\n"===s)0!==n.width&&l();else if(!c){const t=f.xAdvance+(f.kerning[r]||0)+d;n.width+=t,n.spaceWidth=t,n.spacesIndex.push(n.charPositions.length),n.chars.push(s)}}else{const t=f.kerning[r]||0,e=f.xAdvance+t+d;a.positions[a.index++]=a.width+t,a.chars.push(s),a.width+=e}r=s}return l(),"center"===e.align?function(t){for(let e=0;e<t.lines.length;e++){const i=t.lines[e],s=t.width/2-i.width/2;for(let t=0;t<i.charPositions.length;t++)i.charPositions[t]+=s}}(s):"right"===e.align?function(t){for(let e=0;e<t.lines.length;e++){const i=t.lines[e],s=t.width-i.width;for(let t=0;t<i.charPositions.length;t++)i.charPositions[t]+=s}}(s):"justify"===e.align&&function(t){const e=t.width;for(let i=0;i<t.lines.length;i++){const s=t.lines[i];let n=0,r=s.spacesIndex[n++],o=0;const a=s.spacesIndex.length,h=(e-s.width)/a;for(let t=0;t<s.charPositions.length;t++)t===r&&(r=s.spacesIndex[n++],o+=h),s.charPositions[t]+=o}}(s),s}i.d(e,{Z:()=>s})},2100:(t,e,i)=>{"use strict";i.d(e,{x:()=>u});var s=i(8379),n=i(5242),r=i(4811),o=i(4325),a=i(1201),h=i(7861),l=i(4839),c=i(3686);const d=class t extends s.A{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),function(t){const e=t;if("boolean"===typeof e.dropShadow&&e.dropShadow){var i,s,h,l,c;const n=u.defaultDropShadow;t.dropShadow={alpha:null!==(i=e.dropShadowAlpha)&&void 0!==i?i:n.alpha,angle:null!==(s=e.dropShadowAngle)&&void 0!==s?s:n.angle,blur:null!==(h=e.dropShadowBlur)&&void 0!==h?h:n.blur,color:null!==(l=e.dropShadowColor)&&void 0!==l?l:n.color,distance:null!==(c=e.dropShadowDistance)&&void 0!==c?c:n.distance}}if(void 0!==e.strokeThickness){(0,r.t)(r.l,"strokeThickness is now a part of stroke");const i=e.stroke;let s={};if(n.Q.isColorLike(i))s.color=i;else if(i instanceof o._||i instanceof a.m)s.fill=i;else{if(!Object.hasOwnProperty.call(i,"color")&&!Object.hasOwnProperty.call(i,"fill"))throw new Error("Invalid stroke value.");s=i}t.stroke={...s,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){let i;(0,r.t)(r.l,"gradient fill is now a fill pattern: `new FillGradient(...)`"),null==t.fontSize?t.fontSize=u.defaultTextStyle.fontSize:i="string"===typeof t.fontSize?parseInt(t.fontSize,10):t.fontSize;const s=new o._(0,0,0,1.7*i),a=e.fillGradientStops.map((t=>n.Q.shared.setValue(t).toNumber()));a.forEach(((t,e)=>{const i=e/(a.length-1);s.addColorStop(i,t)})),t.fill={fill:s}}}(e);const i={...t.defaultTextStyle,...e};for(const t in i){this[t]=i[t]}this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow=null!==e&&"object"===typeof e?this._createProxy({...t.defaultDropShadow,...e}):e?this._createProxy({...t.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize="string"===typeof t?parseInt(t,10):t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t,this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...h.T.defaultFillStyle,...t},(()=>{this._fill=(0,l.w)({...this._originalFill},h.T.defaultFillStyle)}))),this._fill=(0,l.w)(0===t?"black":t,h.T.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...h.T.defaultStrokeStyle,...t},(()=>{this._stroke=(0,l.T)({...this._originalStroke},h.T.defaultStrokeStyle)}))),this._stroke=(0,l.T)(t,h.T.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=(0,c.V)(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const e=t.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new t({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.removeAllListeners();if("boolean"===typeof t?t:null===t||void 0===t?void 0:t.texture){var e,i,s,n;const r="boolean"===typeof t?t:null===t||void 0===t?void 0:t.textureSource;null!==(e=this._fill)&&void 0!==e&&e.texture&&this._fill.texture.destroy(r),null!==(i=this._originalFill)&&void 0!==i&&i.texture&&this._originalFill.texture.destroy(r),null!==(s=this._stroke)&&void 0!==s&&s.texture&&this._stroke.texture.destroy(r),null!==(n=this._originalStroke)&&void 0!==n&&n.texture&&this._originalStroke.texture.destroy(r)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(t,i,s)=>(t[i]=s,null===e||void 0===e||e(i,s),this.update(),!0)})}_isFillStyle(t){return null!==(null!==t&&void 0!==t?t:null)&&!(n.Q.isColorLike(t)||t instanceof o._||t instanceof a.m)}};d.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},d.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let u=d},7821:(t,e,i)=>{"use strict";i.d(e,{P:()=>a});var s=i(3144),n=i(1915);const r={willReadFrequently:!0},o=class t{static get experimentalLetterSpacingSupported(){let e=t._experimentalLetterSpacingSupported;if(void 0!==e){const i=s.e.get().getCanvasRenderingContext2D().prototype;e=t._experimentalLetterSpacingSupported="letterSpacing"in i||"textLetterSpacing"in i}return e}constructor(t,e,i,s,n,r,o,a,h){this.text=t,this.style=e,this.width=i,this.height=s,this.lines=n,this.lineWidths=r,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=h}static measureText(){var e;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",s=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.wordWrap;const a="".concat(i,":").concat(s.styleKey);if(t._measurementCache[a])return t._measurementCache[a];const h=(0,n.Z)(s),l=t.measureFont(h);0===l.fontSize&&(l.fontSize=s.fontSize,l.ascent=s.fontSize);const c=t.__context;c.font=h;const d=(o?t._wordWrap(i,s,r):i).split(/(?:\r\n|\r|\n)/),u=new Array(d.length);let p=0;for(let n=0;n<d.length;n++){const e=t._measureText(d[n],s.letterSpacing,c);u[n]=e,p=Math.max(p,e)}const f=(null===(e=s._stroke)||void 0===e?void 0:e.width)||0;let _=p+f;s.dropShadow&&(_+=s.dropShadow.distance);const g=s.lineHeight||l.fontSize+f;let m=Math.max(g,l.fontSize+2*f)+(d.length-1)*(g+s.leading);s.dropShadow&&(m+=s.dropShadow.distance);return new t(i,s,_,m,d,u,g+s.leading,p,l)}static _measureText(e,i,s){let n=!1;t.experimentalLetterSpacingSupported&&(t.experimentalLetterSpacing?(s.letterSpacing="".concat(i,"px"),s.textLetterSpacing="".concat(i,"px"),n=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));let r=s.measureText(e).width;return r>0&&(n?r-=i:r+=(t.graphemeSegmenter(e).length-1)*i),r}static _wordWrap(e,i){const s=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas).getContext("2d",r);let n=0,o="",a="";const h=Object.create(null),{letterSpacing:l,whiteSpace:c}=i,d=t._collapseSpaces(c),u=t._collapseNewlines(c);let p=!d;const f=i.wordWrapWidth+l,_=t._tokenize(e);for(let r=0;r<_.length;r++){let e=_[r];if(t._isNewline(e)){if(!u){a+=t._addLine(o),p=!d,o="",n=0;continue}e=" "}if(d){const i=t.isBreakingSpace(e),s=t.isBreakingSpace(o[o.length-1]);if(i&&s)continue}const c=t._getFromCache(e,l,h,s);if(c>f)if(""!==o&&(a+=t._addLine(o),o="",n=0),t.canBreakWords(e,i.breakWords)){const r=t.wordWrapSplit(e);for(let c=0;c<r.length;c++){let d=r[c],u=d,_=1;for(;r[c+_];){const s=r[c+_];if(t.canBreakChars(u,s,e,c,i.breakWords))break;d+=s,u=s,_++}c+=_-1;const g=t._getFromCache(d,l,h,s);g+n>f&&(a+=t._addLine(o),p=!1,o="",n=0),o+=d,n+=g}}else{o.length>0&&(a+=t._addLine(o),o="",n=0);const i=r===_.length-1;a+=t._addLine(e,!i),p=!1,o="",n=0}else c+n>f&&(p=!1,a+=t._addLine(o),o="",n=0),(o.length>0||!t.isBreakingSpace(e)||p)&&(o+=e,n+=c)}return a+=t._addLine(o,!1),a}static _addLine(e){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e=t._trimRight(e),e=i?"".concat(e,"\n"):e}static _getFromCache(e,i,s,n){let r=s[e];return"number"!==typeof r&&(r=t._measureText(e,i,n)+i,s[e]=r),r}static _collapseSpaces(t){return"normal"===t||"pre-line"===t}static _collapseNewlines(t){return"normal"===t}static _trimRight(e){if("string"!==typeof e)return"";for(let i=e.length-1;i>=0;i--){const s=e[i];if(!t.isBreakingSpace(s))break;e=e.slice(0,-1)}return e}static _isNewline(e){return"string"===typeof e&&t._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,i){return"string"===typeof e&&t._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const i=[];let s="";if("string"!==typeof e)return i;for(let n=0;n<e.length;n++){const r=e[n],o=e[n+1];t.isBreakingSpace(r,o)||t._isNewline(r)?(""!==s&&(i.push(s),s=""),i.push(r)):s+=r}return""!==s&&i.push(s),i}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,s,n){return!0}static wordWrapSplit(e){return t.graphemeSegmenter(e)}static measureFont(e){if(t._fonts[e])return t._fonts[e];const i=t._context;i.font=e;const s=i.measureText(t.METRICS_STRING+t.BASELINE_SYMBOL),n={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return t._fonts[e]=n,n}static clearMetrics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?delete t._fonts[e]:t._fonts={}}static get _canvas(){if(!t.__canvas){let i;try{const e=new OffscreenCanvas(0,0),n=e.getContext("2d",r);if(null!==n&&void 0!==n&&n.measureText)return t.__canvas=e,e;i=s.e.get().createCanvas()}catch(e){i=s.e.get().createCanvas()}i.width=i.height=10,t.__canvas=i}return t.__canvas}static get _context(){return t.__context||(t.__context=t._canvas.getContext("2d",r)),t.__context}};o.METRICS_STRING="|\xc9q\xc5",o.BASELINE_SYMBOL="M",o.BASELINE_MULTIPLIER=1.4,o.HEIGHT_MULTIPLIER=2,o.graphemeSegmenter=(t=>{if("function"===typeof(null===(t=Intl)||void 0===t?void 0:t.Segmenter)){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map((t=>t.segment))}return t=>[...t]})(),o.experimentalLetterSpacing=!1,o._fonts={},o._newlines=[10,13],o._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],o._measurementCache={};let a=o},1915:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const s=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function n(t){const e="number"===typeof t.fontSize?"".concat(t.fontSize,"px"):t.fontSize;let i=t.fontFamily;Array.isArray(t.fontFamily)||(i=t.fontFamily.split(","));for(let n=i.length-1;n>=0;n--){let t=i[n].trim();/([\"\'])[^\'\"]+\1/.test(t)||s.includes(t)||(t='"'.concat(t,'"')),i[n]=t}return"".concat(t.fontStyle," ").concat(t.fontVariant," ").concat(t.fontWeight," ").concat(e," ").concat(i.join(","))}},5435:(t,e,i)=>{"use strict";i.d(e,{r:()=>l});var s=i(5242),n=i(3596),r=i(6675),o=i(279),a=i(4325),h=i(1201);function l(t,e){if(t.texture===r.g.WHITE&&!t.fill)return s.Q.shared.setValue(t.color).toHex();if(!t.fill){const i=e.createPattern(t.texture.source.resource,"repeat"),s=t.matrix.copyTo(n.u.shared);return s.scale(t.texture.frame.width,t.texture.frame.height),i.setTransform(s),i}if(t.fill instanceof h.m){const i=t.fill,s=e.createPattern(i.texture.source.resource,"repeat"),r=i.transform.copyTo(n.u.shared);return r.scale(i.texture.frame.width,i.texture.frame.height),s.setTransform(r),s}if(t.fill instanceof a._){const i=t.fill;if("linear"===i.type){const t=e.createLinearGradient(i.x0,i.y0,i.x1,i.y1);return i.gradientStops.forEach((e=>{t.addColorStop(e.offset,s.Q.shared.setValue(e.color).toHex())})),t}}return(0,o.R)("FillStyle not recognised",t),"red"}},3686:(t,e,i)=>{"use strict";i.d(e,{V:()=>r});var s=i(5242);const n=["align","breakWords","cssOverrides","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth"];function r(t){const e=[];let i=0;for(let s=0;s<n.length;s++){const r="_".concat(n[s]);e[i++]=t[r]}return i=o(t._fill,e,i),i=function(t,e,i){return t?(i=o(t,e,i),e[i++]=t.width,e[i++]=t.alignment,e[i++]=t.cap,e[i++]=t.join,e[i++]=t.miterLimit,i):i}(t._stroke,e,i),i=function(t,e,i){return t?(e[i++]=t.alpha,e[i++]=t.angle,e[i++]=t.blur,e[i++]=t.distance,e[i++]=s.Q.shared.setValue(t.color).toNumber(),i):i}(t.dropShadow,e,i),e.join("-")}function o(t,e,i){var s;return t?(e[i++]=t.color,e[i++]=t.alpha,e[i++]=null===(s=t.fill)||void 0===s?void 0:s.styleKey,i):i}},5341:(t,e,i)=>{"use strict";var s=i(1478),n=i(366),r=i(1451),o=i(7960),a=i(6675),h=i(6268),l=i(4307);const c=class t{constructor(t,e){this.linkedSheets=[],this._texture=t instanceof a.g?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=e;const i=parseFloat(e.meta.scale);i?(this.resolution=i,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise((e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()}))}_processFrames(e){let i=e;const s=t.BATCH_SIZE;for(;i-e<s&&i<this._frameKeys.length;){const t=this._frameKeys[i],e=this._frames[t],s=e.frame;if(s){let i=null,n=null;const r=!1!==e.trimmed&&e.sourceSize?e.sourceSize:e.frame,o=new l.M(0,0,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution);i=e.rotated?new l.M(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new l.M(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),!1!==e.trimmed&&e.spriteSourceSize&&(n=new l.M(Math.floor(e.spriteSourceSize.x)/this.resolution,Math.floor(e.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[t]=new a.g({source:this.textureSource,frame:i,orig:o,trim:n,rotate:e.rotated?2:0,defaultAnchor:e.anchor,defaultBorders:e.borders,label:t.toString()})}i++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const s=t[e][i];this.animations[e].push(this.textures[s])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((()=>{this._batchIndex*t.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())}),0)}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(const i in this.textures)this.textures[i].destroy();var e;(this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t)&&(null===(e=this._texture)||void 0===e||e.destroy(),this.textureSource.destroy());this._texture=null,this.textureSource=null,this.linkedSheets=[]}};c.BATCH_SIZE=1e3;let d=c;const u=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function p(t,e,i){const s={};if(t.forEach((t=>{s[t]=e})),Object.keys(e.textures).forEach((t=>{s[t]=e.textures[t]})),!i){const i=h.A.dirname(t[0]);e.linkedSheets.forEach(((t,n)=>{const r=p(["".concat(i,"/").concat(e.data.meta.related_multi_packs[n])],t,!0);Object.assign(s,r)}))}return s}const f={extension:s.Ag.Asset,cache:{test:t=>t instanceof d,getCacheableAssets:(t,e)=>p(t,e,!1)},resolver:{extension:{type:s.Ag.ResolveParser,name:"resolveSpritesheet"},test:t=>{const e=t.split("?")[0].split("."),i=e.pop(),s=e.pop();return"json"===i&&u.includes(s)},parse:t=>{var e,i;const s=t.split(".");return{resolution:parseFloat(null!==(e=null===(i=r.x.RETINA_PREFIX.exec(t))||void 0===i?void 0:i[1])&&void 0!==e?e:"1"),format:s[s.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:s.Ag.LoadParser,priority:n.T.Normal,name:"spritesheetLoader"},testParse:async(t,e)=>".json"===h.A.extname(e.src).toLowerCase()&&!!t.frames,async parse(t,e,i){var s,n;const{texture:r,imageFilename:l}=null!==(s=null===e||void 0===e?void 0:e.data)&&void 0!==s?s:{};let c,u=h.A.dirname(e.src);if(u&&u.lastIndexOf("/")!==u.length-1&&(u+="/"),r instanceof a.g)c=r;else{const s=(0,o.Y)(u+(null!==l&&void 0!==l?l:t.meta.image),e.src);c=(await i.load([s]))[s]}const p=new d(c.source,t);await p.parse();const f=null===t||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.related_multi_packs;if(Array.isArray(f)){const t=[];for(const n of f){var _;if("string"!==typeof n)continue;let s=u+n;null!==(_=e.data)&&void 0!==_&&_.ignoreMultiPack||(s=(0,o.Y)(s,e.src),t.push(i.load({src:s,data:{ignoreMultiPack:!0}})))}const s=await Promise.all(t);p.linkedSheets=s,s.forEach((t=>{t.linkedSheets=[p].concat(p.linkedSheets.filter((e=>e!==t)))}))}return p},async unload(t,e,i){await i.unload(t.textureSource._sourceOrigin),t.destroy(!1)}}};s.XO.add(f)},1456:(t,e,i)=>{"use strict";i.d(e,{R:()=>o});var s=i(6493);class n{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=i,this._once=s}match(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const r=class t{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new n(null,null,1/0),this.deltaMS=1/t.targetFPMS,this.elapsedMS=1/t.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.d.NORMAL;return this._addListener(new n(t,e,i))}addOnce(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.d.NORMAL;return this._addListener(new n(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(){let e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now();if(i>this.lastTime){if(e=this.elapsedMS=i-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const t=i-this._lastFrame|0;if(t<this._minElapsedMS)return;this._lastFrame=i-t%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*t.targetFPMS;const s=this._head;let n=s.next;for(;n;)n=n.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=i}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const i=Math.min(this.maxFPS,e),s=Math.min(Math.max(0,i)/1e3,t.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(0===t)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!t._shared){const e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared}static get system(){if(!t._system){const e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system}};r.targetFPMS=.06;let o=r},6493:(t,e,i)=>{"use strict";i.d(e,{d:()=>s});var s=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(s||{})},5813:(t,e,i)=>{"use strict";let s;async function n(){var t;return null!==(t=s)&&void 0!==t||(s=(async t=>{const e=document.createElement("canvas").getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const i=await new Promise((t=>{const e=document.createElement("video");e.onloadeddata=()=>t(e),e.onerror=()=>t(null),e.autoplay=!1,e.crossOrigin="anonymous",e.preload="auto",e.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",e.load()}));if(!i)return"premultiply-alpha-on-upload";const s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const n=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i);const r=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,r),e.deleteFramebuffer(n),e.deleteTexture(s),null===(t=e.getExtension("WEBGL_lose_context"))||void 0===t||t.loseContext(),r[0]<=r[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),s}i.d(e,{C:()=>n})},4668:(t,e,i)=>{"use strict";let s;function n(){if("boolean"===typeof s)return s;try{const t=new Function("param1","param2","param3","return param1[param2] === param3;");s=!0===t({a:"b"},"a","b")}catch(t){s=!1}return s}i.d(e,{f:()=>n})},3772:(t,e,i)=>{"use strict";function s(t,e,i){const s=t.length;let n;if(e>=s||0===i)return;const r=s-(i=e+i>s?s-e:i);for(n=e;n<r;++n)t[n]=t[n+i];t.length=r}i.d(e,{d:()=>s})},2026:(t,e,i)=>{"use strict";i.d(e,{L:()=>n});const s={default:-1};function n(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return void 0===s[t]&&(s[t]=-1),++s[t]}},3693:(t,e,i)=>{"use strict";function s(t,e,i,s){const{width:n,height:r}=i.orig,o=i.trim;if(o){const i=o.width,a=o.height;t.minX=o.x-e._x*n-s,t.maxX=t.minX+i,t.minY=o.y-e._y*r-s,t.maxY=t.minY+a}else t.minX=-e._x*n-s,t.maxX=t.minX+n,t.minY=-e._y*r-s,t.maxY=t.minY+r}i.d(e,{y:()=>s})},4811:(t,e,i)=>{"use strict";i.d(e,{l:()=>n,t:()=>r});const s={},n="8.0.0";function r(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(s[e])return;let n=(new Error).stack;"undefined"===typeof n?console.warn("PixiJS Deprecation Warning: ","".concat(e,"\nDeprecated since v").concat(t)):(n=n.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6","".concat(e,"\nDeprecated since v").concat(t)),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ","".concat(e,"\nDeprecated since v").concat(t)),console.warn(n))),s[e]=!0}},279:(t,e,i)=>{"use strict";i.d(e,{R:()=>r});let s=0;const n=500;function r(){if(s!==n)if(s++,s===n)console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS.");else{for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];console.warn("PixiJS Warning: ",...e)}}},6268:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var s=i(3144);function n(t){if("string"!==typeof t)throw new TypeError("Path must be a string. Received ".concat(JSON.stringify(t)))}function r(t){return t.split("?")[0].split("#")[0]}const o={toPosix(t){return e="\\",i="/",t.replace(new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),i);var e,i},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:t=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t),isBlobUrl:t=>t.startsWith("blob:"),hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){n(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const i=/^[^/:]+:\/{0,2}/.exec(t);return i?i[0]:""},toAbsolute(t,e,i){if(n(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const a=r(this.toPosix(null!==e&&void 0!==e?e:s.e.get().getBaseUrl())),h=r(this.toPosix(null!==i&&void 0!==i?i:this.rootname(a)));if((t=this.toPosix(t)).startsWith("/"))return o.join(h,t.slice(1));return this.isAbsolute(t)?t:this.join(a,t)},normalize(t){if(n(t),0===t.length)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;let e="";const i=(t=this.toPosix(t)).startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const s=t.endsWith("/");return(t=function(t,e){let i="",s=0,n=-1,r=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(47===o)break;o=47}if(47===o){if(n===a-1||1===r);else if(n!==a-1&&2===r){if(i.length<2||2!==s||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){const t=i.lastIndexOf("/");if(t!==i.length-1){-1===t?(i="",s=0):(i=i.slice(0,t),s=i.length-1-i.lastIndexOf("/")),n=a,r=0;continue}}else if(2===i.length||1===i.length){i="",s=0,n=a,r=0;continue}e&&(i.length>0?i+="/..":i="..",s=2)}else i.length>0?i+="/".concat(t.slice(n+1,a)):i=t.slice(n+1,a),s=a-n-1;n=a,r=0}else 46===o&&-1!==r?++r:r=-1}return i}(t,!1)).length>0&&s&&(t+="/"),i?"/".concat(t):e+t},isAbsolute(t){return n(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join(){if(0===arguments.length)return".";let t;for(let i=0;i<arguments.length;++i){const s=i<0||arguments.length<=i?void 0:arguments[i];if(n(s),s.length>0)if(void 0===t)t=s;else{var e;const n=null!==(e=i-1<0||arguments.length<=i-1?void 0:arguments[i-1])&&void 0!==e?e:"";this.joinExtensions.includes(this.extname(n).toLowerCase())?t+="/../".concat(s):t+="/".concat(s)}}return void 0===t?".":this.normalize(t)},dirname(t){if(n(t),0===t.length)return".";let e=(t=this.toPosix(t)).charCodeAt(0);const i=47===e;let s=-1,r=!0;const o=this.getProtocol(t),a=t;for(let n=(t=t.slice(o.length)).length-1;n>=1;--n)if(e=t.charCodeAt(n),47===e){if(!r){s=n;break}}else r=!1;return-1===s?i?"/":this.isUrl(a)?o+t:o:i&&1===s?"//":o+t.slice(0,s)},rootname(t){n(t);let e="";if(e=(t=this.toPosix(t)).startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)){const i=t.indexOf("/",e.length);e=-1!==i?t.slice(0,i):t,e.endsWith("/")||(e+="/")}return e},basename(t,e){n(t),e&&n(e),t=r(this.toPosix(t));let i,s=0,o=-1,a=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let n=e.length-1,r=-1;for(i=t.length-1;i>=0;--i){const h=t.charCodeAt(i);if(47===h){if(!a){s=i+1;break}}else-1===r&&(a=!1,r=i+1),n>=0&&(h===e.charCodeAt(n)?-1===--n&&(o=i):(n=-1,o=r))}return s===o?o=r:-1===o&&(o=t.length),t.slice(s,o)}for(i=t.length-1;i>=0;--i)if(47===t.charCodeAt(i)){if(!a){s=i+1;break}}else-1===o&&(a=!1,o=i+1);return-1===o?"":t.slice(s,o)},extname(t){n(t);let e=-1,i=0,s=-1,o=!0,a=0;for(let n=(t=r(this.toPosix(t))).length-1;n>=0;--n){const r=t.charCodeAt(n);if(47!==r)-1===s&&(o=!1,s=n+1),46===r?-1===e?e=n:1!==a&&(a=1):-1!==e&&(a=-1);else if(!o){i=n+1;break}}return-1===e||-1===s||0===a||1===a&&e===s-1&&e===i+1?"":t.slice(e,s)},parse(t){n(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;let i=(t=r(this.toPosix(t))).charCodeAt(0);const s=this.isAbsolute(t);let o;e.root=this.rootname(t),o=s||this.hasProtocol(t)?1:0;let a=-1,h=0,l=-1,c=!0,d=t.length-1,u=0;for(;d>=o;--d)if(i=t.charCodeAt(d),47!==i)-1===l&&(c=!1,l=d+1),46===i?-1===a?a=d:1!==u&&(u=1):-1!==a&&(u=-1);else if(!c){h=d+1;break}return-1===a||-1===l||0===u||1===u&&a===l-1&&a===h+1?-1!==l&&(e.base=e.name=0===h&&s?t.slice(1,l):t.slice(h,l)):(0===h&&s?(e.name=t.slice(1,a),e.base=t.slice(1,l)):(e.name=t.slice(h,a),e.base=t.slice(h,l)),e.ext=t.slice(a,l)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]}},8152:(t,e,i)=>{"use strict";i.d(e,{b:()=>s});class s{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){var e,i;let s;return s=this._index>0?this._pool[--this._index]:new this._classType,null===(e=(i=s).init)||void 0===e||e.call(i,t),s}return(t){var e;null===(e=t.reset)||void 0===e||e.call(t),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}}},9769:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var s=i(8152);const n=new class{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new s.b(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach((e=>{const i=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[i]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}})),t}}}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,i),r.exports}i.m=t,i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.f={},i.e=t=>Promise.all(Object.keys(i.f).reduce(((e,s)=>(i.f[s](t,e),e)),[])),i.u=t=>"static/js/"+t+"."+{83:"e86d40de",90:"76be0158",258:"01213f59",298:"1d98bf52",372:"73d56d18",627:"122f2c6c",929:"85e46c61"}[t]+".chunk.js",i.miniCssF=t=>{},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="game-dev-assessment:";i.l=(s,n,r,o)=>{if(t[s])t[s].push(n);else{var a,h;if(void 0!==r)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==s||d.getAttribute("data-webpack")==e+r){a=d;break}}a||(h=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",e+r),a.src=s),t[s]=[n];var u=(e,i)=>{a.onerror=a.onload=null,clearTimeout(p);var n=t[s];if(delete t[s],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((t=>t(i))),e)return e(i)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=u.bind(null,a.onerror),a.onload=u.bind(null,a.onload),h&&document.head.appendChild(a)}}})(),i.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.p="/rps-spinbattle/",(()=>{var t={792:0};i.f.j=(e,s)=>{var n=i.o(t,e)?t[e]:void 0;if(0!==n)if(n)s.push(n[2]);else{var r=new Promise(((i,s)=>n=t[e]=[i,s]));s.push(n[2]=r);var o=i.p+i.u(e),a=new Error;i.l(o,(s=>{if(i.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var r=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.src;a.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",a.name="ChunkLoadError",a.type=r,a.request=o,n[1](a)}}),"chunk-"+e,e)}};var e=(e,s)=>{var n,r,o=s[0],a=s[1],h=s[2],l=0;if(o.some((e=>0!==t[e]))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(h)h(i)}for(e&&e(s);l<o.length;l++)r=o[l],i.o(t,r)&&t[r]&&t[r][0](),t[r]=0},s=self.webpackChunkgame_dev_assessment=self.webpackChunkgame_dev_assessment||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})(),(()=>{"use strict";class t{constructor(t){this.Renderer=void 0,this.Renderer=t}}class e extends t{constructor(t,e){super(t),this._id=void 0,this._id=e}}class s extends e{get Disabled(){return this._disabled}set Disabled(t){this._disabled=t,this._container&&(this._container.tint=t?12303291:16777215)}get GoContainer(){return this._container}constructor(t,e){super(t,e),this._container=void 0,this._disabled=void 0,this._container=void 0,this._disabled=!1}Transform(t,e,i,s){this._container&&(this._container.width=i,this._container.height=s,this._container.x=t,this._container.y=e)}Dispose(){this._container&&(this._container=void 0,this.Renderer.Remove(this._id))}Hide(){this._container&&(this._container.visible=!1)}Show(){this._container&&(this._container.visible=!0)}}class n extends s{constructor(t,e,i,s){super(t,e),this._pressedSize=.9,this._pressedFrames=3,this._pressed=0,this._transform=void 0,this._pressedHandler=void 0,this._container=t.StageSpriteButton(this._id,i,(()=>{this._container&&0===this._pressed&&(this._disabled||(this._transform=[this._container.x,this._container.y,this._container.width,this._container.height],this._pressed=this._pressedFrames,this._pressedHandler=s))}))}Update(t){if(this._container&&0!==this._pressed){if(1===this._pressed)return this._pressed=0,void(this._transform&&(this.Transform(this._transform[0],this._transform[1],this._transform[2],this._transform[3]),this._pressedHandler&&this._pressedHandler()));const e=this._container.width*this._pressedSize*t,i=this._container.height*this._pressedSize*t,s=this._container.x+(this._container.width-e)/2,n=this._container.y+(this._container.height-i)/2;this.Transform(s,n,e,i),this._pressed--}}}class r extends s{constructor(t,e,i,s){super(t,e),this._maxSize=1.05,this._minSize=.95,this._velocityStart=.01,this._fade=.1,this._velocity=void 0,this._speed=void 0,this._orgWidth=void 0,this._orgHeight=void 0,this._pivotX=void 0,this._pivotY=void 0,this._hide=void 0,this._factor=void 0,this._container=t.StageSprite(this._id,i),this._orgWidth=this._container.width,this._orgHeight=this._container.height,this._pivotX=this._container.x+this._orgWidth/2,this._pivotY=this._container.y+this._orgHeight/2,this._velocity=this._velocityStart,this._speed=s,this._hide=!1,this._factor=1}Update(t){if(this._container&&this._container.visible&&(this._container.width=this._orgWidth*this._factor,this._container.height=this._orgHeight*this._factor,this._container.x=this._pivotX-this._container.width/2,this._container.y=this._pivotY-this._container.height/2,this._factor+=this._velocity*this._speed*t,this._factor>this._maxSize?(this._factor=this._maxSize,this._velocity=-this._velocity):this._factor<this._minSize&&(this._factor=this._minSize,this._velocity=-this._velocity),this._hide)){const e=this._container.alpha-this._fade*t;this._container.alpha=e>0?e:0,0===this._container.alpha&&(this._container.visible=!1)}}Transform(t,e,i,s){super.Transform(t,e,i,s),this._orgWidth=i,this._orgHeight=s,this._pivotX=t+i/2,this._pivotY=e+s/2}Hide(){this._hide=!0}Show(){this._hide=!1,this._container&&(this._container.alpha=1,this._container.visible=!0)}}class o extends t{constructor(t,e){super(e),this.Config=void 0,this.Config=t}static AnchorTiledCenterMiddle(t,e,i,s){const n=i*s,r=Math.ceil(t/n)*n,o=Math.ceil(e/n)*n;return[(t-r)/2,(e-o)/2,r,o]}static AnchorObjectCenterTop(t,e,i,s,n,r){const o=e*s;return[t/2-o/2+n,r*s,o,i*s]}static AnchorObjectCenterMiddle(t,e,i,s,n,r,o){const a=i*n,h=s*n;return[t/2-a/2+r*n,e/2-h/2+o*n,a,h]}static AnchorObjectCenterBottom(t,e,i,s,n,r,o){const a=i*n,h=s*n;return[t/2-a/2+r*n,e-h+o*n,a,h]}static AnchorObjectRightBottom(t,e,i,s,n,r,o){const a=i*n,h=s*n;return[t-a+r*n,e-h+o*n,a,h]}static AnchorObjectRightTop(t,e,i,s,n,r){const o=e*s;return[t-o+n*s,r*s,o,i*s]}static AnchorObjectLeftTop(t,e,i,s,n){return[s*i,n*i,t*i,e*i]}static AnchorObjectLeftBottom(t,e,i,s,n,r){const o=i*s;return[n*s,t-o+r*s,e*s,o]}}class a extends o{constructor(t,e,i){super(t,e),this._titleOffsetY=-100,this._buttonOffsetY=276,this._buttonWidth=512,this._buttonHeight=128,this._titleSize=512,this._titleSpeed=.1,this._title=void 0,this._playButton=void 0,this._playButton=new n(this.Renderer,this.Config.SpriteButtonPlay,this.Config.SpriteButtonPlay,i),this._title=new r(this.Renderer,this.Config.SpriteTitle,this.Config.SpriteTitle,this._titleSpeed)}DisableInteraction(){this._playButton.Disabled=!0}EnableInteraction(){this._playButton.Disabled=!1}Update(t){this._playButton.Update(t),this._title.Update(t)}Dispose(){this._playButton.Dispose(),this._title.Dispose()}UpdateLayout(t,e,i,s,n){const r=n?e:t;let a;a=o.AnchorObjectCenterMiddle(i,s,this._buttonWidth,this._buttonHeight,r,0,this._buttonOffsetY),this._playButton.Transform(a[0],a[1],a[2],a[3]),a=o.AnchorObjectCenterMiddle(i,s,this._titleSize,this._titleSize,r,0,this._titleOffsetY),this._title.Transform(a[0],a[1],a[2],a[3])}}class h extends o{constructor(t,e){super(t,e),this._alpha=.5,this._alphaVariation=.1,this._tileSize=256,this._maxFlashFrames=30,this._tileContainer=void 0,this._flashFrames=void 0,this._tileContainer=e.StageSpriteRepeat(this.Config.SpriteBackTile,this.Config.SpriteBackTile,this.Config.ReferenceWidth,this.Config.ReferenceHeight),this._tileContainer.alpha=this._alpha,this._flashFrames=0}DisableInteraction(){this._tileContainer&&(this._flashFrames=0)}EnableInteraction(){this._tileContainer&&(this._flashFrames=this._maxFlashFrames)}UpdateLayout(t,e,i,s,n){if(!this._tileContainer)return;const r=n?e:t,a=o.AnchorTiledCenterMiddle(i,s,this._tileSize,r);this._tileContainer=this.Renderer.RestageSpriteRepeat(this.Config.SpriteBackTile,a[2],a[3],r),this._tileContainer.x=a[0],this._tileContainer.y=a[1],this._tileContainer.alpha=this._alpha}Update(t){if(!this._tileContainer)return;if(0===this._flashFrames)return;const e=Math.random()>=.5?-1:1;this._tileContainer.alpha=this._alpha+Math.random()*this._alphaVariation*t*e,this._flashFrames--}Dispose(){this._tileContainer&&(this.Renderer.Remove(this.Config.SpriteBackTile),this._tileContainer=void 0)}}class l extends s{get TextHeight(){return this._textHeight}get TextWidth(){return this._textWidth}set Text(t){this.Renderer.UpdateText(this._id,t)}constructor(t,e,i,s,n,r,o,a){super(t,e),this._fade=.2,this._textHeight=void 0,this._textWidth=void 0,this._hide=void 0,this._container=this.Renderer.StageText(this._id,i,s,n,r,o,a,!0),this._textWidth=this._container.width,this._textHeight=this._container.height,this._hide=!1}Update(t){if(!this._container)return;if(!this._container.visible)return;if(!this._hide)return;const e=this._container.alpha-this._fade*t;this._container.alpha=e>0?e:0,0===this._container.alpha&&(this._container.visible=!1)}Hide(){this._hide=!0}Show(){this._hide=!1,this._container&&(this._container.alpha=1,this._container.visible=!0)}}class c extends e{get IsSpinning(){return this._spinVelocity>0}get IsEnding(){return this._endingSpin}set StopIndex(t){this._stopIndex=t}constructor(t,e,i,s,n,r,o){super(t,e),this._minSpinFrames=180,this._spinVelocityStart=.01,this._spinVelocityInc=.01,this._spinVelocityMax=.5,this._spinBounceMax=.025,this._bounceFrames=15,this._maskId=void 0,this._symbolData=void 0,this._reelData=void 0,this._symbols=void 0,this._endingSpin=void 0,this._spinVelocity=void 0,this._spinFrames=void 0,this._bounce=void 0,this._stopIndex=void 0,this._visibleSymbols=void 0,this._maskWidth=void 0,this._maskHeight=void 0,this._endCallback=void 0,this._maskId=e,this._symbols=new Array,this._reelData=i.concat(i),this._symbolData=s,this._stopIndex=n,this._spinVelocity=0,this._spinFrames=0,this._bounce=!1,this._endingSpin=!1,this._maskWidth=r,this._maskHeight=o,this._endCallback=void 0,this._visibleSymbols=Math.ceil(o/r),this.Renderer.StageMask(this._maskId,0,0,r,o),this.PopulateSymbols(),this.PlaceSymbols(this._stopIndex)}Update(t){const e=this.GetSymbolSize();if(this.Bounce(t,e),0===this._spinVelocity)return;this._spinFrames++;const i=this._symbols[this._stopIndex],s=i.y<=0;this._spinVelocity+=this._spinVelocityInc*t,this._spinVelocity>this._spinVelocityMax&&(this._spinVelocity=this._spinVelocityMax);let n=e*this._spinVelocity*t,r=i.y<0?Math.abs(i.y):n;this.MoveSymbols(n<r?n:r,e);const o=i.y>=0;s&&o&&this._spinFrames>this._minSpinFrames&&this._endingSpin&&(this._spinVelocity=0,this._spinFrames=0,this._endingSpin=!1,this.PlaceSymbols(this._stopIndex),this._endCallback&&this._endCallback(),this._bounce=!0)}Transform(t,e,i,s){this._maskWidth=i,this._maskHeight=s,this.Renderer.MoveMask(this._maskId,t,e,i,s),this.PlaceSymbols(this._stopIndex)}Dispose(){this.Renderer.Remove(this._maskId)}StartSpin(){this._endingSpin||(this._spinVelocity=this._spinVelocityStart,this._spinFrames=0)}EndSpin(t,e){this._endingSpin||(this._stopIndex=t,this._endingSpin=!0,this._endCallback=e)}GetSymbolSize(){return this._maskWidth}GetSymbolsMinY(){let t=this._symbols[0].y;return this._symbols.forEach((e=>{e.y<t&&(t=e.y)})),t}PopulateSymbols(){this._reelData.forEach((t=>{const e=this._symbolData.get(t);if(e){const t=this.Renderer.NestSprite(e,this._maskId);t&&this._symbols.push(t)}}))}PlaceSymbols(t){const e=this.GetSymbolSize(),i=t*e*-1;this._symbols.forEach(((t,s)=>{t.width=e,t.height=e,t.x=0,t.y=i+e*s})),this.MoveSymbols(0,e)}MoveSymbols(t,e){const i=this._maskHeight+e*this._visibleSymbols;let s=this.GetSymbolsMinY();this._symbols.forEach((n=>{n.y+=t,n.y>i&&(s-=e,n.y=s+t)}))}Bounce(t,e){if(!this._bounce)return;if(this._spinFrames++,this._spinFrames>=this._bounceFrames)return this._bounce=!1,this._spinFrames=0,void(0!==this._symbols[this._stopIndex].y&&this.MoveSymbols(-this._symbols[this._stopIndex].y,e));const i=Math.random()>=.5?-1:1,s=e*Math.random()*this._spinBounceMax*i*t;this.MoveSymbols(s,e)}}class d extends s{set Cell(t){this._cell=t}get Cell(){return this._cell}constructor(t,e,i,s,n,r,o,a){super(t,e),this._fillId="Fill",this._fadeMinFactor=.5,this._fadeSpeed=.025,this._lineAlphaMultiplier=3,this._fillAlpha=void 0,this._flash=void 0,this._fill=void 0,this._cell=void 0,this._fillAlpha=o,this._flash=a,this._fill=this.Renderer.StageRectangle(this.GetFillId(),i,i,r,this._fillAlpha);const h=this._fillAlpha*this._lineAlphaMultiplier;this._container=this.Renderer.StageFrame(this._id,i,i,s,n,h>1?1:h),this._cell=[0,0]}SetPosition(t,e){this._container&&(this._container.x=t,this._container.y=e),this._fill&&this._fill&&(this._fill.x=t,this._fill.y=e)}Update(t){if(!this._flash)return;if(!this._fill)return;this._fill.alpha-=this._fadeSpeed*t;const e=this._fillAlpha*this._fadeMinFactor;this._fill.alpha<=e&&(this._fill.alpha=this._fillAlpha)}Transform(t,e,i,s){super.Transform(t,e,i,s),this._fill&&(this._fill.x=t,this._fill.y=e,this._fill.width=i,this._fill.height=s)}Dispose(){super.Dispose(),this._fill&&(this.Renderer.Remove(this.GetFillId()),this._fill=void 0)}GetFillId(){return this._id+this._fillId}}class u extends e{get MachineHeight(){return this._machineHeight}get MachineWidth(){return this._machineWidth}get IsSpinning(){return this._reels.some((t=>t.IsSpinning))}get BorderWidthOriginal(){return this._sizeBorderLine}set BorderWidth(t){this._borderWidth=t}constructor(t,e,i,s,n,r){super(t,e),this._borderId="Border",this._coverId="Cover",this._reelId="Reel",this._winBoxId="WinBox",this._symbolSize=128,this._colorCover=16777215,this._colorBorder=0,this._alphaCover=.5,this._alphaBorder=1,this._sizeBorderLine=6,this._border=void 0,this._cover=void 0,this._reels=void 0,this._machineHeight=void 0,this._machineWidth=void 0,this._machineRows=void 0,this._borderWidth=void 0,this._stops=void 0,this._winBoxes=void 0,this._x=void 0,this._y=void 0,this._machineRows=r,this._machineHeight=this._machineRows*this._symbolSize,this._machineWidth=i.length*this._symbolSize,this._borderWidth=this._sizeBorderLine,this._stops=n,this._x=0,this._y=0,this._winBoxes=new Array,this._reels=new Array;for(let o=0;o<i.length;o++){const t=this._symbolSize,e=this._machineHeight,n=this.GetReelId(o),r=new c(this.Renderer,n,i[o],s,this._stops[o],t,e);this._reels.push(r)}this._cover=this.Renderer.StageRectangle(this.GetCCoverId(),this._machineWidth,this._machineHeight,this._colorCover,this._alphaCover),this._border=this.Renderer.StageFrame(this.GetBorderId(),this._machineWidth,this._machineHeight,this._borderWidth,this._colorBorder,this._alphaBorder)}Update(t){this._reels.forEach((e=>{e.Update(t)})),this._winBoxes.forEach((e=>{e.Update(t)}))}Transform(t,e,i,s){this._machineWidth=i,this._machineHeight=s,this._reels.forEach(((i,s)=>{const n=Math.floor(this._machineHeight/this._machineRows),r=this._machineHeight;i.Transform(t+n*s,e,n,r)})),this._winBoxes.forEach((i=>{const s=Math.floor(this._machineHeight/this._machineRows),n=i.Cell;i.Transform(t+s*n[0],e+s*n[1],s,s)})),this._x=t,this._y=e,this._border.x=t,this._border.y=e,this._border.width=i+this._borderWidth,this._border.height=s+this._borderWidth,this._cover.x=t,this._cover.y=e,this._cover.width=i,this._cover.height=s}Dispose(){this.Renderer.Remove(this._id),this.Renderer.Remove(this.GetCCoverId()),this.Renderer.Remove(this.GetBorderId()),this._winBoxes.forEach((t=>{t.Dispose()})),this._winBoxes.length=0,this._reels.forEach((t=>{t.Dispose()})),this._reels.length=0}StartSpin(){this._cover.visible=!1,this._winBoxes.forEach((t=>{t.Dispose()})),this._winBoxes.length=0,this._reels.forEach((t=>{t.StartSpin()}))}EndSpin(t,e){this._stops=t,this.EndReelSpin(0,this._stops[0],e)}ShowWinBoxes(t,e,i,s,n,r){const o=Math.floor(this._machineHeight/this._machineRows);t.forEach((t=>{const a="".concat(this._id,"_").concat(this._winBoxId).concat(t[0],"_").concat(t[1]),h=new d(this.Renderer,a,o,e,i,s,n,r);h.Cell=t,h.SetPosition(this._x+o*t[0],this._y+o*t[1]),this._winBoxes.push(h)}))}GetReelId(t){return"".concat(this._id).concat(this._reelId).concat(t)}GetBorderId(){return this._id+this._borderId}GetCCoverId(){return this._id+this._coverId}EndReelSpin(t,e,i){t>=this._reels.length||this._reels[t].EndSpin(e,(()=>{i(t),this.EndReelSpin(t+1,this._stops[t+1],i)}))}}class p extends s{constructor(t,e,i,s,n,r,o,a,h){super(t,e),this._alphaStart=.95,this._alphaMin=.75,this._alphaMax=1,this._alphaChange=.00125,this._alphaDir=void 0,this._alphaDir=-1,this._container=this.Renderer.StageRectangle(this._id,i,s,n,r),this._container.alpha=this._alphaStart;let l=this.Renderer.NestRectangle(this._id,i,o,a,h);l&&(l.y=i-o),this.Renderer.NestRectangle(this._id,i,o,a,h)}Update(t){this._container&&(this._container.alpha+=this._alphaChange*t*this._alphaDir,this._container.alpha<=this._alphaMin?(this._container.alpha=this._alphaMin,this._alphaDir=1):this._container.alpha>=this._alphaMax&&(this._container.alpha=this._alphaMax,this._alphaDir=-1))}}class f extends o{get IsSpinning(){return this._machinePlayer.IsSpinning||this._machineHouse.IsSpinning}constructor(t,e,i,s,o,a){super(t,e),this._betId="BetText",this._playerId="PLAYER",this._houseId="HOUSE",this._balanceId="BalanceText",this._winningsId="WinningsText",this._machinePlayerId="MachinePlayer",this._machineHouseId="MachineHouse",this._headerId="SlotHeader",this._footerId="SlotFooter",this._machineOffsetPortrait=16,this._machineOffsetLandscape=48,this._buttonSize=96,this._spinButtonWidth=384,this._panelSize=120,this._VersusSize=256,this._VersusSpeed=.9,this._machineWidth=void 0,this._machineHeight=void 0,this._balanceTextWidth=void 0,this._balanceTextHeight=void 0,this._betTextWidth=void 0,this._betTextHeight=void 0,this._winningsTextWidth=void 0,this._winningsTextHeight=void 0,this._machinePlayer=void 0,this._machineHouse=void 0,this._balanceText=void 0,this._betText=void 0,this._winningsText=void 0,this._playerText=void 0,this._houseText=void 0,this._versus=void 0,this._spinButton=void 0,this._exitButton=void 0,this._infoButton=void 0,this._plusButton=void 0,this._minusButton=void 0,this._header=void 0,this._footer=void 0,this._portrait=void 0,this._gameOver=void 0,this._spinCallback=void 0,this._spinCallback=void 0,this._portrait=!1,this._gameOver=!1,this._machinePlayer=new u(this.Renderer,this._machinePlayerId,this.Config.Reelset,this.Config.SymbolAssets,this.Config.InitialPlayerStops,this.Config.MachineRows),this._machineHouse=new u(this.Renderer,this._machineHouseId,this.Config.Reelset,this.Config.SymbolAssets,this.Config.InitialHouseStops,this.Config.MachineRows),this._machineWidth=this._machinePlayer.MachineWidth,this._machineHeight=this._machinePlayer.MachineHeight,this._versus=new r(this.Renderer,this.Config.SpriteVersus,this.Config.SpriteVersus,this._VersusSpeed),this._header=new p(this.Renderer,this._headerId,this._panelSize,this._panelSize,this.Config.ColorSlotPanelFill,this.Config.AlphaSlotPanelFill,this.Config.SizeSlotPanelLine,this.Config.ColorSlotPanelLine,this.Config.AlphaSlotPanelLine),this._footer=new p(this.Renderer,this._footerId,this._panelSize,this._panelSize,this.Config.ColorSlotPanelFill,this.Config.AlphaSlotPanelFill,this.Config.SizeSlotPanelLine,this.Config.ColorSlotPanelLine,this.Config.AlphaSlotPanelLine),this._balanceText=new l(this.Renderer,this._balanceId,this.GetBalanceText(this.Config.BalanceStart-this.Config.BetMin),this.Config.TextFonts,this.Config.SizeSlotText,this.Config.ColorSlotText,this.Config.ColorSlotTextStroke,this.Config.SizeSlotTextStroke),this._balanceTextWidth=this._balanceText.TextWidth,this._balanceTextHeight=this._balanceText.TextHeight,this._betText=new l(this.Renderer,this._betId,this.GetBetText(this.Config.BetMin),this.Config.TextFonts,this.Config.SizeSlotText,this.Config.ColorSlotText,this.Config.ColorSlotTextStroke,this.Config.SizeSlotTextStroke),this._betTextWidth=this._betText.TextWidth,this._betTextHeight=this._betText.TextHeight,this._winningsText=new l(this.Renderer,this._winningsId,this.GetWinningsText(0),this.Config.TextFonts,this.Config.SizeSlotText,this.Config.ColorSlotText,this.Config.ColorSlotTextStroke,this.Config.SizeSlotTextStroke),this._winningsTextWidth=this._winningsText.TextWidth,this._winningsTextHeight=this._winningsText.TextHeight,this._winningsText.GoContainer&&(this._winningsText.GoContainer.renderable=!1),this._playerText=new l(this.Renderer,this._playerId,this._playerId,this.Config.LabelFonts,this.Config.SizeLabelText,this.Config.ColorLabelText,this.Config.ColorLabelTextStroke,this.Config.SizeLabelTextStroke),this._houseText=new l(this.Renderer,this._houseId,this._houseId,this.Config.LabelFonts,this.Config.SizeLabelText,this.Config.ColorLabelText,this.Config.ColorLabelTextStroke,this.Config.SizeLabelTextStroke),this._spinButton=new n(this.Renderer,this.Config.SpriteButtonSpin,this.Config.SpriteButtonSpin,i),this._exitButton=new n(this.Renderer,this.Config.SpriteButtonClose,this.Config.SpriteButtonClose,s),this._infoButton=new n(this.Renderer,this.Config.SpriteButtonInfo,this.Config.SpriteButtonInfo,o),this._plusButton=new n(this.Renderer,this.Config.SpriteButtonPlus,this.Config.SpriteButtonPlus,(()=>{this.BetChangeHandler.apply(this,[1,a])})),this._minusButton=new n(this.Renderer,this.Config.SpriteButtonMinus,this.Config.SpriteButtonMinus,(()=>{this.BetChangeHandler.apply(this,[-1,a])}))}StartSpin(){this._machinePlayer.StartSpin(),this._machineHouse.StartSpin(),this._versus.Hide(),this._playerText.Hide(),this._houseText.Hide(),this._winningsText.GoContainer&&(this._winningsText.GoContainer.renderable=!1)}EndSpin(t,e,i,s){this._machinePlayer.EndSpin(t,i),this._machineHouse.EndSpin(e,i),this._spinCallback=s}SpinResults(t,e,i,s){this._balanceText.Text=this.GetBalanceText(i),this._betText.Text=this.GetBetText(s),this._winningsText.Text=this.GetWinningsText(t),this._machinePlayer.ShowWinBoxes(e,this.Config.SizeWinBoxLine,this.Config.ColorWinBoxLine,this.Config.ColorWinBox,this.Config.AlphaWinBox,!0),this._machineHouse.ShowWinBoxes(e,this.Config.SizeWinBoxLine,this.Config.ColorFailWinBoxLine,this.Config.ColorFailWinBox,this.Config.AlphaFailWinBox,!1),this._winningsText.GoContainer&&(this._winningsText.GoContainer.renderable=t>0),this.PositionBalanceText(),i<=0&&s<=0&&(this._spinButton.Disabled=!0,this._plusButton.Disabled=!0,this._minusButton.Disabled=!0,this._gameOver=!0)}DisableInteraction(){this._infoButton.Disabled=!0,this._exitButton.Disabled=!0,this._spinButton.Disabled=!0,this._plusButton.Disabled=!0,this._minusButton.Disabled=!0}EnableInteraction(){this._infoButton.Disabled=!1,this._exitButton.Disabled=!1,this._gameOver||(this._spinButton.Disabled=!1,this._plusButton.Disabled=!1,this._minusButton.Disabled=!1)}UpdateLayout(t,e,i,s,n){const r=n?e:t;let a,h;this._portrait=n,a=(this._panelSize-this._buttonSize)/2,h=o.AnchorObjectRightBottom(i,s,this._buttonSize,this._buttonSize,r,-a,-a),this._infoButton.Transform(h[0],h[1],h[2],h[3]),h=o.AnchorObjectLeftTop(this._buttonSize,this._buttonSize,r,a,a),this._minusButton.Transform(h[0],h[1],h[2],h[3]);const l=a+this._buttonSize+a;h=o.AnchorObjectLeftTop(this._buttonSize,this._buttonSize,r,l,a),this._plusButton.Transform(h[0],h[1],h[2],h[3]),h=o.AnchorObjectRightTop(i,this._buttonSize,this._buttonSize,r,-a,a),this._exitButton.Transform(h[0],h[1],h[2],h[3]);const c=h[0],d=a,u=this._machineWidth,p=this._machineHeight;let f,_;if(n){h=o.AnchorObjectLeftBottom(s,this._spinButtonWidth,this._buttonSize,r,a,-a),this._spinButton.Transform(h[0],h[1],h[2],h[3]);const t=(this._panelSize+this._balanceTextHeight+d)*r;this._header.Transform(0,0,i,t),this._footer.Transform(0,s-t,i,t),a=this._panelSize,h=o.AnchorObjectRightTop(i,this._balanceTextWidth,this._balanceTextHeight,r,-d,a),this._balanceText.Transform(h[0],h[1],h[2],h[3]),h=o.AnchorObjectLeftTop(this._betTextWidth,this._betTextHeight,r,d,a),this._betText.Transform(h[0],h[1],h[2],h[3]);const e=this.GetRenderable(this._winningsText);this.SetRenderable(this._winningsText,!0),h=o.AnchorObjectLeftBottom(s,this._winningsTextWidth,this._winningsTextHeight,r,0,-a),this._winningsText.Transform(h[0],h[1],h[2],h[3]),this.SetRenderable(this._winningsText,e),a=p/2+this._machineOffsetPortrait,f=o.AnchorObjectCenterMiddle(i,s,u,p,r,0,-a),_=o.AnchorObjectCenterMiddle(i,s,u,p,r,0,a)}else{a=(this._panelSize-this._buttonSize)/2,h=o.AnchorObjectCenterBottom(i,s,this._spinButtonWidth,this._buttonSize,r,0,-a),this._spinButton.Transform(h[0],h[1],h[2],h[3]);const t=this._panelSize*r;this._header.Transform(0,0,i,t),this._footer.Transform(0,s-t,i,t),a=(this._panelSize-this._balanceTextHeight)/2,h=o.AnchorObjectRightTop(i,this._balanceTextWidth,this._balanceTextHeight,r,0,a),this._balanceText.Transform(c-h[2],h[1],h[2],h[3]);const e=a+this._buttonSize+a+this._buttonSize;a=(this._panelSize-this._betTextHeight)/2,h=o.AnchorObjectLeftTop(this._betTextWidth,this._betTextHeight,r,e,a),this._betText.Transform(h[0],h[1],h[2],h[3]);const n=this.GetRenderable(this._winningsText);this.SetRenderable(this._winningsText,!0),a=(this._panelSize-this._winningsTextHeight)/2,h=o.AnchorObjectLeftBottom(s,this._winningsTextWidth,this._winningsTextHeight,r,0,-a),this._winningsText.Transform(h[0],h[1],h[2],h[3]),this.SetRenderable(this._winningsText,n),a=u/2+this._machineOffsetLandscape,f=o.AnchorObjectCenterMiddle(i,s,u,p,r,-a,0),_=o.AnchorObjectCenterMiddle(i,s,u,p,r,a,0)}const g=f[3]/this.Config.MachineRows,m=Math.floor(g)*this.Config.Reelset.length,x=Math.floor(g)*this.Config.MachineRows;this._machinePlayer.BorderWidth=this._machinePlayer.BorderWidthOriginal*r,this._machinePlayer.Transform(Math.floor(f[0]),Math.floor(f[1]),m,x),this._machineHouse.BorderWidth=this._machineHouse.BorderWidthOriginal*r,this._machineHouse.Transform(Math.floor(_[0]),Math.floor(_[1]),m,x);const y=f[0]+f[2]/2-this._playerText.TextWidth*r/2,v=f[1]+f[3]/2-this._playerText.TextHeight*r/2;this._playerText.Transform(y,v,this._playerText.TextWidth*r,this._playerText.TextHeight*r);const b=_[0]+_[2]/2-this._houseText.TextWidth*r/2,w=_[1]+_[3]/2-this._houseText.TextHeight*r/2;this._houseText.Transform(b,w,this._playerText.TextWidth*r,this._playerText.TextHeight*r),h=o.AnchorObjectCenterMiddle(i,s,this._VersusSize,this._VersusSize,r,0,0),this._versus.Transform(h[0],h[1],h[2],h[3])}Update(t){this._machinePlayer.Update(t),this._machineHouse.Update(t),this._spinButton.Update(t),this._exitButton.Update(t),this._infoButton.Update(t),this._balanceText.Update(t),this._betText.Update(t),this._winningsText.Update(t),this._plusButton.Update(t),this._minusButton.Update(t),this._header.Update(t),this._footer.Update(t),this._versus.Update(t),this._playerText.Update(t),this._houseText.Update(t),this._spinCallback&&(this.IsSpinning||(this._spinCallback(),this._spinCallback=void 0))}Dispose(){this._machinePlayer.Dispose(),this._machineHouse.Dispose(),this._spinButton.Dispose(),this._exitButton.Dispose(),this._infoButton.Dispose(),this._balanceText.Dispose(),this._betText.Dispose(),this._winningsText.Dispose(),this._plusButton.Dispose(),this._minusButton.Dispose(),this._header.Dispose(),this._footer.Dispose(),this._versus.Dispose(),this._playerText.Dispose(),this._houseText.Dispose()}BetChangeHandler(t,e){const i=e(t);this._betText.Text=this.GetBetText(i[0]),this._balanceText.Text=this.GetBalanceText(i[1]),this.PositionBalanceText()}PositionBalanceText(){this._balanceText.GoContainer&&this._exitButton.GoContainer&&(this._portrait?this._balanceText.GoContainer.x=this._exitButton.GoContainer.x+this._exitButton.GoContainer.width-this._balanceText.GoContainer.width:this._balanceText.GoContainer.x=this._exitButton.GoContainer.x-this._balanceText.GoContainer.width)}FormatFunds(t){return Math.floor(t).toLocaleString()}GetRenderable(t){return!!t.GoContainer&&t.GoContainer.renderable}SetRenderable(t,e){t.GoContainer&&(t.GoContainer.renderable=e)}GetBalanceText(t){return"  ".concat(this.Config.TextBalance).concat(this.FormatFunds(t)," ")}GetBetText(t){return" ".concat(this.Config.TextBet).concat(this.FormatFunds(t),"  ")}GetWinningsText(t){return" ".concat(this.Config.TextWinnings).concat(this.FormatFunds(t),"  ")}}class _ extends o{constructor(t,e,i,s){super(t,e),this._closeId="ViewInfoExitButton",this._logoId="ViewInfoLogo",this._coverId="ViewInfoBackCover",this._descId="ViewInfoDescText",this._headerId="ViewInfoHeaderPanel",this._reelId="ViewInfoReel",this._nextId="ViewInfoNextButton",this._prevId="ViewInfoPrevButton",this._upId="ViewInfoUpButton",this._downId="ViewInfoDownButton",this._selectId="ViewInfoSelect",this._nextStopsId="ViewInfoNextStops",this._zeroStopsId="ViewInfoZeroStops",this._randomStopsId="ViewInfoRandomStops",this._nextStopsInfo="NEXT: ",this._logoSize=384,this._edgeOffset=12,this._exitSize=96,this._navSize=48,this._coverColor=14540253,this._coverAlpha=.95,this._panelSize=640,this._portraitDescFactor=.7,this._stopsTextFactor=.7,this._exitButton=void 0,this._prevButton=void 0,this._nextButton=void 0,this._upButton=void 0,this._downButton=void 0,this._zeroButton=void 0,this._randButton=void 0,this._selectBox=void 0,this._descText=void 0,this._stopsText=void 0,this._reels=void 0,this._reelset=void 0,this._cover=void 0,this._logo=void 0,this._header=void 0,this._descTextWidth=void 0,this._descTextHeight=void 0,this._stopsTextWidth=void 0,this._stopsTextHeight=void 0,this._reelTextWidth=void 0,this._reelTextHeight=void 0,this._stops=void 0,this._gaffeHandler=void 0,this._selectedReel=void 0,this._gaffeHandler=i,this._cover=this.Renderer.StageRectangle(this._coverId,this.Config.ReferenceWidth,this.Config.ReferenceHeight,this._coverColor,this._coverAlpha),this._header=new p(this.Renderer,this._headerId,this._panelSize,this._panelSize,this.Config.ColorSlotPanelFill,this.Config.AlphaSlotPanelFill,this.Config.SizeSlotPanelLine,this.Config.ColorSlotPanelLine,this.Config.AlphaSlotPanelLine),this._logo=this.Renderer.StageSprite(this._logoId,this.Config.SpriteTitle),this._descText=new l(this.Renderer,this._descId,this.Config.GameDescription,this.Config.DescTextFonts,this.Config.DescTextSize,this.Config.DescTextColor,this.Config.DescTextStrokeColor,this.Config.DescTextStrokeSize),this._descTextWidth=this._descText.TextWidth,this._descTextHeight=this._descText.TextHeight,this._reelTextWidth=0,this._reelTextHeight=0,this._stops=new Array,this._reels=new Array,this._reelset=this.Config.Reelset.concat(this.Config.Reelset);for(let n=0;n<this._reelset.length;n++){const t=this.GetReelString(this._reelset[n],n,0);this._stops.push(0);const e=this.Renderer.StageText(this.GetReelId(n),t,this.Config.DescTextFonts,this.Config.DescTextSize,this.Config.DescTextColor,this.Config.DescTextStrokeColor,this.Config.DescTextStrokeSize,!1);this._reels.push(e)}this._reelTextWidth=this._reels[0].width,this._reelTextHeight=this._reels[0].height,this._selectBox=this.Renderer.StageRectangle(this._selectId,this._reelTextWidth,this._reelTextHeight,this.Config.ColorSlotPanelFill,this.Config.AlphaSlotPanelFill),this._selectedReel=0,this._stopsText=new l(this.Renderer,this._nextStopsId,this.GetStopsText(),this.Config.DescTextFonts,this.Config.DescTextSize*this._stopsTextFactor,this.Config.DescTextColor,this.Config.DescTextStrokeColor,this.Config.DescTextStrokeSize),this._stopsTextWidth=this._stopsText.TextWidth,this._stopsTextHeight=this._stopsText.TextHeight,this._nextButton=new n(this.Renderer,this._nextId,this.Config.SpriteButtonRight,(()=>{this._selectedReel=(this._selectedReel+1)%this._reels.length,this.UpdateSelectionIndicator()})),this._prevButton=new n(this.Renderer,this._prevId,this.Config.SpriteButtonLeft,(()=>{this._selectedReel=this._selectedReel-1<0?this._reels.length-1:this._selectedReel-1,this.UpdateSelectionIndicator()})),this._upButton=new n(this.Renderer,this._upId,this.Config.SpriteButtonUp,(()=>{this.MoveStop(1)})),this._downButton=new n(this.Renderer,this._downId,this.Config.SpriteButtonDown,(()=>{this.MoveStop(-1)})),this._zeroButton=new n(this.Renderer,this._zeroStopsId,this.Config.SpriteButtonZero,(()=>{this.ZeroAllStops()})),this._randButton=new n(this.Renderer,this._randomStopsId,this.Config.SpriteButtonRandom,(()=>{this.RandomAllStops()})),this._exitButton=new n(this.Renderer,this._closeId,this.Config.SpriteButtonClose,(()=>{this._gaffeHandler(this._stops),s()}))}DisableInteraction(){this._exitButton.Disabled=!0,this._descText.Disabled=!0,this._stopsText.Disabled=!0,this._header.Disabled=!0,this._nextButton.Disabled=!0,this._prevButton.Disabled=!0,this._upButton.Disabled=!0,this._downButton.Disabled=!0,this._zeroButton.Disabled=!0,this._randButton.Disabled=!0}EnableInteraction(){this._exitButton.Disabled=!1,this._descText.Disabled=!1,this._stopsText.Disabled=!1,this._header.Disabled=!1,this._nextButton.Disabled=!1,this._prevButton.Disabled=!1,this._upButton.Disabled=!1,this._downButton.Disabled=!1,this._zeroButton.Disabled=!1,this._randButton.Disabled=!1}Update(t){this._exitButton.Update(t),this._descText.Update(t),this._stopsText.Update(t),this._header.Update(t),this._nextButton.Update(t),this._prevButton.Update(t),this._upButton.Update(t),this._downButton.Update(t),this._zeroButton.Update(t),this._randButton.Update(t)}Dispose(){this._exitButton.Dispose(),this._descText.Dispose(),this._stopsText.Dispose(),this._header.Dispose(),this._nextButton.Dispose(),this._prevButton.Dispose(),this._upButton.Dispose(),this._downButton.Dispose(),this._zeroButton.Dispose(),this._randButton.Dispose();for(let t=0;t<this._reels.length;t++)this.Renderer.Remove(this.GetReelId(t));this.Renderer.Remove(this._logoId),this.Renderer.Remove(this._coverId),this.Renderer.Remove(this._selectId)}UpdateLayout(t,e,i,s,n){const r=n?e:t;let a,h;if(a=o.AnchorObjectRightBottom(i,s,this._exitSize,this._exitSize,r,-this._edgeOffset,-this._edgeOffset),this._exitButton.Transform(a[0],a[1],a[2],a[3]),n){const t=this._logoSize;a=o.AnchorObjectCenterTop(i,t,t,r,0,this._edgeOffset),this._logo.width=a[2],this._logo.height=a[3],this._logo.x=a[0],this._logo.y=a[1];const e=this._descTextHeight*this._portraitDescFactor,n=this._descTextWidth*this._portraitDescFactor;a=o.AnchorObjectCenterTop(i,n,e,r,0,t+this._edgeOffset+this._edgeOffset),this._descText.Transform(a[0],a[1],a[2],a[3]),a=o.AnchorObjectLeftBottom(s,this._stopsTextWidth,this._stopsTextHeight,r,this._edgeOffset,-this._edgeOffset),this._stopsText.Transform(a[0],a[1],a[2],a[3]),h=a[1]}else a=o.AnchorObjectLeftTop(this._logoSize,this._logoSize,r,this._edgeOffset,(this._descTextHeight-this._logoSize)/2),this._logo.width=a[2],this._logo.height=a[3],this._logo.x=a[0],this._logo.y=a[1],a=o.AnchorObjectLeftTop(this._descTextWidth,this._descTextHeight,r,this._logoSize+this._edgeOffset,this._edgeOffset),this._descText.Transform(a[0],a[1],a[2],a[3]),a=o.AnchorObjectLeftBottom(s,this._stopsTextWidth,this._stopsTextHeight,r,this._edgeOffset,-this._edgeOffset),this._stopsText.Transform(a[0],a[1],a[2],a[3]),h=a[1];const l=this._navSize*r,c=h-l;this._prevButton.Transform(a[0],c,l,l),this._upButton.Transform(a[0]+l,c,l,l),this._downButton.Transform(a[0]+2*l,c,l,l),this._nextButton.Transform(a[0]+3*l,c,l,l),this._zeroButton.Transform(a[0]+4*l,c,l,l),this._randButton.Transform(a[0]+5*l,c,l,l);const d=this._edgeOffset*r,u=this._descText.GoContainer.y+this._descText.GoContainer.height;this._header.Transform(0,0,i,u+d+d);const p=n?d+d:0;this._reels.forEach(((t,e)=>{a=o.AnchorObjectCenterBottom(i,s,this._reelTextWidth,this._reelTextHeight,r,0,0),t.x=a[0]-a[2]*this._reels.length/2+a[2]*e+a[2]/2,t.y=this._header.GoContainer.height+(s-this._header.GoContainer.height)/2-a[3]/2-p,t.width=a[2],t.height=a[3]})),this.UpdateSelectionIndicator(),this._cover.x=0,this._cover.y=0,this._cover.width=i,this._cover.height=s}GetReelId(t){return"".concat(this._reelId,"_").concat(t)}GetStopsText(){return"".concat(this._nextStopsInfo).concat(this._stops)}MoveStop(t){const e=this._reelset[this._selectedReel];let i=this._stops[this._selectedReel]+t;i<0&&(i=e.length+i);const s=i%e.length,n=this.GetReelString(e,this._selectedReel,s);this._stops[this._selectedReel]=s,this.Renderer.UpdateText(this.GetReelId(this._selectedReel),n),this.Renderer.UpdateText(this._nextStopsId,this.GetStopsText())}ZeroAllStops(){this._reelset.forEach(((t,e)=>{const i=this.GetReelString(t,e,0);this._stops[e]=0,this.Renderer.UpdateText(this.GetReelId(e),i),this.Renderer.UpdateText(this._nextStopsId,this.GetStopsText())}))}RandomAllStops(){this._reelset.forEach(((t,e)=>{const i=Math.floor(Math.random()*t.length),s=this.GetReelString(t,e,i);this._stops[e]=i,this.Renderer.UpdateText(this.GetReelId(e),s),this.Renderer.UpdateText(this._nextStopsId,this.GetStopsText())}))}GetReelString(t,e,i){let s=t[i];for(let n=1;n<this.Config.MachineRows;n++){const e=(i+n)%t.length;s+="\n".concat(t[e])}return"".concat(e,"\n-\n").concat(s)}UpdateSelectionIndicator(){const t=this._reels[this._selectedReel];this._selectBox.x=t.x,this._selectBox.y=t.y,this._selectBox.width=t.width,this._selectBox.height=t.height}}class g{constructor(t,e,i,s,n){this._background=void 0,this._menuView=void 0,this._slotView=void 0,this._infoView=void 0,this._betAmount=void 0,this.Config=void 0,this.Renderer=void 0,this.Audio=void 0,this.Engine=void 0,this.Logger=void 0,this.Config=t,this.Renderer=e,this.Audio=i,this.Engine=s,this.Logger=n,this._betAmount=this.Config.BetMin}async Start(){await this.Renderer.Initialize(this.Config.ColorBackground).catch((t=>{this.Logger.error("Failed to Initialize renderer: ".concat(t))})),await this.Renderer.LoadSprites(this.Config.AllSprites).catch((t=>{this.Logger.error("Failed to load sprite assets: ".concat(t))})),await this.Engine.Initialize(this.Config.DefaultUserId).catch((t=>{this.Logger.error("Failed to initioalize slot engine: ".concat(t))})),this._background=new h(this.Config,this.Renderer),this._menuView=new a(this.Config,this.Renderer,this.PlayRequest.bind(this)),this.Resize(),this.Renderer.SetTicker(this.Config.MaxFps,this.Update.bind(this)),window.onresize=this.Resize.bind(this),window.onfocus=this.Focus.bind(this)}Update(t){const e=[this._background,this._menuView,this._slotView,this._infoView];for(const i of e)i&&i.Update(t)}Resize(){const t=window.innerWidth,e=window.innerHeight,i=t<e;let s,n,r;i?(s=this.Config.MinWidthPortrait,n=this.Config.MinHeightPortrait,r=this.Config.PortraitScaleFactor):(s=this.Config.MinWidthLandscape,n=this.Config.MinHeightLandscape,r=1);const o=t<s?s:t,a=e<n?n:e,h=o/this.Config.ReferenceWidth*r,l=a/this.Config.ReferenceHeight*r,c=[this._background,this._menuView,this._slotView,this._infoView];for(const d of c)d&&d.UpdateLayout(h,l,o,a,i)}Focus(){this._slotView&&(this._slotView.IsSpinning||this.Audio.Stop(this.Config.AudioSpinLoop))}ProcessSpinResults(t,e){let i,s;i=this.Engine.GetWinMatches(),s=this.Engine.GetWinnings(this._betAmount);let n=this.Engine.GetUserBalance();this._betAmount<=n?n-=this._betAmount:(this._betAmount=n,n=0,this._betAmount<0&&(this._betAmount=0)),this.Logger.log("Win matches: ".concat(i.length)),this.Logger.log("Bet: ".concat(this._betAmount)),this.Logger.log("Player winnings: ".concat(s)),s>0?(this.Audio.Play(this.Config.AudioWinner),this.Audio.Play(this.Config.AudioSpinWon)):this.Audio.Play(this.Config.AudioSpinLost),this._slotView&&this._slotView.SpinResults(s,i,n,this._betAmount)}PlayRequest(){this._menuView&&this._menuView.DisableInteraction(),this.Audio.LoadSounds(this.Config.AllAudio).then(this.Play.bind(this)).catch((t=>{this.Logger.error("Failed to load audio assets: ".concat(t))}))}SpinRequest(){this._slotView&&(this._slotView.StartSpin(),this._slotView.DisableInteraction(),this.Audio.PlayLoop(this.Config.AudioSpinLoop),this.Engine.GenerateStops().then((t=>{if(!this._slotView)return;this.Logger.log("Generated stops: ".concat(t));const e=t.splice(0,this.Config.Reelset.length),i=t;this._slotView.EndSpin(e,t,(t=>this.SpinReelComplete.call(this,t)),(()=>this.SpinComplete.call(this,e,i)))})).catch((t=>{this.Logger.error("Failed to generate stops: ".concat(t))})))}Play(){this._menuView&&(this._menuView.Dispose(),this._menuView=void 0,this._betAmount=this.Config.BetMin,this.Audio.Play(this.Config.AudioTransition),this._slotView=new f(this.Config,this.Renderer,this.SpinRequest.bind(this),this.Return.bind(this),this.Info.bind(this),this.BetChange.bind(this)),this.Resize(),this._background&&this._background.EnableInteraction())}Return(){this._slotView&&(this._slotView.Dispose(),this._slotView=void 0,this.Engine.Reset(),this.Audio.Stop(this.Config.AudioSpinLoop),this.Audio.Play(this.Config.AudioTransition),this._menuView=new a(this.Config,this.Renderer,this.PlayRequest.bind(this)),this.Resize(),this._background&&this._background.EnableInteraction())}Info(){this.Audio.Play(this.Config.AudioClick),this._slotView&&this._slotView.DisableInteraction(),this._infoView=new _(this.Config,this.Renderer,this.Engine.SetGaffe.bind(this.Engine),(()=>{this._infoView&&(this._infoView.Dispose(),this._infoView=void 0,this._slotView&&(this._slotView.EnableInteraction(),this.Audio.Play(this.Config.AudioClick)))})),this.Resize()}BetChange(t){if(t>0){const t=this._betAmount+this.Config.BetIncrement,e=this.Engine.GetUserBalance()-t;t<=this.Config.BetMax&&e>=0&&(this._betAmount=t)}else{const t=this._betAmount-this.Config.BetIncrement;t>=this.Config.BetMin&&(this._betAmount=t)}return this.Audio.Play(this.Config.AudioClick),[this._betAmount,this.Engine.GetUserBalance()-this._betAmount]}SpinComplete(t,e){this.Audio.Stop(this.Config.AudioSpinLoop),this.ProcessSpinResults(t,e),this._slotView&&this._slotView.EnableInteraction()}SpinReelComplete(t){this.Audio.Play(this.Config.AudioStop)}}class m{constructor(){this._sprites="./game/Sprites/",this._sound="./game/Sound/",this.MaxFps=60,this.ReferenceWidth=1920,this.ReferenceHeight=1080,this.MinWidthLandscape=320,this.MinHeightLandscape=240,this.MinWidthPortrait=240,this.MinHeightPortrait=320,this.PortraitScaleFactor=.75,this.BalanceStart=1e4,this.BetMin=5,this.BetMax=1e3,this.BetIncrement=5,this.DefaultUserId=0,this.TextBalance="$",this.TextBet="$",this.TextWinnings="+ $",this.TextFonts=["Brush Script MT","Georgia","Arial"],this.LabelFonts=["Arial Black","Arial"],this.SizeLabelText=80,this.SizeLabelTextStroke=16,this.SizeSlotText=58,this.SizeSlotTextStroke=6,this.SizeSlotPanelLine=6,this.SizeWinBoxLine=2,this.ColorFailWinBoxLine=0,this.ColorFailWinBox=0,this.ColorWinBoxLine=0,this.ColorWinBox=16711680,this.ColorLabelText=16711680,this.ColorLabelTextStroke=0,this.ColorSlotText=0,this.ColorSlotTextStroke=16777215,this.ColorBackground=16777215,this.ColorSlotPanelFill=16711680,this.ColorSlotPanelLine=16777215,this.AlphaWinBox=.5,this.AlphaFailWinBox=.2,this.AlphaSlotPanelFill=.25,this.AlphaSlotPanelLine=1,this.SpriteBackTile="".concat(this._sprites,"Back.png"),this.SpriteTitle="".concat(this._sprites,"Title.png"),this.SpriteVersus="".concat(this._sprites,"Versus.png"),this.SpriteSymbolRock="".concat(this._sprites,"Rock.png"),this.SpriteSymbolPaper="".concat(this._sprites,"Paper.png"),this.SpriteSymbolScissors="".concat(this._sprites,"Scissors.png"),this.SpriteButtonInfo="".concat(this._sprites,"Info.png"),this.SpriteButtonClose="".concat(this._sprites,"Close.png"),this.SpriteButtonSpin="".concat(this._sprites,"Spin.png"),this.SpriteButtonPlay="".concat(this._sprites,"Play.png"),this.SpriteButtonPlus="".concat(this._sprites,"Plus.png"),this.SpriteButtonMinus="".concat(this._sprites,"Minus.png"),this.SpriteButtonUp="".concat(this._sprites,"Up.png"),this.SpriteButtonDown="".concat(this._sprites,"Down.png"),this.SpriteButtonLeft="".concat(this._sprites,"Left.png"),this.SpriteButtonRight="".concat(this._sprites,"Right.png"),this.SpriteButtonZero="".concat(this._sprites,"Zero.png"),this.SpriteButtonRandom="".concat(this._sprites,"Random.png"),this.AllSprites=[this.SpriteBackTile,this.SpriteTitle,this.SpriteVersus,this.SpriteSymbolRock,this.SpriteSymbolPaper,this.SpriteSymbolScissors,this.SpriteButtonInfo,this.SpriteButtonClose,this.SpriteButtonSpin,this.SpriteButtonPlay,this.SpriteButtonPlus,this.SpriteButtonMinus,this.SpriteButtonUp,this.SpriteButtonDown,this.SpriteButtonLeft,this.SpriteButtonRight,this.SpriteButtonZero,this.SpriteButtonRandom],this.AudioTransition="".concat(this._sound,"Transition.mp3"),this.AudioWinner="".concat(this._sound,"Winner.mp3"),this.AudioSpinWon="".concat(this._sound,"SpinWon.mp3"),this.AudioSpinLost="".concat(this._sound,"SpinLost.mp3"),this.AudioClick="".concat(this._sound,"Click.mp3"),this.AudioSpinLoop="".concat(this._sound,"SpinLoop.mp3"),this.AudioStop="".concat(this._sound,"Stop.mp3"),this.AllAudio=[this.AudioTransition,this.AudioWinner,this.AudioSpinWon,this.AudioSpinLost,this.AudioClick,this.AudioSpinLoop,this.AudioStop],this.R="R",this.P="P",this.S="S",this.SymbolAssets=new Map([[this.R,this.SpriteSymbolRock],[this.P,this.SpriteSymbolPaper],[this.S,this.SpriteSymbolScissors]]),this.MachineRows=3,this.Reelset=[["R","P","S","R","P","S","R","P","S","R","R","P","S","R","P","S","R","P","S","R","R","P","S","R","P","S","R","P","S","R"],["P","S","R","P","S","R","P","S","R","P","P","S","R","P","S","R","P","S","R","P","P","S","R","P","S","R","P","S","R","P"],["S","R","P","S","R","P","S","R","P","S","S","R","P","S","R","P","S","R","P","S","S","R","P","S","R","P","S","R","P","S"],["P","S","R","P","S","R","P","S","R","P","P","S","R","P","S","R","P","S","R","P","P","S","R","P","S","R","P","S","R","P"],["R","P","S","R","P","S","R","P","S","R","R","P","S","R","P","S","R","P","S","R","R","P","S","R","P","S","R","P","S","R"]],this.InitialPlayerStops=[12,17,18,20,6],this.InitialHouseStops=[8,10,12,23,15],this.WinMatchMin=4,this.BetMultiplier=2,this.BetMultiplierInc=2,this.Combinations=new Map([["R","S"],["P","R"],["S","P"]]),this.DescTextFonts=["Courier New","Arial"],this.DescTextSize=34,this.DescTextColor=0,this.DescTextStrokeColor=11184810,this.DescTextStrokeSize=2,this.GameDescription="RULES:\n    - Select your bet amount\n    - Press the spin button\n    - Match symbols to win\n    - A match is when player beats the house\n        - Rock beats Scissors\n        - Paper beats Rock\n        - Scissors beats Paper\n    - ".concat(this.WinMatchMin," or more matches wins\n    - Each match increases bet multiplier by ").concat(this.BetMultiplier,"\n        - ").concat(this.WinMatchMin," matches has a bet bultiplier of ").concat(this.BetMultiplier,"\n        - ").concat(this.WinMatchMin+1," matches has a bet bultiplier of ").concat(2*this.BetMultiplier,"\n        - ").concat(this.WinMatchMin+2," matches has a bet bultiplier of ").concat(3*this.BetMultiplier,"\n        - Etc...\n    - Bet multiplier resets on each spin\n    - Have fun and good luck!")}}var x=i(1478);const y={extension:{type:x.Ag.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Promise.all([i.e(83),i.e(298),i.e(372)]).then(i.bind(i,5372))}},v={extension:{type:x.Ag.Environment,name:"webworker",priority:0},test:()=>"undefined"!==typeof self&&void 0!==self.WorkerGlobalScope,load:async()=>{await Promise.all([i.e(83),i.e(298),i.e(929)]).then(i.bind(i,9929))}};i(3993),i(5341);var b=i(3144),w=i(5853);let S,A;async function C(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==A||(A=await(async()=>{if(!b.e.get().getNavigator().gpu)return!1;try{const e=await navigator.gpu.requestAdapter(t);return await e.requestDevice(),!0}catch(e){return!1}})()),A}const T=["webgl","webgpu","canvas"];var P=i(4028),M=i(4811);const k=class t{constructor(){this.stage=new P.mc,void 0!==(arguments.length<=0?void 0:arguments[0])&&(0,M.t)(M.l,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.renderer=await async function(t){let e,s=[];t.preference?(s.push(t.preference),T.forEach((e=>{e!==t.preference&&s.push(e)}))):s=T.slice();let n={};for(let h=0;h<s.length;h++){var r;const a=s[h];if("webgpu"===a&&await C()){const{WebGPURenderer:s}=await Promise.all([i.e(83),i.e(90),i.e(258)]).then(i.bind(i,8258));e=s,n={...t,...t.webgpu};break}if("webgl"===a&&(o=null!==(r=t.failIfMajorPerformanceCaveat)&&void 0!==r?r:w.k.defaultOptions.failIfMajorPerformanceCaveat,void 0!==S||(S=(()=>{const t={stencil:!0,failIfMajorPerformanceCaveat:null!==o&&void 0!==o?o:w.k.defaultOptions.failIfMajorPerformanceCaveat};try{var e;if(!b.e.get().getWebGLRenderingContext())return!1;let i=b.e.get().createCanvas().getContext("webgl",t);const s=!(null===(e=i)||void 0===e||null===(e=e.getContextAttributes())||void 0===e||!e.stencil);if(i){const t=i.getExtension("WEBGL_lose_context");t&&t.loseContext()}return i=null,s}catch(i){return!1}})()),S)){const{WebGLRenderer:s}=await Promise.all([i.e(83),i.e(90),i.e(627)]).then(i.bind(i,1627));e=s,n={...t,...t.webgl};break}if("canvas"===a)throw n={...t},new Error("CanvasRenderer is not yet implemented")}var o;if(delete n.webgpu,delete n.webgl,!e)throw new Error("No available renderer for the current environment");const a=new e;return await a.init(n),a}(e),t._plugins.forEach((t=>{t.init.call(this,e)}))}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return(0,M.t)(M.l,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=t._plugins.slice(0);s.reverse(),s.forEach((t=>{t.destroy.call(this)})),this.stage.destroy(i),this.stage=null,this.renderer.destroy(e),this.renderer=null}};k._plugins=[];let B=k;x.XO.handleByList(x.Ag.Application,B._plugins);var R=i(366),I=i(7960),E=i(6268),F=i(4307),L=i(6675),z=i(8306),O=i(4048);class D extends z.v{constructor(t,e){var i;super();const{textures:s,data:n}=t;Object.keys(n.pages).forEach((t=>{const e=n.pages[parseInt(t,10)],i=s[e.id];this.pages.push({texture:i})})),Object.keys(n.chars).forEach((t=>{var e;const i=n.chars[t],{frame:r,source:o}=s[i.page],a=new F.M(i.x+r.x,i.y+r.y,i.width,i.height),h=new L.g({source:o,frame:a});this.chars[t]={id:t.codePointAt(0),xOffset:i.xOffset,yOffset:i.yOffset,xAdvance:i.xAdvance,kerning:null!==(e=i.kerning)&&void 0!==e?e:{},texture:h}})),this.baseRenderedFontSize=n.fontSize,this.baseMeasurementFontSize=n.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:n.fontSize},this.baseLineOffset=n.baseLineOffset,this.lineHeight=n.lineHeight,this.fontFamily=n.fontFamily,this.distanceField=null!==(i=n.distanceField)&&void 0!==i?i:{type:"none",range:0},this.url=e}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:e}=this.pages[t];e.destroy(!0)}this.pages=null}static install(t){O.c.install(t)}static uninstall(t){O.c.uninstall(t)}}const G={test:t=>"string"===typeof t&&t.startsWith("info face="),parse(t){var e;const i=t.match(/^[a-z]+\s+.+$/gm),s={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const f in i){const t=i[f].match(/^[a-z]+/gm)[0],e=i[f].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),n={};for(const i in e){const t=e[i].split("="),s=t[0],r=t[1].replace(/"/gm,""),o=parseFloat(r),a=isNaN(o)?r:o;n[s]=a}s[t].push(n)}const n={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[r]=s.info,[o]=s.common,[a]=null!==(e=s.distanceField)&&void 0!==e?e:[];a&&(n.distanceField={range:parseInt(a.distanceRange,10),type:a.fieldType}),n.fontSize=parseInt(r.size,10),n.fontFamily=r.face,n.lineHeight=parseInt(o.lineHeight,10);const h=s.page;for(let f=0;f<h.length;f++)n.pages.push({id:parseInt(h[f].id,10)||0,file:h[f].file});const l={};n.baseLineOffset=n.lineHeight-parseInt(o.base,10);const c=s.char;for(let f=0;f<c.length;f++){var d,u;const t=c[f],e=parseInt(t.id,10);let i=null!==(d=null!==(u=t.letter)&&void 0!==u?u:t.char)&&void 0!==d?d:String.fromCharCode(e);"space"===i&&(i=" "),l[e]=i,n.chars[i]={id:e,page:parseInt(t.page,10)||0,x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xOffset:parseInt(t.xoffset,10),yOffset:parseInt(t.yoffset,10),xAdvance:parseInt(t.xadvance,10),kerning:{}}}const p=s.kerning||[];for(let f=0;f<p.length;f++){const t=parseInt(p[f].first,10),e=parseInt(p[f].second,10),i=parseInt(p[f].amount,10);n.chars[l[e]].kerning[l[t]]=i}return n}},W={test(t){const e=t;return"string"!==typeof e&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")},parse(t){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},i=t.getElementsByTagName("info")[0],s=t.getElementsByTagName("common")[0],n=t.getElementsByTagName("distanceField")[0];n&&(e.distanceField={type:n.getAttribute("fieldType"),range:parseInt(n.getAttribute("distanceRange"),10)});const r=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning");e.fontSize=parseInt(i.getAttribute("size"),10),e.fontFamily=i.getAttribute("face"),e.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let d=0;d<r.length;d++)e.pages.push({id:parseInt(r[d].getAttribute("id"),10)||0,file:r[d].getAttribute("file")});const h={};e.baseLineOffset=e.lineHeight-parseInt(s.getAttribute("base"),10);for(let d=0;d<o.length;d++){var l,c;const t=o[d],i=parseInt(t.getAttribute("id"),10);let s=null!==(l=null!==(c=t.getAttribute("letter"))&&void 0!==c?c:t.getAttribute("char"))&&void 0!==l?l:String.fromCharCode(i);"space"===s&&(s=" "),h[i]=s,e.chars[s]={id:i,page:parseInt(t.getAttribute("page"),10)||0,x:parseInt(t.getAttribute("x"),10),y:parseInt(t.getAttribute("y"),10),width:parseInt(t.getAttribute("width"),10),height:parseInt(t.getAttribute("height"),10),xOffset:parseInt(t.getAttribute("xoffset"),10),yOffset:parseInt(t.getAttribute("yoffset"),10),xAdvance:parseInt(t.getAttribute("xadvance"),10),kerning:{}}}for(let d=0;d<a.length;d++){const t=parseInt(a[d].getAttribute("first"),10),i=parseInt(a[d].getAttribute("second"),10),s=parseInt(a[d].getAttribute("amount"),10);e.chars[h[i]].kerning[h[t]]=s}return e}},U={test:t=>!("string"!==typeof t||!t.includes("<font>"))&&W.test(b.e.get().parseXML(t)),parse:t=>W.parse(b.e.get().parseXML(t))},H=[".xml",".fnt"],V={extension:{type:x.Ag.CacheParser,name:"cacheBitmapFont"},test:t=>t instanceof D,getCacheableAssets(t,e){const i={};return t.forEach((t=>{i[t]=e,i["".concat(t,"-bitmap")]=e})),i["".concat(e.fontFamily,"-bitmap")]=e,i}},Y={extension:{type:x.Ag.LoadParser,priority:R.T.Normal},name:"loadBitmapFont",test:t=>H.includes(E.A.extname(t).toLowerCase()),testParse:async t=>G.test(t)||U.test(t),async parse(t,e,i){const s=G.test(t)?G.parse(t):U.parse(t),{src:n}=e,{pages:r}=s,o=[],a=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let c=0;c<r.length;++c){const t=r[c].file;let e=E.A.join(E.A.dirname(n),t);e=(0,I.Y)(e,n),o.push({src:e,data:a})}const h=await i.load(o),l=o.map((t=>h[t.src]));return new D({data:s,textures:l},n)},async load(t,e){const i=await b.e.get().fetch(t);return await i.text()},async unload(t,e,i){await Promise.all(t.pages.map((t=>i.unload(t.texture.source._sourceOrigin)))),t.destroy()}};var N=i(279);class X{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach((t=>{this._assetList.push(t)})),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}var j=i(8656);const q={extension:{type:x.Ag.CacheParser,name:"cacheTextureArray"},test:t=>Array.isArray(t)&&t.every((t=>t instanceof L.g)),getCacheableAssets:(t,e)=>{const i={};return t.forEach((t=>{e.forEach(((e,s)=>{i[t+(0===s?"":s+1)]=e}))})),i}};async function K(t){if("Image"in globalThis)return new Promise((e=>{const i=new Image;i.onload=()=>{e(!0)},i.onerror=()=>{e(!1)},i.src=t}));if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch(e){return!1}return!0}return!1}const Z={extension:{type:x.Ag.DetectionParser,priority:1},test:async()=>K("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter((t=>"avif"!==t))},Q=["png","jpg","jpeg"],$={extension:{type:x.Ag.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...Q],remove:async t=>t.filter((t=>!Q.includes(t)))},J="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function tt(t){if(J)return!1;return""!==document.createElement("video").canPlayType(t)}const et={extension:{type:x.Ag.DetectionParser,priority:0},test:async()=>tt("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter((t=>"mp4"!==t&&"m4v"!==t))},it={extension:{type:x.Ag.DetectionParser,priority:0},test:async()=>tt("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter((t=>"ogv"!==t))},st={extension:{type:x.Ag.DetectionParser,priority:0},test:async()=>tt("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter((t=>"webm"!==t))},nt={extension:{type:x.Ag.DetectionParser,priority:0},test:async()=>K("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter((t=>"webp"!==t))};var rt=i(1685),ot=i(6340);class at{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,i)=>(this._parsersValidated=!1,t[e]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const i={promise:null,parser:null};return i.promise=(async()=>{let s=null,n=null;if(e.loadParser&&(n=this._parserHash[e.loadParser],n||(0,N.R)('[Assets] specified load parser "'.concat(e.loadParser,'" not found while loading ').concat(t))),!n){for(let i=0;i<this.parsers.length;i++){var r;const s=this.parsers[i];if(s.load&&null!==(r=s.test)&&void 0!==r&&r.call(s,t,e,this)){n=s;break}}if(!n)return(0,N.R)("[Assets] ".concat(t," could not be loaded as we don't know how to parse it, ensure the correct parser has been added")),null}s=await n.load(t,e,this),i.parser=n;for(let t=0;t<this.parsers.length;t++){const n=this.parsers[t];var o;if(n.parse)n.parse&&await(null===(o=n.testParse)||void 0===o?void 0:o.call(n,s,e,this))&&(s=await n.parse(s,e,this)||s,i.parser=n)}return s})(),i}async load(t,e){this._parsersValidated||this._validateParsers();let i=0;const s={},n=(0,ot.a)(t),r=(0,rt.z)(t,(t=>({alias:[t],src:t}))),o=r.length,a=r.map((async t=>{const n=E.A.toAbsolute(t.src);if(!s[t.src])try{this.promiseCache[n]||(this.promiseCache[n]=this._getLoadPromiseAndParser(n,t)),s[t.src]=await this.promiseCache[n].promise,e&&e(++i/o)}catch(r){throw delete this.promiseCache[n],delete s[t.src],new Error("[Loader.load] Failed to load ".concat(n,".\n").concat(r))}}));return await Promise.all(a),n?s[r[0].src]:s}async unload(t){const e=(0,rt.z)(t,(t=>({alias:[t],src:t}))).map((async t=>{const e=E.A.toAbsolute(t.src),i=this.promiseCache[e];if(i){var s,n;const r=await i.promise;delete this.promiseCache[e],await(null===(s=i.parser)||void 0===s||null===(n=s.unload)||void 0===n?void 0:n.call(s,r,t,this))}}));await Promise.all(e)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter((t=>t.name)).reduce(((t,e)=>(e.name?t[e.name]&&(0,N.R)('[Assets] loadParser name conflict "'.concat(e.name,'"')):(0,N.R)("[Assets] loadParser should have a name"),{...t,[e.name]:e})),{})}}function ht(t,e){if(Array.isArray(e)){for(const i of e)if(t.startsWith("data:".concat(i)))return!0;return!1}return t.startsWith("data:".concat(e))}function lt(t,e){const i=t.split("?")[0],s=E.A.extname(i).toLowerCase();return Array.isArray(e)?e.includes(s):s===e}const ct={extension:{type:x.Ag.LoadParser,priority:R.T.Low},name:"loadJson",test:t=>ht(t,"application/json")||lt(t,".json"),async load(t){const e=await b.e.get().fetch(t);return await e.json()}},dt={name:"loadTxt",extension:{type:x.Ag.LoadParser,priority:R.T.Low,name:"loadTxt"},test:t=>ht(t,"text/plain")||lt(t,".txt"),async load(t){const e=await b.e.get().fetch(t);return await e.text()}},ut=["normal","bold","100","200","300","400","500","600","700","800","900"],pt=[".ttf",".otf",".woff",".woff2"],ft=["font/ttf","font/otf","font/woff","font/woff2"],_t=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;const gt=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;const mt={extension:{type:x.Ag.LoadParser,priority:R.T.Low},name:"loadWebFont",test:t=>ht(t,ft)||lt(t,pt),async load(t,e){const i=b.e.get().getFontFaceSet();if(i){var s,n,r,o,a;const l=[],c=null!==(s=null===(n=e.data)||void 0===n?void 0:n.family)&&void 0!==s?s:function(t){const e=E.A.extname(t),i=E.A.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map((t=>t.charAt(0).toUpperCase()+t.slice(1)));let s=i.length>0;for(const r of i)if(!r.match(_t)){s=!1;break}let n=i.join(" ");return s||(n='"'.concat(n.replace(/[\\"]/g,"\\$&"),'"')),n}(t),d=null!==(r=null===(o=e.data)||void 0===o||null===(o=o.weights)||void 0===o?void 0:o.filter((t=>ut.includes(t))))&&void 0!==r?r:["normal"],u=null!==(a=e.data)&&void 0!==a?a:{};for(let e=0;e<d.length;e++){const s=d[e],n=new FontFace(c,"url(".concat((h=t,gt.test(h)?h:encodeURI(h)),")"),{...u,weight:s});await n.load(),i.add(n),l.push(n)}return j.l.set("".concat(c,"-and-url"),{url:t,fontFaces:l}),1===l.length?l[0]:l}var h;return(0,N.R)("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach((t=>{j.l.remove(t.family),b.e.get().getFontFaceSet().delete(t)}))}};var xt=i(3682),yt=i(7861),vt=i(1451);function bt(t){var e;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const s=null===(e=vt.x.RETINA_PREFIX)||void 0===e?void 0:e.exec(t);return s?parseFloat(s[1]):i}function wt(t,e,i){t.label=i,t._sourceOrigin=i;const s=new L.g({source:t,label:i}),n=()=>{delete e.promiseCache[i],j.l.has(i)&&j.l.remove(i)};return s.source.once("destroy",(()=>{e.promiseCache[i]&&((0,N.R)("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),n())})),s.once("destroy",(()=>{t.destroyed||((0,N.R)("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),n())})),s}const St={extension:{type:x.Ag.LoadParser,priority:R.T.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test:t=>ht(t,"image/svg+xml")||lt(t,".svg"),async load(t,e,i){var s;return(null!==(s=e.data.parseAsGraphicsContext)&&void 0!==s?s:this.config.parseAsGraphicsContext)?async function(t){const e=await b.e.get().fetch(t),i=await e.text(),s=new yt.T;return s.svg(i),s}(t):async function(t,e,i,s){var n,r,o,a,h;const l=await b.e.get().fetch(t),c=await l.blob(),d=URL.createObjectURL(c),u=new Image;u.src=d,u.crossOrigin=s,await u.decode(),URL.revokeObjectURL(d);const p=document.createElement("canvas"),f=p.getContext("2d"),_=(null===(n=e.data)||void 0===n?void 0:n.resolution)||bt(t),g=null!==(r=null===(o=e.data)||void 0===o?void 0:o.width)&&void 0!==r?r:u.width,m=null!==(a=null===(h=e.data)||void 0===h?void 0:h.height)&&void 0!==a?a:u.height;p.width=g*_,p.height=m*_,f.drawImage(u,0,0,g*_,m*_);const{parseAsGraphicsContext:x,...y}=e.data;return wt(new xt.b({resource:p,alphaMode:"premultiply-alpha-on-upload",resolution:_,...y}),i,t)}(t,e,i,this.config.crossOrigin)},unload(t){t.destroy(!0)}};let At=null;class Ct{constructor(){At||(At=URL.createObjectURL(new Blob(['(function () {\n    \'use strict\';\n\n    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";\n    async function checkImageBitmap() {\n      try {\n        if (typeof createImageBitmap !== "function")\n          return false;\n        const response = await fetch(WHITE_PNG);\n        const imageBlob = await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n        return imageBitmap.width === 1 && imageBitmap.height === 1;\n      } catch (e) {\n        return false;\n      }\n    }\n    void checkImageBitmap().then((result) => {\n      self.postMessage(result);\n    });\n\n})();\n'],{type:"application/javascript"}))),this.worker=new Worker(At)}}Ct.revokeObjectURL=function(){At&&(URL.revokeObjectURL(At),At=null)};let Tt=null;class Pt{constructor(){Tt||(Tt=URL.createObjectURL(new Blob(["(function () {\n    'use strict';\n\n    async function loadImageBitmap(url) {\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\n      }\n      const imageBlob = await response.blob();\n      const imageBitmap = await createImageBitmap(imageBlob);\n      return imageBitmap;\n    }\n    self.onmessage = async (event) => {\n      try {\n        const imageBitmap = await loadImageBitmap(event.data.data[0]);\n        self.postMessage({\n          data: imageBitmap,\n          uuid: event.data.uuid,\n          id: event.data.id\n        }, [imageBitmap]);\n      } catch (e) {\n        self.postMessage({\n          error: e,\n          uuid: event.data.uuid,\n          id: event.data.id\n        });\n      }\n    };\n\n})();\n"],{type:"application/javascript"}))),this.worker=new Worker(Tt)}}Pt.revokeObjectURL=function(){Tt&&(URL.revokeObjectURL(Tt),Tt=null)};let Mt,kt=0;const Bt=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise((t=>{const{worker:e}=new Ct;e.addEventListener("message",(i=>{e.terminate(),Ct.revokeObjectURL(),t(i.data)}))}))),this._isImageBitmapSupported}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){void 0===Mt&&(Mt=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<Mt&&(this._createdWorkers++,t=(new Pt).worker,t.addEventListener("message",(t=>{this._complete(t.data),this._returnWorker(t.target),this._next()}))),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){void 0!==t.error?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),this._resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const i=new Promise(((i,s)=>{this._queue.push({id:t,arguments:e,resolve:i,reject:s})}));return this._next(),i}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const e=this._queue.pop(),i=e.id;this._resolveHash[kt]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:kt++,id:i})}},Rt=[".jpeg",".jpg",".png",".webp",".avif"],It=["image/jpeg","image/png","image/webp","image/avif"];const Et={name:"loadTextures",extension:{type:x.Ag.LoadParser,priority:R.T.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test:t=>ht(t,It)||lt(t,Rt),async load(t,e,i){var s;let n=null;n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Bt.isImageBitmapSupported()?await Bt.loadImageBitmap(t):await async function(t){const e=await b.e.get().fetch(t);if(!e.ok)throw new Error("[loadImageBitmap] Failed to fetch ".concat(t,": ").concat(e.status," ").concat(e.statusText));const i=await e.blob();return await createImageBitmap(i)}(t):await new Promise((e=>{n=new Image,n.crossOrigin=this.config.crossOrigin,n.src=t,n.complete?e(n):n.onload=()=>{e(n)}}));return wt(new xt.b({resource:n,alphaMode:"premultiply-alpha-on-upload",resolution:(null===(s=e.data)||void 0===s?void 0:s.resolution)||bt(t),...e.data}),i,t)},unload(t){t.destroy(!0)}};var Ft=i(5368),Lt=i(5813);const zt=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],Ot=zt.map((t=>"video/".concat(t.substring(1))));function Dt(t,e,i){void 0!==i||e.startsWith("data:")?!1!==i&&(t.crossOrigin="string"===typeof i?i:"anonymous"):t.crossOrigin=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis.location;if(t.startsWith("data:"))return"";e=e||globalThis.location;const i=new URL(t,document.baseURI);if(i.hostname!==e.hostname||i.port!==e.port||i.protocol!==e.protocol)return"anonymous";return""}(e)}const Gt={name:"loadVideo",extension:{type:x.Ag.LoadParser,name:"loadVideo"},test(t){const e=ht(t,Ot),i=lt(t,zt);return e||i},async load(t,e,i){var s,n;const r={...Ft.$.defaultOptions,resolution:(null===(s=e.data)||void 0===s?void 0:s.resolution)||bt(t),alphaMode:(null===(n=e.data)||void 0===n?void 0:n.alphaMode)||await(0,Lt.C)(),...e.data},o=document.createElement("video"),a={preload:!1!==r.autoLoad?"auto":void 0,"webkit-playsinline":!1!==r.playsinline?"":void 0,playsinline:!1!==r.playsinline?"":void 0,muted:!0===r.muted?"":void 0,loop:!0===r.loop?"":void 0,autoplay:!1!==r.autoPlay?"":void 0};Object.keys(a).forEach((t=>{const e=a[t];void 0!==e&&o.setAttribute(t,e)})),!0===r.muted&&(o.muted=!0),Dt(o,t,r.crossorigin);const h=document.createElement("source");let l;if(t.startsWith("data:"))l=t.slice(5,t.indexOf(";"));else if(!t.startsWith("blob:")){const e=t.split("?")[0].slice(t.lastIndexOf(".")+1).toLowerCase();l=Ft.$.MIME_TYPES[e]||"video/".concat(e)}return h.src=t,l&&(h.type=l),new Promise((s=>{const n=async()=>{const a=new Ft.$({...r,resource:o});var h;o.removeEventListener("canplay",n),e.data.preload&&await(h=o,new Promise(((t,e)=>{function i(){n(),t()}function s(t){n(),e(t)}function n(){h.removeEventListener("canplaythrough",i),h.removeEventListener("error",s)}h.addEventListener("canplaythrough",i),h.addEventListener("error",s),h.load()}))),s(wt(a,i,t))};o.addEventListener("canplay",n),o.appendChild(h)}))},unload(t){t.destroy(!0)}},Wt={extension:{type:x.Ag.ResolveParser,name:"resolveTexture"},test:Et.test,parse:t=>{var e,i;return{resolution:parseFloat(null!==(e=null===(i=vt.x.RETINA_PREFIX.exec(t))||void 0===i?void 0:i[1])&&void 0!==e?e:"1"),format:t.split(".").pop(),src:t}}},Ut={extension:{type:x.Ag.ResolveParser,priority:-2,name:"resolveJson"},test:t=>vt.x.RETINA_PREFIX.test(t)&&t.endsWith(".json"),parse:Wt.parse};const Ht=new class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new vt.x,this.loader=new at,this.cache=j.l,this._backgroundLoader=new X(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(){var t,e,i;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._initialized)return void(0,N.R)("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");if(this._initialized=!0,s.defaultSearchParams&&this.resolver.setDefaultSearchParams(s.defaultSearchParams),s.basePath&&(this.resolver.basePath=s.basePath),s.bundleIdentifier&&this.resolver.setBundleIdentifier(s.bundleIdentifier),s.manifest){let t=s.manifest;"string"===typeof t&&(t=await this.load(t)),this.resolver.addManifest(t)}const n=null!==(t=null===(e=s.texturePreference)||void 0===e?void 0:e.resolution)&&void 0!==t?t:1,r="number"===typeof n?[n]:n,o=await this._detectFormats({preferredFormats:null===(i=s.texturePreference)||void 0===i?void 0:i.format,skipDetections:s.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:r}}),s.preferences&&this.setPreferences(s.preferences)}add(t){this.resolver.add(t)}async load(t,e){this._initialized||await this.init();const i=(0,ot.a)(t),s=(0,rt.z)(t).map((t=>{if("string"!==typeof t){const e=this.resolver.getAlias(t);return e.some((t=>!this.resolver.hasKey(t)))&&this.add(t),Array.isArray(e)?e[0]:e}return this.resolver.hasKey(t)||this.add({alias:t,src:t}),t})),n=this.resolver.resolve(s),r=await this._mapLoadToResolve(n,e);return i?r[s[0]]:r}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;"string"===typeof t&&(i=!0,t=[t]);const s=this.resolver.resolveBundle(t),n={},r=Object.keys(s);let o=0,a=0;const h=()=>{null===e||void 0===e||e(++o/a)},l=r.map((t=>{const e=s[t];return a+=Object.keys(e).length,this._mapLoadToResolve(e,h).then((e=>{n[t]=e}))}));return await Promise.all(l),i?n[t[0]]:n}async backgroundLoad(t){this._initialized||await this.init(),"string"===typeof t&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),"string"===typeof t&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach((t=>{this._backgroundLoader.add(Object.values(t))}))}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if("string"===typeof t)return j.l.get(t);const e={};for(let i=0;i<t.length;i++)e[i]=j.l.get(t[i]);return e}async _mapLoadToResolve(t,e){const i=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const s=await this.loader.load(i,e);this._backgroundLoader.active=!0;const n={};return i.forEach((t=>{const e=s[t.src],i=[t.src];t.alias&&i.push(...t.alias),i.forEach((t=>{n[t]=e})),j.l.set(i,e)})),n}async unload(t){this._initialized||await this.init();const e=(0,rt.z)(t).map((t=>"string"!==typeof t?t.src:t)),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=(0,rt.z)(t);const e=this.resolver.resolveBundle(t),i=Object.keys(e).map((t=>this._unloadFromResolved(e[t])));await Promise.all(i)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach((t=>{j.l.remove(t.src)})),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const i of t.detections)t.skipDetections||await i.test()?e=await i.add(e):t.skipDetections||(e=await i.remove(e));return e=e.filter(((t,i)=>e.indexOf(t)===i)),e}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach((e=>{e.config&&Object.keys(e.config).filter((e=>e in t)).forEach((i=>{e.config[i]=t[i]}))}))}};x.XO.handleByList(x.Ag.LoadParser,Ht.loader.parsers).handleByList(x.Ag.ResolveParser,Ht.resolver.parsers).handleByList(x.Ag.CacheParser,Ht.cache.parsers).handleByList(x.Ag.DetectionParser,Ht.detections),x.XO.add(q,$,Z,nt,et,it,st,ct,dt,mt,St,Et,Gt,Y,V,Wt,Ut);const Vt={loader:x.Ag.LoadParser,resolver:x.Ag.ResolveParser,cache:x.Ag.CacheParser,detection:x.Ag.DetectionParser};x.XO.handle(x.Ag.Asset,(t=>{const e=t.ref;Object.entries(Vt).filter((t=>{let[i]=t;return!!e[i]})).forEach((t=>{var i;let[s,n]=t;return x.XO.add(Object.assign(e[s],{extension:null!==(i=e[s].extension)&&void 0!==i?i:n}))}))}),(t=>{const e=t.ref;Object.keys(Vt).filter((t=>!!e[t])).forEach((t=>x.XO.remove(e[t])))}));i(9258);var Yt=i(4395),Nt=i(4973),Xt=i(3596);class jt{constructor(){let{matrix:t,observer:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.dirty=!0,this._matrix=null!==t&&void 0!==t?t:new Xt.u,this.observer=e,this.position=new Nt.o(this,0,0),this.scale=new Nt.o(this,1,1),this.pivot=new Nt.o(this,0,0),this.skew=new Nt.o(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){const t=this._matrix;return this.dirty?(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this.dirty=!1,t):t}_onUpdate(t){var e;this.dirty=!0,t===this.skew&&this.updateSkew(),null===(e=this.observer)||void 0===e||e._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}toString(){return"[pixi.js/math:Transform position=(".concat(this.position.x,", ").concat(this.position.y,") rotation=").concat(this.rotation," scale=(").concat(this.scale.x,", ").concat(this.scale.y,") skew=(").concat(this.skew.x,", ").concat(this.skew.y,") ]")}setFromMatrix(t){t.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this.skew))}}const qt=class t extends P.mc{constructor(){var e;let i=(arguments.length<=0?void 0:arguments[0])||{};i instanceof L.g&&(i={texture:i}),arguments.length>1&&((0,M.t)(M.l,"use new TilingSprite({ texture, width:100, height:100 }) instead"),i.width=arguments.length<=1?void 0:arguments[1],i.height=arguments.length<=2?void 0:arguments[2]),i={...t.defaultOptions,...i};const{texture:s,anchor:n,tilePosition:r,tileScale:o,tileRotation:a,width:h,height:l,applyAnchorToTexture:c,roundPixels:d,...u}=null!==(e=i)&&void 0!==e?e:{};super({label:"TilingSprite",...u}),this.renderPipeId="tilingSprite",this.canBundle=!0,this.batched=!0,this._roundPixels=0,this._bounds={minX:0,maxX:1,minY:0,maxY:0},this._boundsDirty=!0,this.allowChildren=!1,this._anchor=new Nt.o({_onUpdate:()=>{this.onViewUpdate()}}),this._applyAnchorToTexture=c,this.texture=s,this._width=null!==h&&void 0!==h?h:s.width,this._height=null!==l&&void 0!==l?l:s.height,this._tileTransform=new jt({observer:{_onUpdate:()=>this.onViewUpdate()}}),n&&(this.anchor=n),this.tilePosition=r,this.tileScale=o,this.tileRotation=a,this.roundPixels=null!==d&&void 0!==d&&d}static from(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new t("string"===typeof e?{texture:j.l.get(e),...i}:{texture:e,...i})}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(t){this._texture.textureMatrix.clampMargin=t}get anchor(){return this._anchor}set anchor(t){"number"===typeof t?this._anchor.set(t):this._anchor.copyFrom(t)}get tilePosition(){return this._tileTransform.position}set tilePosition(t){this._tileTransform.position.copyFrom(t)}get tileScale(){return this._tileTransform.scale}set tileScale(t){"number"===typeof t?this._tileTransform.scale.set(t):this._tileTransform.scale.copyFrom(t)}set tileRotation(t){this._tileTransform.rotation=t}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}set texture(t){t||(t=L.g.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this.onViewUpdate())}get texture(){return this._texture}set width(t){this._width=t,this.onViewUpdate()}get width(){return this._width}set height(t){this._height=t,this.onViewUpdate()}get height(){return this._height}_updateBounds(){const t=this._bounds,e=this._anchor,i=this._width,s=this._height;t.maxX=-e._x*i,t.minX=t.maxX+i,t.maxY=-e._y*s,t.minY=t.maxY+s}addBounds(t){const e=this.bounds;t.addFrame(e.minX,e.minY,e.maxX,e.maxY)}containsPoint(t){const e=this._width,i=this._height,s=-e*this._anchor._x;let n=0;return t.x>=s&&t.x<=s+e&&(n=-i*this._anchor._y,t.y>=n&&t.y<=n+i)}onViewUpdate(){if(this._boundsDirty=!0,this._didTilingSpriteUpdate=!0,this._didChangeId+=4096,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super.destroy(t),this._anchor=null,this._tileTransform=null,this._bounds=null;if("boolean"===typeof t?t:null===t||void 0===t?void 0:t.texture){const e="boolean"===typeof t?t:null===t||void 0===t?void 0:t.textureSource;this._texture.destroy(e)}this._texture=null}};qt.defaultOptions={texture:L.g.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};let Kt=qt;var Zt=i(4853),Qt=i(6373);class $t extends P.mc{constructor(t,e){const{text:i,resolution:s,style:n,anchor:r,width:o,height:a,roundPixels:h,...l}=t;super({...l}),this.batched=!0,this._resolution=null,this._didTextUpdate=!0,this._roundPixels=0,this._bounds=new Qt.c,this._boundsDirty=!0,this._styleClass=e,this.text=null!==i&&void 0!==i?i:"",this.style=n,this.resolution=null!==s&&void 0!==s?s:null,this.allowChildren=!1,this._anchor=new Nt.o({_onUpdate:()=>{this.onViewUpdate()}}),r&&(this.anchor=r),this.roundPixels=null!==h&&void 0!==h&&h,o&&(this.width=o),a&&(this.height=a)}get anchor(){return this._anchor}set anchor(t){"number"===typeof t?this._anchor.set(t):this._anchor.copyFrom(t)}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){var e;t=t||{},null===(e=this._style)||void 0===e||e.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,e){let i,s;var n;"object"!==typeof t?(i=t,s=null!==e&&void 0!==e?e:t):(i=t.width,s=null!==(n=t.height)&&void 0!==n?n:t.width);void 0!==i&&this._setWidth(i,this.bounds.width),void 0!==s&&this._setHeight(s,this.bounds.height)}addBounds(t){const e=this.bounds;t.addFrame(e.minX,e.minY,e.maxX,e.maxY)}containsPoint(t){const e=this.bounds.width,i=this.bounds.height,s=-e*this.anchor.x;let n=0;return t.x>=s&&t.x<=s+e&&(n=-i*this.anchor.y,t.y>=n&&t.y<=n+i)}onViewUpdate(){if(this._didChangeId+=4096,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0,this._didTextUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}_getKey(){return"".concat(this.text,":").concat(this._style.styleKey,"-").concat(this.resolution)}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,("boolean"===typeof t?t:null===t||void 0===t?void 0:t.style)&&this._style.destroy(t),this._style=null,this._text=null}}var Jt=i(7821),te=i(2100);class ee extends $t{constructor(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const s=function(t,e){var i;let s=null!==(i=t[0])&&void 0!==i?i:{};return("string"===typeof s||t[1])&&((0,M.t)(M.l,"use new ".concat(e,'({ text: "hi!", style }) instead')),s={text:s,style:t[1]}),s}(e,"Text");super(s,te.x),this.renderPipeId="text"}_updateBounds(){const t=this._bounds,e=this._style.padding,i=this._anchor,s=Jt.P.measureText(this._text,this._style),{width:n,height:r}=s;t.minX=-i._x*n-e,t.maxX=t.minX+n+2*e,t.minY=-i._y*r-e,t.maxY=t.minY+r+2*e}}var ie=i(1456),se=i(8379);i(973);x.XO.add(y,v);class ne{constructor(){this._application=void 0,this._containers=void 0,this._tickerCallback=void 0,this._zIndex=void 0,this._application=new B,this._containers=new Map,this._tickerCallback=void 0,this._zIndex=0}async Initialize(t){await this._application.init({backgroundColor:t,width:window.innerWidth,height:window.innerHeight,resizeTo:window}),document.body.appendChild(this._application.canvas)}async LoadSprites(t){for(const e of t)await Ht.load(e)}SetTicker(t,e){this._application.ticker.maxFPS=t,void 0!==this._tickerCallback&&this._application.ticker.remove(this._tickerCallback),this._tickerCallback=t=>{e(t.deltaTime)},this._application.ticker.add(this._tickerCallback)}StageSprite(t,e){const i=Zt.k.from(e),s=this._application.stage.addChild(i);return s.zIndex=this.GetIndex(),this._containers.set(t,s),s}StageSpriteRepeat(t,e,i,s){const n=L.g.from(e),r=new Kt({texture:n,width:i,height:s}),o=this._application.stage.addChild(r);return o.zIndex=this.GetIndex(),this._containers.set(t,o),o}StageSpriteButton(t,e,i){const s=Zt.k.from(e),n=this._application.stage.addChild(s);return this._containers.set(t,n),n.zIndex=this.GetIndex(),n.interactive=!0,s.on("pointerdown",i),n}StageRectangle(t,e,i,s,n){const r=new P.mc,o=new Yt.A;o.rect(0,0,e,i).fill({color:s,alpha:n}),r.addChild(o);const a=this._application.stage.addChild(r);return this._containers.set(t,a),a.zIndex=this.GetIndex(),a}StageFrame(t,e,i,s,n,r){const o=new Yt.A;o.rect(0,0,e,i).stroke({width:s,color:n,alpha:r});const a=this._application.stage.addChild(o);return this._containers.set(t,a),a.zIndex=this.GetIndex(),a}StageText(t,e,i,s,n,r,o,a){const h=a?"bold":"normal",l=new te.x({fontFamily:i,fontSize:s,fill:n,fontWeight:h,stroke:{width:o,color:r}}),c=new ee({text:e,style:l}),d=this._application.stage.addChild(c);return this._containers.set(t,d),d.zIndex=this.GetIndex(),d}StageMask(t,e,i,s,n){const r=new P.mc;r.x=e,r.y=i,r.width=s,r.height=n;const o=this._application.stage.addChild(r);return r.mask=(new Yt.A).rect(e,i,s,n).fill({color:16777215}),this._containers.set(t,o),o.zIndex=this.GetIndex(),o}NestSprite(t,e){if(!this._containers.has(e))return;const i=this._containers.get(e);if(i){const e=Zt.k.from(t),s=i.addChild(e);return s.zIndex=this.GetIndex(),s}}NestRectangle(t,e,i,s,n){if(!this._containers.has(t))return;const r=this._containers.get(t);if(r){const t=new Yt.A;t.rect(0,0,e,i).fill({color:s,alpha:n});const o=r.addChild(t);return o.zIndex=this.GetIndex(),o}}RestageSpriteRepeat(t,e,i,s){const n=this._containers.get(t),r=n?n.zIndex:this.GetIndex();this.Remove(t);const o=L.g.from(t),a=new Kt({texture:o,width:e,height:i,tileScale:{x:s,y:s}}),h=this._application.stage.addChild(a);return h.zIndex=r,this._containers.set(t,h),h}UpdateText(t,e){if(!this._containers.has(t))return;const i=this._containers.get(t);i&&i instanceof ee&&(i.text=e)}MoveMask(t,e,i,s,n){if(!this._containers.has(t))return;const r=this._containers.get(t);r&&(r.mask=null,r.x=e,r.y=i,r.mask=(new Yt.A).rect(e,i,s,n).fill({color:16777215}))}Remove(t){if(!this._containers.has(t))return;const e=this._containers.get(t);e&&(this._application.stage.removeChild(e),this._containers.delete(t),e.destroy())}GetIndex(){return++this._zIndex}}let re;function oe(){return re}class ae{constructor(t,e){this.init(t,e)}init(t,e){this.destination=t,this.source=e||t}connect(t){var e;null===(e=this.source)||void 0===e||e.connect(t)}disconnect(){var t;null===(t=this.source)||void 0===t||t.disconnect()}destroy(){this.disconnect(),this.destination=null,this.source=null}}class he{static setParamValue(t,e){if(t.setValueAtTime){const i=oe().context;t.setValueAtTime(e,i.audioContext.currentTime)}else t.value=e;return e}}const le=class extends ae{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=[];const d=[{f:le.F32,type:"lowshelf",gain:t},{f:le.F64,type:"peaking",gain:e},{f:le.F125,type:"peaking",gain:i},{f:le.F250,type:"peaking",gain:s},{f:le.F500,type:"peaking",gain:n},{f:le.F1K,type:"peaking",gain:r},{f:le.F2K,type:"peaking",gain:o},{f:le.F4K,type:"peaking",gain:a},{f:le.F8K,type:"peaking",gain:h},{f:le.F16K,type:"highshelf",gain:l}];oe().useLegacy||(c=d.map((t=>{const e=oe().context.audioContext.createBiquadFilter();return e.type=t.type,he.setParamValue(e.Q,1),e.frequency.value=t.f,he.setParamValue(e.gain,t.gain),e}))),super(c[0],c[c.length-1]),this.bands=c,this.bandsMap={};for(let u=0;u<this.bands.length;u++){const t=this.bands[u];u>0&&this.bands[u-1].connect(t),this.bandsMap[t.frequency.value]=t}}setGain(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.bandsMap[t])throw new Error("No band found for frequency ".concat(t));he.setParamValue(this.bandsMap[t].gain,e)}getGain(t){if(!this.bandsMap[t])throw new Error("No band found for frequency ".concat(t));return this.bandsMap[t].gain.value}set f32(t){this.setGain(le.F32,t)}get f32(){return this.getGain(le.F32)}set f64(t){this.setGain(le.F64,t)}get f64(){return this.getGain(le.F64)}set f125(t){this.setGain(le.F125,t)}get f125(){return this.getGain(le.F125)}set f250(t){this.setGain(le.F250,t)}get f250(){return this.getGain(le.F250)}set f500(t){this.setGain(le.F500,t)}get f500(){return this.getGain(le.F500)}set f1k(t){this.setGain(le.F1K,t)}get f1k(){return this.getGain(le.F1K)}set f2k(t){this.setGain(le.F2K,t)}get f2k(){return this.getGain(le.F2K)}set f4k(t){this.setGain(le.F4K,t)}get f4k(){return this.getGain(le.F4K)}set f8k(t){this.setGain(le.F8K,t)}get f8k(){return this.getGain(le.F8K)}set f16k(t){this.setGain(le.F16K,t)}get f16k(){return this.getGain(le.F16K)}reset(){this.bands.forEach((t=>{he.setParamValue(t.gain,0)}))}destroy(){this.bands.forEach((t=>{t.disconnect()})),this.bands=null,this.bandsMap=null}};let ce=le;ce.F32=32,ce.F64=64,ce.F125=125,ce.F250=250,ce.F500=500,ce.F1K=1e3,ce.F2K=2e3,ce.F4K=4e3,ce.F8K=8e3,ce.F16K=16e3;class de extends se.A{constructor(){super(...arguments),this.speed=1,this.muted=!1,this.volume=1,this.paused=!1}refresh(){this.emit("refresh")}refreshPaused(){this.emit("refreshPaused")}get filters(){return console.warn("HTML Audio does not support filters"),null}set filters(t){console.warn("HTML Audio does not support filters")}get audioContext(){return console.warn("HTML Audio does not support audioContext"),null}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this.paused}destroy(){this.removeAllListeners()}}let ue=0;const pe=class extends se.A{constructor(t){super(),this.id=ue++,this.init(t)}set(t,e){if(void 0===this[t])throw new Error("Property with name ".concat(t," does not exist."));switch(t){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"paused":this.paused=e;break;case"loop":this.loop=e;break;case"muted":this.muted=e}return this}get progress(){const{currentTime:t}=this._source;return t/this._duration}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}_onPlay(){this._playing=!0}_onPause(){this._playing=!1}init(t){this._playing=!1,this._duration=t.source.duration;const e=this._source=t.source.cloneNode(!1);e.src=t.parent.url,e.onplay=this._onPlay.bind(this),e.onpause=this._onPause.bind(this),t.context.on("refresh",this.refresh,this),t.context.on("refreshPaused",this.refreshPaused,this),this._media=t}_internalStop(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())}stop(){this._internalStop(),this._source&&this.emit("stop")}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh()}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get filters(){return console.warn("HTML Audio does not support filters"),null}set filters(t){console.warn("HTML Audio does not support filters")}refresh(){const t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;const i=t.volume*(t.muted?0:1),s=e.volume*(e.muted?0:1),n=this._volume*(this._muted?0:1);this._source.volume=n*i*s,this._source.playbackRate=this._speed*t.speed*e.speed}refreshPaused(){const t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",i))}play(t){const{start:e,end:i,speed:s,loop:n,volume:r,muted:o}=t;i&&console.assert(i>e,"End time is before start time"),this._speed=s,this._volume=r,this._loop=!!n,this._muted=o,this.refresh(),this.loop&&null!==i&&(console.warn('Looping not support when specifying an "end" time'),this.loop=!1),this._start=e,this._end=i||this._duration,this._start=Math.max(0,this._start-pe.PADDING),this._end=Math.min(this._end+pe.PADDING,this._duration),this._source.onloadedmetadata=()=>{this._source&&(this._source.currentTime=e,this._source.onloadedmetadata=null,this.emit("progress",e,this._duration),ie.R.shared.add(this._onUpdate,this))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")}_onUpdate(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()}_onComplete(){ie.R.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)}destroy(){ie.R.shared.remove(this._onUpdate,this),this.removeAllListeners();const t=this._source;t&&(t.onended=null,t.onplay=null,t.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)}toString(){return"[HTMLAudioInstance id=".concat(this.id,"]")}};let fe=pe;fe.PADDING=.1;class _e extends se.A{init(t){this.parent=t,this._source=t.options.source||new Audio,t.url&&(this._source.src=t.url)}create(){return new fe(this)}get isPlayable(){return!!this._source&&4===this._source.readyState}get duration(){return this._source.duration}get context(){return this.parent.context}get filters(){return null}set filters(t){console.warn("HTML Audio does not support filters")}destroy(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)}get source(){return this._source}load(t){const e=this._source,i=this.parent;if(4===e.readyState){i.isLoaded=!0;const e=i.autoPlayStart();return void(t&&setTimeout((()=>{t(null,i,e)}),0))}if(!i.url)return void t(new Error("sound.url or sound.source must be set"));e.src=i.url;const s=()=>{o(),i.isLoaded=!0;const e=i.autoPlayStart();t&&t(null,i,e)},n=()=>{o(),t&&t(new Error("Sound loading has been aborted"))},r=()=>{o();const i="Failed to load audio element (code: ".concat(e.error.code,")");t?t(new Error(i)):console.error(i)},o=()=>{e.removeEventListener("canplaythrough",s),e.removeEventListener("load",s),e.removeEventListener("abort",n),e.removeEventListener("error",r)};e.addEventListener("canplaythrough",s,!1),e.addEventListener("load",s,!1),e.addEventListener("abort",n,!1),e.addEventListener("error",r,!1),e.load()}}class ge{constructor(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start,console.assert(this.duration>0,"End time must be after start time")}play(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})}destroy(){this.parent=null}}const me=["ogg","oga","opus","m4a","mp3","mpeg","wav","aiff","wma","mid","caf"],xe=["audio/mpeg","audio/ogg"],ye={};!function(t){const e={m4a:"audio/mp4",oga:"audio/ogg",opus:'audio/ogg; codecs="opus"',caf:'audio/x-caf; codecs="opus"',...t||{}},i=document.createElement("audio"),s={},n=/^no$/;me.forEach((t=>{const r=i.canPlayType("audio/".concat(t)).replace(n,""),o=e[t]?i.canPlayType(e[t]).replace(n,""):"";s[t]=!!r||!!o})),Object.assign(ye,s)}();let ve=0;class be extends se.A{constructor(t){super(),this.id=ve++,this._media=null,this._paused=!1,this._muted=!1,this._elapsed=0,this.init(t)}set(t,e){if(void 0===this[t])throw new Error("Property with name ".concat(t," does not exist."));switch(t){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"muted":this.muted=e;break;case"loop":this.loop=e;break;case"paused":this.paused=e}return this}stop(){this._source&&(this._internalStop(),this.emit("stop"))}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh(),this._update(!0)}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}get filters(){return this._filters}set filters(t){var e;this._filters&&(null===(e=this._filters)||void 0===e||e.filter((t=>t)).forEach((t=>t.disconnect())),this._filters=null,this._source.connect(this._gain));this._filters=null!==t&&void 0!==t&&t.length?t.slice(0):null,this.refresh()}refresh(){if(!this._source)return;const t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;const i=t.volume*(t.muted?0:1),s=e.volume*(e.muted?0:1),n=this._volume*(this._muted?0:1);he.setParamValue(this._gain.gain,n*s*i),he.setParamValue(this._source.playbackRate,this._speed*e.speed*t.speed),this.applyFilters()}applyFilters(){var t;if(null!==(t=this._filters)&&void 0!==t&&t.length){this._source.disconnect();let t=this._source;this._filters.forEach((e=>{t.connect(e.destination),t=e})),t.connect(this._gain)}}refreshPaused(){const t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",i))}play(t){const{start:e,end:i,speed:s,loop:n,volume:r,muted:o,filters:a}=t;i&&console.assert(i>e,"End time is before start time"),this._paused=!1;const{source:h,gain:l}=this._media.nodes.cloneBufferSource();this._source=h,this._gain=l,this._speed=s,this._volume=r,this._loop=!!n,this._muted=o,this._filters=a,this.refresh();const c=this._source.buffer.duration;this._duration=c,this._end=i,this._lastUpdate=this._now(),this._elapsed=e,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=i,this._source.loopStart=e,this._source.start(0,e)):i?this._source.start(0,e,i-e):this._source.start(0,e),this.emit("start"),this._update(!0),this.enableTicker(!0)}enableTicker(t){ie.R.shared.remove(this._updateListener,this),t&&ie.R.shared.add(this._updateListener,this)}get progress(){return this._progress}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}destroy(){var t;this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),null===(t=this._filters)||void 0===t||t.forEach((t=>t.disconnect())),this._filters=null,this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1}toString(){return"[WebAudioInstance id=".concat(this.id,"]")}_now(){return this._media.context.audioContext.currentTime}_updateListener(){this._update()}_update(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._source){const e=this._now(),i=e-this._lastUpdate;if(i>0||t){const t=this._source.playbackRate.value;this._elapsed+=i*t,this._lastUpdate=e;const s=this._duration;let n;if(this._source.loopStart){const t=this._source.loopEnd-this._source.loopStart;n=(this._source.loopStart+this._elapsed%t)/s}else n=this._elapsed%s/s;this._progress=n,this.emit("progress",this._progress,s)}}}init(t){this._media=t,t.context.events.on("refresh",this.refresh,this),t.context.events.on("refreshPaused",this.refreshPaused,this)}_internalStop(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.stop(0),this._source.disconnect();try{this._source.buffer=null}catch(t){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",t)}this._source=null}}_onComplete(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.disconnect();try{this._source.buffer=null}catch(t){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",t)}}this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)}}class we{constructor(t,e){this._output=e,this._input=t}get destination(){return this._input}get filters(){return this._filters}set filters(t){if(this._filters&&(this._filters.forEach((t=>{t&&t.disconnect()})),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();let e=null;t.forEach((t=>{null===e?this._input.connect(t.destination):e.connect(t.destination),e=t})),e.connect(this._output)}}destroy(){this.filters=null,this._input=null,this._output=null}}const Se=class extends we{constructor(t){const e=t.audioContext,i=e.createBufferSource(),s=e.createGain(),n=e.createAnalyser();i.connect(n),n.connect(s),s.connect(t.destination),super(n,s),this.context=t,this.bufferSource=i,this.gain=s,this.analyser=n}get script(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(Se.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script}destroy(){super.destroy(),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null}cloneBufferSource(){const t=this.bufferSource,e=this.context.audioContext.createBufferSource();e.buffer=t.buffer,he.setParamValue(e.playbackRate,t.playbackRate.value),e.loop=t.loop;const i=this.context.audioContext.createGain();return e.connect(i),i.connect(this.destination),{source:e,gain:i}}get bufferSize(){return this.script.bufferSize}};let Ae=Se;Ae.BUFFER_SIZE=0;class Ce{init(t){this.parent=t,this._nodes=new Ae(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source}destroy(){this.parent=null,this._nodes.destroy(),this._nodes=null;try{this._source.buffer=null}catch(t){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",t)}this._source=null,this.source=null}create(){return new be(this)}get context(){return this.parent.context}get isPlayable(){return!!this._source&&!!this._source.buffer}get filters(){return this._nodes.filters}set filters(t){this._nodes.filters=t}get duration(){return console.assert(this.isPlayable,"Sound not yet playable, no duration"),this._source.buffer.duration}get buffer(){return this._source.buffer}set buffer(t){this._source.buffer=t}get nodes(){return this._nodes}load(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t?t(new Error("sound.url or sound.source must be set")):console.error("sound.url or sound.source must be set")}async _loadUrl(t){const e=this.parent.url,i=await b.e.get().fetch(e);this._decode(await i.arrayBuffer(),t)}_decode(t,e){const i=(t,i)=>{if(t)e&&e(t);else{this.parent.isLoaded=!0,this.buffer=i;const t=this.parent.autoPlayStart();e&&e(null,this.parent,t)}};if(t instanceof AudioBuffer)i(null,t);else{this.parent.context.decode(t,i)}}}const Te=class{static from(t){let e={};"string"===typeof t?e.url=t:t instanceof ArrayBuffer||t instanceof AudioBuffer||t instanceof HTMLAudioElement?e.source=t:Array.isArray(t)?e.url=t:e=t,e={autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1,...e},Object.freeze(e);const i=oe().useLegacy?new _e:new Ce;return new Te(i,e)}constructor(t,e){this.media=t,this.options=e,this._instances=[],this._sprites={},this.media.init(this);const i=e.complete;this._autoPlayOptions=i?{complete:i}:null,this.isLoaded=!1,this._preloadQueue=null,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=Array.isArray(e.url)?this.preferUrl(e.url):e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}preferUrl(t){const[e]=t.map((t=>({url:t,ext:E.A.extname(t).slice(1)}))).filter((t=>{let{ext:e}=t;return ye[e]})).sort(((t,e)=>me.indexOf(t.ext)-me.indexOf(e.ext)));if(!e)throw new Error("No supported file type found");return e.url}get context(){return oe().context}pause(){return this.isPlaying=!1,this.paused=!0,this}resume(){return this.isPlaying=this._instances.length>0,this.paused=!1,this}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh()}get filters(){return this.media.filters}set filters(t){this.media.filters=t}addSprites(t,e){if("object"===typeof t){const e={};for(const i in t)e[i]=this.addSprites(i,t[i]);return e}console.assert(!this._sprites[t],"Alias ".concat(t," is already taken"));const i=new ge(this,e);return this._sprites[t]=i,i}destroy(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null}removeSprites(t){if(t){const e=this._sprites[t];void 0!==e&&(e.destroy(),delete this._sprites[t])}else for(const e in this._sprites)this.removeSprites(e);return this}get isPlayable(){return this.isLoaded&&this.media&&this.media.isPlayable}stop(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(let t=this._instances.length-1;t>=0;t--)this._instances[t].stop();return this}play(t,e){let i;if("string"===typeof t){i={sprite:t,loop:this.loop,complete:e}}else"function"===typeof t?(i={},i.complete=t):i=t;if(i={complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1,...i||{}},i.sprite){const t=i.sprite;console.assert(!!this._sprites[t],"Alias ".concat(t," is not available"));const e=this._sprites[t];i.start=e.start+(i.start||0),i.end=e.end,i.speed=e.speed||1,i.loop=e.loop||i.loop,delete i.sprite}if(i.offset&&(i.start=i.offset),!this.isLoaded)return this._preloadQueue?new Promise((t=>{this._preloadQueue.push((()=>{t(this.play(i))}))})):(this._preloadQueue=[],this.autoPlay=!0,this._autoPlayOptions=i,new Promise(((t,e)=>{this._preload(((s,n,r)=>{this._preloadQueue.forEach((t=>t())),this._preloadQueue=null,s?e(s):(i.loaded&&i.loaded(s,n,r),t(r))}))})));(this.singleInstance||i.singleInstance)&&this._removeInstances();const s=this._createInstance();return this._instances.push(s),this.isPlaying=!0,s.once("end",(()=>{i.complete&&i.complete(this),this._onComplete(s)})),s.once("stop",(()=>{this._onComplete(s)})),s.play(i),s}refresh(){const t=this._instances.length;for(let e=0;e<t;e++)this._instances[e].refresh()}refreshPaused(){const t=this._instances.length;for(let e=0;e<t;e++)this._instances[e].refreshPaused()}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}_preload(t){this.media.load(t)}get instances(){return this._instances}get sprites(){return this._sprites}get duration(){return this.media.duration}autoPlayStart(){let t;return this.autoPlay&&(t=this.play(this._autoPlayOptions)),t}_removeInstances(){for(let t=this._instances.length-1;t>=0;t--)this._poolInstance(this._instances[t]);this._instances.length=0}_onComplete(t){if(this._instances){const e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1),this.isPlaying=this._instances.length>0}this._poolInstance(t)}_createInstance(){if(Te._pool.length>0){const t=Te._pool.pop();return t.init(this.media),t}return this.media.create()}_poolInstance(t){t.destroy(),Te._pool.indexOf(t)<0&&Te._pool.push(t)}};let Pe=Te;Pe._pool=[];class Me extends we{constructor(){const t=window,e=new Me.AudioContext,i=e.createDynamicsCompressor(),s=e.createAnalyser();s.connect(i),i.connect(e.destination),super(s,i),this.autoPause=!0,this._ctx=e,this._offlineCtx=new Me.OfflineAudioContext(1,2,t.OfflineAudioContext?Math.max(8e3,Math.min(96e3,e.sampleRate)):44100),this.compressor=i,this.analyser=s,this.events=new se.A,this.volume=1,this.speed=1,this.muted=!1,this.paused=!1,this._locked="suspended"===e.state&&("ontouchstart"in globalThis||"onclick"in globalThis),this._locked&&(this._unlock(),this._unlock=this._unlock.bind(this),document.addEventListener("mousedown",this._unlock,!0),document.addEventListener("touchstart",this._unlock,!0),document.addEventListener("touchend",this._unlock,!0)),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),globalThis.addEventListener("focus",this.onFocus),globalThis.addEventListener("blur",this.onBlur)}onFocus(){if(!this.autoPause)return;const t=this._ctx.state;"suspended"!==t&&"interrupted"!==t&&this._locked||(this.paused=this._pausedOnBlur,this.refreshPaused())}onBlur(){this.autoPause&&(this._locked||(this._pausedOnBlur=this._paused,this.paused=!0,this.refreshPaused()))}_unlock(){this._locked&&(this.playEmptySound(),"running"===this._ctx.state&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._locked=!1))}playEmptySound(){const t=this._ctx.createBufferSource();t.buffer=this._ctx.createBuffer(1,1,22050),t.connect(this._ctx.destination),t.start(0,0,0),"suspended"===t.context.state&&t.context.resume()}static get AudioContext(){const t=window;return t.AudioContext||t.webkitAudioContext||null}static get OfflineAudioContext(){const t=window;return t.OfflineAudioContext||t.webkitOfflineAudioContext||null}destroy(){super.destroy();const t=this._ctx;"undefined"!==typeof t.close&&t.close(),globalThis.removeEventListener("focus",this.onFocus),globalThis.removeEventListener("blur",this.onBlur),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null}get audioContext(){return this._ctx}get offlineContext(){return this._offlineCtx}set paused(t){t&&"running"===this._ctx.state?this._ctx.suspend():t||"suspended"!==this._ctx.state||this._ctx.resume(),this._paused=t}get paused(){return this._paused}refresh(){this.events.emit("refresh")}refreshPaused(){this.events.emit("refreshPaused")}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this._paused}decode(t,e){const i=t=>{e(new Error((null===t||void 0===t?void 0:t.message)||"Unable to decode file"))},s=this._offlineCtx.decodeAudioData(t,(t=>{e(null,t)}),i);s&&s.catch(i)}}const ke=t=>{var e;const i=t.src;let s=null===t||void 0===t||null===(e=t.alias)||void 0===e?void 0:e[0];return s&&t.src!==s||(s=E.A.basename(i,E.A.extname(i))),s},Be={extension:x.Ag.Asset,detection:{test:async()=>!0,add:async t=>[...t,...me.filter((t=>ye[t]))],remove:async t=>t.filter((e=>t.includes(e)))},loader:{name:"sound",extension:{type:[x.Ag.LoadParser],priority:R.T.High},test(t){const e=E.A.extname(t).slice(1);return!!ye[e]||xe.some((e=>t.startsWith("data:".concat(e))))},async load(t,e){const i=await new Promise(((i,s)=>Pe.from({...e.data,url:t,preload:!0,loaded(t,n){var r,o;t?s(t):i(n),null===(r=e.data)||void 0===r||null===(o=r.loaded)||void 0===o||o.call(r,t,n)}})));return oe().add(ke(e),i),i},async unload(t,e){oe().remove(ke(e))}}};x.XO.add(Be);!function(t){re=t}(new class{constructor(){this.init()}init(){return this.supported&&(this._webAudioContext=new Me),this._htmlAudioContext=new de,this._sounds={},this.useLegacy=!this.supported,this}get context(){return this._context}get filtersAll(){return this.useLegacy?[]:this._context.filters}set filtersAll(t){this.useLegacy||(this._context.filters=t)}get supported(){return null!==Me.AudioContext}add(t,e){if("object"===typeof t){const i={};for(const s in t){const n=this._getOptions(t[s],e);i[s]=this.add(s,n)}return i}if(console.assert(!this._sounds[t],"Sound with alias ".concat(t," already exists.")),e instanceof Pe)return this._sounds[t]=e,e;const i=this._getOptions(e),s=Pe.from(i);return this._sounds[t]=s,s}_getOptions(t,e){let i;return i="string"===typeof t||Array.isArray(t)?{url:t}:t instanceof ArrayBuffer||t instanceof AudioBuffer||t instanceof HTMLAudioElement?{source:t}:t,i={...i,...e||{}},i}get useLegacy(){return this._useLegacy}set useLegacy(t){this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext}get disableAutoPause(){return!this._webAudioContext.autoPause}set disableAutoPause(t){this._webAudioContext.autoPause=!t}remove(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this}get volumeAll(){return this._context.volume}set volumeAll(t){this._context.volume=t,this._context.refresh()}get speedAll(){return this._context.speed}set speedAll(t){this._context.speed=t,this._context.refresh()}togglePauseAll(){return this._context.togglePause()}pauseAll(){return this._context.paused=!0,this._context.refreshPaused(),this}resumeAll(){return this._context.paused=!1,this._context.refreshPaused(),this}toggleMuteAll(){return this._context.toggleMute()}muteAll(){return this._context.muted=!0,this._context.refresh(),this}unmuteAll(){return this._context.muted=!1,this._context.refresh(),this}removeAll(){for(const t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this}stopAll(){for(const t in this._sounds)this._sounds[t].stop();return this}exists(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=!!this._sounds[t];return e&&console.assert(i,"No sound matching alias '".concat(t,"'.")),i}isPlaying(){for(const t in this._sounds)if(this._sounds[t].isPlaying)return!0;return!1}find(t){return this.exists(t,!0),this._sounds[t]}play(t,e){return this.find(t).play(e)}stop(t){return this.find(t).stop()}pause(t){return this.find(t).pause()}resume(t){return this.find(t).resume()}volume(t,e){const i=this.find(t);return void 0!==e&&(i.volume=e),i.volume}speed(t,e){const i=this.find(t);return void 0!==e&&(i.speed=e),i.speed}duration(t){return this.find(t).duration}close(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this}});class Re{constructor(){this._sounds=void 0,this._sounds=new Map}async LoadSounds(t){for(const e of t){await Ht.load(e);const t=Pe.from(e);this._sounds.set(e,t)}}Play(t){const e=this._sounds.get(t);void 0!==e&&(e.loop=!1,e.play())}PlayLoop(t){const e=this._sounds.get(t);void 0!==e&&(e.loop=!0,e.play())}Stop(t){const e=this._sounds.get(t);void 0!==e&&e.stop()}}class Ie{constructor(t){this._gaffe=void 0,this._reelset=void 0,this._combinations=void 0,this._generatedStops=void 0,this._winMatches=void 0,this._userId=void 0,this._balance=void 0,this._multiplier=void 0,this._multiplierInc=void 0,this._winMatchMin=void 0,this.Config=void 0,this.Config=t,this._userId=0,this._multiplier=0,this._multiplierInc=0,this._winMatchMin=0,this._balance=0,this._gaffe=new Array,this._reelset=new Array,this._combinations=new Map,this._generatedStops=new Array,this._winMatches=new Array}GetUserId(){return this._userId}GetUserBalance(){return this._balance}SetGaffe(t){this._gaffe=t}async Initialize(t){return new Promise(((e,i)=>{try{this._userId=t,this._balance=this.Config.BalanceStart,this._combinations=this.Config.Combinations,this._reelset=this.Config.Reelset.concat(this.Config.Reelset),this._multiplier=this.Config.BetMultiplier,this._multiplierInc=this.Config.BetMultiplierInc,this._winMatchMin=this.Config.WinMatchMin,e(!0)}catch(s){i(s)}}))}Reset(){this._balance=this.Config.BalanceStart}async GenerateStops(){return new Promise(((t,e)=>{try{const e=new Array;this._reelset.forEach((t=>{const i=this._gaffe.shift();e.push(void 0!==i?i%t.length:Math.floor(Math.random()*t.length))})),this._generatedStops=e,t(Object.assign([],e))}catch(i){e(i)}}))}GetWinMatches(){if(0===this._generatedStops.length)return new Array;const t=new Array,e=Math.floor(this._generatedStops.length/2),i=this._generatedStops.splice(0,e),s=this._generatedStops,n=this._reelset;return i.forEach(((e,i)=>{for(let r=0;r<this.Config.MachineRows;r++){const o=e+r,a=s[i]+r,h=o%n[i].length,l=n[i][h],c=a%n[i].length,d=n[i][c];this._combinations.has(l)&&this._combinations.get(l)===d&&t.push([i,r])}})),this._winMatches=t,Object.assign([],t)}GetWinnings(t){let e=0,i=0;return this._winMatches.length>=this._winMatchMin&&(i=this._multiplier+this._multiplierInc*(this._winMatches.length-this._winMatchMin),e=t*i),this._balance=this._balance+e-t,e}}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));new class{constructor(){this._logger=console,this._config=new m,this._renderer=new ne,this._audio=new Re,this._engine=new Ie(this._config),this._controller=new g(this._config,this._renderer,this._audio,this._engine,this._logger),this._controller.Start()}};"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((t=>{t.unregister()})).catch((t=>{console.error(t.message)}))})()})();
//# sourceMappingURL=main.49862a4e.js.map