{"version":3,"file":"static/js/main.49862a4e.js","mappings":"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","sources":["../node_modules/earcut/src/earcut.js","../node_modules/eventemitter3/index.js","../node_modules/parse-svg-path/index.js","../node_modules/eventemitter3/index.mjs","../node_modules/pixi.js/src/assets/cache/Cache.ts","../node_modules/pixi.js/src/assets/loader/parsers/LoaderParser.ts","../node_modules/pixi.js/src/assets/utils/createStringVariations.ts","../node_modules/pixi.js/src/assets/resolver/Resolver.ts","../node_modules/pixi.js/src/assets/utils/convertToList.ts","../node_modules/pixi.js/src/assets/utils/copySearchParams.ts","../node_modules/pixi.js/src/assets/utils/isSingleItem.ts","../node_modules/@pixi/colord/index.mjs","../node_modules/pixi.js/src/color/Color.ts","../node_modules/@pixi/colord/plugins/names.mjs","../node_modules/pixi.js/src/environment/adapter.ts","../node_modules/pixi.js/src/environment-browser/BrowserAdapter.ts","../node_modules/pixi.js/src/extensions/Extensions.ts","../node_modules/pixi.js/src/filters/FilterEffect.ts","../node_modules/pixi.js/src/maths/matrix/Matrix.ts","../node_modules/pixi.js/src/maths/misc/const.ts","../node_modules/pixi.js/src/maths/misc/pow2.ts","../node_modules/pixi.js/src/maths/point/ObservablePoint.ts","../node_modules/pixi.js/src/maths/point/Point.ts","../node_modules/pixi.js/src/maths/shapes/Rectangle.ts","../node_modules/pixi.js/src/rendering/batcher/gpu/BatchGeometry.ts","../node_modules/pixi.js/src/rendering/batcher/gpu/getTextureBatchBindGroup.ts","../node_modules/pixi.js/src/utils/data/ViewableBuffer.ts","../node_modules/pixi.js/src/rendering/renderers/shared/state/getAdjustedBlendModeBlend.ts","../node_modules/pixi.js/src/rendering/batcher/shared/BatchTextureArray.ts","../node_modules/pixi.js/src/rendering/batcher/shared/Batcher.ts","../node_modules/pixi.js/src/rendering/mask/utils/addMaskBounds.ts","../node_modules/pixi.js/src/rendering/mask/utils/addMaskLocalBounds.ts","../node_modules/pixi.js/src/rendering/mask/alpha/AlphaMask.ts","../node_modules/pixi.js/src/rendering/mask/color/ColorMask.ts","../node_modules/pixi.js/src/rendering/mask/stencil/StencilMask.ts","../node_modules/pixi.js/src/rendering/init.ts","../node_modules/pixi.js/src/rendering/renderers/gl/const.ts","../node_modules/pixi.js/src/rendering/renderers/gl/shader/program/getTestContext.ts","../node_modules/pixi.js/src/rendering/renderers/gpu/shader/BindGroup.ts","../node_modules/pixi.js/src/rendering/renderers/shared/buffer/Buffer.ts","../node_modules/pixi.js/src/rendering/renderers/shared/buffer/const.ts","../node_modules/pixi.js/src/rendering/renderers/shared/buffer/utils/fastCopy.ts","../node_modules/pixi.js/src/rendering/renderers/shared/geometry/utils/ensureIsBuffer.ts","../node_modules/pixi.js/src/rendering/renderers/shared/geometry/Geometry.ts","../node_modules/pixi.js/src/rendering/renderers/shared/geometry/utils/getGeometryBounds.ts","../node_modules/pixi.js/src/rendering/renderers/shared/instructions/InstructionSet.ts","../node_modules/pixi.js/src/rendering/renderers/shared/state/const.ts","../node_modules/pixi.js/src/environment/autoDetectEnvironment.ts","../node_modules/pixi.js/src/rendering/renderers/shared/system/AbstractRenderer.ts","../node_modules/pixi.js/src/rendering/renderers/shared/system/SystemRunner.ts","../node_modules/pixi.js/src/rendering/renderers/shared/texture/CanvasPool.ts","../node_modules/pixi.js/src/maths/matrix/groupD8.ts","../node_modules/pixi.js/src/utils/misc/NOOP.ts","../node_modules/pixi.js/src/rendering/renderers/shared/texture/Texture.ts","../node_modules/pixi.js/src/rendering/renderers/shared/texture/TextureMatrix.ts","../node_modules/pixi.js/src/rendering/renderers/shared/texture/sources/BufferImageSource.ts","../node_modules/pixi.js/src/rendering/renderers/shared/texture/sources/CanvasSource.ts","../node_modules/pixi.js/src/rendering/renderers/shared/texture/sources/ImageSource.ts","../node_modules/pixi.js/src/rendering/renderers/shared/texture/TextureStyle.ts","../node_modules/pixi.js/src/rendering/renderers/shared/texture/sources/TextureSource.ts","../node_modules/pixi.js/src/scene/container/utils/definedProps.ts","../node_modules/pixi.js/src/rendering/renderers/shared/texture/sources/VideoSource.ts","../node_modules/pixi.js/src/rendering/renderers/shared/texture/utils/maxRecommendedTextures.ts","../node_modules/pixi.js/src/rendering/renderers/shared/texture/utils/textureFrom.ts","../node_modules/pixi.js/src/scene/container/container-mixins/childrenHelperMixin.ts","../node_modules/pixi.js/src/rendering/mask/MaskEffectManager.ts","../node_modules/pixi.js/src/scene/container/container-mixins/effectsMixin.ts","../node_modules/pixi.js/src/scene/container/container-mixins/findMixin.ts","../node_modules/pixi.js/src/scene/container/utils/checkChildrenDidChange.ts","../node_modules/pixi.js/src/scene/container/container-mixins/measureMixin.ts","../node_modules/pixi.js/src/scene/container/container-mixins/onRenderMixin.ts","../node_modules/pixi.js/src/scene/container/container-mixins/sortMixin.ts","../node_modules/pixi.js/src/scene/container/container-mixins/toLocalGlobalMixin.ts","../node_modules/pixi.js/src/scene/container/RenderGroup.ts","../node_modules/pixi.js/src/scene/container/Container.ts","../node_modules/pixi.js/src/scene/container/utils/assignWithIgnore.ts","../node_modules/pixi.js/src/culling/cullingMixin.ts","../node_modules/pixi.js/src/scene/container/bounds/Bounds.ts","../node_modules/pixi.js/src/scene/container/bounds/getGlobalBounds.ts","../node_modules/pixi.js/src/scene/container/bounds/getLocalBounds.ts","../node_modules/pixi.js/src/scene/container/bounds/utils/matrixAndBoundsPool.ts","../node_modules/pixi.js/src/scene/graphics/shared/BatchableGraphics.ts","../node_modules/pixi.js/src/scene/container/utils/multiplyHexColors.ts","../node_modules/pixi.js/src/scene/graphics/shared/Graphics.ts","../node_modules/pixi.js/src/maths/shapes/Circle.ts","../node_modules/pixi.js/src/maths/shapes/Ellipse.ts","../node_modules/pixi.js/src/maths/misc/squaredDistanceToLineSegment.ts","../node_modules/pixi.js/src/maths/shapes/Polygon.ts","../node_modules/pixi.js/src/maths/shapes/RoundedRectangle.ts","../node_modules/pixi.js/src/scene/graphics/shared/buildCommands/buildAdaptiveBezier.ts","../node_modules/pixi.js/src/scene/graphics/shared/buildCommands/buildAdaptiveQuadratic.ts","../node_modules/pixi.js/src/scene/graphics/shared/buildCommands/buildArc.ts","../node_modules/pixi.js/src/scene/graphics/shared/buildCommands/buildArcToSvg.ts","../node_modules/pixi.js/src/scene/graphics/shared/path/ShapePath.ts","../node_modules/pixi.js/src/scene/graphics/shared/buildCommands/buildArcTo.ts","../node_modules/pixi.js/src/scene/graphics/shared/path/roundShape.ts","../node_modules/pixi.js/src/scene/graphics/shared/path/GraphicsPath.ts","../node_modules/pixi.js/src/scene/graphics/shared/svg/SVGToGraphicsPath.ts","../node_modules/pixi.js/src/scene/graphics/shared/svg/SVGParser.ts","../node_modules/pixi.js/src/scene/graphics/shared/GraphicsContext.ts","../node_modules/pixi.js/src/rendering/renderers/shared/geometry/utils/transformVertices.ts","../node_modules/pixi.js/src/scene/graphics/shared/buildCommands/buildCircle.ts","../node_modules/pixi.js/src/scene/graphics/shared/const.ts","../node_modules/pixi.js/src/scene/graphics/shared/buildCommands/buildLine.ts","../node_modules/pixi.js/src/scene/graphics/shared/utils/triangulateWithHoles.ts","../node_modules/pixi.js/src/scene/graphics/shared/buildCommands/buildPolygon.ts","../node_modules/pixi.js/src/scene/graphics/shared/utils/buildContextBatches.ts","../node_modules/pixi.js/src/scene/graphics/shared/buildCommands/buildRectangle.ts","../node_modules/pixi.js/src/scene/graphics/shared/buildCommands/buildTriangle.ts","../node_modules/pixi.js/src/scene/graphics/shared/utils/getOrientationOfPoints.ts","../node_modules/pixi.js/src/rendering/renderers/shared/geometry/utils/buildUvs.ts","../node_modules/pixi.js/src/scene/graphics/shared/GraphicsContextSystem.ts","../node_modules/pixi.js/src/scene/graphics/shared/fill/FillGradient.ts","../node_modules/pixi.js/src/scene/graphics/shared/fill/FillPattern.ts","../node_modules/pixi.js/src/scene/graphics/shared/utils/convertFillInputToFillStyle.ts","../node_modules/pixi.js/src/scene/sprite/Sprite.ts","../node_modules/pixi.js/src/scene/text-bitmap/AbstractBitmapFont.ts","../node_modules/pixi.js/src/scene/text-bitmap/utils/resolveCharacters.ts","../node_modules/pixi.js/src/scene/text-bitmap/DynamicBitmapFont.ts","../node_modules/pixi.js/src/scene/text-bitmap/BitmapFontManager.ts","../node_modules/pixi.js/src/scene/text-bitmap/utils/getBitmapTextLayout.ts","../node_modules/pixi.js/src/scene/text/TextStyle.ts","../node_modules/pixi.js/src/scene/text/canvas/CanvasTextMetrics.ts","../node_modules/pixi.js/src/scene/text/canvas/utils/fontStringFromTextStyle.ts","../node_modules/pixi.js/src/scene/text/canvas/utils/getCanvasFillStyle.ts","../node_modules/pixi.js/src/scene/text/utils/generateTextStyleKey.ts","../node_modules/pixi.js/src/spritesheet/Spritesheet.ts","../node_modules/pixi.js/src/spritesheet/spritesheetAsset.ts","../node_modules/pixi.js/src/spritesheet/init.ts","../node_modules/pixi.js/src/ticker/TickerListener.ts","../node_modules/pixi.js/src/ticker/Ticker.ts","../node_modules/pixi.js/src/ticker/const.ts","../node_modules/pixi.js/src/utils/browser/detectVideoAlphaMode.ts","../node_modules/pixi.js/src/utils/browser/unsafeEvalSupported.ts","../node_modules/pixi.js/src/utils/data/removeItems.ts","../node_modules/pixi.js/src/utils/data/uid.ts","../node_modules/pixi.js/src/utils/data/updateQuadBounds.ts","../node_modules/pixi.js/src/utils/logging/deprecation.ts","../node_modules/pixi.js/src/utils/logging/warn.ts","../node_modules/pixi.js/src/utils/path.ts","../node_modules/pixi.js/src/utils/pool/Pool.ts","../node_modules/pixi.js/src/utils/pool/PoolGroup.ts","../webpack/bootstrap","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/load script","../webpack/runtime/make namespace object","../webpack/runtime/publicPath","../webpack/runtime/jsonp chunk loading","game/Abstracts/BaseObject.ts","game/Abstracts/Component.ts","game/Abstracts/GameObject.ts","game/Aritifacts/GoButton.ts","game/Aritifacts/GoImage.ts","game/Abstracts/Manager.ts","game/Aritifacts/ViewMenu.ts","game/Aritifacts/ViewBack.ts","game/Aritifacts/GoText.ts","game/Aritifacts/CompReel.ts","game/Aritifacts/GoWinBox.ts","game/Aritifacts/CompSlot.ts","game/Aritifacts/GoPanel.ts","game/Aritifacts/ViewGame.ts","game/Aritifacts/ViewInfo.ts","game/Defaults/GameController.ts","game/Defaults/DefaultConfig.ts","../node_modules/pixi.js/src/environment-browser/browserExt.ts","../node_modules/pixi.js/src/environment-webworker/webworkerExt.ts","../node_modules/pixi.js/src/utils/browser/isWebGLSupported.ts","../node_modules/pixi.js/src/utils/browser/isWebGPUSupported.ts","../node_modules/pixi.js/src/rendering/renderers/autoDetectRenderer.ts","../node_modules/pixi.js/src/app/Application.ts","../node_modules/pixi.js/src/scene/text-bitmap/BitmapFont.ts","../node_modules/pixi.js/src/scene/text-bitmap/asset/bitmapFontTextParser.ts","../node_modules/pixi.js/src/scene/text-bitmap/asset/bitmapFontXMLParser.ts","../node_modules/pixi.js/src/scene/text-bitmap/asset/bitmapFontXMLStringParser.ts","../node_modules/pixi.js/src/scene/text-bitmap/asset/loadBitmapFont.ts","../node_modules/pixi.js/src/assets/BackgroundLoader.ts","../node_modules/pixi.js/src/assets/cache/parsers/cacheTextureArray.ts","../node_modules/pixi.js/src/assets/detections/utils/testImageFormat.ts","../node_modules/pixi.js/src/assets/detections/parsers/detectAvif.ts","../node_modules/pixi.js/src/assets/detections/parsers/detectDefaults.ts","../node_modules/pixi.js/src/assets/detections/utils/testVideoFormat.ts","../node_modules/pixi.js/src/assets/detections/parsers/detectMp4.ts","../node_modules/pixi.js/src/assets/detections/parsers/detectOgv.ts","../node_modules/pixi.js/src/assets/detections/parsers/detectWebm.ts","../node_modules/pixi.js/src/assets/detections/parsers/detectWebp.ts","../node_modules/pixi.js/src/assets/loader/Loader.ts","../node_modules/pixi.js/src/assets/utils/checkDataUrl.ts","../node_modules/pixi.js/src/assets/utils/checkExtension.ts","../node_modules/pixi.js/src/assets/loader/parsers/loadJson.ts","../node_modules/pixi.js/src/assets/loader/parsers/loadTxt.ts","../node_modules/pixi.js/src/assets/loader/parsers/loadWebFont.ts","../node_modules/pixi.js/src/utils/network/getResolutionOfUrl.ts","../node_modules/pixi.js/src/assets/loader/parsers/textures/utils/createTexture.ts","../node_modules/pixi.js/src/assets/loader/parsers/textures/loadSVG.ts","../node_modules/pixi.js/src/assets/loader/workers/WorkerManager.ts","../node_modules/pixi.js/src/assets/loader/parsers/textures/loadTextures.ts","../node_modules/pixi.js/src/assets/loader/parsers/textures/loadVideoTextures.ts","../node_modules/pixi.js/src/assets/resolver/parsers/resolveTextureUrl.ts","../node_modules/pixi.js/src/assets/resolver/parsers/resolveJsonUrl.ts","../node_modules/pixi.js/src/assets/Assets.ts","../node_modules/pixi.js/src/utils/misc/Transform.ts","../node_modules/pixi.js/src/scene/sprite-tiling/TilingSprite.ts","../node_modules/pixi.js/src/scene/text/AbstractText.ts","../node_modules/pixi.js/src/scene/text/Text.ts","../node_modules/pixi.js/src/index.ts","game/Defaults/PIXIRenderer.ts","../node_modules/@pixi/sound/src/instance.ts","../node_modules/@pixi/sound/src/filters/Filter.ts","../node_modules/@pixi/sound/src/webaudio/WebAudioUtils.ts","../node_modules/@pixi/sound/src/filters/EqualizerFilter.ts","../node_modules/@pixi/sound/src/htmlaudio/HTMLAudioContext.ts","../node_modules/@pixi/sound/src/htmlaudio/HTMLAudioInstance.ts","../node_modules/@pixi/sound/src/htmlaudio/HTMLAudioMedia.ts","../node_modules/@pixi/sound/src/SoundSprite.ts","../node_modules/@pixi/sound/src/utils/supported.ts","../node_modules/@pixi/sound/src/webaudio/WebAudioInstance.ts","../node_modules/@pixi/sound/src/Filterable.ts","../node_modules/@pixi/sound/src/webaudio/WebAudioNodes.ts","../node_modules/@pixi/sound/src/webaudio/WebAudioMedia.ts","../node_modules/@pixi/sound/src/Sound.ts","../node_modules/@pixi/sound/src/webaudio/WebAudioContext.ts","../node_modules/@pixi/sound/src/soundAsset.ts","../node_modules/@pixi/sound/src/index.ts","../node_modules/@pixi/sound/src/SoundLibrary.ts","game/Defaults/PIXIAudio.ts","game/Defaults/SlotEngine.ts","serviceWorker.ts","index.tsx","app.ts"],"sourcesContent":["'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 32767 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim | 0);\n            triangles.push(ear.i / dim | 0);\n            triangles.push(next.i / dim | 0);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    var p = c.next;\n    while (p !== a) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(x0, y0, minX, minY, invSize),\n        maxZ = zOrder(x1, y1, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim | 0);\n            triangles.push(p.i / dim | 0);\n            triangles.push(b.i / dim | 0);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize, 0);\n                earcutLinked(c, triangles, dim, minX, minY, invSize, 0);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        outerNode = eliminateHole(queue[i], outerNode);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    var bridge = findHoleBridge(hole, outerNode);\n    if (!bridge) {\n        return outerNode;\n    }\n\n    var bridgeReverse = splitPolygon(bridge, hole);\n\n    // filter collinear points around the cuts\n    filterPoints(bridgeReverse, bridgeReverse.next);\n    return filterPoints(bridge, bridge.next);\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                m = p.x < p.next.x ? p : p.next;\n                if (x === hx) return m; // hole touches outer segment; pick leftmost endpoint\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === 0) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = (x - minX) * invSize | 0;\n    y = (y - minY) * invSize | 0;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) >= (ax - px) * (cy - py) &&\n           (ax - px) * (by - py) >= (bx - px) * (ay - py) &&\n           (bx - px) * (cy - py) >= (cx - px) * (by - py);\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    var o1 = sign(area(p1, q1, p2));\n    var o2 = sign(area(p1, q1, q2));\n    var o3 = sign(area(p2, q2, p1));\n    var o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = 0;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","\nmodule.exports = parse\n\n/**\n * expected argument lengths\n * @type {Object}\n */\n\nvar length = {a: 7, c: 6, h: 1, l: 2, m: 2, q: 4, s: 4, t: 2, v: 1, z: 0}\n\n/**\n * segment pattern\n * @type {RegExp}\n */\n\nvar segment = /([astvzqmhlc])([^astvzqmhlc]*)/ig\n\n/**\n * parse an svg path data string. Generates an Array\n * of commands where each command is an Array of the\n * form `[command, arg1, arg2, ...]`\n *\n * @param {String} path\n * @return {Array}\n */\n\nfunction parse(path) {\n\tvar data = []\n\tpath.replace(segment, function(_, command, args){\n\t\tvar type = command.toLowerCase()\n\t\targs = parseValues(args)\n\n\t\t// overloaded moveTo\n\t\tif (type == 'm' && args.length > 2) {\n\t\t\tdata.push([command].concat(args.splice(0, 2)))\n\t\t\ttype = 'l'\n\t\t\tcommand = command == 'm' ? 'l' : 'L'\n\t\t}\n\n\t\twhile (true) {\n\t\t\tif (args.length == length[type]) {\n\t\t\t\targs.unshift(command)\n\t\t\t\treturn data.push(args)\n\t\t\t}\n\t\t\tif (args.length < length[type]) throw new Error('malformed path data')\n\t\t\tdata.push([command].concat(args.splice(0, length[type])))\n\t\t}\n\t})\n\treturn data\n}\n\nvar number = /-?[0-9]*\\.?[0-9]+(?:e[-+]?\\d+)?/ig\n\nfunction parseValues(args) {\n\tvar numbers = args.match(number)\n\treturn numbers ? numbers.map(Number) : []\n}\n","import EventEmitter from './index.js'\n\nexport { EventEmitter }\nexport default EventEmitter\n","import { warn } from '../../utils/logging/warn';\nimport { convertToList } from '../utils/convertToList';\n\nimport type { CacheParser } from './CacheParser';\n\n/**\n * A single Cache for all assets.\n *\n * When assets are added to the cache via set they normally are added to the cache as key-value pairs.\n *\n * With this cache, you can add parsers that will take the object and convert it to a list of assets that can be cached.\n * for example a cacheSpritesheet parser will add all of the textures found within its sprite sheet directly to the cache.\n *\n * This gives devs the flexibility to cache any type of object however we want.\n *\n * It is not intended that this class is created by developers - it is part of the Asset package.\n * This is the first major system of PixiJS' main Assets class.\n * @example\n * import { Cache } from 'pixi.js';\n *\n * Cache.set('bunny', bunnyTexture);\n * @class Cache\n * @memberof assets\n */\nclass CacheClass\n{\n    private readonly _parsers: CacheParser[] = [];\n\n    private readonly _cache: Map<any, any> = new Map();\n    private readonly _cacheMap: Map<string, {\n        keys: string[],\n        cacheKeys: string[],\n    }> = new Map();\n\n    /** Clear all entries. */\n    public reset(): void\n    {\n        this._cacheMap.clear();\n        this._cache.clear();\n    }\n\n    /**\n     * Check if the key exists\n     * @param key - The key to check\n     */\n    public has(key: any): boolean\n    {\n        return this._cache.has(key);\n    }\n\n    /**\n     * Fetch entry by key\n     * @param key - The key of the entry to get\n     */\n    public get<T = any>(key: any): T\n    {\n        const result = this._cache.get(key);\n\n        if (!result)\n        {\n            // #if _DEBUG\n            warn(`[Assets] Asset id ${key} was not found in the Cache`);\n            // #endif\n        }\n\n        return result as T;\n    }\n\n    /**\n     * Set a value by key or keys name\n     * @param key - The key or keys to set\n     * @param value - The value to store in the cache or from which cacheable assets will be derived.\n     */\n    public set(key: any | any[], value: unknown): void\n    {\n        const keys = convertToList<string>(key);\n\n        let cacheableAssets: Record<string, any>;\n\n        for (let i = 0; i < this.parsers.length; i++)\n        {\n            const parser = this.parsers[i];\n\n            if (parser.test(value))\n            {\n                cacheableAssets = parser.getCacheableAssets(keys, value);\n\n                break;\n            }\n        }\n\n        // convert cacheable assets to a map of key-value pairs\n        const cacheableMap = new Map(Object.entries(cacheableAssets || {}));\n\n        if (!cacheableAssets)\n        {\n            keys.forEach((key) =>\n            {\n                cacheableMap.set(key, value);\n            });\n        }\n\n        const cacheKeys = [...cacheableMap.keys()];\n\n        const cachedAssets = {\n            cacheKeys,\n            keys\n        };\n\n        // this is so we can remove them later..\n        keys.forEach((key) =>\n        {\n            this._cacheMap.set(key, cachedAssets as any);\n        });\n\n        cacheKeys.forEach((key) =>\n        {\n            const val = cacheableAssets ? cacheableAssets[key] : value;\n\n            if (this._cache.has(key) && this._cache.get(key) !== val)\n            {\n                // #if _DEBUG\n                warn('[Cache] already has key:', key);\n                // #endif\n            }\n\n            this._cache.set(key, cacheableMap.get(key));\n        });\n    }\n\n    /**\n     * Remove entry by key\n     *\n     * This function will also remove any associated alias from the cache also.\n     * @param key - The key of the entry to remove\n     */\n    public remove(key: any): void\n    {\n        if (!this._cacheMap.has(key))\n        {\n            // #if _DEBUG\n            warn(`[Assets] Asset id ${key} was not found in the Cache`);\n            // #endif\n\n            return;\n        }\n\n        const cacheMap = this._cacheMap.get(key);\n\n        const cacheKeys = cacheMap.cacheKeys;\n\n        cacheKeys.forEach((key) =>\n        {\n            this._cache.delete(key);\n        });\n\n        cacheMap.keys.forEach((key: string) =>\n        {\n            this._cacheMap.delete(key);\n        });\n    }\n\n    /** All loader parsers registered */\n    public get parsers(): CacheParser[]\n    {\n        return this._parsers;\n    }\n}\n\nexport const Cache = new CacheClass();\n","import type { ExtensionMetadata } from '../../../extensions/Extensions';\nimport type { ResolvedAsset } from '../../types';\nimport type { Loader } from '../Loader';\n\n/**\n * The extension priority for loader parsers.\n * Helpful when managing multiple parsers that share the same extension test.\n * The higher priority parsers will be checked first.\n * @enum {number}\n */\nexport enum LoaderParserPriority\n// eslint-disable-next-line @typescript-eslint/indent\n{\n    /** Generic parsers: txt, json, webfonts */\n    Low = 0,\n    /** PixiJS assets with generic extensions: spritesheets, bitmapfonts  */\n    Normal = 1,\n    /** Specific texture types: svg, png, ktx, dds, basis */\n    High = 2,\n}\n\n/** A more verbose version of the LoaderParser, allowing you to set the loaded, parsed, and unloaded asset separately */\nexport interface LoaderParserAdvanced<\n    ASSET = any,\n    PARSED_ASSET = ASSET,\n    UNLOAD_ASSET = ASSET,\n    META_DATA = any,\n    CONFIG = Record<string, any>\n>\n{\n    /** Should be ExtensionType.LoaderParser */\n    extension?: ExtensionMetadata;\n\n    /** A config to adjust the parser */\n    config?: CONFIG;\n\n    /** The name of the parser (this can be used when specifying loadParser in a ResolvedAsset) */\n    name: string;\n\n    /**\n     * Each URL to load will be tested here,\n     * if the test is passed the assets are loaded using the load function below.\n     * Good place to test for things like file extensions!\n     * @param url - The URL to test\n     * @param resolvedAsset - Any custom additional information relevant to the asset being loaded\n     * @param loader - The loader instance\n     */\n    test?: (url: string, resolvedAsset?: ResolvedAsset<META_DATA>, loader?: Loader) => boolean;\n\n    /**\n     * This is the promise that loads the URL provided\n     * resolves with a loaded asset if returned by the parser.\n     * @param url - The URL to load\n     * @param resolvedAsset - Any custom additional information relevant to the asset being loaded\n     * @param loader - The loader instance\n     */\n    load?: <T>(url: string, resolvedAsset?: ResolvedAsset<META_DATA>, loader?: Loader) => Promise<ASSET | T>;\n\n    /**\n     * This function is used to test if the parse function should be run on the asset\n     * If this returns true then parse is called with the asset\n     * @param asset - The loaded asset data\n     * @param resolvedAsset - Any custom additional information relevant to the asset being loaded\n     * @param loader - The loader instance\n     */\n    testParse?: (asset: ASSET, resolvedAsset?: ResolvedAsset<META_DATA>, loader?: Loader) => Promise<boolean>;\n\n    /**\n     * Gets called on the asset it testParse passes. Useful to convert a raw asset into something more useful\n     * @param asset - The loaded asset data\n     * @param resolvedAsset - Any custom additional information relevant to the asset being loaded\n     * @param loader - The loader instance\n     */\n    parse?: <T>(asset: ASSET, resolvedAsset?: ResolvedAsset<META_DATA>, loader?: Loader) => Promise<PARSED_ASSET | T>;\n\n    /**\n     * If an asset is parsed using this parser, the unload function will be called when the user requests an asset\n     * to be unloaded. This is useful for things like sounds or textures that can be unloaded from memory\n     * @param asset - The asset to unload/destroy\n     * @param resolvedAsset - Any custom additional information relevant to the asset being loaded\n     * @param loader - The loader instance\n     */\n    unload?: (asset: UNLOAD_ASSET, resolvedAsset?: ResolvedAsset<META_DATA>, loader?: Loader) => Promise<void> | void;\n}\n\n/**\n * The interface to define a loader parser *(all functions are optional)*.\n *\n * When you create a `parser` object, the flow for every asset loaded is:\n *\n * 1. `parser.test()` - Each URL to load will be tested here, if the test is passed the assets are\n * loaded using the load function below. Good place to test for things like file extensions!\n * 2. `parser.load()` - This is the promise that loads the URL provided resolves with a loaded asset\n * if returned by the parser.\n * 3. `parser.testParse()` - This function is used to test if the parse function should be run on the\n *  asset If this returns true then parse is called with the asset\n * 4. `parse.parse()` - Gets called on the asset it testParse passes. Useful to convert a raw asset\n *  into something more useful\n *\n * <br/>\n * Some loaders may only be used for parsing, some only for loading, and some for both!\n * @memberof assets\n */\nexport interface LoaderParser<ASSET = any, META_DATA = any, CONFIG = Record<string, any>>\n    extends LoaderParserAdvanced<ASSET, ASSET, ASSET, META_DATA, CONFIG> {}\n","function processX(base: string, ids: string[][], depth: number, result: string[], tags: string[])\n{\n    const id = ids[depth];\n\n    for (let i = 0; i < id.length; i++)\n    {\n        const value = id[i];\n\n        if (depth < ids.length - 1)\n        {\n            processX(base.replace(result[depth], value), ids, depth + 1, result, tags);\n        }\n        else\n        {\n            tags.push(base.replace(result[depth], value));\n        }\n    }\n}\n\n/**\n * Creates a list of all possible combinations of the given strings.\n * @example\n * const out2 = createStringVariations('name is {chicken,wolf,sheep}');\n * console.log(out2); // [ 'name is chicken', 'name is wolf', 'name is sheep' ]\n * @param string - The string to process\n */\nexport function createStringVariations(string: string): string[]\n{\n    const regex = /\\{(.*?)\\}/g;\n\n    const result = string.match(regex);\n\n    const tags: string[] = [];\n\n    if (result)\n    {\n        const ids: string[][] = [];\n\n        result.forEach((vars) =>\n        {\n            // first remove the brackets...\n            const split = vars.substring(1, vars.length - 1).split(',');\n\n            ids.push(split);\n        });\n\n        processX(string, ids, 0, result, tags);\n    }\n    else\n    {\n        tags.push(string);\n    }\n\n    return tags;\n}\n","import { warn } from '../../utils/logging/warn';\nimport { path } from '../../utils/path';\nimport { convertToList } from '../utils/convertToList';\nimport { createStringVariations } from '../utils/createStringVariations';\nimport { isSingleItem } from '../utils/isSingleItem';\n\nimport type {\n    ArrayOr,\n    AssetsBundle,\n    AssetsManifest,\n    AssetSrc,\n    ResolvedAsset,\n    ResolvedSrc,\n    UnresolvedAsset,\n} from '../types';\nimport type { PreferOrder, ResolveURLParser } from './types';\n\n/**\n * Options for how the resolver deals with generating bundle ids\n * @memberof assets\n */\nexport interface BundleIdentifierOptions\n{\n    /** The character that is used to connect the bundleId and the assetId when generating a bundle asset id key */\n    connector?: string;\n    /**\n     * A function that generates a bundle asset id key from a bundleId and an assetId\n     * @param bundleId - the bundleId\n     * @param assetId  - the assetId\n     * @returns the bundle asset id key\n     */\n    createBundleAssetId?: (bundleId: string, assetId: string) => string;\n    /**\n     * A function that generates an assetId from a bundle asset id key. This is the reverse of generateBundleAssetId\n     * @param bundleId - the bundleId\n     * @param assetBundleId - the bundle asset id key\n     * @returns the assetId\n     */\n    extractAssetIdFromBundle?: (bundleId: string, assetBundleId: string) => string;\n}\n\n/**\n * A class that is responsible for resolving mapping asset URLs to keys.\n * At its most basic it can be used for Aliases:\n *\n * ```js\n * resolver.add('foo', 'bar');\n * resolver.resolveUrl('foo') // => 'bar'\n * ```\n *\n * It can also be used to resolve the most appropriate asset for a given URL:\n *\n * ```js\n * resolver.prefer({\n *     params: {\n *         format: 'webp',\n *         resolution: 2,\n *     }\n * });\n *\n * resolver.add('foo', ['bar@2x.webp', 'bar@2x.png', 'bar.webp', 'bar.png']);\n *\n * resolver.resolveUrl('foo') // => 'bar@2x.webp'\n * ```\n * Other features include:\n * - Ability to process a manifest file to get the correct understanding of how to resolve all assets\n * - Ability to add custom parsers for specific file types\n * - Ability to add custom prefer rules\n *\n * This class only cares about the URL, not the loading of the asset itself.\n *\n * It is not intended that this class is created by developers - its part of the Asset class\n * This is the third major system of PixiJS' main Assets class\n * @memberof assets\n */\nexport class Resolver\n{\n    /**\n     * The prefix that denotes a URL is for a retina asset.\n     * @static\n     * @name RETINA_PREFIX\n     * @type {RegExp}\n     * @default /@([0-9\\.]+)x/\n     * @example `@2x`\n     */\n    public static RETINA_PREFIX = /@([0-9\\.]+)x/;\n\n    private readonly _defaultBundleIdentifierOptions: Required<BundleIdentifierOptions> = {\n        connector: '-',\n        createBundleAssetId: (bundleId, assetId) =>\n            `${bundleId}${this._bundleIdConnector}${assetId}`,\n        extractAssetIdFromBundle: (bundleId, assetBundleId) =>\n            assetBundleId.replace(`${bundleId}${this._bundleIdConnector}`, ''),\n    };\n\n    /** The character that is used to connect the bundleId and the assetId when generating a bundle asset id key */\n    private _bundleIdConnector = this._defaultBundleIdentifierOptions.connector;\n\n    /**\n     * A function that generates a bundle asset id key from a bundleId and an assetId\n     * @param bundleId - the bundleId\n     * @param assetId  - the assetId\n     * @returns the bundle asset id key\n     */\n    private _createBundleAssetId: (\n        bundleId: string,\n        assetId: string\n    ) => string = this._defaultBundleIdentifierOptions.createBundleAssetId;\n\n    /**\n     * A function that generates an assetId from a bundle asset id key. This is the reverse of generateBundleAssetId\n     * @param bundleId - the bundleId\n     * @param assetBundleId - the bundle asset id key\n     * @returns the assetId\n     */\n    private _extractAssetIdFromBundle: (\n        bundleId: string,\n        assetBundleId: string\n    ) => string = this._defaultBundleIdentifierOptions.extractAssetIdFromBundle;\n\n    private _assetMap: Record<string, ResolvedAsset[]> = {};\n    private _preferredOrder: PreferOrder[] = [];\n    private readonly _parsers: ResolveURLParser[] = [];\n\n    private _resolverHash: Record<string, ResolvedAsset> = {};\n    private _rootPath: string;\n    private _basePath: string;\n    private _manifest: AssetsManifest;\n    private _bundles: Record<string, string[]> = {};\n    private _defaultSearchParams: string;\n\n    /**\n     * Override how the resolver deals with generating bundle ids.\n     * must be called before any bundles are added\n     * @param bundleIdentifier - the bundle identifier options\n     */\n    public setBundleIdentifier(bundleIdentifier: BundleIdentifierOptions): void\n    {\n        this._bundleIdConnector = bundleIdentifier.connector ?? this._bundleIdConnector;\n        this._createBundleAssetId = bundleIdentifier.createBundleAssetId ?? this._createBundleAssetId;\n        this._extractAssetIdFromBundle = bundleIdentifier.extractAssetIdFromBundle ?? this._extractAssetIdFromBundle;\n\n        if (this._extractAssetIdFromBundle('foo', this._createBundleAssetId('foo', 'bar')) !== 'bar')\n        {\n            throw new Error('[Resolver] GenerateBundleAssetId are not working correctly');\n        }\n    }\n\n    /**\n     * Let the resolver know which assets you prefer to use when resolving assets.\n     * Multiple prefer user defined rules can be added.\n     * @example\n     * resolver.prefer({\n     *     // first look for something with the correct format, and then then correct resolution\n     *     priority: ['format', 'resolution'],\n     *     params:{\n     *         format:'webp', // prefer webp images\n     *         resolution: 2, // prefer a resolution of 2\n     *     }\n     * })\n     * resolver.add('foo', ['bar@2x.webp', 'bar@2x.png', 'bar.webp', 'bar.png']);\n     * resolver.resolveUrl('foo') // => 'bar@2x.webp'\n     * @param preferOrders - the prefer options\n     */\n    public prefer(...preferOrders: PreferOrder[]): void\n    {\n        preferOrders.forEach((prefer) =>\n        {\n            this._preferredOrder.push(prefer);\n\n            if (!prefer.priority)\n            {\n                // generate the priority based on the order of the object\n                prefer.priority = Object.keys(prefer.params);\n            }\n        });\n\n        this._resolverHash = {};\n    }\n\n    /**\n     * Set the base path to prepend to all urls when resolving\n     * @example\n     * resolver.basePath = 'https://home.com/';\n     * resolver.add('foo', 'bar.ong');\n     * resolver.resolveUrl('foo', 'bar.png'); // => 'https://home.com/bar.png'\n     * @param basePath - the base path to use\n     */\n    public set basePath(basePath: string)\n    {\n        this._basePath = basePath;\n    }\n\n    public get basePath(): string\n    {\n        return this._basePath;\n    }\n\n    /**\n     * Set the root path for root-relative URLs. By default the `basePath`'s root is used. If no `basePath` is set, then the\n     * default value for browsers is `window.location.origin`\n     * @example\n     * // Application hosted on https://home.com/some-path/index.html\n     * resolver.basePath = 'https://home.com/some-path/';\n     * resolver.rootPath = 'https://home.com/';\n     * resolver.add('foo', '/bar.png');\n     * resolver.resolveUrl('foo', '/bar.png'); // => 'https://home.com/bar.png'\n     * @param rootPath - the root path to use\n     */\n    public set rootPath(rootPath: string)\n    {\n        this._rootPath = rootPath;\n    }\n\n    public get rootPath(): string\n    {\n        return this._rootPath;\n    }\n\n    /**\n     * All the active URL parsers that help the parser to extract information and create\n     * an asset object-based on parsing the URL itself.\n     *\n     * Can be added using the extensions API\n     * @example\n     * resolver.add('foo', [\n     *     {\n     *         resolution: 2,\n     *         format: 'png',\n     *         src: 'image@2x.png',\n     *     },\n     *     {\n     *         resolution:1,\n     *         format:'png',\n     *         src: 'image.png',\n     *     },\n     * ]);\n     *\n     * // With a url parser the information such as resolution and file format could extracted from the url itself:\n     * extensions.add({\n     *     extension: ExtensionType.ResolveParser,\n     *     test: loadTextures.test, // test if url ends in an image\n     *     parse: (value: string) =>\n     *     ({\n     *         resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? '1'),\n     *         format: value.split('.').pop(),\n     *         src: value,\n     *     }),\n     * });\n     *\n     * // Now resolution and format can be extracted from the url\n     * resolver.add('foo', [\n     *     'image@2x.png',\n     *     'image.png',\n     * ]);\n     */\n    public get parsers(): ResolveURLParser[]\n    {\n        return this._parsers;\n    }\n\n    /** Used for testing, this resets the resolver to its initial state */\n    public reset(): void\n    {\n        this.setBundleIdentifier(this._defaultBundleIdentifierOptions);\n\n        this._assetMap = {};\n        this._preferredOrder = [];\n        // Do not reset this._parsers\n\n        this._resolverHash = {};\n        this._rootPath = null;\n        this._basePath = null;\n        this._manifest = null;\n        this._bundles = {};\n        this._defaultSearchParams = null;\n    }\n\n    /**\n     * Sets the default URL search parameters for the URL resolver. The urls can be specified as a string or an object.\n     * @param searchParams - the default url parameters to append when resolving urls\n     */\n    public setDefaultSearchParams(searchParams: string | Record<string, unknown>): void\n    {\n        if (typeof searchParams === 'string')\n        {\n            this._defaultSearchParams = searchParams;\n        }\n        else\n        {\n            const queryValues = searchParams as Record<string, any>;\n\n            this._defaultSearchParams = Object.keys(queryValues)\n                .map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(queryValues[key])}`)\n                .join('&');\n        }\n    }\n\n    /**\n     * Returns the aliases for a given asset\n     * @param asset - the asset to get the aliases for\n     */\n    public getAlias(asset: UnresolvedAsset): string[]\n    {\n        const { alias, src } = asset;\n        const aliasesToUse = convertToList<ArrayOr<string | AssetSrc>>(\n            alias || src, (value: string | AssetSrc) =>\n            {\n                if (typeof value === 'string') return value;\n\n                if (Array.isArray(value)) return value.map((v) => (v as ResolvedSrc)?.src ?? v);\n\n                if (value?.src) return value.src;\n\n                return value;\n            }, true) as string[];\n\n        return aliasesToUse;\n    }\n\n    /**\n     * Add a manifest to the asset resolver. This is a nice way to add all the asset information in one go.\n     * generally a manifest would be built using a tool.\n     * @param manifest - the manifest to add to the resolver\n     */\n    public addManifest(manifest: AssetsManifest): void\n    {\n        if (this._manifest)\n        {\n            // #if _DEBUG\n            warn('[Resolver] Manifest already exists, this will be overwritten');\n            // #endif\n        }\n\n        this._manifest = manifest;\n\n        manifest.bundles.forEach((bundle) =>\n        {\n            this.addBundle(bundle.name, bundle.assets);\n        });\n    }\n\n    /**\n     * This adds a bundle of assets in one go so that you can resolve them as a group.\n     * For example you could add a bundle for each screen in you pixi app\n     * @example\n     * resolver.addBundle('animals', [\n     *  { alias: 'bunny', src: 'bunny.png' },\n     *  { alias: 'chicken', src: 'chicken.png' },\n     *  { alias: 'thumper', src: 'thumper.png' },\n     * ]);\n     * // or\n     * resolver.addBundle('animals', {\n     *     bunny: 'bunny.png',\n     *     chicken: 'chicken.png',\n     *     thumper: 'thumper.png',\n     * });\n     *\n     * const resolvedAssets = await resolver.resolveBundle('animals');\n     * @param bundleId - The id of the bundle to add\n     * @param assets - A record of the asset or assets that will be chosen from when loading via the specified key\n     */\n    public addBundle(bundleId: string, assets: AssetsBundle['assets']): void\n    {\n        const assetNames: string[] = [];\n        let convertedAssets: UnresolvedAsset[] = assets as UnresolvedAsset[];\n\n        if (!Array.isArray(assets))\n        {\n            // convert to array...\n            convertedAssets = Object.entries(assets).map(([alias, src]) =>\n            {\n                if (typeof src === 'string' || Array.isArray(src))\n                {\n                    return { alias, src };\n                }\n\n                return { alias, ...src };\n            });\n        }\n\n        // when storing keys against a bundle we prepend the bundleId to each asset key\n        // and pass it through as an additional alias for the asset\n        // this keeps clashing ids separate on a per-bundle basis\n        // you can also resolve a file using the bundleId-assetId syntax\n\n        convertedAssets.forEach((asset) =>\n        {\n            const srcs = asset.src;\n            const aliases = asset.alias;\n            let ids: string[];\n\n            if (typeof aliases === 'string')\n            {\n                const bundleAssetId = this._createBundleAssetId(bundleId, aliases);\n\n                assetNames.push(bundleAssetId);\n                ids = [aliases, bundleAssetId];\n            }\n            else\n            {\n                const bundleIds = aliases.map((name) => this._createBundleAssetId(bundleId, name));\n\n                assetNames.push(...bundleIds);\n                ids = [...aliases, ...bundleIds];\n            }\n\n            this.add({\n                ...asset,\n                ...{\n                    alias: ids,\n                    src: srcs,\n                }\n            });\n        });\n\n        this._bundles[bundleId] = assetNames;\n    }\n\n    /**\n     * Tells the resolver what keys are associated with witch asset.\n     * The most important thing the resolver does\n     * @example\n     * // Single key, single asset:\n     * resolver.add({alias: 'foo', src: 'bar.png');\n     * resolver.resolveUrl('foo') // => 'bar.png'\n     *\n     * // Multiple keys, single asset:\n     * resolver.add({alias: ['foo', 'boo'], src: 'bar.png'});\n     * resolver.resolveUrl('foo') // => 'bar.png'\n     * resolver.resolveUrl('boo') // => 'bar.png'\n     *\n     * // Multiple keys, multiple assets:\n     * resolver.add({alias: ['foo', 'boo'], src: ['bar.png', 'bar.webp']});\n     * resolver.resolveUrl('foo') // => 'bar.png'\n     *\n     * // Add custom data attached to the resolver\n     * Resolver.add({\n     *     alias: 'bunnyBooBooSmooth',\n     *     src: 'bunny{png,webp}',\n     *     data: { scaleMode:SCALE_MODES.NEAREST }, // Base texture options\n     * });\n     *\n     * resolver.resolve('bunnyBooBooSmooth') // => { src: 'bunny.png', data: { scaleMode: SCALE_MODES.NEAREST } }\n     * @param aliases - the UnresolvedAsset or array of UnresolvedAssets to add to the resolver\n     */\n    public add(\n        aliases: ArrayOr<UnresolvedAsset>,\n    ): void\n    {\n        const assets: UnresolvedAsset[] = [];\n\n        if (Array.isArray(aliases))\n        {\n            assets.push(...(aliases as UnresolvedAsset[]));\n        }\n        else\n        {\n            assets.push(aliases as UnresolvedAsset);\n        }\n\n        let keyCheck: (key: string) => void;\n\n        // #if _DEBUG\n        // eslint-disable-next-line prefer-const\n        keyCheck = (key: string) =>\n        {\n            if (this.hasKey(key))\n            {\n                // #if _DEBUG\n                warn(`[Resolver] already has key: ${key} overwriting`);\n                // #endif\n            }\n        };\n        // #endif\n\n        const assetArray = convertToList(assets);\n\n        // loop through all the assets and generate a resolve asset for each src\n        assetArray.forEach((asset) =>\n        {\n            const { src } = asset;\n            let { data, format, loadParser } = asset;\n\n            // src can contain an unresolved asset itself\n            // so we need to merge that data with the current asset\n            // we dont need to create string variations for the src if it is a ResolvedAsset\n            const srcsToUse: (string | ResolvedSrc)[][] = convertToList<AssetSrc>(src).map((src) =>\n            {\n                if (typeof src === 'string')\n                { return createStringVariations(src); }\n\n                return Array.isArray(src) ? src : [src];\n            });\n\n            const aliasesToUse = this.getAlias(asset);\n\n            // #if _DEBUG\n            Array.isArray(aliasesToUse) ? aliasesToUse.forEach(keyCheck) : keyCheck(aliasesToUse);\n            // #endif\n\n            // loop through all the srcs and generate a resolve asset for each src\n            const resolvedAssets: ResolvedAsset[] = [];\n\n            srcsToUse.forEach((srcs) =>\n            {\n                srcs.forEach((src) =>\n                {\n                    let formattedAsset = {} as ResolvedAsset;\n\n                    if (typeof src !== 'object')\n                    {\n                        formattedAsset.src = src;\n                        // first see if it contains any {} tags...\n                        for (let i = 0; i < this._parsers.length; i++)\n                        {\n                            const parser = this._parsers[i];\n\n                            if (parser.test(src))\n                            {\n                                formattedAsset = parser.parse(src);\n                                break;\n                            }\n                        }\n                    }\n                    else\n                    {\n                        data = src.data ?? data;\n                        format = src.format ?? format;\n                        loadParser = src.loadParser ?? loadParser;\n                        formattedAsset = {\n                            ...formattedAsset,\n                            ...src,\n                        };\n                    }\n\n                    // check if aliases is undefined\n                    if (!aliasesToUse)\n                    {\n                        throw new Error(`[Resolver] alias is undefined for this asset: ${formattedAsset.src}`);\n                    }\n\n                    formattedAsset = this._buildResolvedAsset(formattedAsset, {\n                        aliases: aliasesToUse,\n                        data,\n                        format,\n                        loadParser,\n                    });\n\n                    resolvedAssets.push(formattedAsset);\n                });\n            });\n\n            aliasesToUse.forEach((alias) =>\n            {\n                this._assetMap[alias] = resolvedAssets;\n            });\n        });\n    }\n\n    // TODO: this needs an overload like load did in Assets\n    /**\n     * If the resolver has had a manifest set via setManifest, this will return the assets urls for\n     * a given bundleId or bundleIds.\n     * @example\n     * // Manifest Example\n     * const manifest = {\n     *     bundles: [\n     *         {\n     *             name: 'load-screen',\n     *             assets: [\n     *                 {\n     *                     alias: 'background',\n     *                     src: 'sunset.png',\n     *                 },\n     *                 {\n     *                     alias: 'bar',\n     *                     src: 'load-bar.{png,webp}',\n     *                 },\n     *             ],\n     *         },\n     *         {\n     *             name: 'game-screen',\n     *             assets: [\n     *                 {\n     *                     alias: 'character',\n     *                     src: 'robot.png',\n     *                 },\n     *                 {\n     *                     alias: 'enemy',\n     *                     src: 'bad-guy.png',\n     *                 },\n     *             ],\n     *         },\n     *     ]\n     * };\n     *\n     * resolver.setManifest(manifest);\n     * const resolved = resolver.resolveBundle('load-screen');\n     * @param bundleIds - The bundle ids to resolve\n     * @returns All the bundles assets or a hash of assets for each bundle specified\n     */\n    public resolveBundle(bundleIds: ArrayOr<string>):\n    Record<string, ResolvedAsset> | Record<string, Record<string, ResolvedAsset>>\n    {\n        const singleAsset = isSingleItem(bundleIds);\n\n        bundleIds = convertToList<string>(bundleIds);\n\n        const out: Record<string, Record<string, ResolvedAsset>> = {};\n\n        bundleIds.forEach((bundleId) =>\n        {\n            const assetNames = this._bundles[bundleId];\n\n            if (assetNames)\n            {\n                const results = this.resolve(assetNames) as Record<string, ResolvedAsset>;\n\n                const assets: Record<string, ResolvedAsset> = {};\n\n                for (const key in results)\n                {\n                    const asset = results[key];\n\n                    assets[this._extractAssetIdFromBundle(bundleId, key)] = asset;\n                }\n\n                out[bundleId] = assets;\n            }\n        });\n\n        return singleAsset ? out[bundleIds[0]] : out;\n    }\n\n    /**\n     * Does exactly what resolve does, but returns just the URL rather than the whole asset object\n     * @param key - The key or keys to resolve\n     * @returns - The URLs associated with the key(s)\n     */\n    public resolveUrl(key: ArrayOr<string>): string | Record<string, string>\n    {\n        const result = this.resolve(key as string) as ResolvedAsset | Record<string, ResolvedAsset>;\n\n        if (typeof key !== 'string')\n        {\n            const out: Record<string, string> = {};\n\n            for (const i in result)\n            {\n                out[i] = (result as Record<string, ResolvedAsset>)[i].src;\n            }\n\n            return out;\n        }\n\n        return (result as ResolvedAsset).src;\n    }\n\n    /**\n     * Resolves each key in the list to an asset object.\n     * Another key function of the resolver! After adding all the various key/asset pairs. this will run the logic\n     * of finding which asset to return based on any preferences set using the `prefer` function\n     * by default the same key passed in will be returned if nothing is matched by the resolver.\n     * @example\n     * resolver.add('boo', 'bunny.png');\n     *\n     * resolver.resolve('boo') // => { src: 'bunny.png' }\n     *\n     * // Will return the same string as no key was added for this value..\n     * resolver.resolve('another-thing.png') // => { src: 'another-thing.png' }\n     * @param keys - key or keys to resolve\n     * @returns - the resolve asset or a hash of resolve assets for each key specified\n     */\n    public resolve(keys: string): ResolvedAsset;\n    public resolve(keys: string[]): Record<string, ResolvedAsset>;\n    public resolve(keys: ArrayOr<string>): ResolvedAsset | Record<string, ResolvedAsset>\n    {\n        const singleAsset = isSingleItem(keys);\n\n        keys = convertToList<string>(keys);\n\n        const result: Record<string, ResolvedAsset> = {};\n\n        keys.forEach((key) =>\n        {\n            if (!this._resolverHash[key])\n            {\n                if (this._assetMap[key])\n                {\n                    let assets = this._assetMap[key];\n                    const preferredOrder = this._getPreferredOrder(assets);\n\n                    preferredOrder?.priority.forEach((priorityKey) =>\n                    {\n                        preferredOrder.params[priorityKey].forEach((value: unknown) =>\n                        {\n                            const filteredAssets = assets.filter((asset) =>\n                            {\n                                if (asset[priorityKey as keyof ResolvedAsset])\n                                {\n                                    return asset[priorityKey as keyof ResolvedAsset] === value;\n                                }\n\n                                return false;\n                            });\n\n                            if (filteredAssets.length)\n                            {\n                                assets = filteredAssets;\n                            }\n                        });\n                    });\n\n                    this._resolverHash[key] = assets[0];\n                }\n                else\n                {\n                    this._resolverHash[key] = this._buildResolvedAsset({\n                        alias: [key],\n                        src: key,\n                    }, {});\n                }\n            }\n\n            result[key] = this._resolverHash[key];\n        });\n\n        return singleAsset ? result[keys[0]] : result;\n    }\n\n    /**\n     * Checks if an asset with a given key exists in the resolver\n     * @param key - The key of the asset\n     */\n    public hasKey(key: string): boolean\n    {\n        return !!this._assetMap[key];\n    }\n\n    /**\n     * Checks if a bundle with the given key exists in the resolver\n     * @param key - The key of the bundle\n     */\n    public hasBundle(key: string): boolean\n    {\n        return !!this._bundles[key];\n    }\n\n    /**\n     * Internal function for figuring out what prefer criteria an asset should use.\n     * @param assets\n     */\n    private _getPreferredOrder(assets: ResolvedAsset[]): PreferOrder\n    {\n        for (let i = 0; i < assets.length; i++)\n        {\n            const asset = assets[0];\n\n            const preferred = this._preferredOrder.find((preference: PreferOrder) =>\n                preference.params.format.includes(asset.format));\n\n            if (preferred)\n            {\n                return preferred;\n            }\n        }\n\n        return this._preferredOrder[0];\n    }\n\n    /**\n     * Appends the default url parameters to the url\n     * @param url - The url to append the default parameters to\n     * @returns - The url with the default parameters appended\n     */\n    private _appendDefaultSearchParams(url: string): string\n    {\n        if (!this._defaultSearchParams) return url;\n\n        const paramConnector = (/\\?/).test(url) ? '&' : '?';\n\n        return `${url}${paramConnector}${this._defaultSearchParams}`;\n    }\n\n    private _buildResolvedAsset(formattedAsset: ResolvedAsset, data?: {\n        aliases?: string[],\n        data?: Record<string, unknown>\n        loadParser?: string,\n        format?: string,\n    }): ResolvedAsset\n    {\n        const { aliases, data: assetData, loadParser, format } = data;\n\n        if (this._basePath || this._rootPath)\n        {\n            formattedAsset.src = path.toAbsolute(formattedAsset.src, this._basePath, this._rootPath);\n        }\n\n        formattedAsset.alias = aliases ?? formattedAsset.alias ?? [formattedAsset.src];\n        formattedAsset.src = this._appendDefaultSearchParams(formattedAsset.src);\n        formattedAsset.data = { ...assetData || {}, ...formattedAsset.data };\n        formattedAsset.loadParser = loadParser ?? formattedAsset.loadParser;\n        formattedAsset.format = format ?? formattedAsset.format ?? getUrlExtension(formattedAsset.src);\n\n        return formattedAsset;\n    }\n}\n\nexport function getUrlExtension(url: string)\n{\n    return url.split('.').pop().split('?').shift()\n        .split('#')\n        .shift();\n}\n","export const convertToList = <T>(\n    input: string | T | (string | T)[],\n    transform?: (input: string) => T,\n    forceTransform = false\n): T[] =>\n{\n    if (!Array.isArray(input))\n    {\n        input = [input as T];\n    }\n\n    if (!transform)\n    {\n        return input as T[];\n    }\n\n    return (input as (string | T)[]).map((item): T =>\n    {\n        if (typeof item === 'string' || forceTransform)\n        {\n            return transform(item as string);\n        }\n\n        return item as T;\n    });\n};\n","/**\n * Copies the search params from one url to another\n * @param targetUrl - the url to copy the search params to\n * @param sourceUrl - the url container the search params we want to copy\n * @returns the url with the search params copied\n */\nexport const copySearchParams = (targetUrl: string, sourceUrl: string) =>\n{\n    const searchParams = sourceUrl.split('?')[1];\n\n    if (searchParams)\n    {\n        targetUrl += `?${searchParams}`;\n    }\n\n    return targetUrl;\n};\n","/**\n * Checks if the given value is an array.\n * @param item - The item to test\n */\nexport const isSingleItem = (item: unknown): boolean => (!Array.isArray(item));\n","var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(r){return\"string\"==typeof r?r.length>0:\"number\"==typeof r},n=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*r)/n+0},e=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),r>n?n:r>t?r:t},u=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},a=function(r){return{r:e(r.r,0,255),g:e(r.g,0,255),b:e(r.b,0,255),a:e(r.a)}},o=function(r){return{r:n(r.r),g:n(r.g),b:n(r.b),a:n(r.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(r){var t=r.toString(16);return t.length<2?\"0\"+t:t},h=function(r){var t=r.r,n=r.g,e=r.b,u=r.a,a=Math.max(t,n,e),o=a-Math.min(t,n,e),i=o?a===t?(n-e)/o:a===n?2+(e-t)/o:4+(t-n)/o:0;return{h:60*(i<0?i+6:i),s:a?o/a*100:0,v:a/255*100,a:u}},b=function(r){var t=r.h,n=r.s,e=r.v,u=r.a;t=t/360*6,n/=100,e/=100;var a=Math.floor(t),o=e*(1-n),i=e*(1-(t-a)*n),s=e*(1-(1-t+a)*n),h=a%6;return{r:255*[e,i,o,o,s,e][h],g:255*[s,e,e,i,o,o][h],b:255*[o,o,s,e,e,i][h],a:u}},g=function(r){return{h:u(r.h),s:e(r.s,0,100),l:e(r.l,0,100),a:e(r.a)}},d=function(r){return{h:n(r.h),s:n(r.s),l:n(r.l),a:n(r.a,3)}},f=function(r){return b((n=(t=r).s,{h:t.h,s:(n*=((e=t.l)<50?e:100-e)/100)>0?2*n/(e+n)*100:0,v:e+n,a:t.a}));var t,n,e},c=function(r){return{h:(t=h(r)).h,s:(u=(200-(n=t.s))*(e=t.v)/100)>0&&u<200?n*e/100/(u<=100?u:200-u)*100:0,l:u/2,a:t.a};var t,n,e,u},l=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,p=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s+([+-]?\\d*\\.?\\d+)%\\s+([+-]?\\d*\\.?\\d+)%\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,v=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,m=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,y={string:[[function(r){var t=i.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:4===r.length?n(parseInt(r[3]+r[3],16)/255,2):1}:6===r.length||8===r.length?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:8===r.length?n(parseInt(r.substr(6,2),16)/255,2):1}:null:null},\"hex\"],[function(r){var t=v.exec(r)||m.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},\"rgb\"],[function(t){var n=l.exec(t)||p.exec(t);if(!n)return null;var e,u,a=g({h:(e=n[1],u=n[2],void 0===u&&(u=\"deg\"),Number(e)*(r[u]||1)),s:Number(n[3]),l:Number(n[4]),a:void 0===n[5]?1:Number(n[5])/(n[6]?100:1)});return f(a)},\"hsl\"]],object:[[function(r){var n=r.r,e=r.g,u=r.b,o=r.a,i=void 0===o?1:o;return t(n)&&t(e)&&t(u)?a({r:Number(n),g:Number(e),b:Number(u),a:Number(i)}):null},\"rgb\"],[function(r){var n=r.h,e=r.s,u=r.l,a=r.a,o=void 0===a?1:a;if(!t(n)||!t(e)||!t(u))return null;var i=g({h:Number(n),s:Number(e),l:Number(u),a:Number(o)});return f(i)},\"hsl\"],[function(r){var n=r.h,a=r.s,o=r.v,i=r.a,s=void 0===i?1:i;if(!t(n)||!t(a)||!t(o))return null;var h=function(r){return{h:u(r.h),s:e(r.s,0,100),v:e(r.v,0,100),a:e(r.a)}}({h:Number(n),s:Number(a),v:Number(o),a:Number(s)});return b(h)},\"hsv\"]]},N=function(r,t){for(var n=0;n<t.length;n++){var e=t[n][0](r);if(e)return[e,t[n][1]]}return[null,void 0]},x=function(r){return\"string\"==typeof r?N(r.trim(),y.string):\"object\"==typeof r&&null!==r?N(r,y.object):[null,void 0]},I=function(r){return x(r)[1]},M=function(r,t){var n=c(r);return{h:n.h,s:e(n.s+100*t,0,100),l:n.l,a:n.a}},H=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},$=function(r,t){var n=c(r);return{h:n.h,s:n.s,l:e(n.l+100*t,0,100),a:n.a}},j=function(){function r(r){this.parsed=x(r)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return null!==this.parsed},r.prototype.brightness=function(){return n(H(this.rgba),2)},r.prototype.isDark=function(){return H(this.rgba)<.5},r.prototype.isLight=function(){return H(this.rgba)>=.5},r.prototype.toHex=function(){return r=o(this.rgba),t=r.r,e=r.g,u=r.b,i=(a=r.a)<1?s(n(255*a)):\"\",\"#\"+s(t)+s(e)+s(u)+i;var r,t,e,u,a,i},r.prototype.toRgb=function(){return o(this.rgba)},r.prototype.toRgbString=function(){return r=o(this.rgba),t=r.r,n=r.g,e=r.b,(u=r.a)<1?\"rgba(\"+t+\", \"+n+\", \"+e+\", \"+u+\")\":\"rgb(\"+t+\", \"+n+\", \"+e+\")\";var r,t,n,e,u},r.prototype.toHsl=function(){return d(c(this.rgba))},r.prototype.toHslString=function(){return r=d(c(this.rgba)),t=r.h,n=r.s,e=r.l,(u=r.a)<1?\"hsla(\"+t+\", \"+n+\"%, \"+e+\"%, \"+u+\")\":\"hsl(\"+t+\", \"+n+\"%, \"+e+\"%)\";var r,t,n,e,u},r.prototype.toHsv=function(){return r=h(this.rgba),{h:n(r.h),s:n(r.s),v:n(r.v),a:n(r.a,3)};var r},r.prototype.invert=function(){return w({r:255-(r=this.rgba).r,g:255-r.g,b:255-r.b,a:r.a});var r},r.prototype.saturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,r))},r.prototype.desaturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,-r))},r.prototype.grayscale=function(){return w(M(this.rgba,-1))},r.prototype.lighten=function(r){return void 0===r&&(r=.1),w($(this.rgba,r))},r.prototype.darken=function(r){return void 0===r&&(r=.1),w($(this.rgba,-r))},r.prototype.rotate=function(r){return void 0===r&&(r=15),this.hue(this.hue()+r)},r.prototype.alpha=function(r){return\"number\"==typeof r?w({r:(t=this.rgba).r,g:t.g,b:t.b,a:r}):n(this.rgba.a,3);var t},r.prototype.hue=function(r){var t=c(this.rgba);return\"number\"==typeof r?w({h:r,s:t.s,l:t.l,a:t.a}):n(t.h)},r.prototype.isEqual=function(r){return this.toHex()===w(r).toHex()},r}(),w=function(r){return r instanceof j?r:new j(r)},S=[],k=function(r){r.forEach(function(r){S.indexOf(r)<0&&(r(j,y),S.push(r))})},E=function(){return new j({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};export{j as Colord,w as colord,k as extend,I as getFormat,E as random};\n","import { colord, extend } from '@pixi/colord';\nimport namesPlugin from '@pixi/colord/plugins/names';\n\nimport type { AnyColor, HslaColor, HslColor, HsvaColor, HsvColor, RgbaColor, RgbColor } from '@pixi/colord';\n\nextend([namesPlugin]);\n\n/**\n * Pixi supports multiple color formats, including CSS color strings, hex, numbers, and arrays.\n *\n * When providing values for any of the color properties, you can use any of the {@link color.ColorSource} formats.\n * ```typescript\n * import { Color } from 'pixi.js';\n *\n * // All of these are valid:\n * sprite.tint = 'red';\n * sprite.tint = 0xff0000;\n * sprite.tint = '#ff0000';\n * sprite.tint = new Color('red');\n *\n * // Same for graphics fill/stroke colors and other  color values:\n * graphics.fill({ color: 'red' });\n * graphics.fill({ color: 0xff0000 });\n * graphics.stroke({ color: '#ff0000' });\n * graphics.stroke({ color: new Color('red')};\n * ```\n * @namespace color\n */\n\n/**\n * RGBA color array.\n *\n * `[number, number, number, number]`\n * @memberof color\n */\nexport type RgbaArray = [number, number, number, number];\n\n/**\n * Valid formats to use when defining any color properties, also valid for the {@link color.Color} constructor.\n *\n * These types are extended from [colord](https://www.npmjs.com/package/colord) with some PixiJS-specific extensions.\n *\n * Possible value types are:\n * - [Color names](https://www.w3.org/TR/css-color-4/#named-colors):\n *   `'red'`, `'green'`, `'blue'`, `'white'`, etc.\n * - RGB hex integers (`0xRRGGBB`):\n *   `0xff0000`, `0x00ff00`, `0x0000ff`, etc.\n * - [RGB(A) hex strings](https://www.w3.org/TR/css-color-4/#hex-notation):\n *   - 6 digits (`RRGGBB`): `'ff0000'`, `'#00ff00'`, `'0x0000ff'`, etc.\n *   - 3 digits (`RGB`): `'f00'`, `'#0f0'`, `'0x00f'`, etc.\n *   - 8 digits (`RRGGBBAA`): `'ff000080'`, `'#00ff0080'`, `'0x0000ff80'`, etc.\n *   - 4 digits (`RGBA`): `'f008'`, `'#0f08'`, `'0x00f8'`, etc.\n * - RGB(A) objects:\n *   `{ r: 255, g: 0, b: 0 }`, `{ r: 255, g: 0, b: 0, a: 0.5 }`, etc.\n * - [RGB(A) strings](https://www.w3.org/TR/css-color-4/#rgb-functions):\n *   `'rgb(255, 0, 0)'`, `'rgb(100% 0% 0%)'`, `'rgba(255, 0, 0, 0.5)'`, `'rgba(100% 0% 0% / 50%)'`, etc.\n * - RGB(A) arrays:\n *   `[1, 0, 0]`, `[1, 0, 0, 0.5]`, etc.\n * - RGB(A) Float32Array:\n *   `new Float32Array([1, 0, 0])`, `new Float32Array([1, 0, 0, 0.5])`, etc.\n * - RGB(A) Uint8Array:\n *   `new Uint8Array([255, 0, 0])`, `new Uint8Array([255, 0, 0, 128])`, etc.\n * - RGB(A) Uint8ClampedArray:\n *   `new Uint8ClampedArray([255, 0, 0])`, `new Uint8ClampedArray([255, 0, 0, 128])`, etc.\n * - HSL(A) objects:\n *   `{ h: 0, s: 100, l: 50 }`, `{ h: 0, s: 100, l: 50, a: 0.5 }`, etc.\n * - [HSL(A) strings](https://www.w3.org/TR/css-color-4/#the-hsl-notation):\n *   `'hsl(0, 100%, 50%)'`, `'hsl(0deg 100% 50%)'`, `'hsla(0, 100%, 50%, 0.5)'`, `'hsla(0deg 100% 50% / 50%)'`, etc.\n * - HSV(A) objects:\n *   `{ h: 0, s: 100, v: 100 }`, `{ h: 0, s: 100, v: 100, a: 0.5 }`, etc.\n * - {@link color.Color} objects.\n * @since 7.2.0\n * @memberof color\n */\nexport type ColorSource =\n    | string\n    | number\n    | number[]\n    | Float32Array\n    | Uint8Array\n    | Uint8ClampedArray\n    | HslColor\n    | HslaColor\n    | HsvColor\n    | HsvaColor\n    | RgbColor\n    | RgbaColor\n    | Color\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    | Number;\n\ntype ColorSourceTypedArray = Float32Array | Uint8Array | Uint8ClampedArray;\n\n/**\n * Color utility class. Can accept any {@link color.ColorSource} format in its constructor.\n * ```js\n * import { Color } from 'pixi.js';\n *\n * new Color('red').toArray(); // [1, 0, 0, 1]\n * new Color(0xff0000).toArray(); // [1, 0, 0, 1]\n * new Color('ff0000').toArray(); // [1, 0, 0, 1]\n * new Color('#f00').toArray(); // [1, 0, 0, 1]\n * new Color('0xff0000ff').toArray(); // [1, 0, 0, 1]\n * new Color('#f00f').toArray(); // [1, 0, 0, 1]\n * new Color({ r: 255, g: 0, b: 0, a: 0.5 }).toArray(); // [1, 0, 0, 0.5]\n * new Color('rgb(255, 0, 0, 0.5)').toArray(); // [1, 0, 0, 0.5]\n * new Color([1, 1, 1]).toArray(); // [1, 1, 1, 1]\n * new Color([1, 0, 0, 0.5]).toArray(); // [1, 0, 0, 0.5]\n * new Color(new Float32Array([1, 0, 0, 0.5])).toArray(); // [1, 0, 0, 0.5]\n * new Color(new Uint8Array([255, 0, 0, 255])).toArray(); // [1, 0, 0, 1]\n * new Color(new Uint8ClampedArray([255, 0, 0, 255])).toArray(); // [1, 0, 0, 1]\n * new Color({ h: 0, s: 100, l: 50, a: 0.5 }).toArray(); // [1, 0, 0, 0.5]\n * new Color('hsl(0, 100%, 50%, 50%)').toArray(); // [1, 0, 0, 0.5]\n * new Color({ h: 0, s: 100, v: 100, a: 0.5 }).toArray(); // [1, 0, 0, 0.5]\n * ```\n * @since 7.2.0\n * @memberof color\n */\nexport class Color\n{\n    /**\n     * Default Color object for static uses\n     * @example\n     * import { Color } from 'pixi.js';\n     * Color.shared.setValue(0xffffff).toHex(); // '#ffffff'\n     */\n    public static readonly shared = new Color();\n\n    /**\n     * Temporary Color object for static uses internally.\n     * As to not conflict with Color.shared.\n     * @ignore\n     */\n    private static readonly _temp = new Color();\n\n    /** Pattern for hex strings */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    private static readonly HEX_PATTERN = /^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;\n\n    /** Internal color source, from constructor or set value */\n    private _value: Exclude<ColorSource, Color> | null;\n\n    /** Normalized rgba component, floats from 0-1 */\n    private _components: Float32Array;\n\n    /** Cache color as number */\n    private _int: number;\n\n    /** An array of the current Color. Only populated when `toArray` functions are called */\n    private _arrayRgba: number[] | null;\n    private _arrayRgb: number[] | null;\n\n    /**\n     * @param {ColorSource} value - Optional value to use, if not provided, white is used.\n     */\n    constructor(value: ColorSource = 0xffffff)\n    {\n        this._value = null;\n        this._components = new Float32Array(4);\n        this._components.fill(1);\n        this._int = 0xffffff;\n        this.value = value;\n    }\n\n    /** Get red component (0 - 1) */\n    get red(): number\n    {\n        return this._components[0];\n    }\n\n    /** Get green component (0 - 1) */\n    get green(): number\n    {\n        return this._components[1];\n    }\n\n    /** Get blue component (0 - 1) */\n    get blue(): number\n    {\n        return this._components[2];\n    }\n\n    /** Get alpha component (0 - 1) */\n    get alpha(): number\n    {\n        return this._components[3];\n    }\n\n    /**\n     * Set the value, suitable for chaining\n     * @param value\n     * @see Color.value\n     */\n    public setValue(value: ColorSource): this\n    {\n        this.value = value;\n\n        return this;\n    }\n\n    /**\n     * The current color source.\n     *\n     * When setting:\n     * - Setting to an instance of `Color` will copy its color source and components.\n     * - Otherwise, `Color` will try to normalize the color source and set the components.\n     *   If the color source is invalid, an `Error` will be thrown and the `Color` will left unchanged.\n     *\n     * Note: The `null` in the setter's parameter type is added to match the TypeScript rule: return type of getter\n     * must be assignable to its setter's parameter type. Setting `value` to `null` will throw an `Error`.\n     *\n     * When getting:\n     * - A return value of `null` means the previous value was overridden (e.g., {@link Color.multiply multiply},\n     *   {@link Color.premultiply premultiply} or {@link Color.round round}).\n     * - Otherwise, the color source used when setting is returned.\n     */\n    set value(value: ColorSource | null)\n    {\n        // Support copying from other Color objects\n        if (value instanceof Color)\n        {\n            this._value = this._cloneSource(value._value);\n            this._int = value._int;\n            this._components.set(value._components);\n        }\n        else if (value === null)\n        {\n            throw new Error('Cannot set Color#value to null');\n        }\n        else if (this._value === null || !this._isSourceEqual(this._value, value))\n        {\n            this._normalize(value);\n            this._value = this._cloneSource(value);\n        }\n    }\n    get value(): Exclude<ColorSource, Color> | null\n    {\n        return this._value;\n    }\n\n    /**\n     * Copy a color source internally.\n     * @param value - Color source\n     */\n    private _cloneSource(value: Exclude<ColorSource, Color> | null): Exclude<ColorSource, Color> | null\n    {\n        if (typeof value === 'string' || typeof value === 'number' || value instanceof Number || value === null)\n        {\n            return value;\n        }\n        else if (Array.isArray(value) || ArrayBuffer.isView(value))\n        {\n            return value.slice(0);\n        }\n        else if (typeof value === 'object' && value !== null)\n        {\n            return { ...value };\n        }\n\n        return value;\n    }\n\n    /**\n     * Equality check for color sources.\n     * @param value1 - First color source\n     * @param value2 - Second color source\n     * @returns `true` if the color sources are equal, `false` otherwise.\n     */\n    private _isSourceEqual(value1: Exclude<ColorSource, Color>, value2: Exclude<ColorSource, Color>): boolean\n    {\n        const type1 = typeof value1;\n        const type2 = typeof value2;\n\n        // Mismatched types\n        if (type1 !== type2)\n        {\n            return false;\n        }\n        // Handle numbers/strings and things that extend Number\n        // important to do the instanceof Number first, as this is \"object\" type\n        else if (type1 === 'number' || type1 === 'string' || value1 instanceof Number)\n        {\n            return value1 === value2;\n        }\n        // Handle Arrays and TypedArrays\n        else if (\n            (Array.isArray(value1) && Array.isArray(value2))\n            || (ArrayBuffer.isView(value1) && ArrayBuffer.isView(value2))\n        )\n        {\n            if (value1.length !== value2.length)\n            {\n                return false;\n            }\n\n            return value1.every((v, i) => v === value2[i]);\n        }\n        // Handle Objects\n        else if (value1 !== null && value2 !== null)\n        {\n            const keys1 = Object.keys(value1) as (keyof typeof value1)[];\n            const keys2 = Object.keys(value2) as (keyof typeof value2)[];\n\n            if (keys1.length !== keys2.length)\n            {\n                return false;\n            }\n\n            return keys1.every((key) => value1[key] === value2[key]);\n        }\n\n        return value1 === value2;\n    }\n\n    /**\n     * Convert to a RGBA color object.\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color('white').toRgb(); // returns { r: 1, g: 1, b: 1, a: 1 }\n     */\n    public toRgba(): RgbaColor\n    {\n        const [r, g, b, a] = this._components;\n\n        return { r, g, b, a };\n    }\n\n    /**\n     * Convert to a RGB color object.\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color('white').toRgb(); // returns { r: 1, g: 1, b: 1 }\n     */\n    public toRgb(): RgbColor\n    {\n        const [r, g, b] = this._components;\n\n        return { r, g, b };\n    }\n\n    /** Convert to a CSS-style rgba string: `rgba(255,255,255,1.0)`. */\n    public toRgbaString(): string\n    {\n        const [r, g, b] = this.toUint8RgbArray();\n\n        return `rgba(${r},${g},${b},${this.alpha})`;\n    }\n\n    /**\n     * Convert to an [R, G, B] array of clamped uint8 values (0 to 255).\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color('white').toUint8RgbArray(); // returns [255, 255, 255]\n     * @param {number[]|Uint8Array|Uint8ClampedArray} [out] - Output array\n     */\n    public toUint8RgbArray(): number[];\n    public toUint8RgbArray<T extends number[] | Uint8Array | Uint8ClampedArray>(out: T): T;\n    public toUint8RgbArray<T extends number[] | Uint8Array | Uint8ClampedArray>(out?: T): T\n    {\n        const [r, g, b] = this._components;\n\n        if (!this._arrayRgb)\n        {\n            this._arrayRgb = [];\n        }\n\n        out = out || this._arrayRgb as T;\n\n        out[0] = Math.round(r * 255);\n        out[1] = Math.round(g * 255);\n        out[2] = Math.round(b * 255);\n\n        return out;\n    }\n\n    /**\n     * Convert to an [R, G, B, A] array of normalized floats (numbers from 0.0 to 1.0).\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color('white').toArray(); // returns [1, 1, 1, 1]\n     * @param {number[]|Float32Array} [out] - Output array\n     */\n    public toArray(): number[];\n    public toArray<T extends number[] | Float32Array>(out: T): T;\n    public toArray<T extends number[] | Float32Array>(out?: T): T\n    {\n        if (!this._arrayRgba)\n        {\n            this._arrayRgba = [];\n        }\n\n        out = out || this._arrayRgba as T;\n        const [r, g, b, a] = this._components;\n\n        out[0] = r;\n        out[1] = g;\n        out[2] = b;\n        out[3] = a;\n\n        return out;\n    }\n\n    /**\n     * Convert to an [R, G, B] array of normalized floats (numbers from 0.0 to 1.0).\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color('white').toRgbArray(); // returns [1, 1, 1]\n     * @param {number[]|Float32Array} [out] - Output array\n     */\n    public toRgbArray(): number[];\n    public toRgbArray<T extends number[] | Float32Array>(out: T): T;\n    public toRgbArray<T extends number[] | Float32Array>(out?: T): T\n    {\n        if (!this._arrayRgb)\n        {\n            this._arrayRgb = [];\n        }\n\n        out = out || this._arrayRgb as T;\n        const [r, g, b] = this._components;\n\n        out[0] = r;\n        out[1] = g;\n        out[2] = b;\n\n        return out;\n    }\n\n    /**\n     * Convert to a hexadecimal number.\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color('white').toNumber(); // returns 16777215\n     */\n    public toNumber(): number\n    {\n        return this._int;\n    }\n\n    /**\n     * Convert to a BGR number\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color(0xffcc99).toBgrNumber(); // returns 0x99ccff\n     */\n    public toBgrNumber(): number\n    {\n        const [r, g, b] = this.toUint8RgbArray();\n\n        return (b << 16) + (g << 8) + r;\n    }\n\n    /**\n     * Convert to a hexadecimal number in little endian format (e.g., BBGGRR).\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color(0xffcc99).toLittleEndianNumber(); // returns 0x99ccff\n     * @returns {number} - The color as a number in little endian format.\n     */\n    public toLittleEndianNumber(): number\n    {\n        const value = this._int;\n\n        return (value >> 16) + (value & 0xff00) + ((value & 0xff) << 16);\n    }\n\n    /**\n     * Multiply with another color. This action is destructive, and will\n     * override the previous `value` property to be `null`.\n     * @param {ColorSource} value - The color to multiply by.\n     */\n    public multiply(value: ColorSource): this\n    {\n        const [r, g, b, a] = Color._temp.setValue(value)._components;\n\n        this._components[0] *= r;\n        this._components[1] *= g;\n        this._components[2] *= b;\n        this._components[3] *= a;\n\n        this._refreshInt();\n        this._value = null;\n\n        return this;\n    }\n\n    /**\n     * Converts color to a premultiplied alpha format. This action is destructive, and will\n     * override the previous `value` property to be `null`.\n     * @param alpha - The alpha to multiply by.\n     * @param {boolean} [applyToRGB=true] - Whether to premultiply RGB channels.\n     * @returns {Color} - Itself.\n     */\n    public premultiply(alpha: number, applyToRGB = true): this\n    {\n        if (applyToRGB)\n        {\n            this._components[0] *= alpha;\n            this._components[1] *= alpha;\n            this._components[2] *= alpha;\n        }\n        this._components[3] = alpha;\n\n        this._refreshInt();\n        this._value = null;\n\n        return this;\n    }\n\n    /**\n     * Premultiplies alpha with current color.\n     * @param {number} alpha - The alpha to multiply by.\n     * @param {boolean} [applyToRGB=true] - Whether to premultiply RGB channels.\n     * @returns {number} tint multiplied by alpha\n     */\n    public toPremultiplied(alpha: number, applyToRGB = true): number\n    {\n        if (alpha === 1.0)\n        {\n            return (0xff << 24) + this._int;\n        }\n        if (alpha === 0.0)\n        {\n            return applyToRGB ? 0 : this._int;\n        }\n        let r = (this._int >> 16) & 0xff;\n        let g = (this._int >> 8) & 0xff;\n        let b = this._int & 0xff;\n\n        if (applyToRGB)\n        {\n            r = ((r * alpha) + 0.5) | 0;\n            g = ((g * alpha) + 0.5) | 0;\n            b = ((b * alpha) + 0.5) | 0;\n        }\n\n        return ((alpha * 255) << 24) + (r << 16) + (g << 8) + b;\n    }\n\n    /**\n     * Convert to a hexidecimal string.\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color('white').toHex(); // returns \"#ffffff\"\n     */\n    public toHex(): string\n    {\n        const hexString = this._int.toString(16);\n\n        return `#${'000000'.substring(0, 6 - hexString.length) + hexString}`;\n    }\n\n    /**\n     * Convert to a hexidecimal string with alpha.\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color('white').toHexa(); // returns \"#ffffffff\"\n     */\n    public toHexa(): string\n    {\n        const alphaValue = Math.round(this._components[3] * 255);\n        const alphaString = alphaValue.toString(16);\n\n        return this.toHex() + '00'.substring(0, 2 - alphaString.length) + alphaString;\n    }\n\n    /**\n     * Set alpha, suitable for chaining.\n     * @param alpha\n     */\n    public setAlpha(alpha: number): this\n    {\n        this._components[3] = this._clamp(alpha);\n\n        return this;\n    }\n\n    /**\n     * Normalize the input value into rgba\n     * @param value - Input value\n     */\n    private _normalize(value: Exclude<ColorSource, Color>): void\n    {\n        let r: number | undefined;\n        let g: number | undefined;\n        let b: number | undefined;\n        let a: number | undefined;\n\n        // Number is a primative so typeof works fine, but in the case\n        // that someone creates a class that extends Number, we also\n        // need to check for instanceof Number\n        if (\n            (typeof value === 'number' || value instanceof Number)\n            && (value as number) >= 0\n            && (value as number) <= 0xffffff\n        )\n        {\n            const int = value as number; // cast required because instanceof Number is ambiguous for TS\n\n            r = ((int >> 16) & 0xff) / 255;\n            g = ((int >> 8) & 0xff) / 255;\n            b = (int & 0xff) / 255;\n            a = 1.0;\n        }\n        else if (\n            (Array.isArray(value) || value instanceof Float32Array)\n            // Can be rgb or rgba\n            && value.length >= 3\n            && value.length <= 4\n        )\n        {\n            // make sure all values are 0 - 1\n            value = this._clamp(value);\n            [r, g, b, a = 1.0] = value;\n        }\n        else if (\n            (value instanceof Uint8Array || value instanceof Uint8ClampedArray)\n            // Can be rgb or rgba\n            && value.length >= 3\n            && value.length <= 4\n        )\n        {\n            // make sure all values are 0 - 255\n            value = this._clamp(value, 0, 255);\n            [r, g, b, a = 255] = value;\n            r /= 255;\n            g /= 255;\n            b /= 255;\n            a /= 255;\n        }\n        else if (typeof value === 'string' || typeof value === 'object')\n        {\n            if (typeof value === 'string')\n            {\n                const match = Color.HEX_PATTERN.exec(value);\n\n                if (match)\n                {\n                    // Normalize hex string, remove 0x or # prefix\n                    value = `#${match[2]}`;\n                }\n            }\n\n            const color = colord(value as AnyColor);\n\n            if (color.isValid())\n            {\n                ({ r, g, b, a } = color.rgba);\n                r /= 255;\n                g /= 255;\n                b /= 255;\n            }\n        }\n\n        // Cache normalized values for rgba and hex integer\n        if (r !== undefined)\n        {\n            this._components[0] = r as number;\n            this._components[1] = g as number;\n            this._components[2] = b as number;\n            this._components[3] = a as number;\n            this._refreshInt();\n        }\n        else\n        {\n            throw new Error(`Unable to convert color ${value}`);\n        }\n    }\n\n    /** Refresh the internal color rgb number */\n    private _refreshInt(): void\n    {\n        // Clamp values to 0 - 1\n        this._clamp(this._components);\n\n        const [r, g, b] = this._components;\n\n        this._int = ((r * 255) << 16) + ((g * 255) << 8) + ((b * 255) | 0);\n    }\n\n    /**\n     * Clamps values to a range. Will override original values\n     * @param value - Value(s) to clamp\n     * @param min - Minimum value\n     * @param max - Maximum value\n     */\n    private _clamp<T extends number | number[] | ColorSourceTypedArray>(value: T, min = 0, max = 1): T\n    {\n        if (typeof value === 'number')\n        {\n            return Math.min(Math.max(value, min), max) as T;\n        }\n\n        value.forEach((v, i) =>\n        {\n            value[i] = Math.min(Math.max(v, min), max);\n        });\n\n        return value;\n    }\n\n    /**\n     * Check if the value is a color-like object\n     * @param value - Value to check\n     * @returns True if the value is a color-like object\n     * @static\n     * @example\n     * import { Color } from 'pixi.js';\n     * Color.isColorLike('white'); // returns true\n     * Color.isColorLike(0xffffff); // returns true\n     * Color.isColorLike([1, 1, 1]); // returns true\n     */\n    public static isColorLike(value: unknown): value is ColorSource\n    {\n        return (\n            typeof value === 'number'\n            || typeof value === 'string'\n            || value instanceof Number\n            || value instanceof Color\n            || Array.isArray(value)\n            || value instanceof Uint8Array\n            || value instanceof Uint8ClampedArray\n            || value instanceof Float32Array\n            || ((value as RgbColor).r !== undefined\n                && (value as RgbColor).g !== undefined\n                && (value as RgbColor).b !== undefined)\n            || ((value as RgbaColor).r !== undefined\n                && (value as RgbaColor).g !== undefined\n                && (value as RgbaColor).b !== undefined\n                && (value as RgbaColor).a !== undefined)\n            || ((value as HslColor).h !== undefined\n                && (value as HslColor).s !== undefined\n                && (value as HslColor).l !== undefined)\n            || ((value as HslaColor).h !== undefined\n                && (value as HslaColor).s !== undefined\n                && (value as HslaColor).l !== undefined\n                && (value as HslaColor).a !== undefined)\n            || ((value as HsvColor).h !== undefined\n                && (value as HsvColor).s !== undefined\n                && (value as HsvColor).v !== undefined)\n            || ((value as HsvaColor).h !== undefined\n                && (value as HsvaColor).s !== undefined\n                && (value as HsvaColor).v !== undefined\n                && (value as HsvaColor).a !== undefined)\n        );\n    }\n}\n","export default function(e,f){var a={white:\"#ffffff\",bisque:\"#ffe4c4\",blue:\"#0000ff\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",azure:\"#f0ffff\",whitesmoke:\"#f5f5f5\",papayawhip:\"#ffefd5\",plum:\"#dda0dd\",blanchedalmond:\"#ffebcd\",black:\"#000000\",gold:\"#ffd700\",goldenrod:\"#daa520\",gainsboro:\"#dcdcdc\",cornsilk:\"#fff8dc\",cornflowerblue:\"#6495ed\",burlywood:\"#deb887\",aquamarine:\"#7fffd4\",beige:\"#f5f5dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkkhaki:\"#bdb76b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkgrey:\"#a9a9a9\",peachpuff:\"#ffdab9\",darkmagenta:\"#8b008b\",darkred:\"#8b0000\",darkorchid:\"#9932cc\",darkorange:\"#ff8c00\",darkslateblue:\"#483d8b\",gray:\"#808080\",darkslategray:\"#2f4f4f\",darkslategrey:\"#2f4f4f\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",wheat:\"#f5deb3\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",ghostwhite:\"#f8f8ff\",darkviolet:\"#9400d3\",magenta:\"#ff00ff\",green:\"#008000\",dodgerblue:\"#1e90ff\",grey:\"#808080\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",blueviolet:\"#8a2be2\",forestgreen:\"#228b22\",lawngreen:\"#7cfc00\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",fuchsia:\"#ff00ff\",brown:\"#a52a2a\",maroon:\"#800000\",mediumblue:\"#0000cd\",lightcoral:\"#f08080\",darkturquoise:\"#00ced1\",lightcyan:\"#e0ffff\",ivory:\"#fffff0\",lightyellow:\"#ffffe0\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",linen:\"#faf0e6\",mediumaquamarine:\"#66cdaa\",lemonchiffon:\"#fffacd\",lime:\"#00ff00\",khaki:\"#f0e68c\",mediumseagreen:\"#3cb371\",limegreen:\"#32cd32\",mediumspringgreen:\"#00fa9a\",lightskyblue:\"#87cefa\",lightblue:\"#add8e6\",midnightblue:\"#191970\",lightpink:\"#ffb6c1\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",mintcream:\"#f5fffa\",lightslategray:\"#778899\",lightslategrey:\"#778899\",navajowhite:\"#ffdead\",navy:\"#000080\",mediumvioletred:\"#c71585\",powderblue:\"#b0e0e6\",palegoldenrod:\"#eee8aa\",oldlace:\"#fdf5e6\",paleturquoise:\"#afeeee\",mediumturquoise:\"#48d1cc\",mediumorchid:\"#ba55d3\",rebeccapurple:\"#663399\",lightsteelblue:\"#b0c4de\",mediumslateblue:\"#7b68ee\",thistle:\"#d8bfd8\",tan:\"#d2b48c\",orchid:\"#da70d6\",mediumpurple:\"#9370db\",purple:\"#800080\",pink:\"#ffc0cb\",skyblue:\"#87ceeb\",springgreen:\"#00ff7f\",palegreen:\"#98fb98\",red:\"#ff0000\",yellow:\"#ffff00\",slateblue:\"#6a5acd\",lavenderblush:\"#fff0f5\",peru:\"#cd853f\",palevioletred:\"#db7093\",violet:\"#ee82ee\",teal:\"#008080\",slategray:\"#708090\",slategrey:\"#708090\",aliceblue:\"#f0f8ff\",darkseagreen:\"#8fbc8f\",darkolivegreen:\"#556b2f\",greenyellow:\"#adff2f\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",tomato:\"#ff6347\",silver:\"#c0c0c0\",sienna:\"#a0522d\",lavender:\"#e6e6fa\",lightgreen:\"#90ee90\",orange:\"#ffa500\",orangered:\"#ff4500\",steelblue:\"#4682b4\",royalblue:\"#4169e1\",turquoise:\"#40e0d0\",yellowgreen:\"#9acd32\",salmon:\"#fa8072\",saddlebrown:\"#8b4513\",sandybrown:\"#f4a460\",rosybrown:\"#bc8f8f\",darksalmon:\"#e9967a\",lightgoldenrodyellow:\"#fafad2\",snow:\"#fffafa\",lightgrey:\"#d3d3d3\",lightgray:\"#d3d3d3\",dimgray:\"#696969\",dimgrey:\"#696969\",olivedrab:\"#6b8e23\",olive:\"#808000\"},r={};for(var d in a)r[a[d]]=d;var l={};e.prototype.toName=function(f){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return\"transparent\";var d,i,n=r[this.toHex()];if(n)return n;if(null==f?void 0:f.closest){var o=this.toRgb(),t=1/0,b=\"black\";if(!l.length)for(var c in a)l[c]=new e(a[c]).toRgb();for(var g in a){var u=(d=o,i=l[g],Math.pow(d.r-i.r,2)+Math.pow(d.g-i.g,2)+Math.pow(d.b-i.b,2));u<t&&(t=u,b=g)}return b}};f.string.push([function(f){var r=f.toLowerCase(),d=\"transparent\"===r?\"#0000\":a[r];return d?new e(d).toRgb():null},\"name\"])}\n","import { BrowserAdapter } from '../environment-browser/BrowserAdapter';\n\nimport type { ICanvas } from './canvas/ICanvas';\nimport type { ICanvasRenderingContext2D } from './canvas/ICanvasRenderingContext2D';\n\n/**\n * PixiJS supports multiple environments including browsers, Web Workers, and Node.js.\n * The environment is auto-detected by default using the {@link environment.autoDetectEnvironment} function.\n *\n * The {@link environment.Adapter} interface provides a way to abstract away the differences between\n * these environments. PixiJS uses the {@link environment.BrowserAdapter} by default.\n *\n * However you can manually set the environment using the {@link environment.DOMAdapter} singleton, for example to\n * use Pixi within a WebWorker.\n * ```js\n * import { DOMAdapter, WebWorkerAdapter } from 'pixi.js';\n *\n * // WebWorkerAdapter is an implementation of the Adapter interface\n * DOMAdapter.set(WebWorkerAdapter);\n *\n * // use the adapter to create a canvas (in this case an OffscreenCanvas)\n * DOMAdapter.get().createCanvas(800, 600);\n * ```\n * @namespace environment\n */\n\n/**\n * This interface describes all the DOM dependent calls that Pixi makes throughout its codebase.\n * Implementations of this interface can be used to make sure Pixi will work in any environment,\n * such as browser, Web Workers, and Node.js.\n * @memberof environment\n */\nexport interface Adapter\n{\n    /** Returns a canvas object that can be used to create a webgl context. */\n    createCanvas: (width?: number, height?: number) => ICanvas;\n    /** Returns a 2D rendering context. */\n    getCanvasRenderingContext2D: () => { prototype: ICanvasRenderingContext2D; };\n    /** Returns a WebGL rendering context. */\n    getWebGLRenderingContext: () => typeof WebGLRenderingContext;\n    /** Returns a partial implementation of the browsers window.navigator */\n    getNavigator: () => { userAgent: string, gpu: GPU | null };\n    /** Returns the current base URL For browser environments this is either the document.baseURI or window.location.href */\n    getBaseUrl: () => string;\n    /** Return the font face set if available */\n    getFontFaceSet: () => FontFaceSet | null;\n    /** Returns a Response object that has been fetched from the given URL. */\n    fetch: (url: RequestInfo, options?: RequestInit) => Promise<Response>;\n    /** Returns Document object that has been parsed from the given XML string. */\n    parseXML: (xml: string) => Document;\n}\n\nlet currentAdapter: Adapter = BrowserAdapter;\n\n/**\n * The DOMAdapter is a singleton that allows PixiJS to perform DOM operations, such as creating a canvas.\n * This allows PixiJS to be used in any environment, such as a web browser, Web Worker, or Node.js.\n * It uses the {@link environment.Adapter} interface to abstract away the differences between these environments\n * and uses the {@link environment.BrowserAdapter} by default.\n *\n * It has two methods: `get():Adapter` and `set(adapter: Adapter)`.\n *\n * Defaults to the {@link environment.BrowserAdapter}.\n * @example\n * import { DOMAdapter, WebWorkerAdapter } from 'pixi.js';\n *\n * // WebWorkerAdapter is an implementation of the Adapter interface\n * DOMAdapter.set(WebWorkerAdapter);\n *\n * // use the adapter to create a canvas (in this case an OffscreenCanvas)\n * DOMAdapter.get().createCanvas(800, 600);\n * @memberof environment\n */\nexport const DOMAdapter = {\n    /**\n     * Returns the current adapter.\n     * @returns {environment.Adapter} The current adapter.\n     */\n    get(): Adapter\n    {\n        return currentAdapter;\n    },\n    /**\n     * Sets the current adapter.\n     * @param adapter - The new adapter.\n     */\n    set(adapter: Adapter): void\n    {\n        currentAdapter = adapter;\n    },\n};\n","import { type Adapter } from '../environment/adapter';\n\n/**\n * This is an implementation of the {@link environment.Adapter} interface.\n * It can be used to make Pixi work in the browser.\n * @memberof environment\n * @property {Function} createCanvas - Creates a canvas element of the given size.\n * This canvas is created using the browser's native canvas element.\n * @property {Function} getCanvasRenderingContext2D - Returns a 2D rendering context.\n * @property {Function} getWebGLRenderingContext - Returns a WebGL rendering context.\n * @property {Function} getNavigator - Returns browsers window.navigator\n * @property {Function} getBaseUrl - Returns the current base URL for browser environments this is either\n * the document.baseURI or window.location.href\n * @property {Function} getFontFaceSet - Return the font face set if available\n * @property {Function} fetch - Returns a Response object that has been fetched from the given URL.\n * @property {Function} parseXML - Returns Document object that has been parsed from the given XML string.\n */\nexport const BrowserAdapter = {\n    createCanvas: (width: number, height: number): HTMLCanvasElement =>\n    {\n        const canvas = document.createElement('canvas');\n\n        canvas.width = width;\n        canvas.height = height;\n\n        return canvas;\n    },\n    getCanvasRenderingContext2D: () => CanvasRenderingContext2D,\n    getWebGLRenderingContext: () => WebGLRenderingContext,\n    getNavigator: () => navigator,\n    getBaseUrl: () => (document.baseURI ?? window.location.href),\n    getFontFaceSet: () => document.fonts,\n    fetch: (url: RequestInfo, options?: RequestInit) => fetch(url, options),\n    parseXML: (xml: string) =>\n    {\n        const parser = new DOMParser();\n\n        return parser.parseFromString(xml, 'text/xml');\n    },\n} as Adapter;\n","/**\n * `extensions` is a global object that holds all the extensions registered with PixiJS.\n * PixiJS uses a this extensions architecture a lot to make the library more modular and\n * flexible.\n *\n * For example, if you want to add load a new type of asset, you can register a new\n * {@link assets.LoaderParser} with the `extensions` object.\n *\n * ```js\n * import { extensions, ExtensionType } from 'pixi.js';\n *\n * // create a custom asset loader\n * const customAssetLoader = {\n *    extension: {\n *        type: ExtensionType.LoadParser,\n *        name: 'custom-asset-loader',\n *    },\n *    test(url) {\n *       // check if this new loader should be used...\n *    },\n *    load(url) {\n *        // load the asset...\n *    },\n * };\n *\n * // add the custom asset loader to pixi\n * extensions.add(customAssetLoader);\n * ```\n *\n * This would add the `customAssetLoader` to the list of available loaders that PixiJS can use.\n *\n * There are many different types of extensions, which are listed in {@link extensions.ExtensionType}.\n * @namespace extensions\n */\n\n/**\n * Collection of valid extension types.\n * @memberof extensions\n */\nenum ExtensionType\n// eslint-disable-next-line @typescript-eslint/indent\n{\n    /** extensions that are registered as Application plugins */\n    Application = 'application',\n\n    /** extensions that are registered as WebGL render pipes */\n    WebGLPipes = 'webgl-pipes',\n    /** extensions that are registered as WebGL render pipes adaptors */\n    WebGLPipesAdaptor = 'webgl-pipes-adaptor',\n    /** extensions that are registered as WebGL render systems */\n    WebGLSystem = 'webgl-system',\n\n    /** extensions that are registered as WebGPU render pipes */\n    WebGPUPipes = 'webgpu-pipes',\n    /** extensions that are registered as WebGPU render pipes adaptors */\n    WebGPUPipesAdaptor = 'webgpu-pipes-adaptor',\n    /** extensions that are registered as WebGPU render systems */\n    WebGPUSystem = 'webgpu-system',\n\n    /** extensions that are registered as Canvas render pipes */\n    CanvasSystem = 'canvas-system',\n    /** extensions that are registered as Canvas render pipes adaptors */\n    CanvasPipesAdaptor = 'canvas-pipes-adaptor',\n    /** extensions that are registered as Canvas render systems */\n    CanvasPipes = 'canvas-pipes',\n\n    /** extensions that combine the other Asset extensions */\n    Asset = 'asset',\n    /** extensions that are used to load assets through Assets */\n    LoadParser = 'load-parser',\n    /** extensions that are used to resolve asset urls through Assets */\n    ResolveParser = 'resolve-parser',\n    /** extensions that are used to handle how urls are cached by Assets */\n    CacheParser = 'cache-parser',\n    /** extensions that are used to add/remove available resources from Assets */\n    DetectionParser = 'detection-parser',\n\n    /** extensions that are registered with the MaskEffectManager */\n    MaskEffect = 'mask-effect',\n\n    /** A type of extension for creating a new advanced blend mode */\n    BlendMode = 'blend-mode',\n\n    /** A type of extension that will be used to auto detect a resource type */\n    TextureSource = 'texture-source',\n\n    /** A type of extension that will be used to auto detect an environment */\n    Environment = 'environment',\n}\n\n/**\n * The metadata for an extension.\n * @memberof extensions\n * @ignore\n */\ninterface ExtensionMetadataDetails\n{\n    /** The extension type, can be multiple types */\n    type: ExtensionType | ExtensionType[];\n    /** Optional. Some plugins provide an API name/property, to make them more easily accessible */\n    name?: string;\n    /** Optional, used for sorting the plugins in a particular order */\n    priority?: number;\n}\n\n/**\n * The metadata for an extension.\n * @memberof extensions\n */\ntype ExtensionMetadata = ExtensionType | ExtensionMetadataDetails;\n\n/**\n * Format when registering an extension. Generally, the extension\n * should have these values as `extension` static property,\n * but you can override name or type by providing an object.\n * @memberof extensions\n */\ninterface ExtensionFormat\n{\n    /** The extension type, can be multiple types */\n    type: ExtensionType | ExtensionType[];\n    /** Optional. Some plugins provide an API name/property, such as Renderer plugins */\n    name?: string;\n    /** Optional, used for sorting the plugins in a particular order */\n    priority?: number;\n    /** Reference to the plugin object/class */\n    ref: any;\n}\n\n/**\n * Extension format that is used internally for registrations.\n * @memberof extensions\n * @ignore\n */\ninterface StrictExtensionFormat extends ExtensionFormat\n{\n    /** The extension type, always expressed as multiple, even if a single */\n    type: ExtensionType[];\n}\n\ntype ExtensionHandler = (extension: StrictExtensionFormat) => void;\n\n/**\n * Convert input into extension format data.\n * @ignore\n */\nconst normalizeExtension = (ext: ExtensionFormat | any): StrictExtensionFormat =>\n{\n    // Class/Object submission, use extension object\n    if (typeof ext === 'function' || (typeof ext === 'object' && ext.extension))\n    {\n        // #if _DEBUG\n        if (!ext.extension)\n        {\n            throw new Error('Extension class must have an extension object');\n        }\n        // #endif\n        const metadata: ExtensionMetadataDetails = (typeof ext.extension !== 'object')\n            ? { type: ext.extension }\n            : ext.extension;\n\n        ext = { ...metadata, ref: ext };\n    }\n    if (typeof ext === 'object')\n    {\n        ext = { ...ext };\n    }\n    else\n    {\n        throw new Error('Invalid extension type');\n    }\n\n    if (typeof ext.type === 'string')\n    {\n        ext.type = [ext.type];\n    }\n\n    return ext;\n};\n\n/**\n * Get the priority for an extension.\n * @ignore\n * @param ext - Any extension\n * @param defaultPriority - Fallback priority if none is defined.\n * @returns The priority for the extension.\n * @memberof extensions\n */\nexport const normalizeExtensionPriority = (ext: ExtensionFormat | any, defaultPriority: number): number =>\n    normalizeExtension(ext).priority ?? defaultPriority;\n\n/**\n * Global registration of all PixiJS extensions. One-stop-shop for extensibility.\n *\n * Import the `extensions` object and use it to register new functionality via the described methods below.\n * ```js\n * import { extensions } from 'pixi.js';\n *\n * // register a new extension\n * extensions.add(myExtension);\n * ```\n * @property {Function} remove - Remove extensions from PixiJS.\n * @property {Function} add - Register new extensions with PixiJS.\n * @property {Function} handle - Internal method to handle extensions by name.\n * @property {Function} handleByMap - Handle a type, but using a map by `name` property.\n * @property {Function} handleByNamedList - Handle a type, but using a list of extensions with a `name` property.\n * @property {Function} handleByList - Handle a type, but using a list of extensions.\n * @memberof extensions\n */\nconst extensions = {\n\n    /** @ignore */\n    _addHandlers: {} as Partial<Record<ExtensionType, ExtensionHandler>>,\n\n    /** @ignore */\n    _removeHandlers: {} as Partial<Record<ExtensionType, ExtensionHandler>>,\n\n    /** @ignore */\n    _queue: {} as Partial<Record<ExtensionType, StrictExtensionFormat[]>>,\n\n    /**\n     * Remove extensions from PixiJS.\n     * @param extensions - Extensions to be removed.\n     * @returns {extensions} For chaining.\n     */\n    remove(...extensions: Array<ExtensionFormat | any>)\n    {\n        extensions.map(normalizeExtension).forEach((ext) =>\n        {\n            ext.type.forEach((type) => this._removeHandlers[type]?.(ext));\n        });\n\n        return this;\n    },\n\n    /**\n     * Register new extensions with PixiJS.\n     * @param extensions - The spread of extensions to add to PixiJS.\n     * @returns {extensions} For chaining.\n     */\n    add(...extensions: Array<ExtensionFormat | any>)\n    {\n        // Handle any extensions either passed as class w/ data or as data\n        extensions.map(normalizeExtension).forEach((ext) =>\n        {\n            ext.type.forEach((type) =>\n            {\n                const handlers = this._addHandlers;\n                const queue = this._queue;\n\n                if (!handlers[type])\n                {\n                    queue[type] = queue[type] || [];\n                    queue[type]?.push(ext);\n                }\n                else\n                {\n                    handlers[type]?.(ext);\n                }\n            });\n        });\n\n        return this;\n    },\n\n    /**\n     * Internal method to handle extensions by name.\n     * @param type - The extension type.\n     * @param onAdd  - Function handler when extensions are added/registered {@link StrictExtensionFormat}.\n     * @param onRemove  - Function handler when extensions are removed/unregistered {@link StrictExtensionFormat}.\n     * @returns {extensions} For chaining.\n     */\n    handle(type: ExtensionType, onAdd: ExtensionHandler, onRemove: ExtensionHandler)\n    {\n        const addHandlers = this._addHandlers;\n        const removeHandlers = this._removeHandlers;\n\n        // #if _DEBUG\n        if (addHandlers[type] || removeHandlers[type])\n        {\n            throw new Error(`Extension type ${type} already has a handler`);\n        }\n        // #endif\n\n        addHandlers[type] = onAdd;\n        removeHandlers[type] = onRemove;\n\n        // Process the queue\n        const queue = this._queue;\n\n        // Process any plugins that have been registered before the handler\n        if (queue[type])\n        {\n            queue[type]?.forEach((ext) => onAdd(ext));\n            delete queue[type];\n        }\n\n        return this;\n    },\n\n    /**\n     * Handle a type, but using a map by `name` property.\n     * @param type - Type of extension to handle.\n     * @param map - The object map of named extensions.\n     * @returns {extensions} For chaining.\n     */\n    handleByMap(type: ExtensionType, map: Record<string, any>)\n    {\n        return this.handle(type,\n            (extension) =>\n            {\n                if (extension.name)\n                {\n                    map[extension.name] = extension.ref;\n                }\n            },\n            (extension) =>\n            {\n                if (extension.name)\n                {\n                    delete map[extension.name];\n                }\n            }\n        );\n    },\n\n    /**\n     * Handle a type, but using a list of extensions with a `name` property.\n     * @param type - Type of extension to handle.\n     * @param map - The array of named extensions.\n     * @param defaultPriority - Fallback priority if none is defined.\n     * @returns {extensions} For chaining.\n     */\n    handleByNamedList(type: ExtensionType, map: {name: string, value: any}[], defaultPriority = -1)\n    {\n        return this.handle(\n            type,\n            (extension) =>\n            {\n                const index = map.findIndex((item) => item.name === extension.name);\n\n                if (index >= 0) return;\n\n                map.push({ name: extension.name, value: extension.ref });\n                map.sort((a, b) =>\n                    normalizeExtensionPriority(b.value, defaultPriority)\n                    - normalizeExtensionPriority(a.value, defaultPriority));\n            },\n            (extension) =>\n            {\n                const index = map.findIndex((item) => item.name === extension.name);\n\n                if (index !== -1)\n                {\n                    map.splice(index, 1);\n                }\n            }\n        );\n    },\n\n    /**\n     * Handle a type, but using a list of extensions.\n     * @param type - Type of extension to handle.\n     * @param list - The list of extensions.\n     * @param defaultPriority - The default priority to use if none is specified.\n     * @returns {extensions} For chaining.\n     */\n    handleByList(type: ExtensionType, list: any[], defaultPriority = -1)\n    {\n        return this.handle(\n            type,\n            (extension) =>\n            {\n                if (list.includes(extension.ref))\n                {\n                    return;\n                }\n\n                list.push(extension.ref);\n                list.sort((a, b) =>\n                    normalizeExtensionPriority(b, defaultPriority) - normalizeExtensionPriority(a, defaultPriority));\n            },\n            (extension) =>\n            {\n                const index = list.indexOf(extension.ref);\n\n                if (index !== -1)\n                {\n                    list.splice(index, 1);\n                }\n            }\n        );\n    },\n};\n\nexport {\n    extensions,\n    ExtensionType,\n};\nexport type {\n    StrictExtensionFormat as ExtensionFormat,\n    ExtensionFormat as ExtensionFormatLoose,\n    ExtensionHandler,\n    ExtensionMetadata,\n};\n","import type { Rectangle } from '../maths/shapes/Rectangle';\nimport type { Effect } from '../scene/container/Effect';\nimport type { Filter } from './Filter';\n\n/**\n * A filter effect is an effect that can be applied to a container that involves applying special pixel effects\n * to that container as it is rendered. Used internally when the filters property is modified on a container\n */\nexport class FilterEffect implements Effect\n{\n    /** read only filters array - to modify, set it again! */\n    public filters: readonly Filter[];\n    /**\n     * If specified, rather than calculating the bounds of the container that the filter\n     * will apply to, we use this rect instead. This is a local rect - so will have the containers transform\n     * applied to it\n     */\n    public filterArea?: Rectangle;\n\n    /** the pipe that knows how to handle this effect */\n    public pipe = 'filter';\n    /** the priority of this effect */\n    public priority = 1;\n\n    public destroy(): void\n    {\n        for (let i = 0; i < this.filters.length; i++)\n        {\n            this.filters[i].destroy();\n        }\n\n        this.filters = null;\n        this.filterArea = null;\n    }\n}\n","/* eslint-disable @typescript-eslint/no-use-before-define */\nimport { PI_2 } from '../misc/const';\nimport { Point } from '../point/Point';\n\nimport type { PointData } from '../point/PointData';\n\ninterface TransformableObject\n{\n    position: PointData;\n    scale: PointData;\n    pivot: PointData;\n    skew: PointData;\n    rotation: number;\n}\n\n/**\n * A fast matrix for 2D transformations.\n * ```js\n * | a | c | tx|\n * | b | d | ty|\n * | 0 | 0 | 1 |\n * ```\n * @memberof maths\n */\nexport class Matrix\n{\n    /** @default 1 */\n    public a: number;\n\n    /** @default 0 */\n    public b: number;\n\n    /** @default 0 */\n    public c: number;\n\n    /** @default 1 */\n    public d: number;\n\n    /** @default 0 */\n    public tx: number;\n\n    /** @default 0 */\n    public ty: number;\n\n    /** An array of the current matrix. Only populated when `toArray` is called */\n    public array: Float32Array | null = null;\n\n    /**\n     * @param a - x scale\n     * @param b - y skew\n     * @param c - x skew\n     * @param d - y scale\n     * @param tx - x translation\n     * @param ty - y translation\n     */\n    constructor(a = 1, b = 0, c = 0, d = 1, tx = 0, ty = 0)\n    {\n        this.a = a;\n        this.b = b;\n        this.c = c;\n        this.d = d;\n        this.tx = tx;\n        this.ty = ty;\n    }\n\n    /**\n     * Creates a Matrix object based on the given array. The Element to Matrix mapping order is as follows:\n     *\n     * a = array[0]\n     * b = array[1]\n     * c = array[3]\n     * d = array[4]\n     * tx = array[2]\n     * ty = array[5]\n     * @param array - The array that the matrix will be populated from.\n     */\n    public fromArray(array: number[]): void\n    {\n        this.a = array[0];\n        this.b = array[1];\n        this.c = array[3];\n        this.d = array[4];\n        this.tx = array[2];\n        this.ty = array[5];\n    }\n\n    /**\n     * Sets the matrix properties.\n     * @param a - Matrix component\n     * @param b - Matrix component\n     * @param c - Matrix component\n     * @param d - Matrix component\n     * @param tx - Matrix component\n     * @param ty - Matrix component\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public set(a: number, b: number, c: number, d: number, tx: number, ty: number): this\n    {\n        this.a = a;\n        this.b = b;\n        this.c = c;\n        this.d = d;\n        this.tx = tx;\n        this.ty = ty;\n\n        return this;\n    }\n\n    /**\n     * Creates an array from the current Matrix object.\n     * @param transpose - Whether we need to transpose the matrix or not\n     * @param [out=new Float32Array(9)] - If provided the array will be assigned to out\n     * @returns The newly created array which contains the matrix\n     */\n    public toArray(transpose?: boolean, out?: Float32Array): Float32Array\n    {\n        if (!this.array)\n        {\n            this.array = new Float32Array(9);\n        }\n\n        const array = out || this.array;\n\n        if (transpose)\n        {\n            array[0] = this.a;\n            array[1] = this.b;\n            array[2] = 0;\n            array[3] = this.c;\n            array[4] = this.d;\n            array[5] = 0;\n            array[6] = this.tx;\n            array[7] = this.ty;\n            array[8] = 1;\n        }\n        else\n        {\n            array[0] = this.a;\n            array[1] = this.c;\n            array[2] = this.tx;\n            array[3] = this.b;\n            array[4] = this.d;\n            array[5] = this.ty;\n            array[6] = 0;\n            array[7] = 0;\n            array[8] = 1;\n        }\n\n        return array;\n    }\n\n    /**\n     * Get a new position with the current transformation applied.\n     * Can be used to go from a child's coordinate space to the world coordinate space. (e.g. rendering)\n     * @param pos - The origin\n     * @param {Point} [newPos] - The point that the new position is assigned to (allowed to be same as input)\n     * @returns {Point} The new point, transformed through this matrix\n     */\n    public apply<P extends PointData = Point>(pos: PointData, newPos?: P): P\n    {\n        newPos = (newPos || new Point()) as P;\n\n        const x = pos.x;\n        const y = pos.y;\n\n        newPos.x = (this.a * x) + (this.c * y) + this.tx;\n        newPos.y = (this.b * x) + (this.d * y) + this.ty;\n\n        return newPos;\n    }\n\n    /**\n     * Get a new position with the inverse of the current transformation applied.\n     * Can be used to go from the world coordinate space to a child's coordinate space. (e.g. input)\n     * @param pos - The origin\n     * @param {Point} [newPos] - The point that the new position is assigned to (allowed to be same as input)\n     * @returns {Point} The new point, inverse-transformed through this matrix\n     */\n    public applyInverse<P extends PointData = Point>(pos: PointData, newPos?: P): P\n    {\n        newPos = (newPos || new Point()) as P;\n\n        const a = this.a;\n        const b = this.b;\n        const c = this.c;\n        const d = this.d;\n        const tx = this.tx;\n        const ty = this.ty;\n\n        const id = 1 / ((a * d) + (c * -b));\n\n        const x = pos.x;\n        const y = pos.y;\n\n        newPos.x = (d * id * x) + (-c * id * y) + (((ty * c) - (tx * d)) * id);\n        newPos.y = (a * id * y) + (-b * id * x) + (((-ty * a) + (tx * b)) * id);\n\n        return newPos;\n    }\n\n    /**\n     * Translates the matrix on the x and y.\n     * @param x - How much to translate x by\n     * @param y - How much to translate y by\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public translate(x: number, y: number): this\n    {\n        this.tx += x;\n        this.ty += y;\n\n        return this;\n    }\n\n    /**\n     * Applies a scale transformation to the matrix.\n     * @param x - The amount to scale horizontally\n     * @param y - The amount to scale vertically\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public scale(x: number, y: number): this\n    {\n        this.a *= x;\n        this.d *= y;\n        this.c *= x;\n        this.b *= y;\n        this.tx *= x;\n        this.ty *= y;\n\n        return this;\n    }\n\n    /**\n     * Applies a rotation transformation to the matrix.\n     * @param angle - The angle in radians.\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public rotate(angle: number): this\n    {\n        const cos = Math.cos(angle);\n        const sin = Math.sin(angle);\n\n        const a1 = this.a;\n        const c1 = this.c;\n        const tx1 = this.tx;\n\n        this.a = (a1 * cos) - (this.b * sin);\n        this.b = (a1 * sin) + (this.b * cos);\n        this.c = (c1 * cos) - (this.d * sin);\n        this.d = (c1 * sin) + (this.d * cos);\n        this.tx = (tx1 * cos) - (this.ty * sin);\n        this.ty = (tx1 * sin) + (this.ty * cos);\n\n        return this;\n    }\n\n    /**\n     * Appends the given Matrix to this Matrix.\n     * @param matrix - The matrix to append.\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public append(matrix: Matrix): this\n    {\n        const a1 = this.a;\n        const b1 = this.b;\n        const c1 = this.c;\n        const d1 = this.d;\n\n        this.a = (matrix.a * a1) + (matrix.b * c1);\n        this.b = (matrix.a * b1) + (matrix.b * d1);\n        this.c = (matrix.c * a1) + (matrix.d * c1);\n        this.d = (matrix.c * b1) + (matrix.d * d1);\n\n        this.tx = (matrix.tx * a1) + (matrix.ty * c1) + this.tx;\n        this.ty = (matrix.tx * b1) + (matrix.ty * d1) + this.ty;\n\n        return this;\n    }\n\n    /**\n     * Appends two matrix's and sets the result to this matrix. AB = A * B\n     * @param a - The matrix to append.\n     * @param b - The matrix to append.\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public appendFrom(a: Matrix, b: Matrix): this\n    {\n        const a1 = a.a;\n        const b1 = a.b;\n        const c1 = a.c;\n        const d1 = a.d;\n        const tx = a.tx;\n        const ty = a.ty;\n\n        const a2 = b.a;\n        const b2 = b.b;\n        const c2 = b.c;\n        const d2 = b.d;\n\n        this.a = (a1 * a2) + (b1 * c2);\n        this.b = (a1 * b2) + (b1 * d2);\n        this.c = (c1 * a2) + (d1 * c2);\n        this.d = (c1 * b2) + (d1 * d2);\n        this.tx = (tx * a2) + (ty * c2) + b.tx;\n        this.ty = (tx * b2) + (ty * d2) + b.ty;\n\n        return this;\n    }\n\n    /**\n     * Sets the matrix based on all the available properties\n     * @param x - Position on the x axis\n     * @param y - Position on the y axis\n     * @param pivotX - Pivot on the x axis\n     * @param pivotY - Pivot on the y axis\n     * @param scaleX - Scale on the x axis\n     * @param scaleY - Scale on the y axis\n     * @param rotation - Rotation in radians\n     * @param skewX - Skew on the x axis\n     * @param skewY - Skew on the y axis\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public setTransform(x: number, y: number, pivotX: number, pivotY: number, scaleX: number,\n        scaleY: number, rotation: number, skewX: number, skewY: number): this\n    {\n        this.a = Math.cos(rotation + skewY) * scaleX;\n        this.b = Math.sin(rotation + skewY) * scaleX;\n        this.c = -Math.sin(rotation - skewX) * scaleY;\n        this.d = Math.cos(rotation - skewX) * scaleY;\n\n        this.tx = x - ((pivotX * this.a) + (pivotY * this.c));\n        this.ty = y - ((pivotX * this.b) + (pivotY * this.d));\n\n        return this;\n    }\n\n    /**\n     * Prepends the given Matrix to this Matrix.\n     * @param matrix - The matrix to prepend\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public prepend(matrix: Matrix): this\n    {\n        const tx1 = this.tx;\n\n        if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1)\n        {\n            const a1 = this.a;\n            const c1 = this.c;\n\n            this.a = (a1 * matrix.a) + (this.b * matrix.c);\n            this.b = (a1 * matrix.b) + (this.b * matrix.d);\n            this.c = (c1 * matrix.a) + (this.d * matrix.c);\n            this.d = (c1 * matrix.b) + (this.d * matrix.d);\n        }\n\n        this.tx = (tx1 * matrix.a) + (this.ty * matrix.c) + matrix.tx;\n        this.ty = (tx1 * matrix.b) + (this.ty * matrix.d) + matrix.ty;\n\n        return this;\n    }\n\n    /**\n     * Decomposes the matrix (x, y, scaleX, scaleY, and rotation) and sets the properties on to a transform.\n     * @param transform - The transform to apply the properties to.\n     * @returns The transform with the newly applied properties\n     */\n    public decompose(transform: TransformableObject): TransformableObject\n    {\n        // sort out rotation / skew..\n        const a = this.a;\n        const b = this.b;\n        const c = this.c;\n        const d = this.d;\n        const pivot = transform.pivot;\n\n        const skewX = -Math.atan2(-c, d);\n        const skewY = Math.atan2(b, a);\n\n        const delta = Math.abs(skewX + skewY);\n\n        if (delta < 0.00001 || Math.abs(PI_2 - delta) < 0.00001)\n        {\n            transform.rotation = skewY;\n            transform.skew.x = transform.skew.y = 0;\n        }\n        else\n        {\n            transform.rotation = 0;\n            transform.skew.x = skewX;\n            transform.skew.y = skewY;\n        }\n\n        // next set scale\n        transform.scale.x = Math.sqrt((a * a) + (b * b));\n        transform.scale.y = Math.sqrt((c * c) + (d * d));\n\n        // next set position\n        transform.position.x = this.tx + ((pivot.x * a) + (pivot.y * c));\n        transform.position.y = this.ty + ((pivot.x * b) + (pivot.y * d));\n\n        return transform;\n    }\n\n    /**\n     * Inverts this matrix\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public invert(): this\n    {\n        const a1 = this.a;\n        const b1 = this.b;\n        const c1 = this.c;\n        const d1 = this.d;\n        const tx1 = this.tx;\n        const n = (a1 * d1) - (b1 * c1);\n\n        this.a = d1 / n;\n        this.b = -b1 / n;\n        this.c = -c1 / n;\n        this.d = a1 / n;\n        this.tx = ((c1 * this.ty) - (d1 * tx1)) / n;\n        this.ty = -((a1 * this.ty) - (b1 * tx1)) / n;\n\n        return this;\n    }\n\n    /** Checks if this matrix is an identity matrix */\n    public isIdentity(): boolean\n    {\n        return this.a === 1 && this.b === 0 && this.c === 0 && this.d === 1 && this.tx === 0 && this.ty === 0;\n    }\n\n    /**\n     * Resets this Matrix to an identity (default) matrix.\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public identity(): this\n    {\n        this.a = 1;\n        this.b = 0;\n        this.c = 0;\n        this.d = 1;\n        this.tx = 0;\n        this.ty = 0;\n\n        return this;\n    }\n\n    /**\n     * Creates a new Matrix object with the same values as this one.\n     * @returns A copy of this matrix. Good for chaining method calls.\n     */\n    public clone(): Matrix\n    {\n        const matrix = new Matrix();\n\n        matrix.a = this.a;\n        matrix.b = this.b;\n        matrix.c = this.c;\n        matrix.d = this.d;\n        matrix.tx = this.tx;\n        matrix.ty = this.ty;\n\n        return matrix;\n    }\n\n    /**\n     * Changes the values of the given matrix to be the same as the ones in this matrix\n     * @param matrix - The matrix to copy to.\n     * @returns The matrix given in parameter with its values updated.\n     */\n    public copyTo(matrix: Matrix): Matrix\n    {\n        matrix.a = this.a;\n        matrix.b = this.b;\n        matrix.c = this.c;\n        matrix.d = this.d;\n        matrix.tx = this.tx;\n        matrix.ty = this.ty;\n\n        return matrix;\n    }\n\n    /**\n     * Changes the values of the matrix to be the same as the ones in given matrix\n     * @param matrix - The matrix to copy from.\n     * @returns this\n     */\n    public copyFrom(matrix: Matrix): this\n    {\n        this.a = matrix.a;\n        this.b = matrix.b;\n        this.c = matrix.c;\n        this.d = matrix.d;\n        this.tx = matrix.tx;\n        this.ty = matrix.ty;\n\n        return this;\n    }\n\n    /**\n     * check to see if two matrices are the same\n     * @param matrix - The matrix to compare to.\n     */\n    public equals(matrix: Matrix)\n    {\n        return matrix.a === this.a && matrix.b === this.b\n            && matrix.c === this.c && matrix.d === this.d\n            && matrix.tx === this.tx && matrix.ty === this.ty;\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`;\n    }\n    // #endif\n\n    /**\n     * A default (identity) matrix.\n     *\n     * This is a shared object, if you want to modify it consider creating a new `Matrix`\n     * @readonly\n     */\n    static get IDENTITY(): Readonly<Matrix>\n    {\n        return identityMatrix.identity();\n    }\n\n    /**\n     * A static Matrix that can be used to avoid creating new objects.\n     * Will always ensure the matrix is reset to identity when requested.\n     * Use this object for fast but temporary calculations, as it may be mutated later on.\n     * This is a different object to the `IDENTITY` object and so can be modified without changing `IDENTITY`.\n     * @readonly\n     */\n    static get shared(): Matrix\n    {\n        return tempMatrix.identity();\n    }\n}\n\nconst tempMatrix = new Matrix();\nconst identityMatrix = new Matrix();\n","/**\n * Two Pi.\n * @static\n * @member {number}\n * @memberof maths\n */\nexport const PI_2 = Math.PI * 2;\n\n/**\n * Conversion factor for converting radians to degrees.\n * @static\n * @member {number} RAD_TO_DEG\n * @memberof maths\n */\nexport const RAD_TO_DEG = 180 / Math.PI;\n\n/**\n * Conversion factor for converting degrees to radians.\n * @static\n * @member {number}\n * @memberof maths\n */\nexport const DEG_TO_RAD = Math.PI / 180;\n\n/**\n * Constants that identify shapes, mainly to prevent `instanceof` calls.\n * @memberof maths\n */\nexport type SHAPE_PRIMITIVE =\n    | 'polygon'\n    | 'rectangle'\n    | 'circle'\n    | 'ellipse'\n    | 'triangle'\n    | 'roundedRectangle';\n\n/**\n * The `maths` folder contains utility classes and functions for mathematical operations used throughout the project.\n * This includes constants such as conversion factors for radians and degrees, as well as shapes such as polygons,\n * rectangles, circles, ellipses, triangles, and rounded rectangles.\n * ```js\n * import { RAD_TO_DEG, Circle } from 'pixi.js';\n *\n * // Convert 180 degrees to radians\n * const radians = 180 * RAD_TO_DEG;\n *\n * // test if a point is inside a circle\n * const isPointInCircle = new Circle(0, 0, 10).contains(0, 0); // true\n * ```\n * @namespace maths\n */\n","// Taken from the bit-twiddle package\n\n/**\n * Rounds to next power of two.\n * @function nextPow2\n * @param {number} v - input value\n * @returns {number} - next rounded power of two\n * @memberof maths\n */\nexport function nextPow2(v: number): number\n{\n    v += v === 0 ? 1 : 0;\n    --v;\n    v |= v >>> 1;\n    v |= v >>> 2;\n    v |= v >>> 4;\n    v |= v >>> 8;\n    v |= v >>> 16;\n\n    return v + 1;\n}\n\n/**\n * Checks if a number is a power of two.\n * @function isPow2\n * @param {number} v - input value\n * @returns {boolean} `true` if value is power of two\n * @memberof maths\n */\nexport function isPow2(v: number): boolean\n{\n    return !(v & (v - 1)) && (!!v);\n}\n\n/**\n * Computes ceil of log base 2\n * @function log2\n * @param {number} v - input value\n * @returns {number} logarithm base 2\n * @memberof maths\n */\nexport function log2(v: number): number\n{\n    let r = (v > 0xFFFF ? 1 : 0) << 4;\n\n    v >>>= r;\n\n    let shift = (v > 0xFF ? 1 : 0) << 3;\n\n    v >>>= shift; r |= shift;\n    shift = (v > 0xF ? 1 : 0) << 2;\n    v >>>= shift; r |= shift;\n    shift = (v > 0x3 ? 1 : 0) << 1;\n    v >>>= shift; r |= shift;\n\n    return r | (v >> 1);\n}\n","import type { PointData } from './PointData';\nimport type { PointLike } from './PointLike';\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface ObservablePoint extends PixiMixins.ObservablePoint { }\n\n/**\n * Observer used to listen for observable point changes.\n * @memberof maths\n */\nexport interface Observer<T>\n{\n    /** Callback to call when the point has updated. */\n    _onUpdate: (point?: T) => void;\n}\n\n/**\n * The ObservablePoint object represents a location in a two-dimensional coordinate system, where `x` represents\n * the position on the horizontal axis and `y` represents the position on the vertical axis.\n *\n * An `ObservablePoint` is a point that triggers the `onUpdate` method on an observer when the point's position is changed.\n * @memberof maths\n */\nexport class ObservablePoint implements PointLike\n{\n    /** @ignore */\n    public _x: number;\n    /** @ignore */\n    public _y: number;\n\n    /** This object used to call the `onUpdate` callback when the point changes. */\n    private readonly _observer: Observer<ObservablePoint>;\n\n    /**\n     * Creates a new `ObservablePoint`\n     * @param observer - Observer to pass to listen for change events.\n     * @param {number} [x=0] - position of the point on the x axis\n     * @param {number} [y=0] - position of the point on the y axis\n     */\n    constructor(observer: Observer<ObservablePoint>, x?: number, y?: number)\n    {\n        this._x = x || 0;\n        this._y = y || 0;\n\n        this._observer = observer;\n    }\n\n    /**\n     * Creates a clone of this point.\n     * @param observer - Optional observer to pass to the new observable point.\n     * @returns a copy of this observable point\n     */\n    public clone(observer?: Observer<ObservablePoint>): ObservablePoint\n    {\n        return new ObservablePoint(observer ?? this._observer, this._x, this._y);\n    }\n\n    /**\n     * Sets the point to a new `x` and `y` position.\n     * If `y` is omitted, both `x` and `y` will be set to `x`.\n     * @param {number} [x=0] - position of the point on the x axis\n     * @param {number} [y=x] - position of the point on the y axis\n     * @returns The observable point instance itself\n     */\n    public set(x = 0, y = x): this\n    {\n        if (this._x !== x || this._y !== y)\n        {\n            this._x = x;\n            this._y = y;\n            this._observer._onUpdate(this);\n        }\n\n        return this;\n    }\n\n    /**\n     * Copies x and y from the given point (`p`)\n     * @param p - The point to copy from. Can be any of type that is or extends `PointData`\n     * @returns The observable point instance itself\n     */\n    public copyFrom(p: PointData): this\n    {\n        if (this._x !== p.x || this._y !== p.y)\n        {\n            this._x = p.x;\n            this._y = p.y;\n            this._observer._onUpdate(this);\n        }\n\n        return this;\n    }\n\n    /**\n     * Copies this point's x and y into that of the given point (`p`)\n     * @param p - The point to copy to. Can be any of type that is or extends `PointData`\n     * @returns The point (`p`) with values updated\n     */\n    public copyTo<T extends PointLike>(p: T): T\n    {\n        p.set(this._x, this._y);\n\n        return p;\n    }\n\n    /**\n     * Accepts another point (`p`) and returns `true` if the given point is equal to this point\n     * @param p - The point to check\n     * @returns Returns `true` if both `x` and `y` are equal\n     */\n    public equals(p: PointData): boolean\n    {\n        return (p.x === this._x) && (p.y === this._y);\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js/math:ObservablePoint x=${0} y=${0} scope=${this._observer}]`;\n    }\n    // #endif\n\n    /** Position of the observable point on the x axis. */\n    get x(): number\n    {\n        return this._x;\n    }\n\n    set x(value: number)\n    {\n        if (this._x !== value)\n        {\n            this._x = value;\n            this._observer._onUpdate(this);\n        }\n    }\n\n    /** Position of the observable point on the y axis. */\n    get y(): number\n    {\n        return this._y;\n    }\n\n    set y(value: number)\n    {\n        if (this._y !== value)\n        {\n            this._y = value;\n            this._observer._onUpdate(this);\n        }\n    }\n}\n","/* eslint-disable @typescript-eslint/no-use-before-define */\nimport type { PointData } from './PointData';\nimport type { PointLike } from './PointLike';\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface Point extends PixiMixins.Point { }\n\n/**\n * The Point object represents a location in a two-dimensional coordinate system, where `x` represents\n * the position on the horizontal axis and `y` represents the position on the vertical axis.\n * <br/>\n * Many Pixi functions accept the `PointData` type as an alternative to `Point`,\n * which only requires `x` and `y` properties.\n * @class\n * @implements {PointLike}\n * @memberof maths\n */\nexport class Point implements PointLike\n{\n    /** Position of the point on the x axis */\n    public x = 0;\n    /** Position of the point on the y axis */\n    public y = 0;\n\n    /**\n     * Creates a new `Point`\n     * @param {number} [x=0] - position of the point on the x axis\n     * @param {number} [y=0] - position of the point on the y axis\n     */\n    constructor(x = 0, y = 0)\n    {\n        this.x = x;\n        this.y = y;\n    }\n\n    /**\n     * Creates a clone of this point\n     * @returns A clone of this point\n     */\n    public clone(): Point\n    {\n        return new Point(this.x, this.y);\n    }\n\n    /**\n     * Copies `x` and `y` from the given point into this point\n     * @param p - The point to copy from\n     * @returns The point instance itself\n     */\n    public copyFrom(p: PointData): this\n    {\n        this.set(p.x, p.y);\n\n        return this;\n    }\n\n    /**\n     * Copies this point's x and y into the given point (`p`).\n     * @param p - The point to copy to. Can be any of type that is or extends `PointData`\n     * @returns The point (`p`) with values updated\n     */\n    public copyTo<T extends PointLike>(p: T): T\n    {\n        p.set(this.x, this.y);\n\n        return p;\n    }\n\n    /**\n     * Accepts another point (`p`) and returns `true` if the given point is equal to this point\n     * @param p - The point to check\n     * @returns Returns `true` if both `x` and `y` are equal\n     */\n    public equals(p: PointData): boolean\n    {\n        return (p.x === this.x) && (p.y === this.y);\n    }\n\n    /**\n     * Sets the point to a new `x` and `y` position.\n     * If `y` is omitted, both `x` and `y` will be set to `x`.\n     * @param {number} [x=0] - position of the point on the `x` axis\n     * @param {number} [y=x] - position of the point on the `y` axis\n     * @returns The point instance itself\n     */\n    public set(x = 0, y: number = x): this\n    {\n        this.x = x;\n        this.y = y;\n\n        return this;\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js/math:Point x=${this.x} y=${this.y}]`;\n    }\n    // #endif\n\n    /**\n     * A static Point object with `x` and `y` values of `0`. Can be used to avoid creating new objects multiple times.\n     * @readonly\n     */\n    static get shared(): Point\n    {\n        tempPoint.x = 0;\n        tempPoint.y = 0;\n\n        return tempPoint;\n    }\n}\n\nconst tempPoint = new Point();\n","// import { SHAPES } from '../const';\nimport { Point } from '../point/Point';\n\nimport type { Bounds } from '../../scene/container/bounds/Bounds';\nimport type { Matrix } from '../matrix/Matrix';\nimport type { SHAPE_PRIMITIVE } from '../misc/const';\nimport type { ShapePrimitive } from './ShapePrimitive';\n\nconst tempPoints = [new Point(), new Point(), new Point(), new Point()];\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface Rectangle extends PixiMixins.Rectangle { }\n\n/**\n * The `Rectangle` object is an area defined by its position, as indicated by its top-left corner\n * point (`x`, `y`) and by its `width` and its `height`.\n *\n * It also provides convenience methods to get and set the position and size of the rectangle such as\n * {@link maths.Rectangle#bottom|bottom}, {@link maths.Rectangle#right|right} and {@link maths.Rectangle#isEmpty|isEmpty}.\n * @memberof maths\n */\nexport class Rectangle implements ShapePrimitive\n{\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'rectangle'\n     */\n    public readonly type: SHAPE_PRIMITIVE = 'rectangle';\n\n    /**\n     * The X coordinate of the upper-left corner of the rectangle\n     * @default 0\n     */\n    public x: number;\n\n    /**\n     * The Y coordinate of the upper-left corner of the rectangle\n     * @default 0\n     */\n    public y: number;\n\n    /**\n     * The overall width of this rectangle\n     *  @default 0\n     */\n    public width: number;\n\n    /**\n     * The overall height of this rectangle\n     * @default 0\n     */\n    public height: number;\n\n    /**\n     * @param x - The X coordinate of the upper-left corner of the rectangle\n     * @param y - The Y coordinate of the upper-left corner of the rectangle\n     * @param width - The overall width of the rectangle\n     * @param height - The overall height of the rectangle\n     */\n    constructor(x: string | number = 0, y: string | number = 0, width: string | number = 0, height: string | number = 0)\n    {\n        this.x = Number(x);\n        this.y = Number(y);\n        this.width = Number(width);\n        this.height = Number(height);\n    }\n\n    /** Returns the left edge of the rectangle. */\n    get left(): number\n    {\n        return this.x;\n    }\n\n    /** Returns the right edge of the rectangle. */\n    get right(): number\n    {\n        return this.x + this.width;\n    }\n\n    /** Returns the top edge of the rectangle. */\n    get top(): number\n    {\n        return this.y;\n    }\n\n    /** Returns the bottom edge of the rectangle. */\n    get bottom(): number\n    {\n        return this.y + this.height;\n    }\n\n    /** Determines whether the Rectangle is empty. */\n    public isEmpty(): boolean\n    {\n        return this.left === this.right || this.top === this.bottom;\n    }\n\n    /** A constant empty rectangle. This is a new object every time the property is accessed */\n    static get EMPTY(): Rectangle\n    {\n        return new Rectangle(0, 0, 0, 0);\n    }\n\n    /**\n     * Creates a clone of this Rectangle\n     * @returns a copy of the rectangle\n     */\n    public clone(): Rectangle\n    {\n        return new Rectangle(this.x, this.y, this.width, this.height);\n    }\n\n    /**\n     * Converts a Bounds object to a Rectangle object.\n     * @param bounds - The bounds to copy and convert to a rectangle.\n     * @returns Returns itself.\n     */\n    public copyFromBounds(bounds: Bounds): this\n    {\n        this.x = bounds.minX;\n        this.y = bounds.minY;\n        this.width = bounds.maxX - bounds.minX;\n        this.height = bounds.maxY - bounds.minY;\n\n        return this;\n    }\n\n    /**\n     * Copies another rectangle to this one.\n     * @param rectangle - The rectangle to copy from.\n     * @returns Returns itself.\n     */\n    public copyFrom(rectangle: Rectangle): Rectangle\n    {\n        this.x = rectangle.x;\n        this.y = rectangle.y;\n        this.width = rectangle.width;\n        this.height = rectangle.height;\n\n        return this;\n    }\n\n    /**\n     * Copies this rectangle to another one.\n     * @param rectangle - The rectangle to copy to.\n     * @returns Returns given parameter.\n     */\n    public copyTo(rectangle: Rectangle): Rectangle\n    {\n        rectangle.copyFrom(this);\n\n        return rectangle;\n    }\n\n    /**\n     * Checks whether the x and y coordinates given are contained within this Rectangle\n     * @param x - The X coordinate of the point to test\n     * @param y - The Y coordinate of the point to test\n     * @returns Whether the x/y coordinates are within this Rectangle\n     */\n    public contains(x: number, y: number): boolean\n    {\n        if (this.width <= 0 || this.height <= 0)\n        {\n            return false;\n        }\n\n        if (x >= this.x && x < this.x + this.width)\n        {\n            if (y >= this.y && y < this.y + this.height)\n            {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Checks whether the x and y coordinates given are contained within this rectangle including the stroke.\n     * @param x - The X coordinate of the point to test\n     * @param y - The Y coordinate of the point to test\n     * @param strokeWidth - The width of the line to check\n     * @returns Whether the x/y coordinates are within this rectangle\n     */\n    public strokeContains(x: number, y: number, strokeWidth: number): boolean\n    {\n        const { width, height } = this;\n\n        if (width <= 0 || height <= 0) return false;\n\n        const _x = this.x;\n        const _y = this.y;\n\n        const outerLeft = _x - (strokeWidth / 2);\n        const outerRight = _x + width + (strokeWidth / 2);\n        const outerTop = _y - (strokeWidth / 2);\n        const outerBottom = _y + height + (strokeWidth / 2);\n        const innerLeft = _x + (strokeWidth / 2);\n        const innerRight = _x + width - (strokeWidth / 2);\n        const innerTop = _y + (strokeWidth / 2);\n        const innerBottom = _y + height - (strokeWidth / 2);\n\n        return (x >= outerLeft && x <= outerRight && y >= outerTop && y <= outerBottom)\n        && !(x > innerLeft && x < innerRight && y > innerTop && y < innerBottom);\n    }\n    /**\n     * Determines whether the `other` Rectangle transformed by `transform` intersects with `this` Rectangle object.\n     * Returns true only if the area of the intersection is >0, this means that Rectangles\n     * sharing a side are not overlapping. Another side effect is that an arealess rectangle\n     * (width or height equal to zero) can't intersect any other rectangle.\n     * @param {Rectangle} other - The Rectangle to intersect with `this`.\n     * @param {Matrix} transform - The transformation matrix of `other`.\n     * @returns {boolean} A value of `true` if the transformed `other` Rectangle intersects with `this`; otherwise `false`.\n     */\n    public intersects(other: Rectangle, transform?: Matrix): boolean\n    {\n        if (!transform)\n        {\n            const x0 = this.x < other.x ? other.x : this.x;\n            const x1 = this.right > other.right ? other.right : this.right;\n\n            if (x1 <= x0)\n            {\n                return false;\n            }\n\n            const y0 = this.y < other.y ? other.y : this.y;\n            const y1 = this.bottom > other.bottom ? other.bottom : this.bottom;\n\n            return y1 > y0;\n        }\n\n        const x0 = this.left;\n        const x1 = this.right;\n        const y0 = this.top;\n        const y1 = this.bottom;\n\n        if (x1 <= x0 || y1 <= y0)\n        {\n            return false;\n        }\n\n        const lt = tempPoints[0].set(other.left, other.top);\n        const lb = tempPoints[1].set(other.left, other.bottom);\n        const rt = tempPoints[2].set(other.right, other.top);\n        const rb = tempPoints[3].set(other.right, other.bottom);\n\n        if (rt.x <= lt.x || lb.y <= lt.y)\n        {\n            return false;\n        }\n\n        const s = Math.sign((transform.a * transform.d) - (transform.b * transform.c));\n\n        if (s === 0)\n        {\n            return false;\n        }\n\n        transform.apply(lt, lt);\n        transform.apply(lb, lb);\n        transform.apply(rt, rt);\n        transform.apply(rb, rb);\n\n        if (Math.max(lt.x, lb.x, rt.x, rb.x) <= x0\n            || Math.min(lt.x, lb.x, rt.x, rb.x) >= x1\n            || Math.max(lt.y, lb.y, rt.y, rb.y) <= y0\n            || Math.min(lt.y, lb.y, rt.y, rb.y) >= y1)\n        {\n            return false;\n        }\n\n        const nx = s * (lb.y - lt.y);\n        const ny = s * (lt.x - lb.x);\n        const n00 = (nx * x0) + (ny * y0);\n        const n10 = (nx * x1) + (ny * y0);\n        const n01 = (nx * x0) + (ny * y1);\n        const n11 = (nx * x1) + (ny * y1);\n\n        if (Math.max(n00, n10, n01, n11) <= (nx * lt.x) + (ny * lt.y)\n            || Math.min(n00, n10, n01, n11) >= (nx * rb.x) + (ny * rb.y))\n        {\n            return false;\n        }\n\n        const mx = s * (lt.y - rt.y);\n        const my = s * (rt.x - lt.x);\n        const m00 = (mx * x0) + (my * y0);\n        const m10 = (mx * x1) + (my * y0);\n        const m01 = (mx * x0) + (my * y1);\n        const m11 = (mx * x1) + (my * y1);\n\n        if (Math.max(m00, m10, m01, m11) <= (mx * lt.x) + (my * lt.y)\n            || Math.min(m00, m10, m01, m11) >= (mx * rb.x) + (my * rb.y))\n        {\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Pads the rectangle making it grow in all directions.\n     * If paddingY is omitted, both paddingX and paddingY will be set to paddingX.\n     * @param paddingX - The horizontal padding amount.\n     * @param paddingY - The vertical padding amount.\n     * @returns Returns itself.\n     */\n    public pad(paddingX = 0, paddingY = paddingX): this\n    {\n        this.x -= paddingX;\n        this.y -= paddingY;\n\n        this.width += paddingX * 2;\n        this.height += paddingY * 2;\n\n        return this;\n    }\n\n    /**\n     * Fits this rectangle around the passed one.\n     * @param rectangle - The rectangle to fit.\n     * @returns Returns itself.\n     */\n    public fit(rectangle: Rectangle): this\n    {\n        const x1 = Math.max(this.x, rectangle.x);\n        const x2 = Math.min(this.x + this.width, rectangle.x + rectangle.width);\n        const y1 = Math.max(this.y, rectangle.y);\n        const y2 = Math.min(this.y + this.height, rectangle.y + rectangle.height);\n\n        this.x = x1;\n        this.width = Math.max(x2 - x1, 0);\n        this.y = y1;\n        this.height = Math.max(y2 - y1, 0);\n\n        return this;\n    }\n\n    /**\n     * Enlarges rectangle that way its corners lie on grid\n     * @param resolution - resolution\n     * @param eps - precision\n     * @returns Returns itself.\n     */\n    public ceil(resolution = 1, eps = 0.001): this\n    {\n        const x2 = Math.ceil((this.x + this.width - eps) * resolution) / resolution;\n        const y2 = Math.ceil((this.y + this.height - eps) * resolution) / resolution;\n\n        this.x = Math.floor((this.x + eps) * resolution) / resolution;\n        this.y = Math.floor((this.y + eps) * resolution) / resolution;\n\n        this.width = x2 - this.x;\n        this.height = y2 - this.y;\n\n        return this;\n    }\n\n    /**\n     * Enlarges this rectangle to include the passed rectangle.\n     * @param rectangle - The rectangle to include.\n     * @returns Returns itself.\n     */\n    public enlarge(rectangle: Rectangle): this\n    {\n        const x1 = Math.min(this.x, rectangle.x);\n        const x2 = Math.max(this.x + this.width, rectangle.x + rectangle.width);\n        const y1 = Math.min(this.y, rectangle.y);\n        const y2 = Math.max(this.y + this.height, rectangle.y + rectangle.height);\n\n        this.x = x1;\n        this.width = x2 - x1;\n        this.y = y1;\n        this.height = y2 - y1;\n\n        return this;\n    }\n\n    /**\n     * Returns the framing rectangle of the rectangle as a Rectangle object\n     * @param out - optional rectangle to store the result\n     * @returns The framing rectangle\n     */\n    public getBounds(out?: Rectangle): Rectangle\n    {\n        out = out || new Rectangle();\n        out.copyFrom(this);\n\n        return out;\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`;\n    }\n    // #endif\n}\n","import { Buffer } from '../../renderers/shared/buffer/Buffer';\nimport { BufferUsage } from '../../renderers/shared/buffer/const';\nimport { Geometry } from '../../renderers/shared/geometry/Geometry';\n\nconst placeHolderBufferData = new Float32Array(1);\nconst placeHolderIndexData = new Uint32Array(1);\n\nexport class BatchGeometry extends Geometry\n{\n    constructor()\n    {\n        const vertexSize = 6;\n\n        const attributeBuffer = new Buffer({\n            data: placeHolderBufferData,\n            label: 'attribute-batch-buffer',\n            usage: BufferUsage.VERTEX | BufferUsage.COPY_DST,\n            shrinkToFit: false,\n        });\n\n        const indexBuffer = new Buffer({\n            data: placeHolderIndexData,\n            label: 'index-batch-buffer',\n            usage: BufferUsage.INDEX | BufferUsage.COPY_DST, // | BufferUsage.STATIC,\n            shrinkToFit: false,\n        });\n\n        const stride = vertexSize * 4;\n\n        super({\n            attributes: {\n                aPosition: {\n                    buffer: attributeBuffer,\n                    format: 'float32x2',\n                    stride,\n                    offset: 0,\n                    location: 1,\n                },\n                aUV: {\n                    buffer: attributeBuffer,\n                    format: 'float32x2',\n                    stride,\n                    offset: 2 * 4,\n                    location: 3,\n                },\n                aColor: {\n                    buffer: attributeBuffer,\n                    format: 'unorm8x4',\n                    stride,\n                    offset: 4 * 4,\n                    location: 0,\n                },\n                aTextureIdAndRound: {\n                    buffer: attributeBuffer,\n                    format: 'uint16x2',\n                    stride,\n                    offset: 5 * 4,\n                    location: 2,\n                },\n            },\n            indexBuffer\n        });\n    }\n}\n\n","import { BindGroup } from '../../renderers/gpu/shader/BindGroup';\nimport { Texture } from '../../renderers/shared/texture/Texture';\nimport { maxRecommendedTextures } from '../../renderers/shared/texture/utils/maxRecommendedTextures';\n\nimport type { TextureSource } from '../../renderers/shared/texture/sources/TextureSource';\n\nconst cachedGroups: Record<number, BindGroup> = {};\n\nexport function getTextureBatchBindGroup(textures: TextureSource[], size: number)\n{\n    let uid = 0;\n\n    for (let i = 0; i < size; i++)\n    {\n        uid = ((uid * 31) + textures[i].uid) >>> 0;\n    }\n\n    return cachedGroups[uid] || generateTextureBatchBindGroup(textures, uid);\n}\n\nlet maxTextures = 0;\n\nfunction generateTextureBatchBindGroup(textures: TextureSource[], key: number): BindGroup\n{\n    const bindGroupResources: Record<string, any> = {};\n\n    let bindIndex = 0;\n\n    if (!maxTextures)maxTextures = maxRecommendedTextures();\n\n    for (let i = 0; i < maxTextures; i++)\n    {\n        const texture = i < textures.length ? textures[i] : Texture.EMPTY.source;\n\n        bindGroupResources[bindIndex++] = texture.source;\n        bindGroupResources[bindIndex++] = texture.style;\n    }\n\n    // pad out with empty textures\n    const bindGroup = new BindGroup(bindGroupResources);\n\n    cachedGroups[key] = bindGroup;\n\n    return bindGroup;\n}\n\n","type TypedArray = Float32Array | Uint32Array | Int32Array | Uint8Array;\n\n/**\n * Flexible wrapper around `ArrayBuffer` that also provides typed array views on demand.\n * @memberof utils\n */\nexport class ViewableBuffer\n{\n    /** The size of the buffer in bytes. */\n    public size: number;\n\n    /** Underlying `ArrayBuffer` that holds all the data and is of capacity `this.size`. */\n    public rawBinaryData: ArrayBuffer;\n\n    /** View on the raw binary data as a `Uint32Array`. */\n    public uint32View: Uint32Array;\n\n    /** View on the raw binary data as a `Float32Array`. */\n    public float32View: Float32Array;\n    public uint16View: Uint16Array;\n\n    private _int8View: Int8Array;\n    private _uint8View: Uint8Array;\n    private _int16View: Int16Array;\n    private _int32View: Int32Array;\n    private _float64Array: Float64Array;\n    private _bigUint64Array: BigUint64Array;\n\n    /**\n     * @param length - The size of the buffer in bytes.\n     */\n    constructor(length: number);\n\n    /**\n     * @param arrayBuffer - The source array buffer.\n     */\n    constructor(arrayBuffer: ArrayBuffer);\n\n    constructor(sizeOrBuffer: number | ArrayBuffer | Uint8Array)\n    {\n        if (typeof sizeOrBuffer === 'number')\n        {\n            this.rawBinaryData = new ArrayBuffer(sizeOrBuffer);\n        }\n        else if (sizeOrBuffer instanceof Uint8Array)\n        {\n            this.rawBinaryData = sizeOrBuffer.buffer;\n        }\n        else\n        {\n            this.rawBinaryData = sizeOrBuffer;\n        }\n\n        this.uint32View = new Uint32Array(this.rawBinaryData);\n        this.float32View = new Float32Array(this.rawBinaryData);\n\n        this.size = this.rawBinaryData.byteLength;\n    }\n\n    /** View on the raw binary data as a `Int8Array`. */\n    get int8View(): Int8Array\n    {\n        if (!this._int8View)\n        {\n            this._int8View = new Int8Array(this.rawBinaryData);\n        }\n\n        return this._int8View;\n    }\n\n    /** View on the raw binary data as a `Uint8Array`. */\n    get uint8View(): Uint8Array\n    {\n        if (!this._uint8View)\n        {\n            this._uint8View = new Uint8Array(this.rawBinaryData);\n        }\n\n        return this._uint8View;\n    }\n\n    /**  View on the raw binary data as a `Int16Array`. */\n    get int16View(): Int16Array\n    {\n        if (!this._int16View)\n        {\n            this._int16View = new Int16Array(this.rawBinaryData);\n        }\n\n        return this._int16View;\n    }\n\n    /** View on the raw binary data as a `Int32Array`. */\n    get int32View(): Int32Array\n    {\n        if (!this._int32View)\n        {\n            this._int32View = new Int32Array(this.rawBinaryData);\n        }\n\n        return this._int32View;\n    }\n\n    /** View on the raw binary data as a `Float64Array`. */\n    get float64View(): Float64Array\n    {\n        if (!this._float64Array)\n        {\n            this._float64Array = new Float64Array(this.rawBinaryData);\n        }\n\n        return this._float64Array;\n    }\n\n    /** View on the raw binary data as a `BigUint64Array`. */\n    get bigUint64View(): BigUint64Array\n    {\n        if (!this._bigUint64Array)\n        {\n            this._bigUint64Array = new BigUint64Array(this.rawBinaryData);\n        }\n\n        return this._bigUint64Array;\n    }\n\n    /**\n     * Returns the view of the given type.\n     * @param type - One of `int8`, `uint8`, `int16`,\n     *    `uint16`, `int32`, `uint32`, and `float32`.\n     * @returns - typed array of given type\n     */\n    public view(type: string): TypedArray\n    {\n        return (this as any)[`${type}View`];\n    }\n\n    /** Destroys all buffer references. Do not use after calling this. */\n    public destroy(): void\n    {\n        this.rawBinaryData = null;\n        this._int8View = null;\n        this._uint8View = null;\n        this._int16View = null;\n        this.uint16View = null;\n        this._int32View = null;\n        this.uint32View = null;\n        this.float32View = null;\n    }\n\n    /**\n     * Returns the size of the given type in bytes.\n     * @param type - One of `int8`, `uint8`, `int16`,\n     *   `uint16`, `int32`, `uint32`, and `float32`.\n     * @returns - size of the type in bytes\n     */\n    public static sizeOf(type: string): number\n    {\n        switch (type)\n        {\n            case 'int8':\n            case 'uint8':\n                return 1;\n            case 'int16':\n            case 'uint16':\n                return 2;\n            case 'int32':\n            case 'uint32':\n            case 'float32':\n                return 4;\n            default:\n                throw new Error(`${type} isn't a valid view type`);\n        }\n    }\n}\n","import { type BLEND_MODES, BLEND_TO_NPM } from './const';\n\nimport type { TextureSource } from '../texture/sources/TextureSource';\n\n/**\n * Adjusts a blend mode for the current alpha mode. Returns the blend mode that works with that format.\n * eg 'normal' blend mode will return 'normal-npm' when rendering with premultiplied alpha.\n * and 'normal' if the texture is already premultiplied (the default)\n * @param blendMode - The blend mode to get the adjusted blend mode for.\n * @param textureSource - The texture to test the format of.\n * @returns - the blend mode that should be used to render this texture correctly based on its alphaMode\n */\nexport function getAdjustedBlendModeBlend(blendMode: BLEND_MODES, textureSource: TextureSource): BLEND_MODES\n{\n    if (textureSource.alphaMode === 'no-premultiply-alpha')\n    {\n        return (BLEND_TO_NPM[blendMode as keyof typeof BLEND_TO_NPM] || blendMode) as BLEND_MODES;\n    }\n\n    return blendMode;\n}\n","import type { TextureSource } from '../../renderers/shared/texture/sources/TextureSource';\n\n/**\n * Used by the batcher to build texture batches. Holds list of textures and their respective locations.\n * @memberof rendering\n */\nexport class BatchTextureArray\n{\n    /** Inside textures array. */\n    public textures: TextureSource[];\n\n    /** Respective locations for textures. */\n    public ids: Record<number, number> = Object.create(null);\n\n    /** Number of filled elements. */\n    public count: number;\n\n    constructor()\n    {\n        this.textures = [];\n        this.count = 0;\n    }\n\n    /** Clear the textures and their locations. */\n    public clear(): void\n    {\n        for (let i = 0; i < this.count; i++)\n        {\n            const t = this.textures[i];\n\n            this.textures[i] = null;\n            this.ids[t.uid] = null;\n        }\n\n        this.count = 0;\n    }\n}\n","import { uid } from '../../../utils/data/uid';\nimport { ViewableBuffer } from '../../../utils/data/ViewableBuffer';\nimport { fastCopy } from '../../renderers/shared/buffer/utils/fastCopy';\nimport { type BLEND_MODES } from '../../renderers/shared/state/const';\nimport { getAdjustedBlendModeBlend } from '../../renderers/shared/state/getAdjustedBlendModeBlend';\nimport { maxRecommendedTextures } from '../../renderers/shared/texture/utils/maxRecommendedTextures';\nimport { BatchTextureArray } from './BatchTextureArray';\n\nimport type { BindGroup } from '../../renderers/gpu/shader/BindGroup';\nimport type { IndexBufferArray } from '../../renderers/shared/geometry/Geometry';\nimport type { Instruction } from '../../renderers/shared/instructions/Instruction';\nimport type { InstructionSet } from '../../renderers/shared/instructions/InstructionSet';\nimport type { Texture } from '../../renderers/shared/texture/Texture';\n\nexport type BatchAction = 'startBatch' | 'renderBatch';\n\n/**\n * A batch pool is used to store batches when they are not currently in use.\n * @memberof rendering\n */\nexport class Batch implements Instruction\n{\n    public renderPipeId = 'batch';\n    public action: BatchAction = 'startBatch';\n\n    // TODO - eventually this could be useful for flagging batches as dirty and then only rebuilding those ones\n    // public elementStart = 0;\n    // public elementSize = 0;\n\n    // for drawing..\n    public start = 0;\n    public size = 0;\n    public textures: BatchTextureArray;\n\n    public blendMode: BLEND_MODES = 'normal';\n\n    public canBundle = true;\n\n    /**\n     * breaking rules slightly here in the name of performance..\n     * storing references to these bindgroups here is just faster for access!\n     * keeps a reference to the GPU bind group to set when rendering this batch for WebGPU. Will be null is using WebGL.\n     */\n    public gpuBindGroup: GPUBindGroup;\n    /**\n     * breaking rules slightly here in the name of performance..\n     * storing references to these bindgroups here is just faster for access!\n     * keeps a reference to the bind group to set when rendering this batch for WebGPU. Will be null if using WebGl.\n     */\n    public bindGroup: BindGroup;\n\n    public batcher: Batcher;\n\n    public destroy()\n    {\n        this.textures = null;\n        this.gpuBindGroup = null;\n        this.bindGroup = null;\n        this.batcher = null;\n    }\n}\n\nexport interface BatchableObject\n{\n    indexStart: number;\n\n    packAttributes: (\n        float32View: Float32Array,\n        uint32View: Uint32Array,\n        index: number,\n        textureId: number,\n    ) => void;\n    packIndex: (indexBuffer: IndexBufferArray, index: number, indicesOffset: number) => void;\n\n    texture: Texture;\n    blendMode: BLEND_MODES;\n    vertexSize: number;\n    indexSize: number;\n\n    // stored for efficient updating..\n    textureId: number;\n    location: number; // location in the buffer\n    batcher: Batcher;\n    batch: Batch;\n\n    roundPixels: 0 | 1;\n}\n\nlet BATCH_TICK = 0;\n\n/**\n * The options for the batcher.\n * @ignore\n */\nexport interface BatcherOptions\n{\n    /** The size of the vertex buffer. */\n    vertexSize?: number;\n    /** The size of the index buffer. */\n    indexSize?: number;\n}\n\n/**\n * A batcher is used to batch together objects with the same texture.\n * @ignore\n */\nexport class Batcher\n{\n    public static defaultOptions: BatcherOptions = {\n        vertexSize: 4,\n        indexSize: 6,\n    };\n\n    public uid = uid('batcher');\n    public attributeBuffer: ViewableBuffer;\n    public indexBuffer: IndexBufferArray;\n\n    public attributeSize: number;\n    public indexSize: number;\n    public elementSize: number;\n    public elementStart: number;\n\n    public dirty = true;\n\n    public batchIndex = 0;\n    public batches: Batch[] = [];\n\n    // specifics.\n    private readonly _vertexSize: number = 6;\n\n    private _elements: BatchableObject[] = [];\n\n    private readonly _batchPool: Batch[] = [];\n    private _batchPoolIndex = 0;\n    private readonly _textureBatchPool: BatchTextureArray[] = [];\n    private _textureBatchPoolIndex = 0;\n    private _batchIndexStart: number;\n    private _batchIndexSize: number;\n    private readonly _maxTextures: number;\n\n    constructor(options: BatcherOptions = {})\n    {\n        options = { ...Batcher.defaultOptions, ...options };\n\n        const { vertexSize, indexSize } = options;\n\n        this.attributeBuffer = new ViewableBuffer(vertexSize * this._vertexSize * 4);\n\n        this.indexBuffer = new Uint16Array(indexSize);\n\n        this._maxTextures = maxRecommendedTextures();\n    }\n\n    public begin()\n    {\n        this.batchIndex = 0;\n        this.elementSize = 0;\n        this.elementStart = 0;\n        this.indexSize = 0;\n        this.attributeSize = 0;\n        this._batchPoolIndex = 0;\n        this._textureBatchPoolIndex = 0;\n        this._batchIndexStart = 0;\n        this._batchIndexSize = 0;\n\n        this.dirty = true;\n    }\n\n    public add(batchableObject: BatchableObject)\n    {\n        this._elements[this.elementSize++] = batchableObject;\n\n        batchableObject.indexStart = this.indexSize;\n        batchableObject.location = this.attributeSize;\n        batchableObject.batcher = this;\n\n        this.indexSize += batchableObject.indexSize;\n        this.attributeSize += ((batchableObject.vertexSize) * this._vertexSize);\n    }\n\n    public checkAndUpdateTexture(batchableObject: BatchableObject, texture: Texture): boolean\n    {\n        const textureId = batchableObject.batch.textures.ids[texture._source.uid];\n\n        // TODO could try to be a bit smarter if there are spare textures..\n        // but need to figure out how to alter the bind groups too..\n        if (!textureId && textureId !== 0) return false;\n\n        batchableObject.textureId = textureId;\n        batchableObject.texture = texture;\n\n        return true;\n    }\n\n    public updateElement(batchableObject: BatchableObject)\n    {\n        this.dirty = true;\n\n        batchableObject.packAttributes(\n            this.attributeBuffer.float32View,\n            this.attributeBuffer.uint32View,\n            batchableObject.location, batchableObject.textureId);\n    }\n\n    /**\n     * breaks the batcher. This happens when a batch gets too big,\n     * or we need to switch to a different type of rendering (a filter for example)\n     * @param instructionSet\n     */\n    public break(instructionSet: InstructionSet)\n    {\n        // ++BATCH_TICK;\n        const elements = this._elements;\n\n        let textureBatch = this._textureBatchPool[this._textureBatchPoolIndex++] || new BatchTextureArray();\n\n        textureBatch.clear();\n\n        // length 0??!! (we broke without ading anything)\n        if (!elements[this.elementStart]) return;\n\n        const firstElement = elements[this.elementStart];\n        let blendMode = getAdjustedBlendModeBlend(firstElement.blendMode, firstElement.texture._source);\n\n        if (this.attributeSize * 4 > this.attributeBuffer.size)\n        {\n            this._resizeAttributeBuffer(this.attributeSize * 4);\n        }\n\n        if (this.indexSize > this.indexBuffer.length)\n        {\n            this._resizeIndexBuffer(this.indexSize);\n        }\n\n        const f32 = this.attributeBuffer.float32View;\n        const u32 = this.attributeBuffer.uint32View;\n        const iBuffer = this.indexBuffer;\n\n        let size = this._batchIndexSize;\n        let start = this._batchIndexStart;\n\n        let action: BatchAction = 'startBatch';\n        let batch = this._batchPool[this._batchPoolIndex++] || new Batch();\n\n        const maxTextures = this._maxTextures;\n\n        for (let i = this.elementStart; i < this.elementSize; ++i)\n        {\n            const element = elements[i];\n\n            elements[i] = null;\n\n            const texture = element.texture;\n            const source = texture._source;\n\n            const adjustedBlendMode = getAdjustedBlendModeBlend(element.blendMode, source);\n\n            const blendModeChange = blendMode !== adjustedBlendMode;\n\n            if (source._batchTick === BATCH_TICK && !blendModeChange)\n            {\n                element.textureId = source._textureBindLocation;\n\n                size += element.indexSize;\n                element.packAttributes(f32, u32, element.location, element.textureId);\n                element.packIndex(iBuffer, element.indexStart, element.location / this._vertexSize);\n\n                element.batch = batch;\n\n                continue;\n            }\n\n            source._batchTick = BATCH_TICK;\n\n            if (textureBatch.count >= maxTextures || blendModeChange)\n            {\n                this._finishBatch(\n                    batch,\n                    start,\n                    size - start,\n                    textureBatch,\n                    blendMode,\n                    instructionSet,\n                    action\n                );\n\n                action = 'renderBatch';\n                start = size;\n                // create a batch...\n                blendMode = adjustedBlendMode;\n\n                textureBatch = this._textureBatchPool[this._textureBatchPoolIndex++] || new BatchTextureArray();\n                textureBatch.clear();\n\n                batch = this._batchPool[this._batchPoolIndex++] || new Batch();\n                ++BATCH_TICK;\n            }\n\n            element.textureId = source._textureBindLocation = textureBatch.count;\n            textureBatch.ids[source.uid] = textureBatch.count;\n            textureBatch.textures[textureBatch.count++] = source;\n            element.batch = batch;\n\n            size += element.indexSize;\n            element.packAttributes(f32, u32, element.location, element.textureId);\n            element.packIndex(iBuffer, element.indexStart, element.location / this._vertexSize);\n        }\n\n        if (textureBatch.count > 0)\n        {\n            this._finishBatch(\n                batch,\n                start,\n                size - start,\n                textureBatch,\n                blendMode,\n                instructionSet,\n                action\n            );\n\n            start = size;\n            ++BATCH_TICK;\n        }\n\n        this.elementStart = this.elementSize;\n        this._batchIndexStart = start;\n        this._batchIndexSize = size;\n    }\n\n    private _finishBatch(\n        batch: Batch,\n        indexStart: number,\n        indexSize: number,\n        textureBatch: BatchTextureArray,\n        blendMode: BLEND_MODES,\n        instructionSet: InstructionSet,\n        action: BatchAction\n    )\n    {\n        batch.gpuBindGroup = null;\n        batch.action = action;\n\n        batch.batcher = this;\n        batch.textures = textureBatch;\n        batch.blendMode = blendMode;\n\n        batch.start = indexStart;\n        batch.size = indexSize;\n\n        ++BATCH_TICK;\n\n        instructionSet.add(batch);\n    }\n\n    public finish(instructionSet: InstructionSet)\n    {\n        this.break(instructionSet);\n    }\n\n    /**\n     * Resizes the attribute buffer to the given size (1 = 1 float32)\n     * @param size - the size in vertices to ensure (not bytes!)\n     */\n    public ensureAttributeBuffer(size: number)\n    {\n        if (size * 4 <= this.attributeBuffer.size) return;\n\n        this._resizeAttributeBuffer(size * 4);\n    }\n\n    /**\n     * Resizes the index buffer to the given size (1 = 1 float32)\n     * @param size - the size in vertices to ensure (not bytes!)\n     */\n    public ensureIndexBuffer(size: number)\n    {\n        if (size <= this.indexBuffer.length) return;\n\n        this._resizeIndexBuffer(size);\n    }\n\n    private _resizeAttributeBuffer(size: number)\n    {\n        const newSize = Math.max(size, this.attributeBuffer.size * 2);\n\n        const newArrayBuffer = new ViewableBuffer(newSize);\n\n        fastCopy(this.attributeBuffer.rawBinaryData, newArrayBuffer.rawBinaryData);\n\n        this.attributeBuffer = newArrayBuffer;\n    }\n\n    private _resizeIndexBuffer(size: number)\n    {\n        const indexBuffer = this.indexBuffer;\n\n        let newSize = Math.max(size, indexBuffer.length * 1.5);\n\n        newSize += newSize % 2;\n\n        // this, is technically not 100% accurate, as really we should\n        // be checking the maximum value in the buffer. This approximation\n        // does the trick though...\n\n        // make sure buffer is always an even number..\n        const newIndexBuffer = (newSize > 65535) ? new Uint32Array(newSize) : new Uint16Array(newSize);\n\n        if (newIndexBuffer.BYTES_PER_ELEMENT !== indexBuffer.BYTES_PER_ELEMENT)\n        {\n            for (let i = 0; i < indexBuffer.length; i++)\n            {\n                newIndexBuffer[i] = indexBuffer[i];\n            }\n        }\n        else\n        {\n            fastCopy(indexBuffer.buffer, newIndexBuffer.buffer);\n        }\n\n        this.indexBuffer = newIndexBuffer;\n    }\n\n    public destroy()\n    {\n        for (let i = 0; i < this.batches.length; i++)\n        {\n            this.batches[i].destroy();\n        }\n\n        this.batches = null;\n\n        for (let i = 0; i < this._elements.length; i++)\n        {\n            this._elements[i].batch = null;\n        }\n\n        this._elements = null;\n\n        this.indexBuffer = null;\n\n        this.attributeBuffer.destroy();\n        this.attributeBuffer = null;\n    }\n}\n\n","import { Bounds } from '../../../scene/container/bounds/Bounds';\nimport { getGlobalBounds } from '../../../scene/container/bounds/getGlobalBounds';\n\nimport type { Container } from '../../../scene/container/Container';\n\nconst tempBounds = new Bounds();\n\nexport function addMaskBounds(mask: Container, bounds: Bounds, skipUpdateTransform: boolean): void\n{\n    const boundsToMask = tempBounds;\n\n    mask.measurable = true;\n\n    getGlobalBounds(mask, skipUpdateTransform, boundsToMask);\n\n    bounds.addBoundsMask(boundsToMask);\n\n    mask.measurable = false;\n}\n\n","import { getLocalBounds } from '../../../scene/container/bounds/getLocalBounds';\nimport { boundsPool, matrixPool } from '../../../scene/container/bounds/utils/matrixAndBoundsPool';\nimport { warn } from '../../../utils/logging/warn';\n\nimport type { Matrix } from '../../../maths/matrix/Matrix';\nimport type { Bounds } from '../../../scene/container/bounds/Bounds';\nimport type { Container } from '../../../scene/container/Container';\n\nexport function addMaskLocalBounds(mask: Container, bounds: Bounds, localRoot: Container): void\n{\n    const boundsToMask = boundsPool.get();\n\n    mask.measurable = true;\n\n    const tempMatrix = matrixPool.get().identity();\n\n    const relativeMask = getMatrixRelativeToParent(mask, localRoot, tempMatrix);\n\n    getLocalBounds(mask, boundsToMask, relativeMask);\n\n    mask.measurable = false;\n\n    bounds.addBoundsMask(boundsToMask);\n\n    matrixPool.return(tempMatrix);\n    boundsPool.return(boundsToMask);\n}\n\nexport function getMatrixRelativeToParent(target: Container, root: Container, matrix: Matrix): Matrix\n{\n    if (!target)\n    {\n        // we have reach the top of the tree!\n        // #if _DEBUG\n        warn('Mask bounds, renderable is not inside the root container');\n        // #endif\n\n        return matrix;\n    }\n\n    if (target !== root)\n    {\n        getMatrixRelativeToParent(target.parent, root, matrix);\n\n        target.updateLocalTransform();\n\n        matrix.append(target.localTransform);\n    }\n\n    return matrix;\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { Sprite } from '../../../scene/sprite/Sprite';\nimport { addMaskBounds } from '../utils/addMaskBounds';\nimport { addMaskLocalBounds } from '../utils/addMaskLocalBounds';\n\nimport type { ExtensionMetadata } from '../../../extensions/Extensions';\nimport type { Point } from '../../../maths/point/Point';\nimport type { Bounds } from '../../../scene/container/bounds/Bounds';\nimport type { Container } from '../../../scene/container/Container';\nimport type { Effect } from '../../../scene/container/Effect';\nimport type { PoolItem } from '../../../utils/pool/Pool';\n\nexport class AlphaMask implements Effect, PoolItem\n{\n    public static extension: ExtensionMetadata = ExtensionType.MaskEffect;\n\n    public priority = 0;\n    public mask: Container;\n    public pipe = 'alphaMask';\n    public renderMaskToTexture: boolean;\n\n    constructor(options?: {mask: Container})\n    {\n        if (options?.mask)\n        {\n            this.init(options.mask);\n        }\n    }\n\n    public init(mask: Container): void\n    {\n        this.mask = mask;\n\n        // TODO - might want to change this to adjust on the fly\n        // user may add children to the sprite..\n        this.renderMaskToTexture = !(mask instanceof Sprite);\n\n        this.mask.renderable = this.renderMaskToTexture;\n        this.mask.includeInBuild = !this.renderMaskToTexture;\n\n        this.mask.measurable = false;\n    }\n\n    public reset()\n    {\n        this.mask.measurable = true;\n        this.mask = null;\n    }\n\n    public addBounds(bounds: Bounds, skipUpdateTransform?: boolean): void\n    {\n        addMaskBounds(this.mask, bounds, skipUpdateTransform);\n    }\n\n    public addLocalBounds(bounds: Bounds, localRoot: Container): void\n    {\n        addMaskLocalBounds(this.mask, bounds, localRoot);\n    }\n\n    public containsPoint(point: Point, hitTestFn: (container: Container, point: Point) => boolean): boolean\n    {\n        const mask = this.mask as any;\n\n        // if the point is in the mask, yay!\n        return hitTestFn(mask, point);\n    }\n\n    public destroy(): void\n    {\n        this.reset();\n    }\n\n    public static test(mask: any): boolean\n    {\n        return mask instanceof Sprite;\n    }\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\n\nimport type { ExtensionMetadata } from '../../../extensions/Extensions';\nimport type { Effect } from '../../../scene/container/Effect';\nimport type { PoolItem } from '../../../utils/pool/Pool';\n\nexport class ColorMask implements Effect, PoolItem\n{\n    public static extension: ExtensionMetadata = ExtensionType.MaskEffect;\n\n    public priority = 0;\n    public mask: number;\n    public pipe = 'colorMask';\n\n    constructor(options: {mask: number})\n    {\n        if (options?.mask)\n        {\n            this.init(options.mask);\n        }\n    }\n\n    public init(mask: number): void\n    {\n        this.mask = mask;\n    }\n\n    public destroy(): void\n    {\n        // nothing to destroy\n    }\n\n    public static test(mask: any): boolean\n    {\n        return typeof mask === 'number';\n    }\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { Container } from '../../../scene/container/Container';\nimport { addMaskBounds } from '../utils/addMaskBounds';\nimport { addMaskLocalBounds } from '../utils/addMaskLocalBounds';\n\nimport type { ExtensionMetadata } from '../../../extensions/Extensions';\nimport type { Point } from '../../../maths/point/Point';\nimport type { Bounds } from '../../../scene/container/bounds/Bounds';\nimport type { Effect } from '../../../scene/container/Effect';\nimport type { PoolItem } from '../../../utils/pool/Pool';\n\nexport class StencilMask implements Effect, PoolItem\n{\n    public static extension: ExtensionMetadata = ExtensionType.MaskEffect;\n\n    public priority = 0;\n    public mask: Container;\n    public pipe = 'stencilMask';\n\n    constructor(options: {mask: Container})\n    {\n        if (options?.mask)\n        {\n            this.init(options.mask);\n        }\n    }\n\n    public init(mask: Container): void\n    {\n        this.mask = mask;\n        this.mask.includeInBuild = false;\n        this.mask.measurable = false;\n    }\n\n    public reset()\n    {\n        this.mask.measurable = true;\n        this.mask.includeInBuild = true;\n        this.mask = null;\n    }\n\n    public addBounds(bounds: Bounds, skipUpdateTransform: boolean): void\n    {\n        addMaskBounds(this.mask, bounds, skipUpdateTransform);\n    }\n\n    public addLocalBounds(bounds: Bounds, localRoot: Container): void\n    {\n        addMaskLocalBounds(this.mask, bounds, localRoot);\n    }\n\n    public containsPoint(point: Point, hitTestFn: (container: Container, point: Point) => boolean): boolean\n    {\n        const mask = this.mask as any;\n\n        // if the point is in the mask, yay!\n        return hitTestFn(mask, point);\n    }\n\n    public destroy(): void\n    {\n        this.reset();\n    }\n\n    public static test(mask: any): boolean\n    {\n        return mask instanceof Container;\n    }\n}\n","import { extensions } from '../extensions/Extensions';\nimport { AlphaMask } from './mask/alpha/AlphaMask';\nimport { ColorMask } from './mask/color/ColorMask';\nimport { StencilMask } from './mask/stencil/StencilMask';\nimport { BufferImageSource } from './renderers/shared/texture/sources/BufferImageSource';\nimport { CanvasSource } from './renderers/shared/texture/sources/CanvasSource';\nimport { ImageSource } from './renderers/shared/texture/sources/ImageSource';\nimport { VideoSource } from './renderers/shared/texture/sources/VideoSource';\nimport './renderers/shared/texture/utils/textureFrom';\nimport './mask/MaskEffectManager';\n\n/**\n * The rendering namespace contains all the classes used for core rendering in PixiJS\n * this includes all the lower level resources such as Textures, Shaders, State, Buffers,\n * Geometry and the systems required to use them. This covers WebGL and WebGPU and their shared classes.\n *\n * To automatically create a renderer based on available resources, see the {@link rendering.autoDetectRenderer} function.\n * @namespace rendering\n */\n\nextensions.add(AlphaMask, ColorMask, StencilMask, VideoSource, ImageSource, CanvasSource, BufferImageSource);\n\n","export enum CLEAR\n// eslint-disable-next-line @typescript-eslint/indent\n{\n    NONE = 0,\n    COLOR = 16384,\n    STENCIL = 1024,\n    DEPTH = 256,\n\n    COLOR_DEPTH = COLOR | DEPTH,\n    COLOR_STENCIL = COLOR | STENCIL,\n    DEPTH_STENCIL = DEPTH | STENCIL,\n    ALL = COLOR | DEPTH | STENCIL,\n\n}\n\n/** Used for clearing render textures. true is the same as `ALL` false is the same as `NONE` */\nexport type CLEAR_OR_BOOL = CLEAR | boolean;\n","import { DOMAdapter } from '../../../../../environment/adapter';\n\nimport type { GlRenderingContext } from '../../context/GlRenderingContext';\n\nlet context: GlRenderingContext;\n\n/**\n * returns a little WebGL context to use for program inspection.\n * @static\n * @private\n * @returns {WebGLRenderingContext} a gl context to test with\n */\nexport function getTestContext(): GlRenderingContext\n{\n    if (!context || context?.isContextLost())\n    {\n        const canvas = DOMAdapter.get().createCanvas();\n\n        context = canvas.getContext('webgl', {}) as GlRenderingContext;\n    }\n\n    return context;\n}\n","import type { BindResource } from './BindResource';\n\n/**\n * A bind group is a collection of resources that are bound together for use by a shader.\n * They are essentially a wrapper for the WebGPU BindGroup class. But with the added bonus\n * that WebGL can also work with them.\n * @see https://gpuweb.github.io/gpuweb/#dictdef-gpubindgroupdescriptor\n * @example\n * // Create a bind group with a single texture and sampler\n * const bindGroup = new BindGroup({\n *    uTexture: texture.source,\n *    uTexture: texture.style,\n * });\n *\n * Bind groups resources must implement the {@link BindResource} interface.\n * The following resources are supported:\n * - {@link TextureSource}\n * - {@link TextureStyle}\n * - {@link Buffer}\n * - {@link BufferResource}\n * - {@link UniformGroup}\n *\n * The keys in the bind group must correspond to the names of the resources in the GPU program.\n *\n * This bind group class will also watch for changes in its resources ensuring that the changes\n * are reflected in the WebGPU BindGroup.\n * @memberof rendering\n */\nexport class BindGroup\n{\n    /** The resources that are bound together for use by a shader. */\n    public resources: Record<string, BindResource> = Object.create(null);\n    /**\n     * a key used internally to match it up to a WebGPU Bindgroup\n     * @internal\n     * @ignore\n     */\n    public _key: string;\n    private _dirty = true;\n\n    /**\n     * Create a new instance eof the Bind Group.\n     * @param resources - The resources that are bound together for use by a shader.\n     */\n    constructor(resources?: Record<string, BindResource>)\n    {\n        let index = 0;\n\n        for (const i in resources)\n        {\n            const resource: BindResource = resources[i];\n\n            this.setResource(resource, index++);\n        }\n\n        this._updateKey();\n    }\n\n    /**\n     * Updates the key if its flagged as dirty. This is used internally to\n     * match this bind group to a WebGPU BindGroup.\n     * @internal\n     * @ignore\n     */\n    public _updateKey(): void\n    {\n        if (!this._dirty) return;\n\n        this._dirty = false;\n\n        const keyParts = [];\n        let index = 0;\n\n        // TODO - lets use big ints instead of strings...\n        for (const i in this.resources)\n        {\n            // TODO make this consistent...\n            keyParts[index++] = this.resources[i]._resourceId;\n        }\n\n        this._key = keyParts.join('|');\n    }\n\n    /**\n     * Set a resource at a given index. this function will\n     * ensure that listeners will be removed from the current resource\n     * and added to the new resource.\n     * @param resource - The resource to set.\n     * @param index - The index to set the resource at.\n     */\n    public setResource(resource: BindResource, index: number): void\n    {\n        const currentResource = this.resources[index];\n\n        if (resource === currentResource) return;\n\n        if (currentResource)\n        {\n            resource.off?.('change', this.onResourceChange, this);\n        }\n\n        resource.on?.('change', this.onResourceChange, this);\n\n        this.resources[index] = resource;\n        this._dirty = true;\n    }\n\n    /**\n     * Returns the resource at the current specified index.\n     * @param index - The index of the resource to get.\n     * @returns - The resource at the specified index.\n     */\n    public getResource(index: number): BindResource\n    {\n        return this.resources[index];\n    }\n\n    /**\n     * Used internally to 'touch' each resource, to ensure that the GC\n     * knows that all resources in this bind group are still being used.\n     * @param tick - The current tick.\n     * @internal\n     * @ignore\n     */\n    public _touch(tick: number)\n    {\n        const resources = this.resources;\n\n        for (const i in resources)\n        {\n            resources[i]._touched = tick;\n        }\n    }\n\n    /** Destroys this bind group and removes all listeners. */\n    public destroy()\n    {\n        const resources = this.resources;\n\n        for (const i in resources)\n        {\n            const resource = resources[i];\n\n            resource.off?.('change', this.onResourceChange, this);\n        }\n\n        this.resources = null;\n    }\n\n    protected onResourceChange(resource: BindResource)\n    {\n        this._dirty = true;\n\n        // check if a resource has been destroyed, if it has then we need to destroy this bind group\n        // using this bind group with a destroyed resource will cause the renderer to explode :)\n        if (resource.destroyed)\n        {\n            // free up the resource\n            const resources = this.resources;\n\n            for (const i in resources)\n            {\n                if (resources[i] === resource)\n                {\n                    resources[i] = null;\n                }\n            }\n        }\n        else\n        {\n            this._updateKey();\n        }\n    }\n}\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid';\nimport { BufferUsage } from './const';\n\nimport type { BindResource } from '../../gpu/shader/BindResource';\n\n/** All the various typed arrays that exist in js */\n// eslint-disable-next-line max-len\nexport type TypedArray = Int8Array | Uint8Array | Int16Array | Uint16Array | Int32Array | Uint32Array | Uint8ClampedArray | Float32Array | Float64Array;\n\n/** Options for creating a buffer */\nexport interface BufferOptions\n{\n    /**\n     * the data to initialize the buffer with, this can be a typed array,\n     * or a regular number array. If it is a number array, it will be converted to a Float32Array\n     */\n    data?: TypedArray | number[];\n    /** the size of the buffer in bytes, if not supplied, it will be inferred from the data */\n    size?: number;\n    /** the usage of the buffer, see {@link rendering.BufferUsage} */\n    usage: number;\n    /** a label for the buffer, this is useful for debugging */\n    label?: string;\n    /**\n     * should the GPU buffer be shrunk when the data becomes smaller?\n     * changing this will cause the buffer to be destroyed and a new one created on the GPU\n     * this can be expensive, especially if the buffer is already big enough!\n     * setting this to false will prevent the buffer from being shrunk. This will yield better performance\n     * if you are constantly setting data that is changing size often.\n     * @default true\n     */\n    shrinkToFit?: boolean;\n}\n\nexport interface BufferDescriptor\n{\n    label?: string;\n    size: GPUSize64;\n    usage: BufferUsage;\n    mappedAtCreation?: boolean;\n}\n\n/**\n * A wrapper for a WebGPU/WebGL Buffer.\n * In PixiJS, the Buffer class is used to manage the data that is sent to the GPU rendering pipeline.\n * It abstracts away the underlying GPU buffer and provides an interface for uploading typed arrays or other data to the GPU,\n * They are used in the following places:\n * <br><br>\n * .1. {@link Geometry} as attribute data or index data for geometry\n * <br>\n * .2. {@link UniformGroup} as an underlying buffer for uniform data\n * <br>\n * .3. {@link BufferResource} as an underlying part of a buffer used directly by the GPU program\n * <br>\n *\n * It is important to note that you must provide a usage type when creating a buffer. This is because\n * the underlying GPU buffer needs to know how it will be used. For example, if you are creating a buffer\n * to hold vertex data, you would use `BufferUsage.VERTEX`. This will tell the GPU that this buffer will be\n * used as a vertex buffer. This is important because it will affect how you can use the buffer.\n *\n * Buffers are updated by calling the {@link Buffer.update} method. This immediately updates the buffer on the GPU.\n * Be mindful of calling this more often than you need to. It is recommended to update buffers only when needed.\n *\n * In WebGPU, a GPU buffer cannot resized. This limitation is abstracted away, but know that resizing a buffer means\n * creating a brand new one and destroying the old, so it is best to limit this if possible.\n * @example\n *\n * const buffer = new Buffer({\n *     data: new Float32Array([1, 2, 3, 4]),\n *     usage: BufferUsage.VERTEX,\n * });\n * @memberof rendering\n */\nexport class Buffer extends EventEmitter<{\n    change: BindResource,\n    update: Buffer,\n    destroy: Buffer,\n}> implements BindResource\n{\n    /**\n     * emits when the underlying buffer has changed shape (i.e. resized)\n     * letting the renderer know that it needs to discard the old buffer on the GPU and create a new one\n     * @event change\n     */\n\n    /**\n     * emits when the underlying buffer data has been updated. letting the renderer know\n     * that it needs to update the buffer on the GPU\n     * @event update\n     */\n\n    /**\n     * emits when the buffer is destroyed. letting the renderer know that it needs to destroy the buffer on the GPU\n     * @event destroy\n     */\n\n    /**\n     * a unique id for this uniform group used through the renderer\n     * @internal\n     * @ignore\n     */\n    public readonly uid = uid('buffer');\n\n    /**\n     * a resource type, used to identify how to handle it when its in a bind group / shader resource\n     * @internal\n     * @ignore\n     */\n    public readonly _resourceType = 'buffer';\n\n    /**\n     * the resource id used internally by the renderer to build bind group keys\n     * @internal\n     * @ignore\n     */\n    public _resourceId = uid('resource');\n\n    /**\n     * used internally to know if a uniform group was used in the last render pass\n     * @internal\n     * @ignore\n     */\n    public _touched = 0;\n\n    /**\n     * a description of the buffer and how it should be set up on the GPU\n     * @internal\n     * @ignore\n     */\n    public readonly descriptor: BufferDescriptor;\n\n    /**\n     * @internal\n     * @ignore\n     */\n    public _updateID = 1;\n\n    /**\n     * @internal\n     * @ignore\n     */\n    public _updateSize: number;\n\n    private _data: TypedArray;\n\n    /**\n     * should the GPU buffer be shrunk when the data becomes smaller?\n     * changing this will cause the buffer to be destroyed and a new one created on the GPU\n     * this can be expensive, especially if the buffer is already big enough!\n     * setting this to false will prevent the buffer from being shrunk. This will yield better performance\n     * if you are constantly setting data that is changing size often.\n     * @default true\n     */\n    public shrinkToFit = true;\n\n    /**\n     * Has the buffer been destroyed?\n     * @readonly\n     */\n    public destroyed = false;\n\n    /**\n     * Creates a new Buffer with the given options\n     * @param options - the options for the buffer\n     */\n    constructor(options: BufferOptions)\n    {\n        let { data, size } = options;\n        const { usage, label, shrinkToFit } = options;\n\n        super();\n\n        if (data instanceof Array)\n        {\n            data = new Float32Array(data as number[]);\n        }\n\n        this._data = data as TypedArray;\n\n        size = size ?? (data as TypedArray)?.byteLength;\n\n        const mappedAtCreation = !!data;\n\n        this.descriptor = {\n            size,\n            usage,\n            mappedAtCreation,\n            label,\n        };\n\n        this.shrinkToFit = shrinkToFit ?? true;\n    }\n\n    /** the data in the buffer */\n    get data()\n    {\n        return this._data;\n    }\n\n    set data(value: TypedArray)\n    {\n        this.setDataWithSize(value, value.length, true);\n    }\n\n    /** whether the buffer is static or not */\n    get static()\n    {\n        return !!(this.descriptor.usage & BufferUsage.STATIC);\n    }\n\n    set static(value: boolean)\n    {\n        if (value)\n        {\n            this.descriptor.usage |= BufferUsage.STATIC;\n        }\n        else\n        {\n            this.descriptor.usage &= ~BufferUsage.STATIC;\n        }\n    }\n\n    /**\n     * Sets the data in the buffer to the given value. This will immediately update the buffer on the GPU.\n     * If you only want to update a subset of the buffer, you can pass in the size of the data.\n     * @param value - the data to set\n     * @param size - the size of the data in bytes\n     * @param syncGPU - should the buffer be updated on the GPU immediately?\n     */\n    public setDataWithSize(value: TypedArray, size: number, syncGPU: boolean)\n    {\n        // Increment update ID\n        this._updateID++;\n\n        this._updateSize = (size * value.BYTES_PER_ELEMENT);\n\n        // If the data hasn't changed, early return after emitting 'update'\n        if (this._data === value)\n        {\n            if (syncGPU) this.emit('update', this);\n\n            return;\n        }\n\n        // Cache old data and update to new value\n        const oldData = this._data;\n\n        this._data = value;\n\n        // Event handling\n        if (oldData.length !== value.length)\n        {\n            if (!this.shrinkToFit && value.byteLength < oldData.byteLength)\n            {\n                if (syncGPU) this.emit('update', this);\n            }\n            else\n            {\n                this.descriptor.size = value.byteLength;\n                this._resourceId = uid('resource');\n                this.emit('change', this);\n            }\n\n            return;\n        }\n\n        if (syncGPU) this.emit('update', this);\n    }\n\n    /**\n     * updates the buffer on the GPU to reflect the data in the buffer.\n     * By default it will update the entire buffer. If you only want to update a subset of the buffer,\n     * you can pass in the size of the buffer to update.\n     * @param sizeInBytes - the new size of the buffer in bytes\n     */\n    public update(sizeInBytes?: number): void\n    {\n        this._updateSize = sizeInBytes ?? this._updateSize;\n\n        this._updateID++;\n\n        this.emit('update', this);\n    }\n\n    /** Destroys the buffer */\n    public destroy()\n    {\n        this.destroyed = true;\n\n        this.emit('destroy', this);\n        this.emit('change', this);\n\n        this._data = null;\n        (this.descriptor as null) = null;\n\n        this.removeAllListeners();\n    }\n}\n\n","/**\n * Buffer usage flags. they can be combined using the bitwise OR operator\n * eg : BufferUsage.VERTEX | BufferUsage.INDEX\n * @memberof rendering\n */\nexport enum BufferUsage\n// eslint-disable-next-line @typescript-eslint/indent\n{\n    /**\n     * The buffer can be mapped for reading. (Example: calling mapAsync() with GPUMapMode.READ)\n     * May only be combined with COPY_DST.\n     */\n    MAP_READ = 0x0001,\n    /**\n     * The buffer can be mapped for writing. (Example: calling mapAsync() with GPUMapMode.WRITE)\n     * May only be combined with COPY_SRC.\n     */\n    MAP_WRITE = 0x0002,\n    /**\n     * The buffer can be used as the source of a copy operation.\n     * (Examples: as the source argument of a copyBufferToBuffer() or copyBufferToTexture() call.)\n     */\n    COPY_SRC = 0x0004,\n    /**\n     * The buffer can be used as the destination of a copy or write operation.\n     * (Examples: as the destination argument of a copyBufferToBuffer() or\n     * copyTextureToBuffer() call, or as the target of a writeBuffer() call.)\n     */\n    COPY_DST = 0x0008,\n    /** The buffer can be used as an index buffer. (Example: passed to setIndexBuffer().) */\n    INDEX = 0x0010,\n    /** The buffer can be used as a vertex buffer. (Example: passed to setVertexBuffer().) */\n    VERTEX = 0x0020,\n    /**\n     * The buffer can be used as a uniform buffer.\n     * (Example: as a bind group entry for a GPUBufferBindingLayout with a buffer.type of \"uniform\".)\n     */\n    UNIFORM = 0x0040,\n    /**\n     * The buffer can be used as a storage buffer.\n     * (Example: as a bind group entry for a GPUBufferBindingLayout with a buffer.type of \"storage\" or \"read-only-storage\".)\n     */\n    STORAGE = 0x0080,\n    /**\n     * The buffer can be used as to store indirect command arguments.\n     * (Examples: as the indirectBuffer argument of a drawIndirect() or dispatchWorkgroupsIndirect() call.)\n     */\n    INDIRECT = 0x0100,\n    /**\n     * The buffer can be used to capture query results.\n     * (Example: as the destination argument of a resolveQuerySet() call.)\n     */\n    QUERY_RESOLVE = 0x0200,\n    /** the buffer will not be updated frequently */\n    STATIC = 0x0400\n}\n","/**\n * Copies from one buffer to another.\n * This is an optimised function that will use `Float64Array` window.\n * This means it can copy twice as fast!\n * @param sourceBuffer - the array buffer to copy from\n * @param destinationBuffer - the array buffer to copy to\n * @private\n */\nexport function fastCopy(sourceBuffer: ArrayBuffer, destinationBuffer: ArrayBuffer): void\n{\n    const lengthDouble = (sourceBuffer.byteLength / 8) | 0;\n\n    const sourceFloat64View = new Float64Array(sourceBuffer, 0, lengthDouble);\n    const destinationFloat64View = new Float64Array(destinationBuffer, 0, lengthDouble);\n\n    // Use set for faster copying\n    destinationFloat64View.set(sourceFloat64View);\n\n    // copying over the remaining bytes\n    const remainingBytes = sourceBuffer.byteLength - (lengthDouble * 8);\n\n    if (remainingBytes > 0)\n    {\n        const sourceUint8View = new Uint8Array(sourceBuffer, lengthDouble * 8, remainingBytes);\n        const destinationUint8View = new Uint8Array(destinationBuffer, lengthDouble * 8, remainingBytes);\n\n        // Direct copy for remaining bytes\n        destinationUint8View.set(sourceUint8View);\n    }\n}\n","import { Buffer } from '../../buffer/Buffer';\nimport { BufferUsage } from '../../buffer/const';\n\nimport type { TypedArray } from '../../buffer/Buffer';\n\n/**\n * Converts something into a buffer. If it is already a buffer it will pass it through\n * if it is a number array it will convert it to a float32 array before being passed into a buffer\n * the buffer will be created with the correct usage flags for geometry attributes\n * @param buffer - number array\n * @param index - is this an index buffer?\n * @returns a buffer\n * @memberof rendering\n */\nexport function ensureIsBuffer(buffer: Buffer | TypedArray | number[], index: boolean): Buffer\n{\n    if (!(buffer instanceof Buffer))\n    {\n        let usage: number = index ? BufferUsage.INDEX : BufferUsage.VERTEX;\n\n        // its an array!\n        if (buffer instanceof Array)\n        {\n            if (index)\n            {\n                buffer = new Uint32Array(buffer);\n                usage = BufferUsage.INDEX | BufferUsage.COPY_DST;\n            }\n\n            else\n            {\n                buffer = new Float32Array(buffer);\n                usage = BufferUsage.VERTEX | BufferUsage.COPY_DST;\n            }\n        }\n\n        buffer = new Buffer({\n            data: buffer,\n            label: index ? 'index-mesh-buffer' : 'vertex-mesh-buffer',\n            usage\n        });\n    }\n\n    return buffer;\n}\n","import EventEmitter from 'eventemitter3';\nimport { Bounds } from '../../../../scene/container/bounds/Bounds';\nimport { uid } from '../../../../utils/data/uid';\nimport { Buffer } from '../buffer/Buffer';\nimport { ensureIsBuffer } from './utils/ensureIsBuffer';\nimport { getGeometryBounds } from './utils/getGeometryBounds';\n\nimport type { TypedArray } from '../buffer/Buffer';\nimport type { Topology, VertexFormat } from './const';\n\nexport type IndexBufferArray = Uint16Array | Uint32Array;\n\n/**\n * The attribute data for a geometries attributes\n * @memberof rendering\n */\nexport interface Attribute\n{\n    /** the buffer that this attributes data belongs to */\n    buffer: Buffer;\n    /** the format of the attribute */\n    format?: VertexFormat;\n    /** set where the shader location is for this attribute */\n    location?: number;\n    /** the stride of the data in the buffer*/\n    stride?: number;\n    /** the offset of the attribute from the buffer, defaults to 0 */\n    offset?: number;\n    /** is this an instanced buffer? (defaults to false) */\n    instance?: boolean;\n    /**  The number of elements to be rendered. If not specified, all vertices after the starting vertex will be drawn. */\n    size?: number;\n    /** the type of attribute  */\n    type?: number;\n    /**\n     * The starting vertex in the geometry to start drawing from. If not specified,\n     *  drawing will start from the first vertex.\n     */\n    start?: number;\n}\n\n/**\n * The attribute options used by the constructor for adding geometries attributes\n * extends {@link rendering.Attribute} but allows for the buffer to be a typed or number array\n * @memberof rendering\n */\ntype AttributeOption = Omit<Attribute, 'buffer'> & { buffer: Buffer | TypedArray | number[]}\n| Buffer | TypedArray | number[];\n\nexport type AttributeOptions = Record<string, AttributeOption>;\n\n/**\n * the interface that describes the structure of the geometry\n * @memberof rendering\n */\nexport interface GeometryDescriptor\n{\n    /** an optional label to easily identify the geometry */\n    label?: string;\n    /** the attributes that make up the geometry */\n    attributes: AttributeOptions;\n    /** optional index buffer for this geometry */\n    indexBuffer?: Buffer | TypedArray | number[];\n    /** the topology of the geometry, defaults to 'triangle-list' */\n    topology?: Topology;\n\n    instanceCount?: number;\n}\nfunction ensureIsAttribute(attribute: AttributeOption): Attribute\n{\n    if (attribute instanceof Buffer || Array.isArray(attribute) || (attribute as TypedArray).BYTES_PER_ELEMENT)\n    {\n        attribute = {\n            buffer: attribute as Buffer | TypedArray | number[],\n        };\n    }\n\n    (attribute as Attribute).buffer = ensureIsBuffer(attribute.buffer as Buffer | TypedArray | number[], false);\n\n    return attribute as Attribute;\n}\n\n/**\n * A Geometry is a low-level object that represents the structure of 2D shapes in terms of vertices and attributes.\n * It's a crucial component for rendering as it describes the shape and format of the data that will go through the shaders.\n * Essentially, a Geometry object holds the data you'd send to a GPU buffer.\n *\n * A geometry is basically made of two components:\n * <br>\n * <b>Attributes</b>: These are essentially arrays that define properties of the vertices like position, color,\n * texture coordinates, etc. They map directly to attributes in your vertex shaders.\n * <br>\n * <b>Indices</b>: An optional array that describes how the vertices are connected.\n * If not provided, vertices will be interpreted in the sequence they're given.\n * @example\n *\n * const geometry = new Geometry({\n *   attributes: {\n *     aPosition: [ // add some positions\n *       0, 0,\n *       0, 100,\n *       100, 100,\n *       100,   0,\n *     ],\n *     aUv: [ // add some uvs\n *       0, 0,\n *       0, 1,\n *       1, 1,\n *       1, 0,\n *     ]\n *   }\n * });\n * @memberof rendering\n * @class\n */\nexport class Geometry extends EventEmitter<{\n    update: Geometry,\n    destroy: Geometry,\n}>\n{\n    /** The topology of the geometry. */\n    public topology: Topology;\n    /** The unique id of the geometry. */\n    public readonly uid: number = uid('geometry');\n    /** A record of the attributes of the geometry. */\n    public readonly attributes: Record<string, Attribute>;\n    /** The buffers that the attributes use */\n    public readonly buffers: Buffer[];\n    /** The index buffer of the geometry */\n    public readonly indexBuffer: Buffer;\n\n    /**\n     * the layout key will be generated by WebGPU all geometries that have the same structure\n     * will have the same layout key. This is used to cache the pipeline layout\n     * @internal\n     * @ignore\n     */\n    public _layoutKey = 0;\n\n    /** the instance count of the geometry to draw */\n    public instanceCount = 1;\n\n    private readonly _bounds: Bounds = new Bounds();\n    private _boundsDirty = true;\n\n    /**\n     * Create a new instance of a geometry\n     * @param options - The options for the geometry.\n     */\n    constructor(options: GeometryDescriptor)\n    {\n        const { attributes, indexBuffer, topology } = options;\n\n        super();\n\n        this.attributes = attributes as Record<string, Attribute>;\n        this.buffers = [];\n\n        this.instanceCount = options.instanceCount || 1;\n\n        for (const i in attributes)\n        {\n            const attribute = attributes[i] = ensureIsAttribute(attributes[i]);\n\n            const bufferIndex = this.buffers.indexOf(attribute.buffer);\n\n            if (bufferIndex === -1)\n            {\n                this.buffers.push(attribute.buffer);\n\n                // two events here - one for a resize (new buffer change)\n                // and one for an update (existing buffer change)\n                attribute.buffer.on('update', this.onBufferUpdate, this);\n                attribute.buffer.on('change', this.onBufferUpdate, this);\n            }\n        }\n\n        if (indexBuffer)\n        {\n            this.indexBuffer = ensureIsBuffer(indexBuffer, true);\n            this.buffers.push(this.indexBuffer);\n        }\n\n        this.topology = topology || 'triangle-list';\n    }\n\n    protected onBufferUpdate(): void\n    {\n        this._boundsDirty = true;\n        this.emit('update', this);\n    }\n\n    /**\n     * Returns the requested attribute.\n     * @param id - The name of the attribute required\n     * @returns - The attribute requested.\n     */\n    public getAttribute(id: string): Attribute\n    {\n        return this.attributes[id];\n    }\n\n    /**\n     * Returns the index buffer\n     * @returns - The index buffer.\n     */\n    public getIndex(): Buffer\n    {\n        return this.indexBuffer;\n    }\n\n    /**\n     * Returns the requested buffer.\n     * @param id - The name of the buffer required.\n     * @returns - The buffer requested.\n     */\n    public getBuffer(id: string): Buffer\n    {\n        return this.getAttribute(id).buffer;\n    }\n\n    /**\n     * Used to figure out how many vertices there are in this geometry\n     * @returns the number of vertices in the geometry\n     */\n    public getSize(): number\n    {\n        for (const i in this.attributes)\n        {\n            const attribute = this.attributes[i];\n            const buffer = attribute.buffer;\n\n            // TODO use SIZE again like v7..\n            return (buffer.data as any).length / ((attribute.stride / 4) || attribute.size);\n        }\n\n        return 0;\n    }\n\n    /** Returns the bounds of the geometry. */\n    get bounds(): Bounds\n    {\n        if (!this._boundsDirty) return this._bounds;\n\n        this._boundsDirty = false;\n\n        return getGeometryBounds(this, 'aPosition', this._bounds);\n    }\n\n    /**\n     * destroys the geometry.\n     * @param destroyBuffers - destroy the buffers associated with this geometry\n     */\n    public destroy(destroyBuffers = false): void\n    {\n        this.emit('destroy', this);\n\n        this.removeAllListeners();\n\n        if (destroyBuffers)\n        {\n            this.buffers.forEach((buffer) => buffer.destroy());\n        }\n\n        (this.attributes as null) = null;\n        (this.buffers as null) = null;\n        (this.indexBuffer as null) = null;\n        (this._bounds as null) = null;\n    }\n}\n\n","import type { Bounds } from '../../../../../scene/container/bounds/Bounds';\nimport type { Geometry } from '../Geometry';\n\n/**\n * Gets the 2D bounds of a geometry, based on a specific attribute.\n * @param geometry - Geometry to to measure\n * @param attributeId - AttributeId that contains the x,y data\n * @param bounds - Bounds to store the result in\n * @returns the bounds\n */\nexport function getGeometryBounds(geometry: Geometry, attributeId: string, bounds: Bounds): Bounds\n{\n    const attribute = geometry.getAttribute(attributeId);\n\n    if (!attribute)\n    {\n        bounds.minX = 0;\n        bounds.minY = 0;\n        bounds.maxX = 0;\n        bounds.maxY = 0;\n\n        return bounds;\n    }\n\n    const data = attribute.buffer.data as Float32Array;\n\n    let minX = Infinity;\n    let minY = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n\n    const byteSize = data.BYTES_PER_ELEMENT;\n\n    // stride and offset MAY have not been calculated yet.. so go with assumed defaults\n    const offset = (attribute.offset || 0) / byteSize;\n    const stride = (attribute.stride || (2 * 4)) / byteSize;\n\n    for (let i = offset; i < data.length; i += stride)\n    {\n        const x = data[i];\n        const y = data[i + 1];\n\n        if (x > maxX)maxX = x;\n        if (y > maxY)maxY = y;\n        if (x < minX)minX = x;\n        if (y < minY)minY = y;\n    }\n\n    bounds.minX = minX;\n    bounds.minY = minY;\n    bounds.maxX = maxX;\n    bounds.maxY = maxY;\n\n    return bounds;\n}\n","import { uid } from '../../../../utils/data/uid';\n\nimport type { Instruction } from './Instruction';\n\n/**\n * A set of instructions that can be executed by the renderer.\n * Basically wraps an array, but with some extra properties that help the renderer\n * to keep things nice and optimised.\n *\n * Note:\n * InstructionSet.instructions contains all the instructions, but does not resize (for performance).\n * So for the true length of the instructions you need to use InstructionSet.instructionSize\n * @memberof rendering\n */\nexport class InstructionSet\n{\n    /** a unique id for this instruction set used through the renderer */\n    public readonly uid = uid('instructionSet');\n    /** the array of instructions */\n    public readonly instructions: Instruction[] = [];\n    /** the actual size of the array (any instructions passed this should be ignored) */\n    public instructionSize = 0;\n    /** allows for access to the render pipes of the renderer */\n    public renderPipes: any;\n\n    /** reset the instruction set so it can be reused set size back to 0 */\n    public reset()\n    {\n        this.instructionSize = 0;\n    }\n\n    /**\n     * Add an instruction to the set\n     * @param instruction - add an instruction to the set\n     */\n    public add(instruction: Instruction)\n    {\n        this.instructions[this.instructionSize++] = instruction;\n    }\n\n    /**\n     * Log the instructions to the console (for debugging)\n     * @internal\n     * @ignore\n     */\n    public log()\n    {\n        this.instructions.length = this.instructionSize;\n        // eslint-disable-next-line no-console\n        console.table(this.instructions, ['type', 'action']);\n    }\n}\n","/* eslint-disable @typescript-eslint/indent */\n/**\n * Various blend modes supported by Pixi\n * @memberof filters\n */\nexport type BLEND_MODES = 'inherit'\n| 'normal'\n| 'add'\n| 'multiply'\n| 'screen'\n| 'darken'\n| 'lighten'\n| 'erase'\n| 'color-dodge'\n| 'color-burn'\n| 'linear-burn'\n| 'linear-dodge'\n| 'linear-light'\n| 'hard-light'\n| 'soft-light'\n| 'pin-light'\n| 'difference'\n| 'exclusion'\n| 'overlay'\n// | 'hue'\n| 'saturation'\n| 'color'\n| 'luminosity'\n| 'normal-npm'\n| 'add-npm'\n| 'screen-npm'\n| 'none'\n| 'subtract'\n| 'divide'\n| 'vivid-light'\n| 'hard-mix'\n| 'negation';\n\n/**\n * The map of blend modes supported by Pixi\n * @memberof rendering\n */\nexport const BLEND_TO_NPM = {\n    normal: 'normal-npm',\n    add: 'add-npm',\n    screen: 'screen-npm',\n};\n\n/**\n * The stencil operation to perform when using the stencil buffer\n * @memberof rendering\n */\nexport enum STENCIL_MODES\n{\n    DISABLED = 0,\n    RENDERING_MASK_ADD = 1,\n    MASK_ACTIVE = 2,\n    RENDERING_MASK_REMOVE = 3,\n    NONE = 4,\n}\n\n/**\n * The culling mode to use. It can be either `none`, `front` or `back`.\n * @memberof rendering\n */\nexport type CULL_MODES = 'none' | 'back' | 'front';\n\n","import { extensions, ExtensionType } from '../extensions/Extensions';\n\nconst environments: { name: string; value: { test: () => boolean; load: () => Promise<boolean> } }[] = [];\n\nextensions.handleByNamedList(ExtensionType.Environment, environments);\n\n/**\n * Automatically detects the environment and loads the appropriate extensions.\n * @param skip - whether to skip loading the default extensions\n */\nexport async function loadEnvironmentExtensions(skip: boolean): Promise<void>\n{\n    if (skip) return;\n\n    for (let i = 0; i < environments.length; i++)\n    {\n        const env = environments[i];\n\n        if (env.value.test())\n        {\n            await env.value.load();\n\n            return;\n        }\n    }\n}\n\n/**\n * @param add - whether to add the default imports to the bundle\n * @deprecated since 8.1.6. Use `loadEnvironmentExtensions` instead\n */\nexport async function autoDetectEnvironment(add: boolean): Promise<void>\n{\n    return loadEnvironmentExtensions(!add);\n}\n","import { Color } from '../../../../color/Color';\nimport { loadEnvironmentExtensions } from '../../../../environment/autoDetectEnvironment';\nimport { Container } from '../../../../scene/container/Container';\nimport { unsafeEvalSupported } from '../../../../utils/browser/unsafeEvalSupported';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation';\nimport { EventEmitter } from '../../../../utils/utils';\nimport { CLEAR } from '../../gl/const';\nimport { SystemRunner } from './SystemRunner';\n\nimport type { ColorSource, RgbaArray } from '../../../../color/Color';\nimport type { ICanvas } from '../../../../environment/canvas/ICanvas';\nimport type { Matrix } from '../../../../maths/matrix/Matrix';\nimport type { Rectangle } from '../../../../maths/shapes/Rectangle';\nimport type { TypeOrBool } from '../../../../scene/container/destroyTypes';\nimport type { CLEAR_OR_BOOL } from '../../gl/const';\nimport type { Renderer } from '../../types';\nimport type { BackgroundSystem } from '../background/BackgroundSystem';\nimport type { GenerateTextureOptions, GenerateTextureSystem } from '../extract/GenerateTextureSystem';\nimport type { PipeConstructor } from '../instructions/RenderPipe';\nimport type { RenderSurface } from '../renderTarget/RenderTargetSystem';\nimport type { Texture } from '../texture/Texture';\nimport type { ViewSystem, ViewSystemDestroyOptions } from '../view/ViewSystem';\nimport type { SharedRendererOptions } from './SharedSystems';\nimport type { System, SystemConstructor } from './System';\n\nexport interface RendererConfig\n{\n    type: number;\n    name: string;\n    runners?: string[];\n    systems: {name: string, value: SystemConstructor}[];\n    renderPipes: {name: string, value: PipeConstructor}[];\n    renderPipeAdaptors: {name: string, value: any}[];\n}\n\n/**\n * The options for rendering a view.\n * @memberof rendering\n */\nexport interface RenderOptions extends ClearOptions\n{\n    /** The container to render. */\n    container: Container;\n    /** the transform to apply to the container. */\n    transform?: Matrix;\n}\n\n/**\n * The options for clearing the render target.\n * @memberof rendering\n */\nexport interface ClearOptions\n{\n    /** The render target to render. */\n    target?: RenderSurface;\n    /** The color to clear with. */\n    clearColor?: ColorSource;\n    /** The clear mode to use. */\n    clear?: CLEAR_OR_BOOL\n}\n\nexport type RendererDestroyOptions = TypeOrBool<ViewSystemDestroyOptions>;\n\nconst defaultRunners = [\n    'init',\n    'destroy',\n    'contextChange',\n    'resolutionChange',\n    'reset',\n    'renderEnd',\n    'renderStart',\n    'render',\n    'update',\n    'postrender',\n    'prerender'\n] as const;\n\ntype DefaultRunners = typeof defaultRunners[number];\ntype Runners = {[key in DefaultRunners]: SystemRunner} & {\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    [K: ({} & string) | ({} & symbol)]: SystemRunner;\n};\n\n/* eslint-disable max-len */\n/**\n * The base class for a PixiJS Renderer. It contains the shared logic for all renderers.\n *\n * You should not use this class directly, but instead use {@linkrendering.WebGLRenderer}\n * or {@link rendering.WebGPURenderer}.\n * Alternatively, you can also use {@link rendering.autoDetectRenderer} if you want us to\n * determine the best renderer for you.\n *\n * The renderer is composed of systems that manage specific tasks. The following systems are added by default\n * whenever you create a renderer:\n *\n *\n * | Generic Systems                      | Systems that manage functionality that all renderer types share               |\n * | ------------------------------------ | ----------------------------------------------------------------------------- |\n * | {@link rendering.ViewSystem}              | This manages the main view of the renderer usually a Canvas              |\n * | {@link rendering.BackgroundSystem}        | This manages the main views background color and alpha                   |\n * | {@link events.EventSystem}           | This manages UI events.                                                       |\n * | {@link accessibility.AccessibilitySystem} | This manages accessibility features. Requires `import 'pixi.js/accessibility'`|\n *\n * | Core Systems                   | Provide an optimised, easy to use API to work with WebGL/WebGPU               |\n * | ------------------------------------ | ----------------------------------------------------------------------------- |\n * | {@link rendering.RenderGroupSystem} | This manages the what what we are rendering to (eg - canvas or texture)   |\n * | {@link rendering.GlobalUniformSystem} | This manages shaders, programs that run on the GPU to calculate 'em pixels.   |\n * | {@link rendering.TextureGCSystem}     | This will automatically remove textures from the GPU if they are not used.    |\n *\n * | PixiJS High-Level Systems            | Set of specific systems designed to work with PixiJS objects                  |\n * | ------------------------------------ | ----------------------------------------------------------------------------- |\n * | {@link rendering.HelloSystem}               | Says hello, buy printing out the pixi version into the console log (along with the renderer type)       |\n * | {@link rendering.GenerateTextureSystem} | This adds the ability to generate textures from any Container       |\n * | {@link rendering.FilterSystem}          | This manages the filtering pipeline for post-processing effects.             |\n * | {@link rendering.PrepareSystem}               | This manages uploading assets to the GPU. Requires `import 'pixi.js/prepare'`|\n * | {@link rendering.ExtractSystem}               | This extracts image data from display objects.                               |\n *\n * The breadth of the API surface provided by the renderer is contained within these systems.\n * @abstract\n * @memberof rendering\n * @property {rendering.HelloSystem} hello - HelloSystem instance.\n * @property {rendering.RenderGroupSystem} renderGroup - RenderGroupSystem instance.\n * @property {rendering.TextureGCSystem} textureGC - TextureGCSystem instance.\n * @property {rendering.FilterSystem} filter - FilterSystem instance.\n * @property {rendering.GlobalUniformSystem} globalUniforms - GlobalUniformSystem instance.\n * @property {rendering.TextureSystem} texture - TextureSystem instance.\n * @property {rendering.EventSystem} events - EventSystem instance.\n * @property {rendering.ExtractSystem} extract - ExtractSystem instance. Requires `import 'pixi.js/extract'`.\n * @property {rendering.PrepareSystem} prepare - PrepareSystem instance. Requires `import 'pixi.js/prepare'`.\n * @property {rendering.AccessibilitySystem} accessibility - AccessibilitySystem instance. Requires `import 'pixi.js/accessibility'`.\n */\n/* eslint-enable max-len */\nexport class AbstractRenderer<\n    PIPES, OPTIONS extends SharedRendererOptions, CANVAS extends ICanvas = HTMLCanvasElement\n> extends EventEmitter<{resize: [number, number]}>\n{\n    /** The default options for the renderer. */\n    public static defaultOptions = {\n        /**\n         * Default resolution / device pixel ratio of the renderer.\n         * @default 1\n         */\n        resolution: 1,\n        /**\n         * Should the `failIfMajorPerformanceCaveat` flag be enabled as a context option used in the `isWebGLSupported`\n         * function. If set to true, a WebGL renderer can fail to be created if the browser thinks there could be\n         * performance issues when using WebGL.\n         *\n         * In PixiJS v6 this has changed from true to false by default, to allow WebGL to work in as many\n         * scenarios as possible. However, some users may have a poor experience, for example, if a user has a gpu or\n         * driver version blacklisted by the\n         * browser.\n         *\n         * If your application requires high performance rendering, you may wish to set this to false.\n         * We recommend one of two options if you decide to set this flag to false:\n         *\n         * 1: Use the Canvas renderer as a fallback in case high performance WebGL is\n         *    not supported.\n         *\n         * 2: Call `isWebGLSupported` (which if found in the utils package) in your code before attempting to create a\n         *    PixiJS renderer, and show an error message to the user if the function returns false, explaining that their\n         *    device & browser combination does not support high performance WebGL.\n         *    This is a much better strategy than trying to create a PixiJS renderer and finding it then fails.\n         * @default false\n         */\n        failIfMajorPerformanceCaveat: false,\n        /**\n         * Should round pixels be forced when rendering?\n         * @default false\n         */\n        roundPixels: false\n    };\n\n    public readonly type: number;\n    /** The name of the renderer. */\n    public readonly name: string;\n\n    public _roundPixels: 0 | 1;\n\n    public readonly runners: Runners = Object.create(null) as Runners;\n    public readonly renderPipes = Object.create(null) as PIPES;\n    /** The view system manages the main canvas that is attached to the DOM */\n    public view!: ViewSystem;\n    /** The background system manages the background color and alpha of the main view. */\n    public background: BackgroundSystem;\n    /** System that manages the generation of textures from the renderer */\n    public textureGenerator: GenerateTextureSystem;\n\n    protected _initOptions: OPTIONS = {} as OPTIONS;\n    protected config: RendererConfig;\n\n    private _systemsHash: Record<string, System> = Object.create(null);\n    private _lastObjectRendered: Container;\n\n    /**\n     * Set up a system with a collection of SystemClasses and runners.\n     * Systems are attached dynamically to this class when added.\n     * @param config - the config for the system manager\n     */\n    constructor(config: RendererConfig)\n    {\n        super();\n        this.type = config.type;\n        this.name = config.name;\n        this.config = config;\n\n        const combinedRunners = [...defaultRunners, ...(this.config.runners ?? [])];\n\n        this._addRunners(...combinedRunners);\n        // Validation check that this environment support `new Function`\n        this._unsafeEvalCheck();\n    }\n\n    /**\n     * Initialize the renderer.\n     * @param options - The options to use to create the renderer.\n     */\n    public async init(options: Partial<OPTIONS> = {})\n    {\n        const skip = options.skipExtensionImports === true ? true : options.manageImports === false;\n\n        await loadEnvironmentExtensions(skip);\n\n        this._addSystems(this.config.systems);\n        this._addPipes(this.config.renderPipes, this.config.renderPipeAdaptors);\n\n        // loop through all systems...\n        for (const systemName in this._systemsHash)\n        {\n            const system = this._systemsHash[systemName];\n\n            const defaultSystemOptions = (system.constructor as any).defaultOptions;\n\n            options = { ...defaultSystemOptions, ...options };\n        }\n\n        options = { ...AbstractRenderer.defaultOptions, ...options };\n        this._roundPixels = options.roundPixels ? 1 : 0;\n\n        // await emits..\n        for (let i = 0; i < this.runners.init.items.length; i++)\n        {\n            await this.runners.init.items[i].init(options);\n        }\n\n        // store options\n        this._initOptions = options as OPTIONS;\n    }\n\n    /**\n     * Renders the object to its view.\n     * @param options - The options to render with.\n     * @param options.container - The container to render.\n     * @param [options.target] - The target to render to.\n     */\n    public render(options: RenderOptions | Container): void;\n    /** @deprecated since 8.0.0 */\n    public render(container: Container, options: {renderTexture: any}): void;\n    public render(args: RenderOptions | Container, deprecated?: {renderTexture: any}): void\n    {\n        let options = args;\n\n        if (options instanceof Container)\n        {\n            options = { container: options };\n\n            if (deprecated)\n            {\n                // #if _DEBUG\n                // eslint-disable-next-line max-len\n                deprecation(v8_0_0, 'passing a second argument is deprecated, please use render options instead');\n                // #endif\n\n                options.target = deprecated.renderTexture;\n            }\n        }\n\n        options.target ||= this.view.renderTarget;\n\n        // TODO: we should eventually fix events so that it can handle multiple canvas elements\n        if (options.target === this.view.renderTarget)\n        {\n            // TODO get rid of this\n            this._lastObjectRendered = options.container;\n            options.clearColor = this.background.colorRgba;\n        }\n\n        if (options.clearColor)\n        {\n            const isRGBAArray = Array.isArray(options.clearColor) && options.clearColor.length === 4;\n\n            options.clearColor = isRGBAArray ? options.clearColor : Color.shared.setValue(options.clearColor).toArray();\n        }\n\n        if (!options.transform)\n        {\n            options.container.updateLocalTransform();\n            options.transform = options.container.localTransform;\n        }\n\n        this.runners.prerender.emit(options);\n        this.runners.renderStart.emit(options);\n        this.runners.render.emit(options);\n        this.runners.renderEnd.emit(options);\n        this.runners.postrender.emit(options);\n    }\n\n    /**\n     * Resizes the WebGL view to the specified width and height.\n     * @param desiredScreenWidth - The desired width of the screen.\n     * @param desiredScreenHeight - The desired height of the screen.\n     * @param resolution - The resolution / device pixel ratio of the renderer.\n     */\n    public resize(desiredScreenWidth: number, desiredScreenHeight: number, resolution?: number): void\n    {\n        this.view.resize(desiredScreenWidth, desiredScreenHeight, resolution);\n        this.emit('resize', this.view.screen.width, this.view.screen.height);\n    }\n\n    public clear(options: ClearOptions = {}): void\n    {\n        // override!\n        const renderer = this as unknown as Renderer;\n\n        options.target ||= renderer.renderTarget.renderTarget;\n        options.clearColor ||= this.background.colorRgba;\n        options.clear ??= CLEAR.ALL;\n\n        const { clear, clearColor, target } = options;\n\n        Color.shared.setValue(clearColor ?? this.background.colorRgba);\n\n        renderer.renderTarget.clear(target, clear, Color.shared.toArray() as RgbaArray);\n    }\n\n    /** The resolution / device pixel ratio of the renderer. */\n    get resolution(): number\n    {\n        return this.view.resolution;\n    }\n\n    set resolution(value: number)\n    {\n        this.view.resolution = value;\n        this.runners.resolutionChange.emit(value);\n    }\n\n    /**\n     * Same as view.width, actual number of pixels in the canvas by horizontal.\n     * @member {number}\n     * @readonly\n     * @default 800\n     */\n    get width(): number\n    {\n        return this.view.texture.frame.width;\n    }\n\n    /**\n     * Same as view.height, actual number of pixels in the canvas by vertical.\n     * @default 600\n     */\n    get height(): number\n    {\n        return this.view.texture.frame.height;\n    }\n\n    // NOTE: this was `view` in v7\n    /**\n     * The canvas element that everything is drawn to.\n     * @type {environment.ICanvas}\n     */\n    get canvas(): CANVAS\n    {\n        return this.view.canvas as CANVAS;\n    }\n\n    /**\n     * the last object rendered by the renderer. Useful for other plugins like interaction managers\n     * @readonly\n     */\n    get lastObjectRendered(): Container\n    {\n        return this._lastObjectRendered;\n    }\n\n    /**\n     * Flag if we are rendering to the screen vs renderTexture\n     * @readonly\n     * @default true\n     */\n    get renderingToScreen(): boolean\n    {\n        const renderer = this as unknown as Renderer;\n\n        return renderer.renderTarget.renderingToScreen;\n    }\n\n    /**\n     * Measurements of the screen. (0, 0, screenWidth, screenHeight).\n     *\n     * Its safe to use as filterArea or hitArea for the whole stage.\n     */\n    get screen(): Rectangle\n    {\n        return this.view.screen;\n    }\n\n    /**\n     * Create a bunch of runners based of a collection of ids\n     * @param runnerIds - the runner ids to add\n     */\n    private _addRunners(...runnerIds: string[]): void\n    {\n        runnerIds.forEach((runnerId) =>\n        {\n            this.runners[runnerId] = new SystemRunner(runnerId);\n        });\n    }\n\n    private _addSystems(systems: RendererConfig['systems']): void\n    {\n        let i: keyof typeof systems;\n\n        for (i in systems)\n        {\n            const val = systems[i];\n\n            this._addSystem(val.value, val.name);\n        }\n    }\n\n    /**\n     * Add a new system to the renderer.\n     * @param ClassRef - Class reference\n     * @param name - Property name for system, if not specified\n     *        will use a static `name` property on the class itself. This\n     *        name will be assigned as s property on the Renderer so make\n     *        sure it doesn't collide with properties on Renderer.\n     * @returns Return instance of renderer\n     */\n    private _addSystem(ClassRef: SystemConstructor, name: string): this\n    {\n        const system = new ClassRef(this as unknown as Renderer);\n\n        if ((this as any)[name])\n        {\n            throw new Error(`Whoops! The name \"${name}\" is already in use`);\n        }\n\n        (this as any)[name] = system;\n\n        this._systemsHash[name] = system;\n\n        for (const i in this.runners)\n        {\n            this.runners[i].add(system);\n        }\n\n        return this;\n    }\n\n    private _addPipes(pipes: RendererConfig['renderPipes'], pipeAdaptors: RendererConfig['renderPipeAdaptors']): void\n    {\n        const adaptors = pipeAdaptors.reduce((acc, adaptor) =>\n        {\n            acc[adaptor.name] = adaptor.value;\n\n            return acc;\n        }, {} as Record<string, any>);\n\n        pipes.forEach((pipe) =>\n        {\n            const PipeClass = pipe.value;\n            const name = pipe.name;\n\n            const Adaptor = adaptors[name];\n\n            // sorry typescript..\n            (this.renderPipes as any)[name] = new PipeClass(\n                this as unknown as Renderer,\n                Adaptor ? new Adaptor() : null\n            );\n        });\n    }\n\n    public destroy(options: RendererDestroyOptions = false): void\n    {\n        this.runners.destroy.items.reverse();\n        this.runners.destroy.emit(options);\n\n        // destroy all runners\n        Object.values(this.runners).forEach((runner) =>\n        {\n            runner.destroy();\n        });\n\n        this._systemsHash = null;\n\n        // destroy all pipes\n        (this.renderPipes as null) = null;\n    }\n\n    /**\n     * Generate a texture from a container.\n     * @param options - options or container target to use when generating the texture\n     * @returns a texture\n     */\n    public generateTexture(options: GenerateTextureOptions | Container): Texture\n    {\n        return this.textureGenerator.generateTexture(options);\n    }\n\n    /**\n     * Whether the renderer will round coordinates to whole pixels when rendering.\n     * Can be overridden on a per scene item basis.\n     */\n    get roundPixels(): boolean\n    {\n        return !!this._roundPixels;\n    }\n\n    /**\n     * Overrideable function by `pixi.js/unsafe-eval` to silence\n     * throwing an error if platform doesn't support unsafe-evals.\n     * @private\n     * @ignore\n     */\n    public _unsafeEvalCheck(): void\n    {\n        if (!unsafeEvalSupported())\n        {\n            throw new Error('Current environment does not allow unsafe-eval, '\n               + 'please use pixi.js/unsafe-eval module to enable support.');\n        }\n    }\n}\n","/**\n * SystemRunner is used internally by the renderers as an efficient way for systems to\n * be notified about what the renderer is up to during the rendering phase.\n *\n * ```\n * import { SystemRunner } from 'pixi.js';\n *\n * const myObject = {\n *     loaded: new SystemRunner('loaded')\n * }\n *\n * const listener = {\n *     loaded: function(){\n *         // thin\n *     }\n * }\n *\n * myObject.loaded.add(listener);\n *\n * myObject.loaded.emit();\n * ```\n *\n * Or for handling calling the same function on many items\n * ```\n * import { SystemRunner } from 'pixi.js';\n *\n * const myGame = {\n *     update: new SystemRunner('update')\n * }\n *\n * const gameObject = {\n *     update: function(time){\n *         // update my gamey state\n *     }\n * }\n *\n * myGame.update.add(gameObject);\n *\n * myGame.update.emit(time);\n * ```\n * @memberof rendering\n */\nexport class SystemRunner\n{\n    public items: any[];\n    private _name: string;\n\n    /**\n     * @param name - The function name that will be executed on the listeners added to this Runner.\n     */\n    constructor(name: string)\n    {\n        this.items = [];\n        this._name = name;\n    }\n\n    /* eslint-disable jsdoc/require-param, jsdoc/check-param-names */\n    /**\n     * Dispatch/Broadcast Runner to all listeners added to the queue.\n     * @param {...any} params - (optional) parameters to pass to each listener\n     */\n    /*  eslint-enable jsdoc/require-param, jsdoc/check-param-names */\n    public emit(a0?: unknown, a1?: unknown, a2?: unknown, a3?: unknown,\n        a4?: unknown, a5?: unknown, a6?: unknown, a7?: unknown): this\n    {\n        const { name, items } = this;\n\n        for (let i = 0, len = items.length; i < len; i++)\n        {\n            items[i][name](a0, a1, a2, a3, a4, a5, a6, a7);\n        }\n\n        return this;\n    }\n\n    /**\n     * Add a listener to the Runner\n     *\n     * Runners do not need to have scope or functions passed to them.\n     * All that is required is to pass the listening object and ensure that it has contains a function that has the same name\n     * as the name provided to the Runner when it was created.\n     *\n     * Eg A listener passed to this Runner will require a 'complete' function.\n     *\n     * ```\n     * import { Runner } from 'pixi.js';\n     *\n     * const complete = new Runner('complete');\n     * ```\n     *\n     * The scope used will be the object itself.\n     * @param {any} item - The object that will be listening.\n     */\n    public add(item: unknown): this\n    {\n        if ((item as any)[this._name])\n        {\n            this.remove(item);\n            this.items.push(item);\n        }\n\n        return this;\n    }\n\n    /**\n     * Remove a single listener from the dispatch queue.\n     * @param {any} item - The listener that you would like to remove.\n     */\n    public remove(item: unknown): this\n    {\n        const index = this.items.indexOf(item);\n\n        if (index !== -1)\n        {\n            this.items.splice(index, 1);\n        }\n\n        return this;\n    }\n\n    /**\n     * Check to see if the listener is already in the Runner\n     * @param {any} item - The listener that you would like to check.\n     */\n    public contains(item: unknown): boolean\n    {\n        return this.items.indexOf(item) !== -1;\n    }\n\n    /** Remove all listeners from the Runner */\n    public removeAll(): this\n    {\n        this.items.length = 0;\n\n        return this;\n    }\n\n    /** Remove all references, don't use after this. */\n    public destroy(): void\n    {\n        this.removeAll();\n        this.items = null;\n        this._name = null;\n    }\n\n    /**\n     * `true` if there are no this Runner contains no listeners\n     * @readonly\n     */\n    public get empty(): boolean\n    {\n        return this.items.length === 0;\n    }\n\n    /**\n     * The name of the runner.\n     * @readonly\n     */\n    public get name(): string\n    {\n        return this._name;\n    }\n}\n","import { DOMAdapter } from '../../../../environment/adapter';\nimport { nextPow2 } from '../../../../maths/misc/pow2';\n\nimport type { ICanvas, ICanvasRenderingContext2DSettings } from '../../../../environment/canvas/ICanvas';\nimport type { ICanvasRenderingContext2D } from '../../../../environment/canvas/ICanvasRenderingContext2D';\n\nexport interface CanvasAndContext\n{\n    canvas: ICanvas;\n    context: ICanvasRenderingContext2D;\n}\n\n/**\n * Texture pool, used by FilterSystem and plugins.\n *\n * Stores collection of temporary pow2 or screen-sized renderTextures\n *\n * If you use custom RenderTexturePool for your filters, you can use methods\n * `getFilterTexture` and `returnFilterTexture` same as in\n * @name CanvasPool\n * @memberof rendering\n */\nexport class CanvasPoolClass\n{\n    public canvasOptions: ICanvasRenderingContext2DSettings;\n\n    /**\n     * Allow renderTextures of the same size as screen, not just pow2\n     *\n     * Automatically sets to true after `setScreenSize`\n     * @default false\n     */\n    public enableFullScreen: boolean;\n    private _canvasPool: {[x in string | number]: CanvasAndContext[]};\n\n    constructor(canvasOptions?: ICanvasRenderingContext2DSettings)\n    {\n        this._canvasPool = Object.create(null);\n        this.canvasOptions = canvasOptions || {};\n        this.enableFullScreen = false;\n    }\n\n    /**\n     * Creates texture with params that were specified in pool constructor.\n     * @param pixelWidth - Width of texture in pixels.\n     * @param pixelHeight - Height of texture in pixels.\n     */\n    private _createCanvasAndContext(pixelWidth: number, pixelHeight: number): CanvasAndContext\n    {\n        const canvas = DOMAdapter.get().createCanvas();\n\n        canvas.width = pixelWidth;\n        canvas.height = pixelHeight;\n\n        const context = canvas.getContext('2d');\n\n        return { canvas, context };\n    }\n\n    /**\n     * Gets a Power-of-Two render texture or fullScreen texture\n     * @param minWidth - The minimum width of the render texture.\n     * @param minHeight - The minimum height of the render texture.\n     * @param resolution - The resolution of the render texture.\n     * @returns The new render texture.\n     */\n    public getOptimalCanvasAndContext(minWidth: number, minHeight: number, resolution = 1): CanvasAndContext\n    {\n        minWidth = Math.ceil((minWidth * resolution) - 1e-6);\n        minHeight = Math.ceil((minHeight * resolution) - 1e-6);\n        minWidth = nextPow2(minWidth);\n        minHeight = nextPow2(minHeight);\n\n        const key = (minWidth << 17) + (minHeight << 1);\n\n        if (!this._canvasPool[key])\n        {\n            this._canvasPool[key] = [];\n        }\n\n        let canvasAndContext = this._canvasPool[key].pop();\n\n        if (!canvasAndContext)\n        {\n            canvasAndContext = this._createCanvasAndContext(minWidth, minHeight);\n        }\n\n        return canvasAndContext;\n    }\n\n    /**\n     * Place a render texture back into the pool.\n     * @param canvasAndContext\n     */\n    public returnCanvasAndContext(canvasAndContext: CanvasAndContext): void\n    {\n        const { width, height } = canvasAndContext.canvas;\n\n        const key = (width << 17) + (height << 1);\n\n        this._canvasPool[key].push(canvasAndContext);\n    }\n\n    public clear(): void\n    {\n        this._canvasPool = {};\n    }\n}\n\nexport const CanvasPool = new CanvasPoolClass();\n","// Your friendly neighbour https://en.wikipedia.org/wiki/Dihedral_group\n//\n// This file implements the dihedral group of order 16, also called\n// of degree 8. That's why its called groupD8.\n\nimport { Matrix } from './Matrix';\n\n/*\n * Transform matrix for operation n is:\n * | ux | vx |\n * | uy | vy |\n */\n\nconst ux = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1];\nconst uy = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1];\nconst vx = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1];\nconst vy = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1];\n\n/**\n * [Cayley Table]{@link https://en.wikipedia.org/wiki/Cayley_table}\n * for the composition of each rotation in the dihederal group D8.\n * @type {number[][]}\n * @private\n */\nconst rotationCayley: number[][] = [];\n\n/**\n * Matrices for each `GD8Symmetry` rotation.\n * @type {Matrix[]}\n * @private\n */\nconst rotationMatrices: Matrix[] = [];\n\n/*\n * Alias for {@code Math.sign}.\n */\nconst signum = Math.sign;\n\n/*\n * Initializes `rotationCayley` and `rotationMatrices`. It is called\n * only once below.\n */\nfunction init(): void\n{\n    for (let i = 0; i < 16; i++)\n    {\n        const row: number[] = [];\n\n        rotationCayley.push(row);\n\n        for (let j = 0; j < 16; j++)\n        {\n            /* Multiplies rotation matrices i and j. */\n            const _ux = signum((ux[i] * ux[j]) + (vx[i] * uy[j]));\n            const _uy = signum((uy[i] * ux[j]) + (vy[i] * uy[j]));\n            const _vx = signum((ux[i] * vx[j]) + (vx[i] * vy[j]));\n            const _vy = signum((uy[i] * vx[j]) + (vy[i] * vy[j]));\n\n            /* Finds rotation matrix matching the product and pushes it. */\n            for (let k = 0; k < 16; k++)\n            {\n                if (ux[k] === _ux && uy[k] === _uy\n                      && vx[k] === _vx && vy[k] === _vy)\n                {\n                    row.push(k);\n                    break;\n                }\n            }\n        }\n    }\n\n    for (let i = 0; i < 16; i++)\n    {\n        const mat = new Matrix();\n\n        mat.set(ux[i], uy[i], vx[i], vy[i], 0, 0);\n        rotationMatrices.push(mat);\n    }\n}\n\ninit();\n\ntype GD8Symmetry = number;\n/**\n * @typedef {number} GD8Symmetry\n * @see groupD8\n */\n\n/**\n * Implements the dihedral group D8, which is similar to\n * [group D4]{@link http://mathworld.wolfram.com/DihedralGroupD4.html};\n * D8 is the same but with diagonals, and it is used for texture\n * rotations.\n *\n * The directions the U- and V- axes after rotation\n * of an angle of `a: GD8Constant` are the vectors `(uX(a), uY(a))`\n * and `(vX(a), vY(a))`. These aren't necessarily unit vectors.\n *\n * **Origin:**<br>\n *  This is the small part of gameofbombs.com portal system. It works.\n * @see maths.groupD8.E\n * @see maths.groupD8.SE\n * @see maths.groupD8.S\n * @see maths.groupD8.SW\n * @see maths.groupD8.W\n * @see maths.groupD8.NW\n * @see maths.groupD8.N\n * @see maths.groupD8.NE\n * @author Ivan @ivanpopelyshev\n * @namespace maths.groupD8\n */\nexport const groupD8 = {\n    /**\n     * | Rotation | Direction |\n     * |----------|-----------|\n     * | 0       | East      |\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    E: 0,\n\n    /**\n     * | Rotation | Direction |\n     * |----------|-----------|\n     * | 45     | Southeast |\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    SE: 1,\n\n    /**\n     * | Rotation | Direction |\n     * |----------|-----------|\n     * | 90     | South     |\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    S: 2,\n\n    /**\n     * | Rotation | Direction |\n     * |----------|-----------|\n     * | 135    | Southwest |\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    SW: 3,\n\n    /**\n     * | Rotation | Direction |\n     * |----------|-----------|\n     * | 180     | West      |\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    W: 4,\n\n    /**\n     * | Rotation    | Direction    |\n     * |-------------|--------------|\n     * | -135/225 | Northwest    |\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    NW: 5,\n\n    /**\n     * | Rotation    | Direction    |\n     * |-------------|--------------|\n     * | -90/270  | North        |\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    N: 6,\n\n    /**\n     * | Rotation    | Direction    |\n     * |-------------|--------------|\n     * | -45/315  | Northeast    |\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    NE: 7,\n\n    /**\n     * Reflection about Y-axis.\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    MIRROR_VERTICAL: 8,\n\n    /**\n     * Reflection about the main diagonal.\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    MAIN_DIAGONAL: 10,\n\n    /**\n     * Reflection about X-axis.\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    MIRROR_HORIZONTAL: 12,\n\n    /**\n     * Reflection about reverse diagonal.\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    REVERSE_DIAGONAL: 14,\n\n    /**\n     * @memberof maths.groupD8\n     * @param {GD8Symmetry} ind - sprite rotation angle.\n     * @returns {GD8Symmetry} The X-component of the U-axis\n     *    after rotating the axes.\n     */\n    uX: (ind: GD8Symmetry): GD8Symmetry => ux[ind],\n\n    /**\n     * @memberof maths.groupD8\n     * @param {GD8Symmetry} ind - sprite rotation angle.\n     * @returns {GD8Symmetry} The Y-component of the U-axis\n     *    after rotating the axes.\n     */\n    uY: (ind: GD8Symmetry): GD8Symmetry => uy[ind],\n\n    /**\n     * @memberof maths.groupD8\n     * @param {GD8Symmetry} ind - sprite rotation angle.\n     * @returns {GD8Symmetry} The X-component of the V-axis\n     *    after rotating the axes.\n     */\n    vX: (ind: GD8Symmetry): GD8Symmetry => vx[ind],\n\n    /**\n     * @memberof maths.groupD8\n     * @param {GD8Symmetry} ind - sprite rotation angle.\n     * @returns {GD8Symmetry} The Y-component of the V-axis\n     *    after rotating the axes.\n     */\n    vY: (ind: GD8Symmetry): GD8Symmetry => vy[ind],\n\n    /**\n     * @memberof maths.groupD8\n     * @param {GD8Symmetry} rotation - symmetry whose opposite\n     *   is needed. Only rotations have opposite symmetries while\n     *   reflections don't.\n     * @returns {GD8Symmetry} The opposite symmetry of `rotation`\n     */\n    inv: (rotation: GD8Symmetry): GD8Symmetry =>\n    {\n        if (rotation & 8)// true only if between 8 & 15 (reflections)\n        {\n            return rotation & 15;// or rotation % 16\n        }\n\n        return (-rotation) & 7;// or (8 - rotation) % 8\n    },\n\n    /**\n     * Composes the two D8 operations.\n     *\n     * Taking `^` as reflection:\n     *\n     * |       | E=0 | S=2 | W=4 | N=6 | E^=8 | S^=10 | W^=12 | N^=14 |\n     * |-------|-----|-----|-----|-----|------|-------|-------|-------|\n     * | E=0   | E   | S   | W   | N   | E^   | S^    | W^    | N^    |\n     * | S=2   | S   | W   | N   | E   | S^   | W^    | N^    | E^    |\n     * | W=4   | W   | N   | E   | S   | W^   | N^    | E^    | S^    |\n     * | N=6   | N   | E   | S   | W   | N^   | E^    | S^    | W^    |\n     * | E^=8  | E^  | N^  | W^  | S^  | E    | N     | W     | S     |\n     * | S^=10 | S^  | E^  | N^  | W^  | S    | E     | N     | W     |\n     * | W^=12 | W^  | S^  | E^  | N^  | W    | S     | E     | N     |\n     * | N^=14 | N^  | W^  | S^  | E^  | N    | W     | S     | E     |\n     *\n     * [This is a Cayley table]{@link https://en.wikipedia.org/wiki/Cayley_table}\n     * @memberof maths.groupD8\n     * @param {GD8Symmetry} rotationSecond - Second operation, which\n     *   is the row in the above cayley table.\n     * @param {GD8Symmetry} rotationFirst - First operation, which\n     *   is the column in the above cayley table.\n     * @returns {GD8Symmetry} Composed operation\n     */\n    add: (rotationSecond: GD8Symmetry, rotationFirst: GD8Symmetry): GD8Symmetry => (\n        rotationCayley[rotationSecond][rotationFirst]\n    ),\n\n    /**\n     * Reverse of `add`.\n     * @memberof maths.groupD8\n     * @param {GD8Symmetry} rotationSecond - Second operation\n     * @param {GD8Symmetry} rotationFirst - First operation\n     * @returns {GD8Symmetry} Result\n     */\n    sub: (rotationSecond: GD8Symmetry, rotationFirst: GD8Symmetry): GD8Symmetry => (\n        rotationCayley[rotationSecond][groupD8.inv(rotationFirst)]\n    ),\n\n    /**\n     * Adds 180 degrees to rotation, which is a commutative\n     * operation.\n     * @memberof maths.groupD8\n     * @param {number} rotation - The number to rotate.\n     * @returns {number} Rotated number\n     */\n    rotate180: (rotation: number): number => rotation ^ 4,\n\n    /**\n     * Checks if the rotation angle is vertical, i.e. south\n     * or north. It doesn't work for reflections.\n     * @memberof maths.groupD8\n     * @param {GD8Symmetry} rotation - The number to check.\n     * @returns {boolean} Whether or not the direction is vertical\n     */\n    isVertical: (rotation: GD8Symmetry): boolean => (rotation & 3) === 2, // rotation % 4 === 2\n\n    /**\n     * Approximates the vector `V(dx,dy)` into one of the\n     * eight directions provided by `groupD8`.\n     * @memberof maths.groupD8\n     * @param {number} dx - X-component of the vector\n     * @param {number} dy - Y-component of the vector\n     * @returns {GD8Symmetry} Approximation of the vector into\n     *  one of the eight symmetries.\n     */\n    byDirection: (dx: number, dy: number): GD8Symmetry =>\n    {\n        if (Math.abs(dx) * 2 <= Math.abs(dy))\n        {\n            if (dy >= 0)\n            {\n                return groupD8.S;\n            }\n\n            return groupD8.N;\n        }\n        else if (Math.abs(dy) * 2 <= Math.abs(dx))\n        {\n            if (dx > 0)\n            {\n                return groupD8.E;\n            }\n\n            return groupD8.W;\n        }\n        else if (dy > 0)\n        {\n            if (dx > 0)\n            {\n                return groupD8.SE;\n            }\n\n            return groupD8.SW;\n        }\n        else if (dx > 0)\n        {\n            return groupD8.NE;\n        }\n\n        return groupD8.NW;\n    },\n\n    /**\n     * Helps sprite to compensate texture packer rotation.\n     * @memberof maths.groupD8\n     * @param {Matrix} matrix - sprite world matrix\n     * @param {GD8Symmetry} rotation - The rotation factor to use.\n     * @param {number} tx - sprite anchoring\n     * @param {number} ty - sprite anchoring\n     */\n    matrixAppendRotationInv: (matrix: Matrix, rotation: GD8Symmetry, tx = 0, ty = 0): void =>\n    {\n        // Packer used \"rotation\", we use \"inv(rotation)\"\n        const mat: Matrix = rotationMatrices[groupD8.inv(rotation)];\n\n        mat.tx = tx;\n        mat.ty = ty;\n        matrix.append(mat);\n    },\n};\n","export const NOOP = () =>\n{\n    // empty!\n};\n","import EventEmitter from 'eventemitter3';\nimport { groupD8 } from '../../../../maths/matrix/groupD8';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle';\nimport { uid } from '../../../../utils/data/uid';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation';\nimport { NOOP } from '../../../../utils/misc/NOOP';\nimport { BufferImageSource } from './sources/BufferImageSource';\nimport { TextureSource } from './sources/TextureSource';\nimport { TextureMatrix } from './TextureMatrix';\n\nimport type { TextureResourceOrOptions } from './utils/textureFrom';\n\n/**\n * Stores the width of the non-scalable borders, for example when used with {@link scene.NineSlicePlane} texture.\n * @memberof rendering\n */\nexport interface TextureBorders\n{\n    /** left border in pixels */\n    left: number;\n    /** top border in pixels */\n    top: number;\n    /** right border in pixels */\n    right: number;\n    /** bottom border in pixels */\n    bottom: number;\n}\n\n/**\n * The UVs data structure for a texture.\n * @memberof rendering\n */\nexport type UVs = {\n    x0: number;\n    y0: number;\n    x1: number;\n    y1: number;\n    x2: number;\n    y2: number;\n    x3: number;\n    y3: number;\n};\n\n/**\n * The options that can be passed to a new Texture\n * @memberof rendering\n */\nexport interface TextureOptions\n{\n    /** the underlying texture data that this texture will use  */\n    source?: TextureSource;\n    /** optional label, for debugging */\n    label?: string;\n    /** The rectangle frame of the texture to show */\n    frame?: Rectangle;\n    /** The area of original texture */\n    orig?: Rectangle;\n    /** Trimmed rectangle of original texture */\n    trim?: Rectangle;\n    /** Default anchor point used for sprite placement / rotation */\n    defaultAnchor?: { x: number; y: number };\n    /** Default borders used for 9-slice scaling {@link NineSlicePlane}*/\n    defaultBorders?: TextureBorders;\n    /** indicates how the texture was rotated by texture packer. See {@link groupD8} */\n    rotate?: number;\n    /** set to true if you plan on modifying the uvs of this texture - can affect performance with high numbers of sprites*/\n    dynamic?: boolean;\n}\n\nexport interface BindableTexture\n{\n    source: TextureSource;\n}\n\nexport type TextureSourceLike = TextureSource | TextureResourceOrOptions | string;\n\n/**\n * A texture stores the information that represents an image or part of an image.\n *\n * A texture must have a loaded resource passed to it to work. It does not contain any\n * loading mechanisms.\n *\n * The Assets class can be used to load an texture from a file. This is the recommended\n * way as it will handle the loading and caching for you.\n *\n * ```js\n *\n * const texture = await Asset.load('assets/image.png');\n *\n * // once Assets has loaded the image it will be available via the from method\n * const sameTexture = Texture.from('assets/image.png');\n * // another way to acces the texture once loaded\n * const sameAgainTexture = Asset.get('assets/image.png');\n *\n * const sprite1 = new Sprite(texture);\n *\n * ```\n *\n * It cannot be added to the display list directly; instead use it as the texture for a Sprite.\n * If no frame is provided for a texture, then the whole image is used.\n *\n * You can directly create a texture from an image and then reuse it multiple times like this :\n *\n * ```js\n * import { Sprite, Texture } from 'pixi.js';\n *\n * const texture = await Asset.load('assets/image.png');\n * const sprite1 = new Sprite(texture);\n * const sprite2 = new Sprite(texture);\n * ```\n *\n * If you didn't pass the texture frame to constructor, it enables `noFrame` mode:\n * it subscribes on baseTexture events, it automatically resizes at the same time as baseTexture.\n * @memberof rendering\n * @class\n */\nexport class Texture extends EventEmitter<{\n    update: Texture\n    destroy: Texture\n}> implements BindableTexture\n{\n    /**\n     * Helper function that creates a returns Texture based on the source you provide.\n     * The source should be loaded and ready to go. If not its best to grab the asset using Assets.\n     * @param id - String or Source to create texture from\n     * @param skipCache - Skip adding the texture to the cache\n     * @returns The texture based on the Id provided\n     */\n    public static from: (id: TextureSourceLike, skipCache?: boolean) => Texture;\n\n    /** label used for debugging */\n    public label?: string;\n    /** unique id for this texture */\n    public uid = uid('texture');\n    /**\n     * Has the texture been destroyed?\n     * @readonly\n     */\n    public destroyed: boolean;\n\n    public _source: TextureSource;\n\n    /**\n     * Indicates whether the texture is rotated inside the atlas\n     * set to 2 to compensate for texture packer rotation\n     * set to 6 to compensate for spine packer rotation\n     * can be used to rotate or mirror sprites\n     * See {@link maths.groupD8} for explanation\n     */\n    public readonly rotate: number;\n    /** A uvs object based on the given frame and the texture source */\n    public readonly uvs: UVs = { x0: 0, y0: 0, x1: 0, y1: 0, x2: 0, y2: 0, x3: 0, y3: 0 };\n    /**\n     * Anchor point that is used as default if sprite is created with this texture.\n     * Changing the `defaultAnchor` at a later point of time will not update Sprite's anchor point.\n     * @default {0,0}\n     */\n    public readonly defaultAnchor?: { x: number; y: number };\n    /**\n     * Default width of the non-scalable border that is used if 9-slice plane is created with this texture.\n     * @since 7.2.0\n     * @see scene.NineSliceSprite\n     */\n    public readonly defaultBorders?: TextureBorders;\n    /**\n     * This is the area of the BaseTexture image to actually copy to the Canvas / WebGL when rendering,\n     * irrespective of the actual frame size or placement (which can be influenced by trimmed texture atlases)\n     */\n    public readonly frame = new Rectangle();\n    /** This is the area of original texture, before it was put in atlas. */\n    public readonly orig: Rectangle;\n    /**\n     * This is the trimmed area of original texture, before it was put in atlas\n     * Please call `updateUvs()` after you change coordinates of `trim` manually.\n     */\n    public readonly trim: Rectangle;\n\n    /**\n     * Does this Texture have any frame data assigned to it?\n     *\n     * This mode is enabled automatically if no frame was passed inside constructor.\n     *\n     * In this mode texture is subscribed to baseTexture events, and fires `update` on any change.\n     *\n     * Beware, after loading or resize of baseTexture event can fired two times!\n     * If you want more control, subscribe on baseTexture itself.\n     * @example\n     * texture.on('update', () => {});\n     */\n    public noFrame = false;\n\n    /**\n     * Set to true if you plan on modifying the uvs of this texture.\n     * When this is the case, sprites and other objects using the texture will\n     * make sure to listen for changes to the uvs and update their vertices accordingly.\n     */\n    public dynamic = false;\n\n    private _textureMatrix: TextureMatrix;\n\n    /** is it a texture? yes! used for type checking */\n    public readonly isTexture = true;\n\n    /**\n     * @param {TextureOptions} param0 - Options for the texture\n     */\n    constructor({\n        source,\n        label,\n        frame,\n        orig,\n        trim,\n        defaultAnchor,\n        defaultBorders,\n        rotate,\n        dynamic\n    }: TextureOptions = {})\n    {\n        super();\n\n        this.label = label;\n        this.source = source?.source ?? new TextureSource();\n\n        this.noFrame = !frame;\n\n        if (frame)\n        {\n            this.frame.copyFrom(frame);\n        }\n        else\n        {\n            const { width, height } = this._source;\n\n            this.frame.width = width;\n            this.frame.height = height;\n        }\n\n        this.orig = orig || this.frame;\n        this.trim = trim;\n\n        this.rotate = rotate ?? 0;\n        this.defaultAnchor = defaultAnchor;\n        this.defaultBorders = defaultBorders;\n\n        this.destroyed = false;\n        this.dynamic = dynamic || false;\n\n        this.updateUvs();\n    }\n\n    set source(value: TextureSource)\n    {\n        if (this._source)\n        {\n            this._source.off('resize', this.update, this);\n        }\n\n        this._source = value;\n\n        value.on('resize', this.update, this);\n\n        this.emit('update', this);\n    }\n\n    /** the underlying source of the texture (equivalent of baseTexture in v7) */\n    get source(): TextureSource\n    {\n        return this._source;\n    }\n\n    /** returns a TextureMatrix instance for this texture. By default, that object is not created because its heavy. */\n    get textureMatrix()\n    {\n        if (!this._textureMatrix)\n        {\n            this._textureMatrix = new TextureMatrix(this);\n        }\n\n        return this._textureMatrix;\n    }\n\n    /** The width of the Texture in pixels. */\n    get width(): number\n    {\n        return this.orig.width;\n    }\n\n    /** The height of the Texture in pixels. */\n    get height(): number\n    {\n        return this.orig.height;\n    }\n\n    /** Call this function when you have modified the frame of this texture. */\n    public updateUvs()\n    {\n        const { uvs, frame } = this;\n        const { width, height } = this._source;\n\n        const nX = frame.x / width;\n        const nY = frame.y / height;\n\n        const nW = frame.width / width;\n        const nH = frame.height / height;\n\n        let rotate = this.rotate;\n\n        if (rotate)\n        {\n            // width and height div 2 div baseFrame size\n            const w2 = nW / 2;\n            const h2 = nH / 2;\n\n            // coordinates of center\n            const cX = nX + w2;\n            const cY = nY + h2;\n\n            rotate = groupD8.add(rotate, groupD8.NW); // NW is top-left corner\n            uvs.x0 = cX + (w2 * groupD8.uX(rotate));\n            uvs.y0 = cY + (h2 * groupD8.uY(rotate));\n\n            rotate = groupD8.add(rotate, 2); // rotate 90 degrees clockwise\n            uvs.x1 = cX + (w2 * groupD8.uX(rotate));\n            uvs.y1 = cY + (h2 * groupD8.uY(rotate));\n\n            rotate = groupD8.add(rotate, 2);\n            uvs.x2 = cX + (w2 * groupD8.uX(rotate));\n            uvs.y2 = cY + (h2 * groupD8.uY(rotate));\n\n            rotate = groupD8.add(rotate, 2);\n            uvs.x3 = cX + (w2 * groupD8.uX(rotate));\n            uvs.y3 = cY + (h2 * groupD8.uY(rotate));\n        }\n\n        else\n        {\n            uvs.x0 = nX;\n            uvs.y0 = nY;\n            uvs.x1 = nX + nW;\n            uvs.y1 = nY;\n            uvs.x2 = nX + nW;\n            uvs.y2 = nY + nH;\n            uvs.x3 = nX;\n            uvs.y3 = nY + nH;\n        }\n    }\n\n    /**\n     * Destroys this texture\n     * @param destroySource - Destroy the source when the texture is destroyed.\n     */\n    public destroy(destroySource = false)\n    {\n        if (this._source)\n        {\n            if (destroySource)\n            {\n                this._source.destroy();\n                this._source = null;\n            }\n        }\n\n        this._textureMatrix = null;\n        this.destroyed = true;\n        this.emit('destroy', this);\n        this.removeAllListeners();\n    }\n\n    /** call this if you have modified the `texture outside` of the constructor */\n    public update(): void\n    {\n        if (this.noFrame)\n        {\n            this.frame.width = this._source.width;\n            this.frame.height = this._source.height;\n        }\n\n        this.updateUvs();\n        this.emit('update', this);\n    }\n\n    /** @deprecated since 8.0.0 */\n    get baseTexture(): TextureSource\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'Texture.baseTexture is now Texture.source');\n        // #endif\n\n        return this._source;\n    }\n\n    /** an Empty Texture used internally by the engine */\n    public static EMPTY: Texture;\n    /** a White texture used internally by the engine */\n    public static WHITE: Texture;\n}\n\nTexture.EMPTY = new Texture({\n    label: 'EMPTY',\n    source: new TextureSource({\n        label: 'EMPTY',\n    })\n});\n\nTexture.EMPTY.destroy = NOOP;\n\nTexture.WHITE = new Texture({\n    source: new BufferImageSource({\n        resource: new Uint8Array([255, 255, 255, 255]),\n        width: 1,\n        height: 1,\n        alphaMode: 'premultiply-alpha-on-upload',\n        label: 'WHITE',\n    }),\n    label: 'WHITE',\n});\n\nTexture.WHITE.destroy = NOOP;\n","import { Matrix } from '../../../../maths/matrix/Matrix';\n\nimport type { Texture } from './Texture';\n\nconst tempMat = new Matrix();\n\n/**\n * Class controls uv mapping from Texture normal space to BaseTexture normal space.\n *\n * Takes `trim` and `rotate` into account. May contain clamp settings for Meshes and TilingSprite.\n *\n * Can be used in Texture `uvMatrix` field, or separately, you can use different clamp settings on the same texture.\n * If you want to add support for texture region of certain feature or filter, that's what you're looking for.\n *\n * Takes track of Texture changes through `_lastTextureID` private field.\n * Use `update()` method call to track it from outside.\n * @see Texture\n * @see Mesh\n * @see TilingSprite\n * @memberof rendering\n */\nexport class TextureMatrix\n{\n    /**\n     * Matrix operation that converts texture region coords to texture coords\n     * @readonly\n     */\n    public mapCoord: Matrix;\n\n    /**\n     * Changes frame clamping\n     * Works with TilingSprite and Mesh\n     * Change to 1.5 if you texture has repeated right and bottom lines, that leads to smoother borders\n     * @default 0\n     */\n    public clampOffset: number;\n\n    /**\n     * Changes frame clamping\n     * Works with TilingSprite and Mesh\n     * Change to -0.5 to add a pixel to the edge, recommended for transparent trimmed textures in atlas\n     * @default 0.5\n     */\n    public clampMargin: number;\n\n    /**\n     * Clamp region for normalized coords, left-top pixel center in xy , bottom-right in zw.\n     * Calculated based on clampOffset.\n     */\n    public readonly uClampFrame: Float32Array;\n\n    /** Normalized clamp offset. Calculated based on clampOffset. */\n    public readonly uClampOffset: Float32Array;\n\n    /**\n     * Tracks Texture frame changes.\n     * @ignore\n     */\n    public _updateID: number;\n\n    /**\n     * Tracks Texture frame changes.\n     * @protected\n     */\n    protected _textureID: number;\n\n    protected _texture: Texture;\n\n    /**\n     * If texture size is the same as baseTexture.\n     * @default false\n     * @readonly\n     */\n    public isSimple: boolean;\n\n    /**\n     * @param texture - observed texture\n     * @param clampMargin - Changes frame clamping, 0.5 by default. Use -0.5 for extra border.\n     */\n    constructor(texture: Texture, clampMargin?: number)\n    {\n        this.mapCoord = new Matrix();\n        this.uClampFrame = new Float32Array(4);\n        this.uClampOffset = new Float32Array(2);\n        this._textureID = -1;\n        this._updateID = 0;\n\n        this.clampOffset = 0;\n\n        if ((typeof clampMargin === 'undefined'))\n        {\n            this.clampMargin = (texture.width < 10) ? 0 : 0.5;\n        }\n        else\n        {\n            this.clampMargin = clampMargin;\n        }\n\n        this.isSimple = false;\n\n        this.texture = texture;\n    }\n\n    /** Texture property. */\n    get texture(): Texture\n    {\n        return this._texture;\n    }\n\n    set texture(value: Texture)\n    {\n        if (this.texture === value) return;\n\n        this._texture?.removeListener('update', this.update, this);\n        this._texture = value;\n        this._texture.addListener('update', this.update, this);\n\n        this.update();\n    }\n\n    /**\n     * Multiplies uvs array to transform\n     * @param uvs - mesh uvs\n     * @param [out=uvs] - output\n     * @returns - output\n     */\n    public multiplyUvs(uvs: Float32Array, out?: Float32Array): Float32Array\n    {\n        if (out === undefined)\n        {\n            out = uvs;\n        }\n\n        const mat = this.mapCoord;\n\n        for (let i = 0; i < uvs.length; i += 2)\n        {\n            const x = uvs[i];\n            const y = uvs[i + 1];\n\n            out[i] = (x * mat.a) + (y * mat.c) + mat.tx;\n            out[i + 1] = (x * mat.b) + (y * mat.d) + mat.ty;\n        }\n\n        return out;\n    }\n\n    /**\n     * Updates matrices if texture was changed\n     * @returns - whether or not it was updated\n     */\n    public update(): boolean\n    {\n        const tex = this._texture;\n\n        this._updateID++;\n\n        const uvs = tex.uvs;\n\n        this.mapCoord.set(uvs.x1 - uvs.x0, uvs.y1 - uvs.y0, uvs.x3 - uvs.x0, uvs.y3 - uvs.y0, uvs.x0, uvs.y0);\n\n        const orig = tex.orig;\n        const trim = tex.trim;\n\n        if (trim)\n        {\n            tempMat.set(\n                orig.width / trim.width,\n                0, 0, orig.height / trim.height,\n                -trim.x / trim.width,\n                -trim.y / trim.height\n            );\n\n            this.mapCoord.append(tempMat);\n        }\n\n        const texBase = tex.source;\n        const frame = this.uClampFrame;\n        const margin = this.clampMargin / texBase._resolution;\n        const offset = this.clampOffset;\n\n        frame[0] = (tex.frame.x + margin + offset) / texBase.width;\n        frame[1] = (tex.frame.y + margin + offset) / texBase.height;\n        frame[2] = (tex.frame.x + tex.frame.width - margin + offset) / texBase.width;\n        frame[3] = (tex.frame.y + tex.frame.height - margin + offset) / texBase.height;\n\n        this.uClampOffset[0] = offset / texBase.pixelWidth;\n        this.uClampOffset[1] = offset / texBase.pixelHeight;\n\n        this.isSimple = tex.frame.width === texBase.width\n            && tex.frame.height === texBase.height\n            && tex.rotate === 0;\n\n        return true;\n    }\n}\n","import { ExtensionType } from '../../../../../extensions/Extensions';\nimport { TextureSource } from './TextureSource';\n\nimport type { ExtensionMetadata } from '../../../../../extensions/Extensions';\nimport type { TypedArray } from '../../buffer/Buffer';\nimport type { TextureSourceOptions } from './TextureSource';\n\nexport interface BufferSourceOptions extends TextureSourceOptions<TypedArray | ArrayBuffer>\n{\n    width: number;\n    height: number;\n}\n\nexport class BufferImageSource extends TextureSource<TypedArray | ArrayBuffer>\n{\n    public static extension: ExtensionMetadata = ExtensionType.TextureSource;\n\n    public uploadMethodId = 'buffer';\n\n    constructor(options: BufferSourceOptions)\n    {\n        const buffer = options.resource || new Float32Array(options.width * options.height * 4);\n        let format = options.format;\n\n        if (!format)\n        {\n            if (buffer instanceof Float32Array)\n            {\n                format = 'rgba32float';\n            }\n            else if (buffer instanceof Int32Array)\n            {\n                format = 'rgba32uint';\n            }\n            else if (buffer instanceof Uint32Array)\n            {\n                format = 'rgba32uint';\n            }\n            else if (buffer instanceof Int16Array)\n            {\n                format = 'rgba16uint';\n            }\n            else if (buffer instanceof Uint16Array)\n            {\n                format = 'rgba16uint';\n            }\n            else if (buffer instanceof Int8Array)\n            {\n                format = 'bgra8unorm';\n            }\n            else\n            {\n                format = 'bgra8unorm';\n            }\n        }\n\n        super({\n            ...options,\n            resource: buffer,\n            format,\n        });\n    }\n\n    public static test(resource: any): resource is TypedArray | ArrayBuffer\n    {\n        return resource instanceof Int8Array\n        || resource instanceof Uint8Array\n        || resource instanceof Uint8ClampedArray\n        || resource instanceof Int16Array\n        || resource instanceof Uint16Array\n        || resource instanceof Int32Array\n        || resource instanceof Uint32Array\n        || resource instanceof Float32Array;\n    }\n}\n","import { DOMAdapter } from '../../../../../environment/adapter';\nimport { ExtensionType } from '../../../../../extensions/Extensions';\nimport { TextureSource } from './TextureSource';\n\nimport type { ICanvas } from '../../../../../environment/canvas/ICanvas';\nimport type { ExtensionMetadata } from '../../../../../extensions/Extensions';\nimport type { TextureSourceOptions } from './TextureSource';\n\nexport interface CanvasSourceOptions extends TextureSourceOptions<ICanvas>\n{\n    /** should the canvas be resized to preserve its screen width and height regardless of the resolution of the renderer */\n    autoDensity?: boolean;\n    /** if true, this canvas will be set up to be transparent where possible */\n    transparent?: boolean;\n}\n\nexport class CanvasSource extends TextureSource<ICanvas>\n{\n    public static extension: ExtensionMetadata = ExtensionType.TextureSource;\n\n    public uploadMethodId = 'image';\n    public autoDensity: boolean;\n    public transparent: boolean;\n\n    constructor(options: CanvasSourceOptions)\n    {\n        if (!options.resource)\n        {\n            options.resource = DOMAdapter.get().createCanvas();\n        }\n\n        if (!options.width)\n        {\n            options.width = options.resource.width;\n\n            if (!options.autoDensity)\n            {\n                options.width /= options.resolution;\n            }\n        }\n\n        if (!options.height)\n        {\n            options.height = options.resource.height;\n\n            if (!options.autoDensity)\n            {\n                options.height /= options.resolution;\n            }\n        }\n\n        super(options);\n\n        this.autoDensity = options.autoDensity;\n\n        const canvas = options.resource;\n\n        if (this.pixelWidth !== canvas.width || this.pixelWidth !== canvas.height)\n        {\n            this.resizeCanvas();\n        }\n\n        this.transparent = !!options.transparent;\n    }\n\n    public resizeCanvas()\n    {\n        if (this.autoDensity)\n        {\n            this.resource.style.width = `${this.width}px`;\n            this.resource.style.height = `${this.height}px`;\n        }\n\n        // only resize if wee need to, as this clears the canvas (even if values are set to the same)\n        if (this.resource.width !== this.pixelWidth || this.resource.height !== this.pixelHeight)\n        {\n            this.resource.width = this.pixelWidth;\n            this.resource.height = this.pixelHeight;\n        }\n    }\n\n    public resize(width = this.width, height = this.height, resolution = this._resolution): boolean\n    {\n        const didResize = super.resize(width, height, resolution);\n\n        if (didResize)\n        {\n            this.resizeCanvas();\n        }\n\n        return didResize;\n    }\n\n    public static test(resource: any): resource is ICanvas\n    {\n        return (globalThis.HTMLCanvasElement && resource instanceof HTMLCanvasElement)\n        || (globalThis.OffscreenCanvas && resource instanceof OffscreenCanvas);\n    }\n}\n","import { DOMAdapter } from '../../../../../environment/adapter';\nimport { ExtensionType } from '../../../../../extensions/Extensions';\nimport { warn } from '../../../../../utils/logging/warn';\nimport { TextureSource } from './TextureSource';\n\nimport type { ICanvas } from '../../../../../environment/canvas/ICanvas';\nimport type { ExtensionMetadata } from '../../../../../extensions/Extensions';\nimport type { TextureSourceOptions } from './TextureSource';\n\nexport type ImageResource =\nImageBitmap\n| HTMLCanvasElement\n| OffscreenCanvas\n| ICanvas\n| VideoFrame\n| HTMLImageElement\n| HTMLVideoElement;\n\nexport class ImageSource extends TextureSource<ImageResource>\n{\n    public static extension: ExtensionMetadata = ExtensionType.TextureSource;\n    public uploadMethodId = 'image';\n\n    constructor(options: TextureSourceOptions<ImageResource>)\n    {\n        if (options.resource && (globalThis.HTMLImageElement && options.resource instanceof HTMLImageElement))\n        {\n            const canvas = DOMAdapter.get().createCanvas(options.resource.width, options.resource.height);\n            const context = canvas.getContext('2d');\n\n            context.drawImage(options.resource, 0, 0);\n            options.resource = canvas;\n\n            // #if _DEBUG\n            warn('ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.');\n            // #endif\n        }\n\n        super(options);\n\n        this.autoGarbageCollect = true;\n    }\n\n    public static test(resource: any): resource is ImageResource\n    {\n        return (globalThis.HTMLImageElement && resource instanceof HTMLImageElement)\n        || (typeof ImageBitmap !== 'undefined' && resource instanceof ImageBitmap);\n    }\n}\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation';\n\nimport type { BindResource } from '../../gpu/shader/BindResource';\nimport type { COMPARE_FUNCTION, SCALE_MODE, WRAP_MODE } from './const';\n\nconst idHash: Record<string, number> = Object.create(null);\n\n/**\n * This takes a shader string and maps it to a resource id.\n * This is a little different than regular resource ids as these ids\n * are not unique to the resource. But must not overlap with other (non sampler) resources Ids.\n * @param value - the string to turn into a resource id\n * @returns a unique resource id\n */\nfunction createResourceIdFromString(value: string): number\n{\n    const id = idHash[value];\n\n    if (id === undefined)\n    {\n        idHash[value] = uid('resource');\n    }\n\n    return id;\n}\n\nexport interface TextureStyleOptions extends Partial<TextureStyle>\n{\n    /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n    addressMode?: WRAP_MODE;\n    /** specifies the {{GPUAddressMode|address modes}} for the texture width, height, and depth coordinates, respectively. */\n    addressModeU?: WRAP_MODE;\n    /** specifies the {{GPUAddressMode|address modes}} for the texture width, height, and depth coordinates, respectively. */\n    addressModeV?: WRAP_MODE;\n    /** Specifies the {{GPUAddressMode|address modes}} for the texture width, height, and depth coordinates, respectively. */\n    addressModeW?: WRAP_MODE;\n\n    /** setting this will set magFilter,minFilter and mipmapFilter all at once!  */\n    scaleMode?: SCALE_MODE;\n\n    /** specifies the sampling behavior when the sample footprint is smaller than or equal to one texel. */\n    magFilter?: SCALE_MODE;\n    /** specifies the sampling behavior when the sample footprint is larger than one texel. */\n    minFilter?: SCALE_MODE;\n    /** specifies behavior for sampling between mipmap levels. */\n    mipmapFilter?: SCALE_MODE;\n\n    /** specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n    lodMinClamp?: number;\n    /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n    lodMaxClamp?: number;\n    /**\n     * When provided the sampler will be a comparison sampler with the specified\n     * {@link GPUCompareFunction}.\n     * Note: Comparison samplers may use filtering, but the sampling results will be\n     * implementation-dependent and may differ from the normal filtering rules.\n     */\n    compare?: COMPARE_FUNCTION;\n    /**\n     * Specifies the maximum anisotropy value clamp used by the sampler.\n     * Note: Most implementations support {@link GPUSamplerDescriptor#maxAnisotropy} values in range\n     * between 1 and 16, inclusive. The used value of {@link GPUSamplerDescriptor#maxAnisotropy} will\n     * be clamped to the maximum value that the platform supports.\n     *\n     * setting this to anything higher than 1 will set scale modes to 'linear'\n     */\n    maxAnisotropy?: number;\n}\n\n/**\n * A texture style describes how a texture should be sampled by a shader.\n * @memberof rendering\n */\nexport class TextureStyle extends EventEmitter<{\n    change: TextureStyle,\n    destroy: TextureStyle,\n}> implements BindResource\n{\n    public _resourceType = 'textureSampler';\n    public _touched = 0;\n    private _sharedResourceId: number;\n\n    /** default options for the style */\n    public static readonly defaultOptions: TextureStyleOptions = {\n        addressMode: 'clamp-to-edge',\n        scaleMode: 'linear'\n    };\n\n    /** */\n    public addressModeU?: WRAP_MODE;\n    /** */\n    public addressModeV?: WRAP_MODE;\n    /** Specifies the {{GPUAddressMode|address modes}} for the texture width, height, and depth coordinates, respectively. */\n    public addressModeW?: WRAP_MODE;\n    /** Specifies the sampling behavior when the sample footprint is smaller than or equal to one texel. */\n    public magFilter?: SCALE_MODE;\n    /** Specifies the sampling behavior when the sample footprint is larger than one texel. */\n    public minFilter?: SCALE_MODE;\n    /** Specifies behavior for sampling between mipmap levels. */\n    public mipmapFilter?: SCALE_MODE;\n    /** */\n    public lodMinClamp?: number;\n    /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n    public lodMaxClamp?: number;\n    /**\n     * When provided the sampler will be a comparison sampler with the specified\n     * {@link GPUCompareFunction}.\n     * Note: Comparison samplers may use filtering, but the sampling results will be\n     * implementation-dependent and may differ from the normal filtering rules.\n     */\n    public compare?: COMPARE_FUNCTION;\n    /**\n     * Specifies the maximum anisotropy value clamp used by the sampler.\n     * Note: Most implementations support {@link GPUSamplerDescriptor#maxAnisotropy} values in range\n     * between 1 and 16, inclusive. The used value of {@link GPUSamplerDescriptor#maxAnisotropy} will\n     * be clamped to the maximum value that the platform supports.\n     * @internal\n     * @ignore\n     */\n    public _maxAnisotropy?: number = 1;\n\n    /**\n     * Has the style been destroyed?\n     * @readonly\n     */\n    public destroyed = false;\n\n    /**\n     * @param options - options for the style\n     */\n    constructor(options: TextureStyleOptions = {})\n    {\n        super();\n\n        options = { ...TextureStyle.defaultOptions, ...options };\n\n        this.addressMode = options.addressMode;\n\n        this.addressModeU = options.addressModeU ?? this.addressModeU;\n        this.addressModeV = options.addressModeV ?? this.addressModeV;\n        this.addressModeW = options.addressModeW ?? this.addressModeW;\n\n        this.scaleMode = options.scaleMode;\n\n        this.magFilter = options.magFilter ?? this.magFilter;\n        this.minFilter = options.minFilter ?? this.minFilter;\n        this.mipmapFilter = options.mipmapFilter ?? this.mipmapFilter;\n\n        this.lodMinClamp = options.lodMinClamp;\n        this.lodMaxClamp = options.lodMaxClamp;\n\n        this.compare = options.compare;\n\n        this.maxAnisotropy = options.maxAnisotropy ?? 1;\n    }\n\n    set addressMode(value: WRAP_MODE)\n    {\n        this.addressModeU = value;\n        this.addressModeV = value;\n        this.addressModeW = value;\n    }\n\n    /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n    get addressMode(): WRAP_MODE\n    {\n        return this.addressModeU;\n    }\n\n    set wrapMode(value: WRAP_MODE)\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'TextureStyle.wrapMode is now TextureStyle.addressMode');\n        // #endif\n\n        this.addressMode = value;\n    }\n\n    get wrapMode(): WRAP_MODE\n    {\n        return this.addressMode;\n    }\n\n    set scaleMode(value: SCALE_MODE)\n    {\n        this.magFilter = value;\n        this.minFilter = value;\n        this.mipmapFilter = value;\n    }\n\n    /** setting this will set magFilter,minFilter and mipmapFilter all at once!  */\n    get scaleMode(): SCALE_MODE\n    {\n        return this.magFilter;\n    }\n\n    /** Specifies the maximum anisotropy value clamp used by the sampler. */\n    set maxAnisotropy(value: number)\n    {\n        this._maxAnisotropy = Math.min(value, 16);\n\n        if (this._maxAnisotropy > 1)\n        {\n            this.scaleMode = 'linear';\n        }\n    }\n\n    get maxAnisotropy(): number\n    {\n        return this._maxAnisotropy;\n    }\n\n    // TODO - move this to WebGL?\n    get _resourceId(): number\n    {\n        return this._sharedResourceId || this._generateResourceId();\n    }\n\n    public update()\n    {\n        // manage the resource..\n        this.emit('change', this);\n        this._sharedResourceId = null;\n    }\n\n    private _generateResourceId(): number\n    {\n        // eslint-disable-next-line max-len\n        const bigKey = `${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;\n\n        this._sharedResourceId = createResourceIdFromString(bigKey);\n\n        return this._resourceId;\n    }\n\n    /** Destroys the style */\n    public destroy()\n    {\n        this.destroyed = true;\n\n        this.emit('destroy', this);\n        this.emit('change', this);\n\n        this.removeAllListeners();\n    }\n}\n","import EventEmitter from 'eventemitter3';\nimport { isPow2 } from '../../../../../maths/misc/pow2';\nimport { definedProps } from '../../../../../scene/container/utils/definedProps';\nimport { uid } from '../../../../../utils/data/uid';\nimport { TextureStyle } from '../TextureStyle';\n\nimport type { BindResource } from '../../../gpu/shader/BindResource';\nimport type { ALPHA_MODES, SCALE_MODE, TEXTURE_DIMENSIONS, TEXTURE_FORMATS, WRAP_MODE } from '../const';\nimport type { TextureStyleOptions } from '../TextureStyle';\n\n/**\n * options for creating a new TextureSource\n * @memberof rendering\n */\nexport interface TextureSourceOptions<T extends Record<string, any> = any> extends TextureStyleOptions\n{\n    /**\n     * the resource that will be upladed to the GPU. This is where we get our pixels from\n     * eg an ImageBimt / Canvas / Video etc\n     */\n    resource?: T;\n    /** the pixel width of this texture source. This is the REAL pure number, not accounting resolution */\n    width?: number;\n    /** the pixel height of this texture source. This is the REAL pure number, not accounting resolution */\n    height?: number;\n    /** the resolution of the texture. */\n    resolution?: number;\n    /** the format that the texture data has */\n    format?: TEXTURE_FORMATS;\n    /**\n     * Used by internal textures\n     * @ignore\n     */\n    sampleCount?: number;\n    /**\n     * Only really affects RenderTextures.\n     * Should we use antialiasing for this texture. It will look better, but may impact performance as a\n     * Blit operation will be required to resolve the texture.\n     */\n    antialias?: boolean;\n    /** how many dimensions does this texture have? currently v8 only supports 2d */\n    dimensions?: TEXTURE_DIMENSIONS;\n    /** The number of mip levels to generate for this texture. this is  overridden if autoGenerateMipmaps is true */\n    mipLevelCount?: number;\n    /**\n     * Should we auto generate mipmaps for this texture? This will automatically generate mipmaps\n     * for this texture when uploading to the GPU. Mipmapped textures take up more memory, but\n     * can look better when scaled down.\n     *\n     * For performance reasons, it is recommended to NOT use this with RenderTextures, as they are often updated every frame.\n     * If you do, make sure to call `updateMipmaps` after you update the texture.\n     */\n    autoGenerateMipmaps?: boolean;\n    /** the alpha mode of the texture */\n    alphaMode?: ALPHA_MODES;\n    /** optional label, can be used for debugging */\n    label?: string;\n    /** If true, the Garbage Collector will unload this texture if it is not used after a period of time */\n    autoGarbageCollect?: boolean;\n}\n\n/**\n * A TextureSource stores the information that represents an image.\n * All textures have require TextureSource, which contains information about the source.\n * Therefore you can have many textures all using a single TextureSource (eg a sprite sheet)\n *\n * This is an class is extended depending on the source of the texture.\n * Eg if you are using an an image as your resource, then an ImageSource is used.\n * @memberof rendering\n * @typeParam T - The TextureSource's Resource type.\n */\nexport class TextureSource<T extends Record<string, any> = any> extends EventEmitter<{\n    change: BindResource;\n    update: TextureSource;\n    unload: TextureSource;\n    destroy: TextureSource;\n    resize: TextureSource;\n    styleChange: TextureSource;\n    updateMipmaps: TextureSource;\n    error: Error;\n}> implements BindResource\n{\n    /** The default options used when creating a new TextureSource. override these to add your own defaults */\n    public static defaultOptions: TextureSourceOptions = {\n        resolution: 1,\n        format: 'bgra8unorm',\n        alphaMode: 'premultiply-alpha-on-upload',\n        dimensions: '2d',\n        mipLevelCount: 1,\n        autoGenerateMipmaps: false,\n        sampleCount: 1,\n        antialias: false,\n        autoGarbageCollect: false,\n    };\n\n    /** unique id for this Texture source */\n    public readonly uid = uid('textureSource');\n    /** optional label, can be used for debugging */\n    public label: string;\n\n    /**\n     * The resource type used by this TextureSource. This is used by the bind groups to determine\n     * how to handle this resource.\n     * @ignore\n     * @internal\n     */\n    public readonly _resourceType = 'textureSource';\n    /**\n     * i unique resource id, used by the bind group systems.\n     * This can change if the texture is resized or its resource changes\n     */\n    public _resourceId = uid('resource');\n    /**\n     * this is how the backends know how to upload this texture to the GPU\n     * It changes depending on the resource type. Classes that extend TextureSource\n     * should override this property.\n     * @ignore\n     * @internal\n     */\n    public uploadMethodId = 'unknown';\n\n    // dimensions\n    public _resolution = 1;\n\n    /** the pixel width of this texture source. This is the REAL pure number, not accounting resolution */\n    public pixelWidth = 1;\n    /** the pixel height of this texture source. This is the REAL pure number, not accounting resolution */\n    public pixelHeight = 1;\n\n    /**\n     * the width of this texture source, accounting for resolution\n     * eg pixelWidth 200, resolution 2, then width will be 100\n     */\n    public width = 1;\n    /**\n     * the height of this texture source, accounting for resolution\n     * eg pixelHeight 200, resolution 2, then height will be 100\n     */\n    public height = 1;\n\n    /**\n     * the resource that will be upladed to the GPU. This is where we get our pixels from\n     * eg an ImageBimt / Canvas / Video etc\n     */\n    public resource: T;\n\n    /**\n     * The number of samples of a multisample texture. This is always 1 for non-multisample textures.\n     * To enable multisample for a texture, set antialias to true\n     * @internal\n     * @ignore\n     */\n    public sampleCount = 1;\n\n    /** The number of mip levels to generate for this texture. this is  overridden if autoGenerateMipmaps is true */\n    public mipLevelCount = 1;\n    /**\n     * Should we auto generate mipmaps for this texture? This will automatically generate mipmaps\n     * for this texture when uploading to the GPU. Mipmapped textures take up more memory, but\n     * can look better when scaled down.\n     *\n     * For performance reasons, it is recommended to NOT use this with RenderTextures, as they are often updated every frame.\n     * If you do, make sure to call `updateMipmaps` after you update the texture.\n     */\n    public autoGenerateMipmaps = false;\n    /** the format that the texture data has */\n    public format: TEXTURE_FORMATS = 'rgba8unorm';\n    /** how many dimensions does this texture have? currently v8 only supports 2d */\n    public dimension: TEXTURE_DIMENSIONS = '2d';\n    /** the alpha mode of the texture */\n    public alphaMode: ALPHA_MODES;\n    private _style: TextureStyle;\n\n    /**\n     * Only really affects RenderTextures.\n     * Should we use antialiasing for this texture. It will look better, but may impact performance as a\n     * Blit operation will be required to resolve the texture.\n     */\n    public antialias = false;\n\n    /**\n     * Has the source been destroyed?\n     * @readonly\n     */\n    public destroyed: boolean;\n\n    /**\n     * Used by automatic texture Garbage Collection, stores last GC tick when it was bound\n     * @protected\n     */\n    public _touched = 0;\n\n    /**\n     * Used by the batcher to build texture batches. faster to have the variable here!\n     * @protected\n     */\n    public _batchTick = -1;\n    /**\n     * A temporary batch location for the texture batching. Here for performance reasons only!\n     * @protected\n     */\n    public _textureBindLocation = -1;\n\n    public isPowerOfTwo: boolean;\n\n    /** If true, the Garbage Collector will unload this texture if it is not used after a period of time */\n    public autoGarbageCollect: boolean;\n\n    /**\n     * used internally to know where a texture came from. Usually assigned by the asset loader!\n     * @ignore\n     */\n    public _sourceOrigin: string;\n\n    /**\n     * @param options - options for creating a new TextureSource\n     */\n    constructor(protected readonly options: TextureSourceOptions<T> = {})\n    {\n        super();\n\n        options = { ...TextureSource.defaultOptions, ...options };\n\n        this.label = options.label ?? '';\n        this.resource = options.resource;\n        this.autoGarbageCollect = options.autoGarbageCollect;\n        this._resolution = options.resolution;\n\n        if (options.width)\n        {\n            this.pixelWidth = options.width * this._resolution;\n        }\n        else\n        {\n            this.pixelWidth = this.resource ? (this.resourceWidth ?? 1) : 1;\n        }\n\n        if (options.height)\n        {\n            this.pixelHeight = options.height * this._resolution;\n        }\n        else\n        {\n            this.pixelHeight = this.resource ? (this.resourceHeight ?? 1) : 1;\n        }\n\n        this.width = this.pixelWidth / this._resolution;\n        this.height = this.pixelHeight / this._resolution;\n\n        this.format = options.format;\n        this.dimension = options.dimensions;\n        this.mipLevelCount = options.mipLevelCount;\n        this.autoGenerateMipmaps = options.autoGenerateMipmaps;\n        this.sampleCount = options.sampleCount;\n        this.antialias = options.antialias;\n        this.alphaMode = options.alphaMode;\n\n        this.style = new TextureStyle(definedProps(options));\n\n        this.destroyed = false;\n\n        this._refreshPOT();\n    }\n\n    /** returns itself */\n    get source(): TextureSource\n    {\n        return this;\n    }\n\n    /** the style of the texture */\n    get style(): TextureStyle\n    {\n        return this._style;\n    }\n\n    set style(value: TextureStyle)\n    {\n        if (this.style === value) return;\n\n        this._style?.off('change', this._onStyleChange, this);\n        this._style = value;\n        this._style?.on('change', this._onStyleChange, this);\n\n        this._onStyleChange();\n    }\n\n    /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n    get addressMode(): WRAP_MODE\n    {\n        return this._style.addressMode;\n    }\n\n    set addressMode(value: WRAP_MODE)\n    {\n        this._style.addressMode = value;\n    }\n\n    /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n    get repeatMode(): WRAP_MODE\n    {\n        return this._style.addressMode;\n    }\n\n    set repeatMode(value: WRAP_MODE)\n    {\n        this._style.addressMode = value;\n    }\n\n    /** Specifies the sampling behavior when the sample footprint is smaller than or equal to one texel. */\n    get magFilter(): SCALE_MODE\n    {\n        return this._style.magFilter;\n    }\n\n    set magFilter(value: SCALE_MODE)\n    {\n        this._style.magFilter = value;\n    }\n\n    /** Specifies the sampling behavior when the sample footprint is larger than one texel. */\n    get minFilter(): SCALE_MODE\n    {\n        return this._style.minFilter;\n    }\n\n    set minFilter(value: SCALE_MODE)\n    {\n        this._style.minFilter = value;\n    }\n\n    /** Specifies behavior for sampling between mipmap levels. */\n    get mipmapFilter(): SCALE_MODE\n    {\n        return this._style.mipmapFilter;\n    }\n\n    set mipmapFilter(value: SCALE_MODE)\n    {\n        this._style.mipmapFilter = value;\n    }\n\n    /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n    get lodMinClamp(): number\n    {\n        return this._style.lodMinClamp;\n    }\n\n    set lodMinClamp(value: number)\n    {\n        this._style.lodMinClamp = value;\n    }\n\n    /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n    get lodMaxClamp(): number\n    {\n        return this._style.lodMaxClamp;\n    }\n\n    set lodMaxClamp(value: number)\n    {\n        this._style.lodMaxClamp = value;\n    }\n\n    private _onStyleChange()\n    {\n        this.emit('styleChange', this);\n    }\n\n    /** call this if you have modified the texture outside of the constructor */\n    public update()\n    {\n        // update resource...\n        if (this.resource)\n        {\n            const resolution = this._resolution;\n\n            const didResize = this.resize(this.resourceWidth / resolution, this.resourceHeight / resolution);\n\n            // no ned to dispatch the update we resized as that will\n            // notify the texture systems anyway\n            if (didResize) return;\n        }\n\n        this.emit('update', this);\n    }\n\n    /** Destroys this texture source */\n    public destroy()\n    {\n        this.destroyed = true;\n        this.emit('destroy', this);\n        this.emit('change', this);\n\n        if (this._style)\n        {\n            this._style.destroy();\n            this._style = null;\n        }\n\n        this.uploadMethodId = null;\n        this.resource = null;\n        this.removeAllListeners();\n    }\n\n    /**\n     * This will unload the Texture source from the GPU. This will free up the GPU memory\n     * As soon as it is required fore rendering, it will be re-uploaded.\n     */\n    public unload()\n    {\n        this._resourceId = uid('resource');\n        this.emit('change', this);\n        this.emit('unload', this);\n    }\n\n    /** the width of the resource. This is the REAL pure number, not accounting resolution   */\n    public get resourceWidth(): number\n    {\n        const { resource } = this;\n\n        return resource.naturalWidth || resource.videoWidth || resource.displayWidth || resource.width;\n    }\n\n    /** the height of the resource. This is the REAL pure number, not accounting resolution */\n    public get resourceHeight(): number\n    {\n        const { resource } = this;\n\n        return resource.naturalHeight || resource.videoHeight || resource.displayHeight || resource.height;\n    }\n\n    /**\n     * the resolution of the texture. Changing this number, will not change the number of pixels in the actual texture\n     * but will the size of the texture when rendered.\n     *\n     * changing the resolution of this texture to 2 for example will make it appear twice as small when rendered (as pixel\n     * density will have increased)\n     */\n    get resolution(): number\n    {\n        return this._resolution;\n    }\n\n    set resolution(resolution: number)\n    {\n        if (this._resolution === resolution) return;\n\n        this._resolution = resolution;\n\n        this.width = this.pixelWidth / resolution;\n        this.height = this.pixelHeight / resolution;\n    }\n\n    /**\n     * Resize the texture, this is handy if you want to use the texture as a render texture\n     * @param width - the new width of the texture\n     * @param height - the new height of the texture\n     * @param resolution - the new resolution of the texture\n     * @returns - if the texture was resized\n     */\n    public resize(width?: number, height?: number, resolution?: number): boolean\n    {\n        resolution = resolution || this._resolution;\n        width = width || this.width;\n        height = height || this.height;\n\n        // make sure we work with rounded pixels\n        const newPixelWidth = Math.round(width * resolution);\n        const newPixelHeight = Math.round(height * resolution);\n\n        this.width = newPixelWidth / resolution;\n        this.height = newPixelHeight / resolution;\n\n        this._resolution = resolution;\n\n        if (this.pixelWidth === newPixelWidth && this.pixelHeight === newPixelHeight)\n        {\n            return false;\n        }\n\n        this._refreshPOT();\n\n        this.pixelWidth = newPixelWidth;\n        this.pixelHeight = newPixelHeight;\n\n        this.emit('resize', this);\n\n        this._resourceId = uid('resource');\n        this.emit('change', this);\n\n        return true;\n    }\n\n    /**\n     * Lets the renderer know that this texture has been updated and its mipmaps should be re-generated.\n     * This is only important for RenderTexture instances, as standard Texture instances will have their\n     * mipmaps generated on upload. You should call this method after you make any change to the texture\n     *\n     * The reason for this is is can be quite expensive to update mipmaps for a texture. So by default,\n     * We want you, the developer to specify when this action should happen.\n     *\n     * Generally you don't want to have mipmaps generated on Render targets that are changed every frame,\n     */\n    public updateMipmaps()\n    {\n        if (this.autoGenerateMipmaps && this.mipLevelCount > 1)\n        {\n            this.emit('updateMipmaps', this);\n        }\n    }\n\n    set wrapMode(value: WRAP_MODE)\n    {\n        this._style.wrapMode = value;\n    }\n\n    get wrapMode(): WRAP_MODE\n    {\n        return this._style.wrapMode;\n    }\n\n    set scaleMode(value: SCALE_MODE)\n    {\n        this._style.scaleMode = value;\n    }\n\n    /** setting this will set magFilter,minFilter and mipmapFilter all at once!  */\n    get scaleMode(): SCALE_MODE\n    {\n        return this._style.scaleMode;\n    }\n\n    /**\n     * Refresh check for isPowerOfTwo texture based on size\n     * @private\n     */\n    protected _refreshPOT(): void\n    {\n        this.isPowerOfTwo = isPow2(this.pixelWidth) && isPow2(this.pixelHeight);\n    }\n\n    public static test(_resource: any): any\n    {\n        // this should be overridden by other sources..\n        throw new Error('Unimplemented');\n    }\n}\n","/**\n * Returns a new object with all properties from the input object that have defined values.\n * @template T - The type of the input object.\n * @param {T} obj - The input object.\n * @returns {T} - A new object with only the defined properties from the input object.\n * @memberof utils\n * @ignore\n */\nexport function definedProps<T extends Record<string, any>>(obj: T): T\n{\n    const result: Partial<T> = {};\n\n    for (const key in obj)\n    {\n        if (obj[key] !== undefined)\n        {\n            result[key] = obj[key];\n        }\n    }\n\n    return result as T;\n}\n","// VideoSource.ts\n\nimport { ExtensionType } from '../../../../../extensions/Extensions';\nimport { Ticker } from '../../../../../ticker/Ticker';\nimport { detectVideoAlphaMode } from '../../../../../utils/browser/detectVideoAlphaMode';\nimport { TextureSource } from './TextureSource';\n\nimport type { ExtensionMetadata } from '../../../../../extensions/Extensions';\nimport type { Dict } from '../../../../../utils/types';\nimport type { ALPHA_MODES } from '../const';\nimport type { TextureSourceOptions } from './TextureSource';\n\ntype VideoResource = HTMLVideoElement;\n\n/**\n * Options for video sources.\n * @memberof rendering\n */\nexport interface VideoSourceOptions extends TextureSourceOptions<VideoResource>\n{\n    /** If true, the video will start loading immediately. */\n    autoLoad?: boolean;\n    /** If true, the video will start playing as soon as it is loaded. */\n    autoPlay?: boolean;\n    /** The number of times a second to update the texture from the video. Leave at 0 to update at every render. */\n    updateFPS?: number;\n    /** If true, the video will be loaded with the `crossorigin` attribute. */\n    crossorigin?: boolean | string;\n    /** If true, the video will loop when it ends. */\n    loop?: boolean;\n    /** If true, the video will be muted. */\n    muted?: boolean;\n    /** If true, the video will play inline. */\n    playsinline?: boolean;\n    /** If true, the video will be preloaded. */\n    preload?: boolean;\n    /** The time in milliseconds to wait for the video to preload before timing out. */\n    preloadTimeoutMs?: number;\n    /** The alpha mode of the video. */\n    alphaMode?: ALPHA_MODES;\n}\n\nexport interface VideoResourceOptionsElement\n{\n    src: string;\n    mime: string;\n}\n\n/**\n * A source for video-based textures.\n * @memberof rendering\n */\nexport class VideoSource extends TextureSource<VideoResource>\n{\n    public static extension: ExtensionMetadata = ExtensionType.TextureSource;\n\n    /** The default options for video sources. */\n    public static defaultOptions: VideoSourceOptions = {\n        ...TextureSource.defaultOptions,\n        /** If true, the video will start loading immediately. */\n        autoLoad: true,\n        /** If true, the video will start playing as soon as it is loaded. */\n        autoPlay: true,\n        /** The number of times a second to update the texture from the video. Leave at 0 to update at every render. */\n        updateFPS: 0,\n        /** If true, the video will be loaded with the `crossorigin` attribute. */\n        crossorigin: true,\n        /** If true, the video will loop when it ends. */\n        loop: false,\n        /** If true, the video will be muted. */\n        muted: true,\n        /** If true, the video will play inline. */\n        playsinline: true,\n        /** If true, the video will be preloaded. */\n        preload: false,\n    };\n\n    // Public\n    /** Whether or not the video is ready to play. */\n    public isReady = false;\n    /** The upload method for this texture. */\n    public uploadMethodId = 'video';\n\n    // Protected\n    /**\n     * When set to true will automatically play videos used by this texture once\n     * they are loaded. If false, it will not modify the playing state.\n     * @default true\n     */\n    protected autoPlay: boolean;\n\n    // Private\n    /**\n     * `true` to use Ticker.shared to auto update the base texture.\n     * @default true\n     */\n    private _autoUpdate: boolean;\n\n    /**\n     * `true` if the instance is currently connected to Ticker.shared to auto update the base texture.\n     * @default false\n     */\n    private _isConnectedToTicker: boolean;\n\n    /**\n     * Promise when loading.\n     * @default null\n     */\n    private _load: Promise<this>;\n\n    private _msToNextUpdate: number;\n    private _preloadTimeout: number;\n\n    /** Callback when completed with load. */\n    private _resolve: (value?: this | PromiseLike<this>) => void;\n    private _reject: (error: ErrorEvent) => void;\n\n    private _updateFPS: number;\n    private _videoFrameRequestCallbackHandle: number | null;\n\n    constructor(\n        options: VideoSourceOptions\n    )\n    {\n        super(options);\n\n        // Merge provided options with default ones\n        options = {\n            ...VideoSource.defaultOptions,\n            ...options\n        };\n\n        this._autoUpdate = true;\n        this._isConnectedToTicker = false;\n        this._updateFPS = options.updateFPS || 0;\n        this._msToNextUpdate = 0;\n        this.autoPlay = options.autoPlay !== false;\n        this.alphaMode = options.alphaMode ?? 'premultiply-alpha-on-upload';\n\n        // Binding for frame updates\n        this._videoFrameRequestCallback = this._videoFrameRequestCallback.bind(this);\n        this._videoFrameRequestCallbackHandle = null;\n\n        this._load = null;\n        this._resolve = null;\n        this._reject = null;\n\n        // Bind for listeners\n        this._onCanPlay = this._onCanPlay.bind(this);\n        this._onCanPlayThrough = this._onCanPlayThrough.bind(this);\n        this._onError = this._onError.bind(this);\n        this._onPlayStart = this._onPlayStart.bind(this);\n        this._onPlayStop = this._onPlayStop.bind(this);\n        this._onSeeked = this._onSeeked.bind(this);\n\n        if (options.autoLoad !== false)\n        {\n            void this.load();\n        }\n    }\n\n    /** Update the video frame if the source is not destroyed and meets certain conditions. */\n    protected updateFrame(): void\n    {\n        if (this.destroyed)\n        {\n            return;\n        }\n\n        if (this._updateFPS)\n        {\n            // Account for if video has had its playbackRate changed\n            const elapsedMS = Ticker.shared.elapsedMS * this.resource.playbackRate;\n\n            this._msToNextUpdate = Math.floor(this._msToNextUpdate - elapsedMS);\n        }\n\n        if (!this._updateFPS || this._msToNextUpdate <= 0)\n        {\n            this._msToNextUpdate = this._updateFPS ? Math.floor(1000 / this._updateFPS) : 0;\n        }\n\n        if (this.isValid)\n        {\n            this.update();\n        }\n    }\n\n    /** Callback to update the video frame and potentially request the next frame update. */\n    private _videoFrameRequestCallback(): void\n    {\n        this.updateFrame();\n\n        if (this.destroyed)\n        {\n            this._videoFrameRequestCallbackHandle = null;\n        }\n        else\n        {\n            this._videoFrameRequestCallbackHandle = this.resource.requestVideoFrameCallback(\n                this._videoFrameRequestCallback\n            );\n        }\n    }\n\n    /**\n     * Checks if the resource has valid dimensions.\n     * @returns {boolean} True if width and height are set, otherwise false.\n     */\n    public get isValid(): boolean\n    {\n        return !!this.resource.videoWidth && !!this.resource.videoHeight;\n    }\n\n    /**\n     * Start preloading the video resource.\n     * @returns {Promise<this>} Handle the validate event\n     */\n    public async load(): Promise<this>\n    {\n        if (this._load)\n        {\n            return this._load;\n        }\n\n        const source = this.resource;\n        const options = this.options as VideoSourceOptions;\n\n        // Check if source data is enough and set it to complete if needed\n        if ((source.readyState === source.HAVE_ENOUGH_DATA || source.readyState === source.HAVE_FUTURE_DATA)\n            && source.width && source.height)\n        {\n            (source as any).complete = true;\n        }\n\n        // Add event listeners related to playback and seeking\n        source.addEventListener('play', this._onPlayStart);\n        source.addEventListener('pause', this._onPlayStop);\n        source.addEventListener('seeked', this._onSeeked);\n\n        // Add or handle source readiness event listeners\n        if (!this._isSourceReady())\n        {\n            if (!options.preload)\n            {\n                // since this event fires early, only bind if not waiting for a preload event\n                source.addEventListener('canplay', this._onCanPlay);\n            }\n            source.addEventListener('canplaythrough', this._onCanPlayThrough);\n            source.addEventListener('error', this._onError, true);\n        }\n        else\n        {\n            // Source is already ready, so handle it immediately\n            this._mediaReady();\n        }\n\n        this.alphaMode = await detectVideoAlphaMode();\n\n        // Create and return the loading promise\n        this._load = new Promise((resolve, reject): void =>\n        {\n            if (this.isValid)\n            {\n                resolve(this);\n            }\n            else\n            {\n                this._resolve = resolve;\n                this._reject = reject;\n\n                if (options.preloadTimeoutMs !== undefined)\n                {\n                    this._preloadTimeout = setTimeout(() =>\n                    {\n                        this._onError(new ErrorEvent(`Preload exceeded timeout of ${options.preloadTimeoutMs}ms`));\n                    }) as unknown as number;\n                }\n                source.load();\n            }\n        });\n\n        return this._load;\n    }\n\n    /**\n     * Handle video error events.\n     * @param event - The error event\n     */\n    private _onError(event: ErrorEvent): void\n    {\n        this.resource.removeEventListener('error', this._onError, true);\n        this.emit('error', event);\n\n        if (this._reject)\n        {\n            this._reject(event);\n            this._reject = null;\n            this._resolve = null;\n        }\n    }\n\n    /**\n     * Checks if the underlying source is playing.\n     * @returns True if playing.\n     */\n    private _isSourcePlaying(): boolean\n    {\n        const source = this.resource;\n\n        return (!source.paused && !source.ended);\n    }\n\n    /**\n     * Checks if the underlying source is ready for playing.\n     * @returns True if ready.\n     */\n    private _isSourceReady(): boolean\n    {\n        const source = this.resource;\n\n        return source.readyState > 2;\n    }\n\n    /** Runs the update loop when the video is ready to play. */\n    private _onPlayStart(): void\n    {\n        // Handle edge case where video might not have received its \"can play\" event yet\n        if (!this.isValid)\n        {\n            this._mediaReady();\n        }\n\n        this._configureAutoUpdate();\n    }\n\n    /** Stops the update loop when a pause event is triggered. */\n    private _onPlayStop(): void\n    {\n        this._configureAutoUpdate();\n    }\n\n    /** Handles behavior when the video completes seeking to the current playback position. */\n    private _onSeeked(): void\n    {\n        if (this._autoUpdate && !this._isSourcePlaying())\n        {\n            this._msToNextUpdate = 0;\n            this.updateFrame();\n            this._msToNextUpdate = 0;\n        }\n    }\n\n    private _onCanPlay(): void\n    {\n        const source = this.resource;\n\n        // Remove event listeners\n        source.removeEventListener('canplay', this._onCanPlay);\n\n        this._mediaReady();\n    }\n\n    private _onCanPlayThrough(): void\n    {\n        const source = this.resource;\n\n        // Remove event listeners\n        source.removeEventListener('canplaythrough', this._onCanPlay);\n\n        if (this._preloadTimeout)\n        {\n            clearTimeout(this._preloadTimeout);\n            this._preloadTimeout = undefined;\n        }\n\n        this._mediaReady();\n    }\n\n    /** Fired when the video is loaded and ready to play. */\n    private _mediaReady(): void\n    {\n        const source = this.resource;\n\n        if (this.isValid)\n        {\n            this.isReady = true;\n            this.resize(source.videoWidth, source.videoHeight);\n        }\n\n        // Reset update timers and perform a frame update\n        this._msToNextUpdate = 0;\n        this.updateFrame();\n        this._msToNextUpdate = 0;\n\n        // Resolve the loading promise if it exists\n        if (this._resolve)\n        {\n            this._resolve(this);\n            this._resolve = null;\n            this._reject = null;\n        }\n\n        // Handle play behavior based on current source status\n        if (this._isSourcePlaying())\n        {\n            this._onPlayStart();\n        }\n        else if (this.autoPlay)\n        {\n            void this.resource.play();\n        }\n    }\n\n    /** Cleans up resources and event listeners associated with this texture. */\n    public destroy()\n    {\n        this._configureAutoUpdate();\n\n        const source = this.resource;\n\n        if (source)\n        {\n            // Remove event listeners\n            source.removeEventListener('play', this._onPlayStart);\n            source.removeEventListener('pause', this._onPlayStop);\n            source.removeEventListener('seeked', this._onSeeked);\n            source.removeEventListener('canplay', this._onCanPlay);\n            source.removeEventListener('canplaythrough', this._onCanPlayThrough);\n            source.removeEventListener('error', this._onError, true);\n\n            // Clear the video source and pause\n            source.pause();\n            source.src = '';\n            source.load();\n        }\n\n        super.destroy();\n    }\n\n    /** Should the base texture automatically update itself, set to true by default. */\n    get autoUpdate(): boolean\n    {\n        return this._autoUpdate;\n    }\n\n    set autoUpdate(value: boolean)\n    {\n        if (value !== this._autoUpdate)\n        {\n            this._autoUpdate = value;\n            this._configureAutoUpdate();\n        }\n    }\n\n    /**\n     * How many times a second to update the texture from the video.\n     * Leave at 0 to update at every render.\n     * A lower fps can help performance, as updating the texture at 60fps on a 30ps video may not be efficient.\n     */\n    get updateFPS(): number\n    {\n        return this._updateFPS;\n    }\n\n    set updateFPS(value: number)\n    {\n        if (value !== this._updateFPS)\n        {\n            this._updateFPS = value;\n            this._configureAutoUpdate();\n        }\n    }\n\n    /**\n     * Configures the updating mechanism based on the current state and settings.\n     *\n     * This method decides between using the browser's native video frame callback or a custom ticker\n     * for updating the video frame. It ensures optimal performance and responsiveness\n     * based on the video's state, playback status, and the desired frames-per-second setting.\n     *\n     * - If `_autoUpdate` is enabled and the video source is playing:\n     *   - It will prefer the native video frame callback if available and no specific FPS is set.\n     *   - Otherwise, it will use a custom ticker for manual updates.\n     * - If `_autoUpdate` is disabled or the video isn't playing, any active update mechanisms are halted.\n     */\n    private _configureAutoUpdate(): void\n    {\n        // Check if automatic updating is enabled and if the source is currently playing\n        if (this._autoUpdate && this._isSourcePlaying())\n        {\n            // Determine if we should use the browser's native video frame callback (generally for better performance)\n            if (!this._updateFPS && this.resource.requestVideoFrameCallback)\n            {\n                // If connected to a custom ticker, remove the update frame function from it\n                if (this._isConnectedToTicker)\n                {\n                    Ticker.shared.remove(this.updateFrame, this);\n                    this._isConnectedToTicker = false;\n                    // Reset the time until the next update\n                    this._msToNextUpdate = 0;\n                }\n\n                // Check if we haven't already requested a video frame callback, and if not, request one\n                if (this._videoFrameRequestCallbackHandle === null)\n                {\n                    this._videoFrameRequestCallbackHandle = this.resource.requestVideoFrameCallback(\n                        this._videoFrameRequestCallback\n                    );\n                }\n            }\n            else\n            {\n                // If a video frame request callback exists, cancel it, as we are switching to manual ticker-based updates\n                if (this._videoFrameRequestCallbackHandle !== null)\n                {\n                    this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle);\n                    this._videoFrameRequestCallbackHandle = null;\n                }\n\n                // If not connected to the custom ticker, add the update frame function to it\n                if (!this._isConnectedToTicker)\n                {\n                    Ticker.shared.add(this.updateFrame, this);\n                    this._isConnectedToTicker = true;\n                    // Reset the time until the next update\n                    this._msToNextUpdate = 0;\n                }\n            }\n        }\n        else\n        {\n            // If automatic updating is disabled or the source isn't playing, perform cleanup\n\n            // Cancel any existing video frame callback request\n            if (this._videoFrameRequestCallbackHandle !== null)\n            {\n                this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle);\n                this._videoFrameRequestCallbackHandle = null;\n            }\n\n            // Remove the update frame function from the custom ticker\n            if (this._isConnectedToTicker)\n            {\n                Ticker.shared.remove(this.updateFrame, this);\n                this._isConnectedToTicker = false;\n                // Reset the time until the next update\n                this._msToNextUpdate = 0;\n            }\n        }\n    }\n\n    /**\n     * Map of video MIME types that can't be directly derived from file extensions.\n     * @readonly\n     */\n    public static MIME_TYPES: Dict<string>\n        = {\n            ogv: 'video/ogg',\n            mov: 'video/quicktime',\n            m4v: 'video/mp4',\n        };\n\n    public static test(resource: any): resource is VideoResource\n    {\n        return (globalThis.HTMLVideoElement && resource instanceof HTMLVideoElement)\n            || (globalThis.VideoFrame && resource instanceof VideoFrame);\n    }\n}\n","import { getTestContext } from '../../../gl/shader/program/getTestContext';\n\nlet maxRecommendedTexturesCache: number | null = null;\n\n/**\n * Returns the maximum recommended texture units to use. This uses WebGL1's `MAX_TEXTURE_IMAGE_UNITS`.\n * The response for this is that to get this info via WebGPU, we would need to make a context, which\n * would make this function async, and we want to avoid that.\n * @private\n * @returns {number} The maximum recommended texture units to use.\n */\nexport function maxRecommendedTextures(): number\n{\n    if (maxRecommendedTexturesCache) return maxRecommendedTexturesCache;\n\n    const gl = getTestContext();\n\n    maxRecommendedTexturesCache = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n\n    return maxRecommendedTexturesCache;\n}\n","import { Cache } from '../../../../../assets/cache/Cache';\nimport { extensions, ExtensionType } from '../../../../../extensions/Extensions';\nimport { TextureSource } from '../sources/TextureSource';\nimport { Texture } from '../Texture';\n\nimport type { TypedArray } from '../../buffer/Buffer';\nimport type { BufferSourceOptions } from '../sources/BufferImageSource';\nimport type { ImageResource } from '../sources/ImageSource';\nimport type { TextureSourceOptions } from '../sources/TextureSource';\nimport type { TextureSourceLike } from '../Texture';\n\ninterface TextureSourceConstructor<T extends TextureSource = TextureSource>\n{\n    new (options: TextureSourceOptions): T;\n    test(options: ImageResource | TypedArray | ArrayBuffer): boolean;\n}\n\nconst sources: TextureSourceConstructor[] = [];\n\nextensions.handleByList(ExtensionType.TextureSource, sources);\n\nexport type TextureResourceOrOptions =\n  ImageResource\n  | TextureSourceOptions<ImageResource>\n  | BufferSourceOptions;\n\nexport function autoDetectSource(options: TextureResourceOrOptions = {}): TextureSource\n{\n    const hasResource = options && (options as TextureSourceOptions).resource;\n    const res = hasResource ? (options as TextureSourceOptions).resource : options;\n    const opts = hasResource ? options as TextureSourceOptions : { resource: options } as TextureSourceOptions;\n\n    for (let i = 0; i < sources.length; i++)\n    {\n        const Source = sources[i];\n\n        if (Source.test(res))\n        {\n            return new Source(opts);\n        }\n    }\n\n    throw new Error(`Could not find a source type for resource: ${opts.resource}`);\n}\n\nexport function resourceToTexture(\n    options: TextureResourceOrOptions = {},\n    skipCache = false\n): Texture\n{\n    const hasResource = options && (options as TextureSourceOptions).resource;\n    const resource = hasResource ? (options as TextureSourceOptions).resource : options;\n    const opts = hasResource ? options as TextureSourceOptions : { resource: options } as TextureSourceOptions;\n\n    if (!skipCache && Cache.has(resource))\n    {\n        return Cache.get(resource);\n    }\n\n    const texture = new Texture({ source: autoDetectSource(opts) });\n\n    texture.on('destroy', () =>\n    {\n        if (Cache.has(resource))\n        {\n            Cache.remove(resource);\n        }\n    });\n\n    if (!skipCache)\n    {\n        Cache.set(resource, texture);\n    }\n\n    return texture;\n}\n\n/**\n * Helper function that creates a returns Texture based on the source you provide.\n * The source should be loaded and ready to go. If not its best to grab the asset using Assets.\n * @param id - String or Source to create texture from\n * @param skipCache - Skip adding the texture to the cache\n * @returns The texture based on the Id provided\n */\nexport function textureFrom(id: TextureSourceLike, skipCache = false): Texture\n{\n    if (typeof id === 'string')\n    {\n        return Cache.get(id);\n    }\n    else if (id instanceof TextureSource)\n    {\n        return new Texture({ source: id });\n    }\n\n    // return a auto generated texture from resource\n    return resourceToTexture(id, skipCache);\n}\n\nTexture.from = textureFrom;\n","import { removeItems } from '../../../utils/data/removeItems';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation';\n\nimport type { Container, ContainerChild } from '../Container';\n\nexport interface ChildrenHelperMixin<C = ContainerChild>\n{\n    allowChildren: boolean;\n    addChild<U extends C[]>(...children: U): U[0];\n    removeChild<U extends C[]>(...children: U): U[0];\n    removeChildren(beginIndex?: number, endIndex?: number): C[];\n    removeChildAt<U extends C>(index: number): U;\n    getChildAt<U extends C>(index: number): U;\n    setChildIndex(child: C, index: number): void;\n    getChildIndex(child: C): number;\n    addChildAt<U extends C>(child: U, index: number): U;\n    swapChildren<U extends C>(child: U, child2: U): void;\n    removeFromParent(): void;\n}\n\nexport const childrenHelperMixin: Partial<Container> = {\n\n    allowChildren: true,\n\n    /**\n     * Removes all children from this container that are within the begin and end indexes.\n     * @param beginIndex - The beginning position.\n     * @param endIndex - The ending position. Default value is size of the container.\n     * @returns - List of removed children\n     * @memberof scene.Container#\n     */\n    removeChildren(beginIndex = 0, endIndex?: number): ContainerChild[]\n    {\n        const end = endIndex ?? this.children.length;\n        const range = end - beginIndex;\n        const removed: ContainerChild[] = [];\n\n        if (range > 0 && range <= end)\n        {\n            for (let i = end - 1; i >= beginIndex; i--)\n            {\n                const child = this.children[i];\n\n                if (!child) continue;\n                removed.push(child);\n                child.parent = null;\n            }\n\n            removeItems(this.children, beginIndex, end);\n\n            const renderGroup = this.renderGroup || this.parentRenderGroup;\n\n            if (renderGroup)\n            {\n                renderGroup.removeChildren(removed);\n            }\n\n            for (let i = 0; i < removed.length; ++i)\n            {\n                this.emit('childRemoved', removed[i], this, i);\n                removed[i].emit('removed', this);\n            }\n\n            return removed;\n        }\n        else if (range === 0 && this.children.length === 0)\n        {\n            return removed;\n        }\n\n        throw new RangeError('removeChildren: numeric values are outside the acceptable range.');\n    },\n\n    /**\n     * Removes a child from the specified index position.\n     * @param index - The index to get the child from\n     * @returns The child that was removed.\n     * @memberof scene.Container#\n     */\n    removeChildAt<U extends ContainerChild>(index: number): U\n    {\n        const child = this.getChildAt<U>(index);\n\n        return this.removeChild(child);\n    },\n\n    /**\n     * Returns the child at the specified index\n     * @param index - The index to get the child at\n     * @returns - The child at the given index, if any.\n     * @memberof scene.Container#\n     */\n    getChildAt<U extends ContainerChild>(index: number): U\n    {\n        if (index < 0 || index >= this.children.length)\n        {\n            throw new Error(`getChildAt: Index (${index}) does not exist.`);\n        }\n\n        return this.children[index] as U;\n    },\n\n    /**\n     * Changes the position of an existing child in the container container\n     * @param child - The child Container instance for which you want to change the index number\n     * @param index - The resulting index number for the child container\n     * @memberof scene.Container#\n     */\n    setChildIndex(child: ContainerChild, index: number): void\n    {\n        if (index < 0 || index >= this.children.length)\n        {\n            throw new Error(`The index ${index} supplied is out of bounds ${this.children.length}`);\n        }\n\n        this.getChildIndex(child); // check if child exists\n        this.addChildAt(child, index);\n    },\n\n    /**\n     * Returns the index position of a child Container instance\n     * @param child - The Container instance to identify\n     * @returns - The index position of the child container to identify\n     * @memberof scene.Container#\n     */\n    getChildIndex(child: ContainerChild): number\n    {\n        const index = this.children.indexOf(child);\n\n        if (index === -1)\n        {\n            throw new Error('The supplied Container must be a child of the caller');\n        }\n\n        return index;\n    },\n\n    /**\n     * Adds a child to the container at a specified index. If the index is out of bounds an error will be thrown.\n     * If the child is already in this container, it will be moved to the specified index.\n     * @param {Container} child - The child to add.\n     * @param {number} index - The absolute index where the child will be positioned at the end of the operation.\n     * @returns {Container} The child that was added.\n     * @memberof scene.Container#\n     */\n    addChildAt<U extends ContainerChild>(child: U, index: number): U\n    {\n        // #if _DEBUG\n        if (!this.allowChildren)\n        {\n            deprecation(v8_0_0, 'addChildAt: Only Containers will be allowed to add children in v8.0.0');\n        }\n        // #endif\n\n        const { children } = this;\n\n        if (index < 0 || index > children.length)\n        {\n            throw new Error(`${child}addChildAt: The index ${index} supplied is out of bounds ${children.length}`);\n        }\n\n        // TODO - check if child is already in the list?\n        // we should be able to optimise this!\n\n        if (child.parent)\n        {\n            const currentIndex = child.parent.children.indexOf(child);\n\n            // If this child is in the container and in the same position, do nothing\n            if (child.parent === this && currentIndex === index)\n            {\n                return child;\n            }\n\n            if (currentIndex !== -1)\n            {\n                child.parent.children.splice(currentIndex, 1);\n            }\n        }\n\n        if (index === children.length)\n        {\n            children.push(child);\n        }\n        else\n        {\n            children.splice(index, 0, child);\n        }\n\n        child.parent = this;\n        child.didChange = true;\n        child.didViewUpdate = false;\n        child._updateFlags = 0b1111;\n\n        const renderGroup = this.renderGroup || this.parentRenderGroup;\n\n        if (renderGroup)\n        {\n            renderGroup.addChild(child);\n        }\n\n        if (this.sortableChildren) this.sortDirty = true;\n\n        this.emit('childAdded', child, this, index);\n        child.emit('added', this);\n\n        return child;\n    },\n    /**\n     * Swaps the position of 2 Containers within this container.\n     * @param child - First container to swap\n     * @param child2 - Second container to swap\n     */\n    swapChildren<U extends ContainerChild>(child: U, child2: U): void\n    {\n        if (child === child2)\n        {\n            return;\n        }\n\n        const index1 = this.getChildIndex(child);\n        const index2 = this.getChildIndex(child2);\n\n        this.children[index1] = child2;\n        this.children[index2] = child;\n    },\n    /**\n     * Remove the Container from its parent Container. If the Container has no parent, do nothing.\n     * @memberof scene.Container#\n     */\n    removeFromParent()\n    {\n        this.parent?.removeChild(this);\n    }\n} as Container;\n","import { extensions, ExtensionType } from '../../extensions/Extensions';\nimport { BigPool } from '../../utils/pool/PoolGroup';\n\nimport type { Effect, EffectConstructor } from '../../scene/container/Effect';\nimport type { PoolItem, PoolItemConstructor } from '../../utils/pool/Pool';\n\ninterface MaskConversionTest\n{\n    test: (item: any) => boolean;\n    maskClass: new (item: any) => Effect & PoolItem;\n}\n\nexport type MaskEffect = {mask: unknown} & Effect;\n\n/**\n * A class that manages the conversion of masks to mask effects.\n * @memberof rendering\n * @ignore\n */\nexport class MaskEffectManagerClass\n{\n    /**\n     * @private\n     */\n    public readonly _effectClasses: EffectConstructor[] = [];\n    private readonly _tests: MaskConversionTest[] = [];\n    private _initialized = false;\n\n    public init()\n    {\n        if (this._initialized) return;\n\n        this._initialized = true;\n\n        this._effectClasses.forEach((test) =>\n        {\n            this.add({\n                test: test.test,\n                maskClass: test\n            });\n        });\n    }\n\n    public add(test: MaskConversionTest)\n    {\n        this._tests.push(test);\n    }\n\n    public getMaskEffect(item: any): MaskEffect\n    {\n        if (!this._initialized) this.init();\n\n        for (let i = 0; i < this._tests.length; i++)\n        {\n            const test = this._tests[i];\n\n            if (test.test(item))\n            {\n                return BigPool.get(test.maskClass as PoolItemConstructor<MaskEffect & PoolItem>, item);\n            }\n        }\n\n        return item;\n    }\n\n    public returnMaskEffect(effect: Effect & PoolItem)\n    {\n        BigPool.return(effect);\n    }\n}\n\nexport const MaskEffectManager = new MaskEffectManagerClass();\n\n// Handle registration of extensions\nextensions\n    .handleByList(ExtensionType.MaskEffect, MaskEffectManager._effectClasses);\n","import { FilterEffect } from '../../../filters/FilterEffect';\nimport { MaskEffectManager } from '../../../rendering/mask/MaskEffectManager';\n\nimport type { Filter } from '../../../filters/Filter';\nimport type { Rectangle } from '../../../maths/shapes/Rectangle';\nimport type { MaskEffect } from '../../../rendering/mask/MaskEffectManager';\nimport type { Container } from '../Container';\nimport type { Effect } from '../Effect';\n\nexport interface EffectsMixinConstructor\n{\n    mask?: number | Container | null;\n    filters?: Filter | Filter[];\n}\nexport interface EffectsMixin extends Required<EffectsMixinConstructor>\n{\n    _maskEffect?: MaskEffect;\n    _filterEffect?: FilterEffect,\n\n    filterArea?: Rectangle,\n    effects?: Effect[];\n\n    addEffect(effect: Effect): void;\n    removeEffect(effect: Effect): void;\n}\n\nexport const effectsMixin: Partial<Container> = {\n    _maskEffect: null,\n    _filterEffect: null,\n\n    /**\n     * @todo Needs docs.\n     * @memberof scene.Container#\n     * @type {Array<Effect>}\n     */\n    effects: [],\n\n    /**\n     * @todo Needs docs.\n     * @param effect - The effect to add.\n     * @memberof scene.Container#\n     * @ignore\n     */\n    addEffect(effect: Effect)\n    {\n        const index = this.effects.indexOf(effect);\n\n        if (index !== -1) return; // already exists!\n\n        this.effects.push(effect);\n\n        this.effects.sort((a, b) => a.priority - b.priority);\n\n        const renderGroup = this.renderGroup || this.parentRenderGroup;\n\n        if (renderGroup)\n        {\n            renderGroup.structureDidChange = true;\n        }\n\n        // if (this.renderGroup)\n        // {\n        //     this.renderGroup.structureDidChange = true;\n        // }\n\n        this._updateIsSimple();\n    },\n    /**\n     * @todo Needs docs.\n     * @param effect - The effect to remove.\n     * @memberof scene.Container#\n     * @ignore\n     */\n    removeEffect(effect: Effect)\n    {\n        const index = this.effects.indexOf(effect);\n\n        if (index === -1) return; // already exists!\n\n        this.effects.splice(index, 1);\n\n        if (this.parentRenderGroup)\n        {\n            this.parentRenderGroup.structureDidChange = true;\n        }\n\n        this._updateIsSimple();\n    },\n\n    set mask(value: number | Container | null)\n    {\n        const effect = this._maskEffect;\n\n        if (effect?.mask === value) return;\n\n        if (effect)\n        {\n            this.removeEffect(effect);\n\n            MaskEffectManager.returnMaskEffect(effect);\n\n            this._maskEffect = null;\n        }\n\n        if (value === null || value === undefined) return;\n\n        this._maskEffect = MaskEffectManager.getMaskEffect(value);\n\n        this.addEffect(this._maskEffect);\n    },\n\n    /**\n     * Sets a mask for the displayObject. A mask is an object that limits the visibility of an\n     * object to the shape of the mask applied to it. In PixiJS a regular mask must be a\n     * {@link Graphics} or a {@link Sprite} object. This allows for much faster masking in canvas as it\n     * utilities shape clipping. Furthermore, a mask of an object must be in the subtree of its parent.\n     * Otherwise, `getLocalBounds` may calculate incorrect bounds, which makes the container's width and height wrong.\n     * To remove a mask, set this property to `null`.\n     *\n     * For sprite mask both alpha and red channel are used. Black mask is the same as transparent mask.\n     * @example\n     * import { Graphics, Sprite } from 'pixi.js';\n     *\n     * const graphics = new Graphics();\n     * graphics.beginFill(0xFF3300);\n     * graphics.drawRect(50, 250, 100, 100);\n     * graphics.endFill();\n     *\n     * const sprite = new Sprite(texture);\n     * sprite.mask = graphics;\n     * @memberof scene.Container#\n     */\n    get mask(): unknown\n    {\n        return this._maskEffect?.mask;\n    },\n\n    set filters(value: Filter | Filter[] | null | undefined)\n    {\n        if (!Array.isArray(value) && value) value = [value];\n\n        const effect = this._filterEffect ||= new FilterEffect();\n\n        // Ignore the Filter type\n        value = value as Filter[] | null | undefined;\n\n        const hasFilters = value?.length > 0;\n        const hadFilters = effect.filters?.length > 0;\n\n        const didChange = hasFilters !== hadFilters;\n\n        // Clone the filters array so we don't freeze the user-input\n        value = Array.isArray(value) ? value.slice(0) : value;\n\n        // Ensure filters are immutable via filters getter\n        effect.filters = Object.freeze(value);\n\n        if (didChange)\n        {\n            if (hasFilters)\n            {\n                this.addEffect(effect);\n            }\n            else\n            {\n                this.removeEffect(effect);\n\n                // sets the empty array...\n                effect.filters = value ?? null;\n            }\n        }\n    },\n\n    /**\n     * Sets the filters for the displayObject.\n     * IMPORTANT: This is a WebGL only feature and will be ignored by the canvas renderer.\n     * To remove filters simply set this property to `'null'`.\n     * @memberof scene.Container#\n     */\n    get filters(): readonly Filter[]\n    {\n        return this._filterEffect?.filters;\n    },\n\n    set filterArea(value: Rectangle)\n    {\n        this._filterEffect ||= new FilterEffect();\n\n        this._filterEffect.filterArea = value;\n    },\n\n    /**\n     * The area the filter is applied to. This is used as more of an optimization\n     * rather than figuring out the dimensions of the displayObject each frame you can set this rectangle.\n     *\n     * Also works as an interaction mask.\n     * @memberof scene.Container#\n     */\n    get filterArea(): Rectangle\n    {\n        return this._filterEffect?.filterArea;\n    },\n\n} as Container;\n","import { deprecation, v8_0_0 } from '../../../utils/logging/deprecation';\n\nimport type { Container } from '../Container';\n\nexport interface FindMixinConstructor\n{\n    label?: string;\n}\nexport interface FindMixin extends Required<FindMixinConstructor>\n{\n    /**\n     * @deprecated since 8.0.0\n     * @see Container#label\n     */\n    name: string;\n    getChildByName(label: RegExp | string, deep?: boolean): Container | null;\n    getChildByLabel(label: RegExp | string, deep?: boolean): Container | null;\n    getChildrenByLabel(label: RegExp | string, deep?: boolean, out?: Container[]): Container[];\n}\n\nexport const findMixin: Partial<Container> = {\n    /**\n     * The instance label of the object.\n     * @memberof scene.Container#\n     * @member {string} label\n     */\n    label: null,\n\n    /**\n     * The instance name of the object.\n     * @deprecated since 8.0.0\n     * @see scene.Container#label\n     * @member {string} name\n     * @memberof scene.Container#\n     */\n    get name(): string\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'Container.name property has been removed, use Container.label instead');\n        // #endif\n\n        return this.label;\n    },\n    set name(value: string)\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'Container.name property has been removed, use Container.label instead');\n        // #endif\n\n        this.label = value;\n    },\n\n    /**\n     * @method getChildByName\n     * @deprecated since 8.0.0\n     * @param {string} name - Instance name.\n     * @param {boolean}[deep=false] - Whether to search recursively\n     * @returns {Container} The child with the specified name.\n     * @see scene.Container#getChildByLabel\n     * @memberof scene.Container#\n     */\n    getChildByName(name: string, deep = false): Container | null\n    {\n        return this.getChildByLabel(name, deep);\n    },\n    /**\n     * Returns the first child in the container with the specified label.\n     *\n     * Recursive searches are done in a pre-order traversal.\n     * @memberof scene.Container#\n     * @param {string|RegExp} label - Instance label.\n     * @param {boolean}[deep=false] - Whether to search recursively\n     * @returns {Container} The child with the specified label.\n     */\n    getChildByLabel(label: string | RegExp, deep = false): Container | null\n    {\n        const children = this.children;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            const child = children[i];\n\n            if (child.label === label || (label instanceof RegExp && label.test(child.label))) return child;\n        }\n\n        if (deep)\n        {\n            for (let i = 0; i < children.length; i++)\n            {\n                const child = children[i];\n                const found = child.getChildByLabel(label, true);\n\n                if (found)\n                {\n                    return found;\n                }\n            }\n        }\n\n        return null;\n    },\n\n    /**\n     * Returns all children in the container with the specified label.\n     * @memberof scene.Container#\n     * @param {string|RegExp} label - Instance label.\n     * @param {boolean}[deep=false] - Whether to search recursively\n     * @param {Container[]} [out=[]] - The array to store matching children in.\n     * @returns {Container[]} An array of children with the specified label.\n     */\n    getChildrenByLabel(label: string | RegExp, deep = false, out = []): Container[]\n    {\n        const children = this.children;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            const child = children[i];\n\n            if (child.label === label || (label instanceof RegExp && label.test(child.label)))\n            {\n                out.push(child);\n            }\n        }\n\n        if (deep)\n        {\n            for (let i = 0; i < children.length; i++)\n            {\n                children[i].getChildrenByLabel(label, true, out);\n            }\n        }\n\n        return out;\n    },\n} as Container;\n","import type { Container } from '../Container';\n\n/**\n * This function will crawl through the container essentially check if the children have changed.\n *\n * This function checkChildrenDidChange recursively checks if any child in a Container\n * or its children has changed. It does this by comparing a generated changeId for each\n * child against a stored value in previousData.\n * The changeId is a combination of the child's uid and _didChangeId, bitwise manipulated for uniqueness.\n * If a change is detected, it updates previousData and sets didChange to true.\n * The function returns a boolean indicating if any change was detected in the entire hierarchy of children.\n * @param container - the container to check for changes\n * @param previousData - the previous data from the last check made\n * @param previousData.data - the data array\n * @param previousData.index - the index of the data array\n * @param previousData.didChange - did the data change\n */\nexport function checkChildrenDidChange(\n    container: Container,\n    previousData: {\n        data: number[];\n        index: number;\n        didChange: boolean;\n    })\n{\n    const children = container.children;\n\n    for (let i = 0; i < children.length; i++)\n    {\n        const child = children[i];\n\n        const changeId = ((child.uid & 255) << 24)\n            | (child._didChangeId & 16777215);\n\n        if (previousData.data[previousData.index] !== changeId)\n        {\n            previousData.data[previousData.index] = changeId;\n\n            previousData.didChange = true;\n        }\n\n        previousData.index++;\n\n        if (child.children.length)\n        {\n            checkChildrenDidChange(child, previousData);\n        }\n    }\n\n    return previousData.didChange;\n}\n","import { Matrix } from '../../../maths/matrix/Matrix';\nimport { Bounds } from '../bounds/Bounds';\nimport { getGlobalBounds } from '../bounds/getGlobalBounds';\nimport { getLocalBounds } from '../bounds/getLocalBounds';\nimport { checkChildrenDidChange } from '../utils/checkChildrenDidChange';\n\nimport type { Size } from '../../../maths/misc/Size';\nimport type { Container } from '../Container';\n\nexport type Optional<T, K extends keyof T> = Omit<T, K> & Partial<Pick<T, K>>;\n\nexport interface MeasureMixinConstructor\n{\n    width?: number;\n    height?: number;\n}\nexport interface MeasureMixin extends Required<MeasureMixinConstructor>\n{\n    getSize(out?: Size): Size;\n    setSize(width: number, height?: number): void;\n    setSize(value: Optional<Size, 'height'>): void;\n    getLocalBounds(bounds?: Bounds): Bounds;\n    getBounds(skipUpdate?: boolean, bounds?: Bounds): Bounds;\n    _localBoundsCacheData: LocalBoundsCacheData;\n    _localBoundsCacheId: number;\n    _setWidth(width: number, localWidth: number): void;\n    _setHeight(height: number, localHeight: number): void;\n}\n\ninterface LocalBoundsCacheData\n{\n    data: number[];\n    index: number;\n    didChange: boolean;\n    localBounds: Bounds;\n}\n\nconst tempMatrix = new Matrix();\n\nexport const measureMixin: Partial<Container> = {\n\n    _localBoundsCacheId: -1,\n    _localBoundsCacheData: null,\n\n    _setWidth(value: number, localWidth: number)\n    {\n        const sign = Math.sign(this.scale.x) || 1;\n\n        if (localWidth !== 0)\n        {\n            this.scale.x = (value / localWidth) * sign;\n        }\n        else\n        {\n            this.scale.x = sign;\n        }\n    },\n\n    _setHeight(value: number, localHeight: number)\n    {\n        const sign = Math.sign(this.scale.y) || 1;\n\n        if (localHeight !== 0)\n        {\n            this.scale.y = (value / localHeight) * sign;\n        }\n        else\n        {\n            this.scale.y = sign;\n        }\n    },\n\n    /**\n     * Retrieves the local bounds of the container as a Bounds object.\n     * @returns - The bounding area.\n     * @memberof scene.Container#\n     */\n    getLocalBounds(): Bounds\n    {\n        if (!this._localBoundsCacheData)\n        {\n            this._localBoundsCacheData = {\n                data: [],\n                index: 1,\n                didChange: false,\n                localBounds: new Bounds()\n            };\n        }\n\n        const localBoundsCacheData = this._localBoundsCacheData;\n\n        localBoundsCacheData.index = 1;\n        localBoundsCacheData.didChange = false;\n\n        if (localBoundsCacheData.data[0] !== this._didChangeId >> 12)\n        {\n            localBoundsCacheData.didChange = true;\n            localBoundsCacheData.data[0] = this._didChangeId >> 12;\n        }\n\n        checkChildrenDidChange(this, localBoundsCacheData);\n\n        if (localBoundsCacheData.didChange)\n        {\n            getLocalBounds(this, localBoundsCacheData.localBounds, tempMatrix);\n        }\n\n        return localBoundsCacheData.localBounds;\n    },\n\n    /**\n     * Calculates and returns the (world) bounds of the display object as a [Rectangle]{@link Rectangle}.\n     * @param skipUpdate - Setting to `true` will stop the transforms of the scene graph from\n     *  being updated. This means the calculation returned MAY be out of date BUT will give you a\n     *  nice performance boost.\n     * @param bounds - Optional bounds to store the result of the bounds calculation.\n     * @returns - The minimum axis-aligned rectangle in world space that fits around this object.\n     * @memberof scene.Container#\n     */\n    getBounds(skipUpdate?: boolean, bounds?: Bounds): Bounds\n    {\n        return getGlobalBounds(this, skipUpdate, bounds || new Bounds());\n    },\n} as Container;\n","import type { Container } from '../Container';\n\nexport interface OnRenderMixinConstructor\n{\n    onRender?: (() => void | null);\n}\nexport interface OnRenderMixin extends Required<OnRenderMixinConstructor>\n{\n    _onRender: (() => void) | null;\n}\n\nexport const onRenderMixin: Partial<Container> = {\n    _onRender: null,\n\n    set onRender(func: () => void)\n    {\n        const renderGroup = this.renderGroup || this.parentRenderGroup;\n\n        if (!func)\n        {\n            if (this._onRender)\n            {\n                renderGroup?.removeOnRender(this);\n            }\n\n            this._onRender = null;\n\n            return;\n        }\n\n        if (!this._onRender)\n        {\n            renderGroup?.addOnRender(this);\n        }\n\n        this._onRender = func;\n    },\n\n    /**\n     * This callback is used when the container is rendered. This is where you should add your custom\n     * logic that is needed to be run every frame.\n     *\n     * In v7 many users used `updateTransform` for this, however the way v8 renders objects is different\n     * and \"updateTransform\" is no longer called every frame\n     * @example\n     * const container = new Container();\n     * container.onRender = () => {\n     *    container.rotation += 0.01;\n     * };\n     * @memberof scene.Container#\n     */\n    get onRender(): () => void\n    {\n        return this._onRender;\n    }\n} as Container;\n","import type { Container } from '../Container';\n\nexport interface SortMixinConstructor\n{\n    zIndex?: number;\n    sortDirty?: boolean;\n    sortableChildren?: boolean;\n}\nexport interface SortMixin extends Required<SortMixinConstructor>\n{\n    _zIndex: number;\n\n    sortChildren: () => void;\n    depthOfChildModified: () => void;\n}\n\nexport const sortMixin: Partial<Container> = {\n    _zIndex: 0,\n    /**\n     * Should children be sorted by zIndex at the next render call.\n     *\n     * Will get automatically set to true if a new child is added, or if a child's zIndex changes.\n     * @type {boolean}\n     * @memberof scene.Container#\n     */\n    sortDirty: false,\n    /**\n     * If set to true, the container will sort its children by `zIndex` value\n     * when the next render is called, or manually if `sortChildren()` is called.\n     *\n     * This actually changes the order of elements in the array, so should be treated\n     * as a basic solution that is not performant compared to other solutions,\n     * such as {@link https://github.com/pixijs/layers PixiJS Layers}\n     *\n     * Also be aware of that this may not work nicely with the `addChildAt()` function,\n     * as the `zIndex` sorting may cause the child to automatically sorted to another position.\n     * @type {boolean}\n     * @memberof scene.Container#\n     */\n    sortableChildren: false,\n\n    /**\n     * The zIndex of the container.\n     *\n     * Setting this value, will automatically set the parent to be sortable. Children will be automatically\n     * sorted by zIndex value; a higher value will mean it will be moved towards the end of the array,\n     * and thus rendered on top of other display objects within the same container.\n     * @see scene.Container#sortableChildren\n     * @memberof scene.Container#\n     */\n    get zIndex()\n    {\n        return this._zIndex;\n    },\n\n    set zIndex(value: number)\n    {\n        if (this._zIndex === value) return;\n\n        this._zIndex = value;\n\n        this.depthOfChildModified();\n    },\n\n    depthOfChildModified()\n    {\n        if (this.parent)\n        {\n            this.parent.sortableChildren = true;\n            this.parent.sortDirty = true;\n        }\n\n        if (this.parentRenderGroup)\n        {\n            this.parentRenderGroup.structureDidChange = true;\n        }\n    },\n\n    /**\n     * Sorts children by zIndex.\n     * @memberof scene.Container#\n     */\n    sortChildren()\n    {\n        if (!this.sortDirty) return;\n\n        this.sortDirty = false;\n\n        this.children.sort(sortChildren);\n    },\n} as Container;\n\nfunction sortChildren(a: Container, b: Container): number\n{\n    return a._zIndex - b._zIndex;\n}\n","import { Matrix } from '../../../maths/matrix/Matrix';\nimport { Point } from '../../../maths/point/Point';\nimport { updateTransformBackwards } from '../bounds/getGlobalBounds';\n\nimport type { PointData } from '../../../maths/point/PointData';\nimport type { Container } from '../Container';\n\nexport interface ToLocalGlobalMixin\n{\n    getGlobalPosition(point?: Point, skipUpdate?: boolean): Point;\n    toGlobal<P extends PointData = Point>(position: PointData, point?: P, skipUpdate?: boolean): P;\n    toLocal<P extends PointData = Point>(position: PointData, from?: Container, point?: P, skipUpdate?: boolean): P;\n}\n\nexport const toLocalGlobalMixin: Partial<Container> = {\n    /**\n     * Returns the global position of the container.\n     * @param point - The optional point to write the global value to.\n     * @param skipUpdate - Should we skip the update transform.\n     * @returns - The updated point.\n     * @memberof scene.Container#\n     */\n    getGlobalPosition(point: Point = new Point(), skipUpdate = false): Point\n    {\n        if (this.parent)\n        {\n            this.parent.toGlobal(this._position, point, skipUpdate);\n        }\n        else\n        {\n            point.x = this._position.x;\n            point.y = this._position.y;\n        }\n\n        return point;\n    },\n\n    /**\n     * Calculates the global position of the container.\n     * @param position - The world origin to calculate from.\n     * @param point - A Point object in which to store the value, optional\n     *  (otherwise will create a new Point).\n     * @param skipUpdate - Should we skip the update transform.\n     * @returns - A point object representing the position of this object.\n     * @memberof scene.Container#\n     */\n    toGlobal<P extends PointData = Point>(position: PointData, point?: P, skipUpdate = false): P\n    {\n        if (!skipUpdate)\n        {\n            this.updateLocalTransform();\n\n            const globalMatrix = updateTransformBackwards(this, new Matrix());\n\n            globalMatrix.append(this.localTransform);\n\n            return globalMatrix.apply<P>(position, point);\n        }\n\n        // simply apply the matrix..\n        return this.worldTransform.apply<P>(position, point);\n    },\n\n    /**\n     * Calculates the local position of the container relative to another point.\n     * @param position - The world origin to calculate from.\n     * @param from - The Container to calculate the global position from.\n     * @param point - A Point object in which to store the value, optional\n     *  (otherwise will create a new Point).\n     * @param skipUpdate - Should we skip the update transform\n     * @returns - A point object representing the position of this object\n     * @memberof scene.Container#\n     */\n    toLocal<P extends PointData = Point>(position: PointData, from?: Container, point?: P, skipUpdate?: boolean): P\n    {\n        if (from)\n        {\n            position = from.toGlobal(position, point, skipUpdate);\n        }\n\n        if (!skipUpdate)\n        {\n            this.updateLocalTransform();\n\n            const globalMatrix = updateTransformBackwards(this, new Matrix());\n\n            globalMatrix.append(this.localTransform);\n\n            return globalMatrix.applyInverse<P>(position, point);\n        }\n\n        // simply apply the matrix..\n        return this.worldTransform.applyInverse<P>(position, point);\n    }\n} as Container;\n","import { Matrix } from '../../maths/matrix/Matrix';\nimport { InstructionSet } from '../../rendering/renderers/shared/instructions/InstructionSet';\n\nimport type { Instruction } from '../../rendering/renderers/shared/instructions/Instruction';\nimport type { Container } from './Container';\n\n/**\n * The render group is the base class for all render groups\n * It is used to render a group of containers together\n * @memberof rendering\n */\nexport class RenderGroup implements Instruction\n{\n    public renderPipeId = 'renderGroup';\n    public root: Container = null;\n\n    public canBundle = false;\n\n    public renderGroupParent: RenderGroup = null;\n    public renderGroupChildren: RenderGroup[] = [];\n\n    public worldTransform: Matrix = new Matrix();\n    public worldColorAlpha = 0xffffffff;\n    public worldColor = 0xffffff;\n    public worldAlpha = 1;\n\n    // these updates are transform changes..\n    public readonly childrenToUpdate: Record<number, { list: Container[]; index: number; }> = Object.create(null);\n    public updateTick = 0;\n\n    // these update are renderable changes..\n    public readonly childrenRenderablesToUpdate: { list: Container[]; index: number; } = { list: [], index: 0 };\n\n    // other\n    public structureDidChange = true;\n\n    public instructionSet: InstructionSet = new InstructionSet();\n\n    private readonly _onRenderContainers: Container[] = [];\n\n    constructor(root: Container)\n    {\n        this.root = root;\n\n        if (root._onRender) this.addOnRender(root);\n\n        root.didChange = true;\n\n        const children = root.children;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            this.addChild(children[i]);\n        }\n    }\n\n    get localTransform()\n    {\n        return this.root.localTransform;\n    }\n\n    public addRenderGroupChild(renderGroupChild: RenderGroup)\n    {\n        if (renderGroupChild.renderGroupParent)\n        {\n            renderGroupChild.renderGroupParent._removeRenderGroupChild(renderGroupChild);\n        }\n\n        renderGroupChild.renderGroupParent = this;\n\n        this.renderGroupChildren.push(renderGroupChild);\n    }\n\n    private _removeRenderGroupChild(renderGroupChild: RenderGroup)\n    {\n        const index = this.renderGroupChildren.indexOf(renderGroupChild);\n\n        if (index > -1)\n        {\n            this.renderGroupChildren.splice(index, 1);\n        }\n\n        renderGroupChild.renderGroupParent = null;\n    }\n\n    public addChild(child: Container)\n    {\n        this.structureDidChange = true;\n\n        child.parentRenderGroup = this;\n\n        child.updateTick = -1;\n\n        if (child.parent === this.root)\n        {\n            child.relativeRenderGroupDepth = 1;\n        }\n        else\n        {\n            child.relativeRenderGroupDepth = child.parent.relativeRenderGroupDepth + 1;\n        }\n\n        child.didChange = true;\n        this.onChildUpdate(child);\n\n        if (child.renderGroup)\n        {\n            this.addRenderGroupChild(child.renderGroup);\n\n            return;\n        }\n\n        if (child._onRender) this.addOnRender(child);\n\n        const children = child.children;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            this.addChild(children[i]);\n        }\n    }\n\n    public removeChild(child: Container)\n    {\n        // remove all the children...\n        this.structureDidChange = true;\n\n        if (child._onRender)\n        {\n            // Remove the child to the onRender list under the following conditions:\n            // 1. If the child is not a render group.\n            // 2. If the child is a render group root of this render group - which it can't be removed from in this case.\n            if (!child.renderGroup)\n            {\n                this.removeOnRender(child);\n            }\n        }\n\n        child.parentRenderGroup = null;\n\n        if (child.renderGroup)\n        {\n            this._removeRenderGroupChild(child.renderGroup);\n\n            return;\n        }\n\n        const children = child.children;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            this.removeChild(children[i]);\n        }\n    }\n\n    public removeChildren(children: Container[])\n    {\n        for (let i = 0; i < children.length; i++)\n        {\n            this.removeChild(children[i]);\n        }\n    }\n\n    public onChildUpdate(child: Container)\n    {\n        let childrenToUpdate = this.childrenToUpdate[child.relativeRenderGroupDepth];\n\n        if (!childrenToUpdate)\n        {\n            childrenToUpdate = this.childrenToUpdate[child.relativeRenderGroupDepth] = {\n                index: 0,\n                list: [],\n            };\n        }\n\n        childrenToUpdate.list[childrenToUpdate.index++] = child;\n    }\n\n    // SHOULD THIS BE HERE?\n    public updateRenderable(container: Container)\n    {\n        // only update if its visible!\n        if (container.globalDisplayStatus < 0b111) return;\n\n        container.didViewUpdate = false;\n        // actually updates the renderable..\n        this.instructionSet.renderPipes[container.renderPipeId].updateRenderable(container);\n    }\n\n    public onChildViewUpdate(child: Container)\n    {\n        this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++] = child;\n    }\n\n    get isRenderable(): boolean\n    {\n        return (this.root.localDisplayStatus === 0b111 && this.worldAlpha > 0);\n    }\n\n    /**\n     * adding a container to the onRender list will make sure the user function\n     * passed in to the user defined 'onRender` callBack\n     * @param container - the container to add to the onRender list\n     */\n    public addOnRender(container: Container)\n    {\n        this._onRenderContainers.push(container);\n    }\n\n    public removeOnRender(container: Container)\n    {\n        this._onRenderContainers.splice(this._onRenderContainers.indexOf(container), 1);\n    }\n\n    public runOnRender()\n    {\n        for (let i = 0; i < this._onRenderContainers.length; i++)\n        {\n            this._onRenderContainers[i]._onRender();\n        }\n    }\n\n    public destroy()\n    {\n        this.renderGroupParent = null;\n        this.root = null;\n        (this.childrenRenderablesToUpdate as any) = null;\n        (this.childrenToUpdate as any) = null;\n        (this.renderGroupChildren as any) = null;\n        (this._onRenderContainers as any) = null;\n        this.instructionSet = null;\n    }\n\n    public getChildren(out: Container[] = []): Container[]\n    {\n        const children = this.root.children;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            this._getChildren(children[i], out);\n        }\n\n        return out;\n    }\n\n    private _getChildren(container: Container, out: Container[] = []): Container[]\n    {\n        out.push(container);\n\n        if (container.renderGroup) return out;\n\n        const children = container.children;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            this._getChildren(children[i], out);\n        }\n\n        return out;\n    }\n}\n","import EventEmitter from 'eventemitter3';\nimport { Color, type ColorSource } from '../../color/Color';\nimport { cullingMixin } from '../../culling/cullingMixin';\nimport { Matrix } from '../../maths/matrix/Matrix';\nimport { DEG_TO_RAD, RAD_TO_DEG } from '../../maths/misc/const';\nimport { ObservablePoint } from '../../maths/point/ObservablePoint';\nimport { uid } from '../../utils/data/uid';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\nimport { childrenHelperMixin } from './container-mixins/childrenHelperMixin';\nimport { effectsMixin } from './container-mixins/effectsMixin';\nimport { findMixin } from './container-mixins/findMixin';\nimport { measureMixin } from './container-mixins/measureMixin';\nimport { onRenderMixin } from './container-mixins/onRenderMixin';\nimport { sortMixin } from './container-mixins/sortMixin';\nimport { toLocalGlobalMixin } from './container-mixins/toLocalGlobalMixin';\nimport { RenderGroup } from './RenderGroup';\nimport { assignWithIgnore } from './utils/assignWithIgnore';\n\nimport type { Size } from '../../maths/misc/Size';\nimport type { PointData } from '../../maths/point/PointData';\nimport type { Rectangle } from '../../maths/shapes/Rectangle';\nimport type { BLEND_MODES } from '../../rendering/renderers/shared/state/const';\nimport type { Dict } from '../../utils/types';\nimport type { Optional } from './container-mixins/measureMixin';\nimport type { DestroyOptions } from './destroyTypes';\n\nexport type ContainerChild = Container;\n\n/**\n * This is where you'll find all the display objects available in Pixi.\n *\n * All display objects inherit from the {@link scene.Container} class. You can use a `Container` for simple grouping of\n * other display objects. Here's all the available display object classes.\n *\n * - {@link scene.Container} is the base class for all display objects that act as a container for other objects.\n *   - {@link scene.Sprite} is a display object that uses a texture\n *      - {@link scene.AnimatedSprite} is a sprite that can play animations\n *   - {@link scene.TilingSprite} a fast way of rendering a tiling image\n *   - {@link scene.NineSliceSprite} allows you to stretch a texture using 9-slice scaling\n *   - {@link scene.Graphics} is a graphic object that can be drawn to the screen.\n *   - {@link scene.Mesh} empowers you to have maximum flexibility to render any kind of visuals you can think of\n *      - {@link scene.MeshSimple} mimics Mesh, providing easy-to-use constructor arguments\n *      - {@link scene.MeshPlane} allows you to draw a texture across several points and then manipulate these points\n *      - {@link scene.MeshRope} allows you to draw a texture across several points and then manipulate these points\n *   - {@link scene.Text} render text using custom fonts\n *      - {@link scene.BitmapText} render text using a bitmap font\n *      - {@link scene.HTMLText} render text using HTML and CSS\n * @namespace scene\n */\n\n// as pivot and skew are the least used properties of a container, we can use this optimisation\n// to avoid allocating lots of unnecessary objects for them.\nconst defaultSkew = new ObservablePoint(null);\nconst defaultPivot = new ObservablePoint(null);\nconst defaultScale = new ObservablePoint(null, 1, 1);\n\nexport interface ContainerEvents<C extends ContainerChild> extends PixiMixins.ContainerEvents\n{\n    added: [container: Container];\n    childAdded: [child: C, container: Container, index: number];\n    removed: [container: Container];\n    childRemoved: [child: C, container: Container, index: number];\n    destroyed: [container: Container];\n}\n\ntype AnyEvent = {\n    // The following is a hack to allow any custom event while maintaining type safety.\n    // For some reason, the tsc compiler gets angry about error TS1023\n    // \"An index signature parameter type must be either 'string' or 'number'.\"\n    // This is really odd since ({}&string) should interpret as string, but then again\n    // there is some black magic behind why this works in the first place.\n    // Closest thing to an explanation:\n    // https://stackoverflow.com/questions/70144348/why-does-a-union-of-type-literals-and-string-cause-ide-code-completion-wh\n    //\n    // Side note, we disable @typescript-eslint/ban-types since {}&string is the only syntax that works.\n    // Nor of the Record/unknown/never alternatives work.\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    [K: ({} & string) | ({} & symbol)]: any;\n};\n\nexport const UPDATE_COLOR = 0b0001;\nexport const UPDATE_BLEND = 0b0010;\nexport const UPDATE_VISIBLE = 0b0100;\nexport const UPDATE_TRANSFORM = 0b1000;\n\nexport interface UpdateTransformOptions\n{\n    x: number;\n    y: number;\n    scaleX: number;\n    scaleY: number;\n    rotation: number;\n    skewX: number;\n    skewY: number;\n    pivotX: number;\n    pivotY: number;\n}\n\n/**\n * Constructor options used for `Container` instances.\n * ```js\n * const container = new Container({\n *    position: new Point(100, 200),\n *    scale: new Point(2, 2),\n *    rotation: Math.PI / 2,\n * });\n * ```\n * @memberof scene\n * @see scene.Container\n */\nexport interface ContainerOptions<C extends ContainerChild = ContainerChild> extends PixiMixins.ContainerOptions\n{\n    /** @see scene.Container#isRenderGroup */\n    isRenderGroup?: boolean;\n\n    /** @see scene.Container#blendMode */\n    blendMode?: BLEND_MODES;\n    /** @see scene.Container#tint */\n    tint?: ColorSource;\n\n    /** @see scene.Container#alpha */\n    alpha?: number;\n    /** @see scene.Container#angle */\n    angle?: number;\n    /** @see scene.Container#children */\n    children?: C[];\n    /** @see scene.Container#parent */\n    parent?: Container;\n    /** @see scene.Container#renderable */\n    renderable?: boolean;\n    /** @see scene.Container#rotation */\n    rotation?: number;\n    /** @see scene.Container#scale */\n    scale?: PointData | number;\n    /** @see scene.Container#pivot */\n    pivot?: PointData | number;\n    /** @see scene.Container#position */\n    position?: PointData;\n    /** @see scene.Container#skew */\n    skew?: PointData;\n    /** @see scene.Container#visible */\n    visible?: boolean;\n    /** @see scene.Container#culled */\n    culled?: boolean;\n    /** @see scene.Container#x */\n    x?: number;\n    /** @see scene.Container#y */\n    y?: number;\n    /** @see scene.Container#boundArea */\n    boundsArea?: Rectangle;\n}\n\nexport interface Container<C extends ContainerChild>\n    extends PixiMixins.Container<C>, EventEmitter<ContainerEvents<C> & AnyEvent> {}\n\n/**\n * Container is a general-purpose display object that holds children. It also adds built-in support for advanced\n * rendering features like masking and filtering.\n *\n * It is the base class of all display objects that act as a container for other objects, including Graphics\n * and Sprite.\n *\n * <details id=\"transforms\">\n *\n * <summary>Transforms</summary>\n *\n * The [transform]{@link scene.Container#transform} of a display object describes the projection from its\n * local coordinate space to its parent's local coordinate space. The following properties are derived\n * from the transform:\n *\n * <table>\n *   <thead>\n *     <tr>\n *       <th>Property</th>\n *       <th>Description</th>\n *     </tr>\n *   </thead>\n *   <tbody>\n *     <tr>\n *       <td>[pivot]{@link scene.Container#pivot}</td>\n *       <td>\n *         Invariant under rotation, scaling, and skewing. The projection of into the parent's space of the pivot\n *         is equal to position, regardless of the other three transformations. In other words, It is the center of\n *         rotation, scaling, and skewing.\n *       </td>\n *     </tr>\n *     <tr>\n *       <td>[position]{@link scene.Container#position}</td>\n *       <td>\n *         Translation. This is the position of the [pivot]{@link scene.Container#pivot} in the parent's local\n *         space. The default value of the pivot is the origin (0,0). If the top-left corner of your display object\n *         is (0,0) in its local space, then the position will be its top-left corner in the parent's local space.\n *       </td>\n *     </tr>\n *     <tr>\n *       <td>[scale]{@link scene.Container#scale}</td>\n *       <td>\n *         Scaling. This will stretch (or compress) the display object's projection. The scale factors are along the\n *         local coordinate axes. In other words, the display object is scaled before rotated or skewed. The center\n *         of scaling is the [pivot]{@link scene.Container#pivot}.\n *       </td>\n *     </tr>\n *     <tr>\n *       <td>[rotation]{@link scene.Container#rotation}</td>\n *       <td>\n *          Rotation. This will rotate the display object's projection by this angle (in radians).\n *       </td>\n *     </tr>\n *     <tr>\n *       <td>[skew]{@link scene.Container#skew}</td>\n *       <td>\n *         <p>Skewing. This can be used to deform a rectangular display object into a parallelogram.</p>\n *         <p>\n *         In PixiJS, skew has a slightly different behaviour than the conventional meaning. It can be\n *         thought of the net rotation applied to the coordinate axes (separately). For example, if \"skew.x\" is\n *          and \"skew.y\" is , then the line x = 0 will be rotated by  (y = -x*cot) and the line y = 0 will be\n *         rotated by  (y = x*tan). A line y = x*tan (i.e. a line at angle  to the x-axis in local-space) will\n *         be rotated by an angle between  and .\n *         </p>\n *         <p>\n *         It can be observed that if skew is applied equally to both axes, then it will be equivalent to applying\n *         a rotation. Indeed, if \"skew.x\" = - and \"skew.y\" = , it will produce an equivalent of \"rotation\" = .\n *         </p>\n *         <p>\n *         Another quite interesting observation is that \"skew.x\", \"skew.y\", rotation are commutative operations. Indeed,\n *         because rotation is essentially a careful combination of the two.\n *         </p>\n *       </td>\n *     </tr>\n *     <tr>\n *       <td>[angle]{@link scene.Container#angle}</td>\n *       <td>Rotation. This is an alias for [rotation]{@link scene.Container#rotation}, but in degrees.</td>\n *     </tr>\n *     <tr>\n *       <td>[x]{@link scene.Container#x}</td>\n *       <td>Translation. This is an alias for position.x!</td>\n *     </tr>\n *     <tr>\n *       <td>[y]{@link scene.Container#y}</td>\n *       <td>Translation. This is an alias for position.y!</td>\n *     </tr>\n *     <tr>\n *       <td>[width]{@link scene.Container#width}</td>\n *       <td>\n *         Implemented in [Container]{@link scene.Container}. Scaling. The width property calculates scale.x by dividing\n *         the \"requested\" width by the local bounding box width. It is indirectly an abstraction over scale.x, and there\n *         is no concept of user-defined width.\n *       </td>\n *     </tr>\n *     <tr>\n *       <td>[height]{@link scene.Container#height}</td>\n *       <td>\n *         Implemented in [Container]{@link scene.Container}. Scaling. The height property calculates scale.y by dividing\n *         the \"requested\" height by the local bounding box height. It is indirectly an abstraction over scale.y, and there\n *         is no concept of user-defined height.\n *       </td>\n *     </tr>\n *   </tbody>\n * </table>\n * </details>\n *\n * <details id=\"alpha\">\n * <summary>Alpha</summary>\n *\n * This alpha sets a display object's **relative opacity** w.r.t its parent. For example, if the alpha of a display\n * object is 0.5 and its parent's alpha is 0.5, then it will be rendered with 25% opacity (assuming alpha is not\n * applied on any ancestor further up the chain).\n * </details>\n *\n * <details id=\"visible\">\n * <summary>Renderable vs Visible</summary>\n *\n * The `renderable` and `visible` properties can be used to prevent a display object from being rendered to the\n * screen. However, there is a subtle difference between the two. When using `renderable`, the transforms  of the display\n * object (and its children subtree) will continue to be calculated. When using `visible`, the transforms will not\n * be calculated.\n * ```ts\n * import { BlurFilter, Container, Graphics, Sprite } from 'pixi.js';\n *\n * const container = new Container();\n * const sprite = Sprite.from('https://s3-us-west-2.amazonaws.com/s.cdpn.io/693612/IaUrttj.png');\n *\n * sprite.width = 512;\n * sprite.height = 512;\n *\n * // Adds a sprite as a child to this container. As a result, the sprite will be rendered whenever the container\n * // is rendered.\n * container.addChild(sprite);\n *\n * // Blurs whatever is rendered by the container\n * container.filters = [new BlurFilter()];\n *\n * // Only the contents within a circle at the center should be rendered onto the screen.\n * container.mask = new Graphics()\n *     .beginFill(0xffffff)\n *     .drawCircle(sprite.width / 2, sprite.height / 2, Math.min(sprite.width, sprite.height) / 2)\n *     .endFill();\n * ```\n *\n * </details>\n *\n * <details id=\"renderGroup\">\n * <summary>RenderGroup</summary>\n *\n * In PixiJS v8, containers can be set to operate in 'render group mode',\n * transforming them into entities akin to a stage in traditional rendering paradigms.\n * A render group is a root renderable entity, similar to a container,\n * but it's rendered in a separate pass with its own unique set of rendering instructions.\n * This approach enhances rendering efficiency and organization, particularly in complex scenes.\n *\n * You can enable render group mode on any container using container.enableRenderGroup()\n * or by initializing a new container with the render group property set to true (new Container({isRenderGroup: true})).\n *  The method you choose depends on your specific use case and setup requirements.\n *\n * An important aspect of PixiJSs rendering process is the automatic treatment of rendered scenes as render groups.\n * This conversion streamlines the rendering process, but understanding when and how this happens is crucial\n * to fully leverage its benefits.\n *\n * One of the key advantages of using render groups is the performance efficiency in moving them. Since transformations\n *  are applied at the GPU level, moving a render group, even one with complex and numerous children,\n * doesn't require recalculating the rendering instructions or performing transformations on each child.\n * This makes operations like panning a large game world incredibly efficient.\n *\n * However, it's crucial to note that render groups do not batch together.\n * This means that turning every container into a render group could actually slow things down,\n * as each render group is processed separately. It's best to use render groups judiciously, at a broader level,\n * rather than on a per-child basis.\n * This approach ensures you get the performance benefits without overburdening the rendering process.\n *\n * RenderGroups maintain their own set of rendering instructions,\n * ensuring that changes or updates within a render group don't affect the rendering\n * instructions of its parent or other render groups.\n *  This isolation ensures more stable and predictable rendering behavior.\n *\n * Additionally, renderGroups can be nested, allowing for powerful options in organizing different aspects of your scene.\n * This feature is particularly beneficial for separating complex game graphics from UI elements,\n * enabling intricate and efficient scene management in complex applications.\n *\n * This means that Containers have 3 levels of matrix to be mindful of:\n *\n * 1. localTransform, this is the transform of the container based on its own properties\n * 2. groupTransform, this it the transform of the container relative to the renderGroup it belongs too\n * 3. worldTransform, this is the transform of the container relative to the Scene being rendered\n * </details>\n * @memberof scene\n */\nexport class Container<C extends ContainerChild = ContainerChild> extends EventEmitter<ContainerEvents<C> & AnyEvent>\n{\n    /**\n     * Mixes all enumerable properties and methods from a source object to Container.\n     * @param source - The source of properties and methods to mix in.\n     */\n    public static mixin(source: Dict<any>): void\n    {\n        Object.defineProperties(Container.prototype, Object.getOwnPropertyDescriptors(source));\n    }\n\n    /** @private */\n    public uid: number = uid('renderable');\n\n    /** @private */\n    public _updateFlags = 0b1111;\n\n    // the render group this container owns\n    /** @private */\n    public renderGroup: RenderGroup = null;\n    // the render group this container belongs to\n    /** @private */\n    public parentRenderGroup: RenderGroup = null;\n    // the index of the container in the render group\n    /** @private */\n    public parentRenderGroupIndex: number = 0;\n\n    // set to true if the container has changed. It is reset once the changes have been applied\n    // by the transform system\n    // its here to stop ensure that when things change, only one update gets registers with the transform system\n    /** @private */\n    public didChange = false;\n    // same as above, but for the renderable\n    /** @private */\n    public didViewUpdate = false;\n    // how deep is the container relative to its render group..\n    // unless the element is the root render group - it will be relative to its parent\n    /** @private */\n    public relativeRenderGroupDepth = 0;\n\n    /**\n     * The array of children of this container.\n     * @readonly\n     */\n    public children: C[] = [];\n    /** The display object container that contains this display object. */\n    public parent: Container = null;\n\n    // used internally for changing up the render order.. mainly for masks and filters\n    // TODO setting this should cause a rebuild??\n    /** @private */\n    public includeInBuild = true;\n    /** @private */\n    public measurable = true;\n    /** @private */\n    public isSimple = true;\n\n    // / /////////////Transform related props//////////////\n\n    // used by the transform system to check if a container needs to be updated that frame\n    // if the tick matches the current transform system tick, it is not updated again\n    /**\n     * @internal\n     * @ignore\n     */\n    public updateTick = -1;\n\n    /**\n     * Current transform of the object based on local factors: position, scale, other stuff.\n     * @readonly\n     */\n    public localTransform: Matrix = new Matrix();\n    /**\n     * The relative group transform is a transform relative to the render group it belongs too. It will include all parent\n     * transforms and up to the render group (think of it as kind of like a stage - but the stage can be nested).\n     * If this container is is self a render group matrix will be relative to its parent render group\n     * @readonly\n     */\n    public relativeGroupTransform: Matrix = new Matrix();\n    /**\n     * The group transform is a transform relative to the render group it belongs too.\n     * If this container is render group then this will be an identity matrix. other wise it\n     * will be the same as the relativeGroupTransform.\n     * Use this value when actually rendering things to the screen\n     * @readonly\n     */\n    public groupTransform: Matrix = this.relativeGroupTransform;\n\n    // the global transform taking into account the render group and all parents\n    private _worldTransform: Matrix;\n\n    /** If the object has been destroyed via destroy(). If true, it should not be used. */\n    public destroyed = false;\n\n    // transform data..\n    /**\n     * The coordinate of the object relative to the local coordinates of the parent.\n     * @internal\n     * @ignore\n     */\n    public _position: ObservablePoint = new ObservablePoint(this, 0, 0);\n\n    /**\n     * The scale factor of the object.\n     * @internal\n     * @ignore\n     */\n    public _scale: ObservablePoint = defaultScale;\n\n    /**\n     * The pivot point of the container that it rotates around.\n     * @internal\n     * @ignore\n     */\n    public _pivot: ObservablePoint = defaultPivot;\n\n    /**\n     * The skew amount, on the x and y axis.\n     * @internal\n     * @ignore\n     */\n    public _skew: ObservablePoint = defaultSkew;\n\n    /**\n     * The X-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    public _cx = 1;\n\n    /**\n     * The Y-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    public _sx = 0;\n\n    /**\n     * The X-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    public _cy = 0;\n\n    /**\n     * The Y-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    public _sy = 1;\n\n    /**\n     * The rotation amount.\n     * @internal\n     * @ignore\n     */\n    private _rotation = 0;\n\n    // / COLOR related props //////////////\n\n    // color stored as ABGR\n    public localColor = 0xFFFFFF;\n    public localAlpha = 1;\n\n    public groupAlpha = 1; // A\n    public groupColor = 0xFFFFFF; // BGR\n    public groupColorAlpha = 0xFFFFFFFF; // ABGR\n\n    // / BLEND related props //////////////\n\n    /**\n     * @internal\n     * @ignore\n     */\n    public localBlendMode: BLEND_MODES = 'inherit';\n    /**\n     * @internal\n     * @ignore\n     */\n    public groupBlendMode: BLEND_MODES = 'normal';\n\n    // / VISIBILITY related props //////////////\n\n    // visibility\n    // 0b11\n    // first bit is visible, second bit is renderable\n    /**\n     * This property holds three bits: culled, visible, renderable\n     * the third bit represents culling (0 = culled, 1 = not culled) 0b100\n     * the second bit represents visibility (0 = not visible, 1 = visible) 0b010\n     * the first bit represents renderable (0 = renderable, 1 = not renderable) 0b001\n     * @internal\n     * @ignore\n     */\n    public localDisplayStatus = 0b111; // 0b11 | 0b10 | 0b01 | 0b00\n    /**\n     * @internal\n     * @ignore\n     */\n    public globalDisplayStatus = 0b111; // 0b11 | 0b10 | 0b01 | 0b00\n\n    public renderPipeId: string;\n\n    /**\n     * An optional bounds area for this container. Setting this rectangle will stop the renderer\n     * from recursively measuring the bounds of each children and instead use this single boundArea.\n     * This is great for optimisation! If for example you have a 1000 spinning particles and you know they all sit\n     * within a specific bounds, then setting it will mean the renderer will not need to measure the\n     * 1000 children to find the bounds. Instead it will just use the bounds you set.\n     */\n    public boundsArea: Rectangle;\n\n    /**\n     * A value that increments each time the container is modified\n     * the first 12 bits represent the container changes (eg transform, alpha, visible etc)\n     * the second 12 bits represent:\n     *      - for view changes (eg texture swap, geometry change etc)\n     *      - containers changes (eg children added, removed etc)\n     *\n     *  view          container\n     * [000000000000][00000000000]\n     * @ignore\n     */\n    public _didChangeId = 0;\n    /**\n     * property that tracks if the container transform has changed\n     * @ignore\n     */\n    private _didLocalTransformChangeId = -1;\n\n    constructor(options: ContainerOptions<C> = {})\n    {\n        super();\n\n        assignWithIgnore(this, options, {\n            children: true,\n            parent: true,\n            effects: true,\n        });\n\n        options.children?.forEach((child) => this.addChild(child));\n        this.effects = [];\n        options.parent?.addChild(this);\n    }\n\n    /**\n     * Adds one or more children to the container.\n     *\n     * Multiple items can be added like so: `myContainer.addChild(thingOne, thingTwo, thingThree)`\n     * @param {...Container} children - The Container(s) to add to the container\n     * @returns {Container} - The first child that was added.\n     */\n    public addChild<U extends C[]>(...children: U): U[0]\n    {\n        // #if _DEBUG\n        if (!this.allowChildren)\n        {\n            deprecation(v8_0_0, 'addChild: Only Containers will be allowed to add children in v8.0.0');\n        }\n        // #endif\n\n        if (children.length > 1)\n        {\n            // loop through the array and add all children\n            for (let i = 0; i < children.length; i++)\n            {\n                this.addChild(children[i]);\n            }\n\n            return children[0];\n        }\n\n        const child = children[0];\n\n        if (child.parent === this)\n        {\n            this.children.splice(this.children.indexOf(child), 1);\n            this.children.push(child);\n\n            if (this.parentRenderGroup)\n            {\n                this.parentRenderGroup.structureDidChange = true;\n            }\n\n            return child;\n        }\n\n        if (child.parent)\n        {\n            // TODO Optimisation...if the parent has the same render group, this does not need to change!\n            child.parent.removeChild(child);\n        }\n\n        this.children.push(child);\n\n        if (this.sortableChildren) this.sortDirty = true;\n\n        child.parent = this;\n\n        child.didChange = true;\n        child.didViewUpdate = false;\n\n        // TODO - OPtimise this? could check what the parent has set?\n        child._updateFlags = 0b1111;\n\n        const renderGroup = this.renderGroup || this.parentRenderGroup;\n\n        if (renderGroup)\n        {\n            renderGroup.addChild(child);\n        }\n\n        this.emit('childAdded', child, this, this.children.length - 1);\n        child.emit('added', this);\n\n        this._didChangeId += 1 << 12;\n\n        if (child._zIndex !== 0)\n        {\n            child.depthOfChildModified();\n        }\n\n        return child;\n    }\n\n    /**\n     * Removes one or more children from the container.\n     * @param {...Container} children - The Container(s) to remove\n     * @returns {Container} The first child that was removed.\n     */\n    public removeChild<U extends C[]>(...children: U): U[0]\n    {\n        // if there is only one argument we can bypass looping through the them\n        if (children.length > 1)\n        {\n            // loop through the arguments property and remove all children\n            for (let i = 0; i < children.length; i++)\n            {\n                this.removeChild(children[i]);\n            }\n\n            return children[0];\n        }\n\n        const child = children[0];\n\n        const index = this.children.indexOf(child);\n\n        if (index > -1)\n        {\n            this._didChangeId += 1 << 12;\n\n            this.children.splice(index, 1);\n\n            if (this.renderGroup)\n            {\n                this.renderGroup.removeChild(child);\n            }\n            else if (this.parentRenderGroup)\n            {\n                this.parentRenderGroup.removeChild(child);\n            }\n\n            child.parent = null;\n            this.emit('childRemoved', child, this, index);\n            child.emit('removed', this);\n        }\n\n        return child;\n    }\n\n    /** @ignore */\n    public _onUpdate(point?: ObservablePoint)\n    {\n        if (point)\n        {\n            //   this.updateFlags |= UPDATE_TRANSFORM;\n\n            if (point === this._skew)\n            {\n                this._updateSkew();\n            }\n        }\n\n        this._didChangeId++;\n\n        if (this.didChange) return;\n        this.didChange = true;\n\n        if (this.parentRenderGroup)\n        {\n            this.parentRenderGroup.onChildUpdate(this);\n        }\n    }\n\n    set isRenderGroup(value: boolean)\n    {\n        if (this.renderGroup && value === false)\n        {\n            throw new Error('[Pixi] cannot undo a render group just yet');\n        }\n\n        if (value)\n        {\n            this.enableRenderGroup();\n        }\n    }\n\n    /**\n     * Returns true if this container is a render group.\n     * This means that it will be rendered as a separate pass, with its own set of instructions\n     */\n    get isRenderGroup(): boolean\n    {\n        return !!this.renderGroup;\n    }\n\n    /** This enables the container to be rendered as a render group. */\n    public enableRenderGroup()\n    {\n        // does it OWN the render group..\n        if (this.renderGroup) return;\n\n        const parentRenderGroup = this.parentRenderGroup;\n\n        if (parentRenderGroup)\n        {\n            parentRenderGroup.removeChild(this);\n        }\n\n        this.renderGroup = new RenderGroup(this);\n\n        if (parentRenderGroup)\n        {\n            parentRenderGroup.addChild(this);\n        }\n\n        this._updateIsSimple();\n\n        // this group matrix will now forever be an identity matrix,\n        // as its own transform will be passed to the GPU\n        this.groupTransform = Matrix.IDENTITY;\n    }\n\n    /** @ignore */\n    public _updateIsSimple()\n    {\n        this.isSimple = !(this.renderGroup) && (this.effects.length === 0);\n    }\n\n    /**\n     * Current transform of the object based on world (parent) factors.\n     * @readonly\n     */\n    get worldTransform()\n    {\n        this._worldTransform ||= new Matrix();\n\n        if (this.renderGroup)\n        {\n            this._worldTransform.copyFrom(this.renderGroup.worldTransform);\n        }\n        else if (this.parentRenderGroup)\n        {\n            this._worldTransform.appendFrom(this.relativeGroupTransform, this.parentRenderGroup.worldTransform);\n        }\n\n        return this._worldTransform;\n    }\n\n    // / ////// transform related stuff\n\n    /**\n     * The position of the container on the x axis relative to the local coordinates of the parent.\n     * An alias to position.x\n     */\n    get x(): number\n    {\n        return this._position.x;\n    }\n\n    set x(value: number)\n    {\n        this._position.x = value;\n    }\n\n    /**\n     * The position of the container on the y axis relative to the local coordinates of the parent.\n     * An alias to position.y\n     */\n    get y(): number\n    {\n        return this._position.y;\n    }\n\n    set y(value: number)\n    {\n        this._position.y = value;\n    }\n\n    /**\n     * The coordinate of the object relative to the local coordinates of the parent.\n     * @since 4.0.0\n     */\n    get position(): ObservablePoint\n    {\n        return this._position;\n    }\n\n    set position(value: PointData)\n    {\n        this._position.copyFrom(value);\n    }\n\n    /**\n     * The rotation of the object in radians.\n     * 'rotation' and 'angle' have the same effect on a display object; rotation is in radians, angle is in degrees.\n     */\n    get rotation(): number\n    {\n        return this._rotation;\n    }\n\n    set rotation(value: number)\n    {\n        if (this._rotation !== value)\n        {\n            this._rotation = value;\n            this._onUpdate(this._skew);\n        }\n    }\n\n    /**\n     * The angle of the object in degrees.\n     * 'rotation' and 'angle' have the same effect on a display object; rotation is in radians, angle is in degrees.\n     */\n    get angle(): number\n    {\n        return this.rotation * RAD_TO_DEG;\n    }\n\n    set angle(value: number)\n    {\n        this.rotation = value * DEG_TO_RAD;\n    }\n\n    /**\n     * The center of rotation, scaling, and skewing for this display object in its local space. The `position`\n     * is the projection of `pivot` in the parent's local space.\n     *\n     * By default, the pivot is the origin (0, 0).\n     * @since 4.0.0\n     */\n    get pivot(): ObservablePoint\n    {\n        if (this._pivot === defaultPivot)\n        {\n            this._pivot = new ObservablePoint(this, 0, 0);\n        }\n\n        return this._pivot;\n    }\n\n    set pivot(value: PointData | number)\n    {\n        if (this._pivot === defaultPivot)\n        {\n            this._pivot = new ObservablePoint(this, 0, 0);\n        }\n\n        typeof value === 'number' ? this._pivot.set(value) : this._pivot.copyFrom(value);\n    }\n\n    /**\n     * The skew factor for the object in radians.\n     * @since 4.0.0\n     */\n    get skew(): ObservablePoint\n    {\n        if (this._skew === defaultSkew)\n        {\n            this._skew = new ObservablePoint(this, 0, 0);\n        }\n\n        return this._skew;\n    }\n\n    set skew(value: PointData)\n    {\n        if (this._skew === defaultSkew)\n        {\n            this._skew = new ObservablePoint(this, 0, 0);\n        }\n\n        this._skew.copyFrom(value);\n    }\n\n    /**\n     * The scale factors of this object along the local coordinate axes.\n     *\n     * The default scale is (1, 1).\n     * @since 4.0.0\n     */\n    get scale(): ObservablePoint\n    {\n        if (this._scale === defaultScale)\n        {\n            this._scale = new ObservablePoint(this, 1, 1);\n        }\n\n        return this._scale;\n    }\n\n    set scale(value: PointData | number)\n    {\n        if (this._scale === defaultScale)\n        {\n            this._scale = new ObservablePoint(this, 0, 0);\n        }\n\n        typeof value === 'number' ? this._scale.set(value) : this._scale.copyFrom(value);\n    }\n\n    /**\n     * The width of the Container, setting this will actually modify the scale to achieve the value set.\n     * @memberof scene.Container#\n     */\n    get width(): number\n    {\n        return Math.abs(this.scale.x * this.getLocalBounds().width);\n    }\n\n    set width(value: number)\n    {\n        const localWidth = this.getLocalBounds().width;\n\n        this._setWidth(value, localWidth);\n    }\n\n    /**\n     * The height of the Container, setting this will actually modify the scale to achieve the value set.\n     * @memberof scene.Container#\n     */\n    get height(): number\n    {\n        return Math.abs(this.scale.y * this.getLocalBounds().height);\n    }\n\n    set height(value: number)\n    {\n        const localHeight = this.getLocalBounds().height;\n\n        this._setHeight(value, localHeight);\n    }\n\n    /**\n     * Retrieves the size of the container as a [Size]{@link Size} object.\n     * This is faster than get the width and height separately.\n     * @param out - Optional object to store the size in.\n     * @returns - The size of the container.\n     * @memberof scene.Container#\n     */\n    public getSize(out?: Size): Size\n    {\n        if (!out)\n        {\n            out = {} as Size;\n        }\n\n        const bounds = this.getLocalBounds();\n\n        out.width = Math.abs(this.scale.x * bounds.width);\n        out.height = Math.abs(this.scale.y * bounds.height);\n\n        return out;\n    }\n\n    /**\n     * Sets the size of the container to the specified width and height.\n     * This is faster than setting the width and height separately.\n     * @param value - This can be either a number or a [Size]{@link Size} object.\n     * @param height - The height to set. Defaults to the value of `width` if not provided.\n     * @memberof scene.Container#\n     */\n    public setSize(value: number | Optional<Size, 'height'>, height?: number)\n    {\n        const size = this.getLocalBounds();\n        let convertedWidth: number;\n        let convertedHeight: number;\n\n        if (typeof value !== 'object')\n        {\n            convertedWidth = value;\n            convertedHeight = height ?? value;\n        }\n        else\n        {\n            convertedWidth = value.width;\n            convertedHeight = value.height ?? value.width;\n        }\n\n        if (convertedWidth !== undefined)\n        {\n            this._setWidth(convertedWidth, size.width);\n        }\n\n        if (convertedHeight !== undefined)\n        {\n            this._setHeight(convertedHeight, size.height);\n        }\n    }\n\n    /** Called when the skew or the rotation changes. */\n    private _updateSkew(): void\n    {\n        const rotation = this._rotation;\n        const skew = this._skew;\n\n        this._cx = Math.cos(rotation + skew._y);\n        this._sx = Math.sin(rotation + skew._y);\n        this._cy = -Math.sin(rotation - skew._x); // cos, added PI/2\n        this._sy = Math.cos(rotation - skew._x); // sin, added PI/2\n    }\n\n    /**\n     * Updates the transform properties of the container (accepts partial values).\n     * @param {object} opts - The options for updating the transform.\n     * @param {number} opts.x - The x position of the container.\n     * @param {number} opts.y - The y position of the container.\n     * @param {number} opts.scaleX - The scale factor on the x-axis.\n     * @param {number} opts.scaleY - The scale factor on the y-axis.\n     * @param {number} opts.rotation - The rotation of the container, in radians.\n     * @param {number} opts.skewX - The skew factor on the x-axis.\n     * @param {number} opts.skewY - The skew factor on the y-axis.\n     * @param {number} opts.pivotX - The x coordinate of the pivot point.\n     * @param {number} opts.pivotY - The y coordinate of the pivot point.\n     */\n    public updateTransform(opts: Partial<UpdateTransformOptions>): this\n    {\n        this.position.set(\n            typeof opts.x === 'number' ? opts.x : this.position.x,\n            typeof opts.y === 'number' ? opts.y : this.position.y\n        );\n        this.scale.set(\n            typeof opts.scaleX === 'number' ? opts.scaleX || 1 : this.scale.x,\n            typeof opts.scaleY === 'number' ? opts.scaleY || 1 : this.scale.y\n        );\n        this.rotation = typeof opts.rotation === 'number' ? opts.rotation : this.rotation;\n        this.skew.set(\n            typeof opts.skewX === 'number' ? opts.skewX : this.skew.x,\n            typeof opts.skewY === 'number' ? opts.skewY : this.skew.y\n        );\n        this.pivot.set(\n            typeof opts.pivotX === 'number' ? opts.pivotX : this.pivot.x,\n            typeof opts.pivotY === 'number' ? opts.pivotY : this.pivot.y\n        );\n\n        return this;\n    }\n\n    /**\n     * Updates the local transform using the given matrix.\n     * @param matrix - The matrix to use for updating the transform.\n     */\n    public setFromMatrix(matrix: Matrix): void\n    {\n        matrix.decompose(this);\n    }\n\n    /** Updates the local transform. */\n    public updateLocalTransform(): void\n    {\n        if ((this._didLocalTransformChangeId & 0b1111) === this._didChangeId) return;\n\n        this._didLocalTransformChangeId = this._didChangeId;\n        //   this.didChange = false;\n\n        const lt = this.localTransform;\n        const scale = this._scale;\n        const pivot = this._pivot;\n        const position = this._position;\n\n        const sx = scale._x;\n        const sy = scale._y;\n\n        const px = pivot._x;\n        const py = pivot._y;\n\n        // get the matrix values of the container based on its this properties..\n        lt.a = this._cx * sx;\n        lt.b = this._sx * sx;\n        lt.c = this._cy * sy;\n        lt.d = this._sy * sy;\n\n        lt.tx = position._x - ((px * lt.a) + (py * lt.c));\n        lt.ty = position._y - ((px * lt.b) + (py * lt.d));\n    }\n\n    // / ///// color related stuff\n\n    set alpha(value: number)\n    {\n        if (value === this.localAlpha) return;\n\n        this.localAlpha = value;\n\n        this._updateFlags |= UPDATE_COLOR;\n\n        this._onUpdate();\n    }\n\n    /** The opacity of the object. */\n    get alpha(): number\n    {\n        return this.localAlpha;\n    }\n\n    set tint(value: ColorSource)\n    {\n        const tempColor = Color.shared.setValue(value ?? 0xFFFFFF);\n        const bgr = tempColor.toBgrNumber();\n\n        if (bgr === this.localColor) return;\n\n        this.localColor = bgr;\n\n        this._updateFlags |= UPDATE_COLOR;\n\n        this._onUpdate();\n    }\n\n    /**\n     * The tint applied to the sprite. This is a hex value.\n     *\n     * A value of 0xFFFFFF will remove any tint effect.\n     * @default 0xFFFFFF\n     */\n    get tint(): number\n    {\n        const bgr = this.localColor;\n        // convert bgr to rgb..\n\n        return ((bgr & 0xFF) << 16) + (bgr & 0xFF00) + ((bgr >> 16) & 0xFF);\n    }\n\n    // / //////////////// blend related stuff\n\n    set blendMode(value: BLEND_MODES)\n    {\n        if (this.localBlendMode === value) return;\n        if (this.parentRenderGroup)\n        {\n            this.parentRenderGroup.structureDidChange = true;\n        }\n\n        this._updateFlags |= UPDATE_BLEND;\n\n        this.localBlendMode = value;\n\n        this._onUpdate();\n    }\n\n    /**\n     * The blend mode to be applied to the sprite. Apply a value of `'normal'` to reset the blend mode.\n     * @default 'normal'\n     */\n    get blendMode(): BLEND_MODES\n    {\n        return this.localBlendMode;\n    }\n\n    // / ///////// VISIBILITY / RENDERABLE /////////////////\n\n    /** The visibility of the object. If false the object will not be drawn, and the transform will not be updated. */\n    get visible()\n    {\n        return !!(this.localDisplayStatus & 0b010);\n    }\n\n    set visible(value: boolean)\n    {\n        const valueNumber = value ? 1 : 0;\n\n        if ((this.localDisplayStatus & 0b010) >> 1 === valueNumber) return;\n\n        if (this.parentRenderGroup)\n        {\n            this.parentRenderGroup.structureDidChange = true;\n        }\n\n        this._updateFlags |= UPDATE_VISIBLE;\n\n        this.localDisplayStatus ^= 0b010;\n\n        this._onUpdate();\n    }\n\n    /** @ignore */\n    get culled()\n    {\n        return !(this.localDisplayStatus & 0b100);\n    }\n\n    /** @ignore */\n    set culled(value: boolean)\n    {\n        const valueNumber = value ? 1 : 0;\n\n        if ((this.localDisplayStatus & 0b100) >> 2 === valueNumber) return;\n\n        if (this.parentRenderGroup)\n        {\n            this.parentRenderGroup.structureDidChange = true;\n        }\n\n        this._updateFlags |= UPDATE_VISIBLE;\n        this.localDisplayStatus ^= 0b100;\n\n        this._onUpdate();\n    }\n\n    /** Can this object be rendered, if false the object will not be drawn but the transform will still be updated. */\n    get renderable()\n    {\n        return !!(this.localDisplayStatus & 0b001);\n    }\n\n    set renderable(value: boolean)\n    {\n        const valueNumber = value ? 1 : 0;\n\n        if ((this.localDisplayStatus & 0b001) === valueNumber) return;\n\n        this._updateFlags |= UPDATE_VISIBLE;\n        this.localDisplayStatus ^= 0b001;\n\n        if (this.parentRenderGroup)\n        {\n            this.parentRenderGroup.structureDidChange = true;\n        }\n\n        this._onUpdate();\n    }\n\n    /** Whether or not the object should be rendered. */\n    get isRenderable(): boolean\n    {\n        return (this.localDisplayStatus === 0b111 && this.groupAlpha > 0);\n    }\n\n    /**\n     * Removes all internal references and listeners as well as removes children from the display list.\n     * Do not use a Container after calling `destroy`.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @param {boolean} [options.children=false] - if set to true, all the children will have their destroy\n     *  method called as well. 'options' will be passed on to those calls.\n     * @param {boolean} [options.texture=false] - Only used for children with textures e.g. Sprites. If options.children\n     * is set to true it should destroy the texture of the child sprite\n     * @param {boolean} [options.textureSource=false] - Only used for children with textures e.g. Sprites.\n     * If options.children is set to true it should destroy the texture source of the child sprite\n     * @param {boolean} [options.context=false] - Only used for children with graphicsContexts e.g. Graphics.\n     * If options.children is set to true it should destroy the context of the child graphics\n     */\n    public destroy(options: DestroyOptions = false): void\n    {\n        if (this.destroyed) return;\n        this.destroyed = true;\n\n        // remove children is faster than removeChild..\n        const oldChildren = this.removeChildren(0, this.children.length);\n\n        this.removeFromParent();\n        this.parent = null;\n        this._maskEffect = null;\n        this._filterEffect = null;\n        this.effects = null;\n        this._position = null;\n        this._scale = null;\n        this._pivot = null;\n        this._skew = null;\n\n        this.emit('destroyed', this);\n\n        this.removeAllListeners();\n\n        const destroyChildren = typeof options === 'boolean' ? options : options?.children;\n\n        if (destroyChildren)\n        {\n            for (let i = 0; i < oldChildren.length; ++i)\n            {\n                oldChildren[i].destroy(options);\n            }\n        }\n\n        this.renderGroup?.destroy();\n        this.renderGroup = null;\n    }\n}\n\nContainer.mixin(childrenHelperMixin);\nContainer.mixin(toLocalGlobalMixin);\nContainer.mixin(onRenderMixin);\nContainer.mixin(measureMixin);\nContainer.mixin(effectsMixin);\nContainer.mixin(findMixin);\nContainer.mixin(sortMixin);\nContainer.mixin(cullingMixin);\n","/**\n * Assigns properties from one object to another, using an optional array of property names to ignore.\n * @param target - The target object to assign properties to.\n * @param options - The object to assign properties from.\n * @param ignore - An object of property names to ignore ({ propToIgnore: true }).\n */\nexport function assignWithIgnore<T extends Record<string, any>>(\n    target: T,\n    options: T,\n    ignore: Record<string, boolean> = {}\n)\n{\n    for (const key in options)\n    {\n        if (!ignore[key] && options[key] !== undefined)\n        {\n            target[key] = options[key];\n        }\n    }\n}\n","import type { Rectangle } from '../maths/shapes/Rectangle';\n\nexport interface CullingMixinConstructor\n{\n    /**\n     * If set, this shape is used for culling instead of the bounds of this object.\n     * It can improve the culling performance of objects with many children.\n     * The culling area is defined in local space.\n     * @memberof scene.Container#\n     */\n    cullArea: Rectangle,\n    /**\n     * Should this object be rendered if the bounds of this object are out of frame?\n     *\n     * Culling has no effect on whether updateTransform is called.\n     * @default false\n     * @memberof scene.Container#\n     */\n    cullable: boolean,\n    /**\n     * Determines if the children to the container can be culled\n     * Setting this to false allows PixiJS to bypass a recursive culling function\n     * Which can help to optimize very complex scenes\n     * @default true\n     * @memberof scene.Container#\n     */\n    cullableChildren: boolean,\n}\n\nexport const cullingMixin: CullingMixinConstructor = {\n    cullArea: null,\n    cullable: false,\n    cullableChildren: true,\n};\n","import { Matrix } from '../../../maths/matrix/Matrix';\nimport { Rectangle } from '../../../maths/shapes/Rectangle';\n\n/**\n * Simple bounds implementation instead of more ambiguous [number, number, number, number]\n * @memberof rendering\n */\nexport interface BoundsData\n{\n    minX: number;\n    minY: number;\n    maxX: number;\n    maxY: number;\n}\n\nconst defaultMatrix = new Matrix();\n\n// TODO optimisations\n// 1 - get rectangle could use a dirty flag, rather than setting the data each time is called\n// 2- getFrame ALWAYS assumes a matrix, could be optimised to avoid the matrix calculation if not needed\n\n/**\n * A representation of an AABB bounding box.\n * @memberof rendering\n */\nexport class Bounds\n{\n    /** @default Infinity */\n    public minX = Infinity;\n\n    /** @default Infinity */\n    public minY = Infinity;\n\n    /** @default -Infinity */\n    public maxX = -Infinity;\n\n    /** @default -Infinity */\n    public maxY = -Infinity;\n\n    public matrix = defaultMatrix;\n\n    private _rectangle: Rectangle;\n\n    constructor(minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity)\n    {\n        this.minX = minX;\n        this.minY = minY;\n        this.maxX = maxX;\n        this.maxY = maxY;\n    }\n\n    /**\n     * Checks if bounds are empty.\n     * @returns - True if empty.\n     */\n    public isEmpty(): boolean\n    {\n        return this.minX > this.maxX || this.minY > this.maxY;\n    }\n\n    /** The bounding rectangle of the bounds. */\n    get rectangle(): Rectangle\n    {\n        if (!this._rectangle)\n        {\n            this._rectangle = new Rectangle();\n        }\n\n        const rectangle = this._rectangle;\n\n        if (this.minX > this.maxX || this.minY > this.maxY)\n        {\n            rectangle.x = 0;\n            rectangle.y = 0;\n            rectangle.width = 0;\n            rectangle.height = 0;\n        }\n        else\n        {\n            rectangle.copyFromBounds(this);\n        }\n\n        return rectangle;\n    }\n\n    /** Clears the bounds and resets. */\n    public clear(): this\n    {\n        this.minX = Infinity;\n        this.minY = Infinity;\n        this.maxX = -Infinity;\n        this.maxY = -Infinity;\n\n        this.matrix = defaultMatrix;\n\n        return this;\n    }\n\n    /**\n     * Sets the bounds.\n     * @param x0 - left X of frame\n     * @param y0 - top Y of frame\n     * @param x1 - right X of frame\n     * @param y1 - bottom Y of frame\n     */\n    public set(x0: number, y0: number, x1: number, y1: number)\n    {\n        this.minX = x0;\n        this.minY = y0;\n        this.maxX = x1;\n        this.maxY = y1;\n    }\n\n    /**\n     * Adds sprite frame\n     * @param x0 - left X of frame\n     * @param y0 - top Y of frame\n     * @param x1 - right X of frame\n     * @param y1 - bottom Y of frame\n     * @param matrix\n     */\n    public addFrame(x0: number, y0: number, x1: number, y1: number, matrix?: Matrix): void\n    {\n        matrix ||= this.matrix;\n\n        const a = matrix.a;\n        const b = matrix.b;\n        const c = matrix.c;\n        const d = matrix.d;\n        const tx = matrix.tx;\n        const ty = matrix.ty;\n\n        let minX = this.minX;\n        let minY = this.minY;\n        let maxX = this.maxX;\n        let maxY = this.maxY;\n\n        let x = (a * x0) + (c * y0) + tx;\n        let y = (b * x0) + (d * y0) + ty;\n\n        if (x < minX) minX = x;\n        if (y < minY) minY = y;\n        if (x > maxX) maxX = x;\n        if (y > maxY) maxY = y;\n\n        x = (a * x1) + (c * y0) + tx;\n        y = (b * x1) + (d * y0) + ty;\n\n        if (x < minX) minX = x;\n        if (y < minY) minY = y;\n        if (x > maxX) maxX = x;\n        if (y > maxY) maxY = y;\n\n        x = (a * x0) + (c * y1) + tx;\n        y = (b * x0) + (d * y1) + ty;\n\n        if (x < minX) minX = x;\n        if (y < minY) minY = y;\n        if (x > maxX) maxX = x;\n        if (y > maxY) maxY = y;\n\n        x = (a * x1) + (c * y1) + tx;\n        y = (b * x1) + (d * y1) + ty;\n\n        if (x < minX) minX = x;\n        if (y < minY) minY = y;\n        if (x > maxX) maxX = x;\n        if (y > maxY) maxY = y;\n\n        this.minX = minX;\n        this.minY = minY;\n        this.maxX = maxX;\n        this.maxY = maxY;\n    }\n\n    /**\n     * Adds a rectangle to the bounds.\n     * @param rect - The rectangle to be added.\n     * @param matrix - The matrix to apply to the bounds.\n     */\n    public addRect(rect: Rectangle, matrix?: Matrix)\n    {\n        this.addFrame(rect.x, rect.y, rect.x + rect.width, rect.y + rect.height, matrix);\n    }\n\n    /**\n     * Adds other {@link Bounds}.\n     * @param bounds - The Bounds to be added\n     * @param matrix\n     */\n    public addBounds(bounds: BoundsData, matrix?: Matrix)\n    {\n        this.addFrame(bounds.minX, bounds.minY, bounds.maxX, bounds.maxY, matrix);\n    }\n\n    /**\n     * Adds other Bounds, masked with Bounds.\n     * @param mask - The Bounds to be added.\n     */\n    public addBoundsMask(mask: Bounds): void\n    {\n        this.minX = this.minX > mask.minX ? this.minX : mask.minX;\n        this.minY = this.minY > mask.minY ? this.minY : mask.minY;\n        this.maxX = this.maxX < mask.maxX ? this.maxX : mask.maxX;\n        this.maxY = this.maxY < mask.maxY ? this.maxY : mask.maxY;\n    }\n\n    /**\n     * Adds other Bounds, multiplied with matrix.\n     * @param matrix - The matrix to apply to the bounds.\n     */\n    public applyMatrix(matrix: Matrix): void\n    {\n        const minX = this.minX;\n        const minY = this.minY;\n        const maxX = this.maxX;\n        const maxY = this.maxY;\n\n        // multiple bounds by matrix\n        const { a, b, c, d, tx, ty } = matrix;\n\n        let x = (a * minX) + (c * minY) + tx;\n        let y = (b * minX) + (d * minY) + ty;\n\n        this.minX = x;\n        this.minY = y;\n        this.maxX = x;\n        this.maxY = y;\n\n        x = (a * maxX) + (c * minY) + tx;\n        y = (b * maxX) + (d * minY) + ty;\n        this.minX = x < this.minX ? x : this.minX;\n        this.minY = y < this.minY ? y : this.minY;\n        this.maxX = x > this.maxX ? x : this.maxX;\n        this.maxY = y > this.maxY ? y : this.maxY;\n\n        x = (a * minX) + (c * maxY) + tx;\n        y = (b * minX) + (d * maxY) + ty;\n        this.minX = x < this.minX ? x : this.minX;\n        this.minY = y < this.minY ? y : this.minY;\n        this.maxX = x > this.maxX ? x : this.maxX;\n        this.maxY = y > this.maxY ? y : this.maxY;\n\n        x = (a * maxX) + (c * maxY) + tx;\n        y = (b * maxX) + (d * maxY) + ty;\n        this.minX = x < this.minX ? x : this.minX;\n        this.minY = y < this.minY ? y : this.minY;\n        this.maxX = x > this.maxX ? x : this.maxX;\n        this.maxY = y > this.maxY ? y : this.maxY;\n    }\n\n    /**\n     * Resizes the bounds object to include the given rectangle.\n     * @param rect - The rectangle to be included.\n     */\n    public fit(rect: Rectangle): this\n    {\n        if (this.minX < rect.left) this.minX = rect.left;\n        if (this.maxX > rect.right) this.maxX = rect.right;\n\n        if (this.minY < rect.top) this.minY = rect.top;\n        if (this.maxY > rect.bottom) this.maxY = rect.bottom;\n\n        return this;\n    }\n\n    /**\n     * Resizes the bounds object to include the given bounds.\n     * @param left - The left value of the bounds.\n     * @param right - The right value of the bounds.\n     * @param top - The top value of the bounds.\n     * @param bottom - The bottom value of the bounds.\n     */\n    public fitBounds(left: number, right: number, top: number, bottom: number): this\n    {\n        if (this.minX < left) this.minX = left;\n        if (this.maxX > right) this.maxX = right;\n\n        if (this.minY < top) this.minY = top;\n        if (this.maxY > bottom) this.maxY = bottom;\n\n        return this;\n    }\n\n    /**\n     * Pads bounds object, making it grow in all directions.\n     * If paddingY is omitted, both paddingX and paddingY will be set to paddingX.\n     * @param paddingX - The horizontal padding amount.\n     * @param paddingY - The vertical padding amount.\n     */\n    public pad(paddingX: number, paddingY: number = paddingX): this\n    {\n        this.minX -= paddingX;\n        this.maxX += paddingX;\n\n        this.minY -= paddingY;\n        this.maxY += paddingY;\n\n        return this;\n    }\n\n    /** Ceils the bounds. */\n    public ceil(): this\n    {\n        this.minX = Math.floor(this.minX);\n        this.minY = Math.floor(this.minY);\n        this.maxX = Math.ceil(this.maxX);\n        this.maxY = Math.ceil(this.maxY);\n\n        return this;\n    }\n\n    /** Clones the bounds. */\n    public clone(): Bounds\n    {\n        return new Bounds(this.minX, this.minY, this.maxX, this.maxY);\n    }\n\n    /**\n     * Scales the bounds by the given values\n     * @param x - The X value to scale by.\n     * @param y - The Y value to scale by.\n     */\n    public scale(x: number, y: number = x): this\n    {\n        this.minX *= x;\n        this.minY *= y;\n        this.maxX *= x;\n        this.maxY *= y;\n\n        return this;\n    }\n\n    /** the x value of the bounds. */\n    get x(): number\n    {\n        return this.minX;\n    }\n    set x(value: number)\n    {\n        const width = this.maxX - this.minX;\n\n        this.minX = value;\n        this.maxX = value + width;\n    }\n\n    /** the y value of the bounds. */\n    get y(): number\n    {\n        return this.minY;\n    }\n\n    set y(value: number)\n    {\n        const height = this.maxY - this.minY;\n\n        this.minY = value;\n        this.maxY = value + height;\n    }\n\n    /** the width value of the bounds. */\n    get width(): number\n    {\n        return this.maxX - this.minX;\n    }\n\n    set width(value: number)\n    {\n        this.maxX = this.minX + value;\n    }\n\n    /** the height value of the bounds. */\n    get height(): number\n    {\n        return this.maxY - this.minY;\n    }\n\n    set height(value: number)\n    {\n        this.maxY = this.minY + value;\n    }\n\n    /** the left value of the bounds. */\n    get left(): number\n    {\n        return this.minX;\n    }\n\n    /** the right value of the bounds. */\n    get right(): number\n    {\n        return this.maxX;\n    }\n\n    /** the top value of the bounds. */\n    get top(): number\n    {\n        return this.minY;\n    }\n\n    /** the bottom value of the bounds. */\n    get bottom(): number\n    {\n        return this.maxY;\n    }\n\n    /** Is the bounds positive. */\n    get isPositive(): boolean\n    {\n        return (this.maxX - this.minX > 0) && (this.maxY - this.minY > 0);\n    }\n\n    get isValid(): boolean\n    {\n        return (this.minX + this.minY !== Infinity);\n    }\n\n    /**\n     * Adds screen vertices from array\n     * @param vertexData - calculated vertices\n     * @param beginOffset - begin offset\n     * @param endOffset - end offset, excluded\n     * @param matrix\n     */\n    public addVertexData(vertexData: Float32Array, beginOffset: number, endOffset: number, matrix?: Matrix): void\n    {\n        let minX = this.minX;\n        let minY = this.minY;\n        let maxX = this.maxX;\n        let maxY = this.maxY;\n\n        matrix ||= this.matrix;\n\n        const a = matrix.a;\n        const b = matrix.b;\n        const c = matrix.c;\n        const d = matrix.d;\n        const tx = matrix.tx;\n        const ty = matrix.ty;\n\n        for (let i = beginOffset; i < endOffset; i += 2)\n        {\n            const localX = vertexData[i];\n            const localY = vertexData[i + 1];\n\n            const x = (a * localX) + (c * localY) + tx;\n            const y = (b * localX) + (d * localY) + ty;\n\n            minX = x < minX ? x : minX;\n            minY = y < minY ? y : minY;\n            maxX = x > maxX ? x : maxX;\n            maxY = y > maxY ? y : maxY;\n        }\n\n        this.minX = minX;\n        this.minY = minY;\n        this.maxX = maxX;\n        this.maxY = maxY;\n    }\n\n    /**\n     * Checks if the point is contained within the bounds.\n     * @param x - x coordinate\n     * @param y - y coordinate\n     */\n    public containsPoint(x: number, y: number): boolean\n    {\n        if (this.minX <= x && this.minY <= y && this.maxX >= x && this.maxY >= y)\n        {\n            return true;\n        }\n\n        return false;\n    }\n\n    public toString(): string\n    {\n        // eslint-disable-next-line max-len\n        return `[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`;\n    }\n}\n\n","import { Matrix } from '../../../maths/matrix/Matrix';\nimport { boundsPool, matrixPool } from './utils/matrixAndBoundsPool';\n\nimport type { Renderable } from '../../../rendering/renderers/shared/Renderable';\nimport type { Container } from '../Container';\nimport type { Bounds } from './Bounds';\n\nexport function getGlobalBounds(target: Container, skipUpdateTransform: boolean, bounds: Bounds): Bounds\n{\n    bounds.clear();\n\n    let parentTransform;\n    let pooledMatrix;\n\n    if (target.parent)\n    {\n        if (!skipUpdateTransform)\n        {\n            pooledMatrix = matrixPool.get().identity();\n            parentTransform = updateTransformBackwards(target, pooledMatrix);\n        }\n        else\n        {\n            parentTransform = target.parent.worldTransform;\n        }\n    }\n    else\n    {\n        parentTransform = Matrix.IDENTITY;\n    }\n\n    // then collect them...\n\n    _getGlobalBounds(target, bounds, parentTransform, skipUpdateTransform);\n\n    if (pooledMatrix)\n    {\n        matrixPool.return(pooledMatrix);\n    }\n\n    if (!bounds.isValid)\n    {\n        bounds.set(0, 0, 0, 0);\n    }\n\n    return bounds;\n}\n\nexport function _getGlobalBounds(\n    target: Container,\n    bounds: Bounds,\n    parentTransform: Matrix,\n    skipUpdateTransform: boolean,\n): void\n{\n    if (!target.visible || !target.measurable) return;\n\n    let worldTransform: Matrix;\n\n    if (!skipUpdateTransform)\n    {\n        target.updateLocalTransform();\n\n        worldTransform = matrixPool.get();\n\n        worldTransform.appendFrom(target.localTransform, parentTransform);\n    }\n    else\n    {\n        worldTransform = target.worldTransform;\n    }\n\n    const parentBounds = bounds;\n    const preserveBounds = !!target.effects.length;\n\n    if (preserveBounds)\n    {\n        bounds = boundsPool.get().clear();\n    }\n\n    if (target.boundsArea)\n    {\n        bounds.addRect(target.boundsArea, worldTransform);\n    }\n    else\n    {\n        if ((target as Renderable).addBounds)\n        {\n            // save a copy\n            bounds.matrix = worldTransform;\n\n            (target as Renderable).addBounds(bounds);\n        }\n\n        for (let i = 0; i < target.children.length; i++)\n        {\n            _getGlobalBounds(target.children[i], bounds, worldTransform, skipUpdateTransform);\n        }\n    }\n\n    if (preserveBounds)\n    {\n        for (let i = 0; i < target.effects.length; i++)\n        {\n            target.effects[i].addBounds?.(bounds);\n        }\n\n        parentBounds.addBounds(bounds, Matrix.IDENTITY);\n\n        boundsPool.return(bounds);\n    }\n\n    if (!skipUpdateTransform)\n    {\n        matrixPool.return(worldTransform);\n    }\n}\n\nexport function updateTransformBackwards(target: Container, parentTransform: Matrix)\n{\n    const parent = target.parent;\n\n    if (parent)\n    {\n        updateTransformBackwards(parent, parentTransform);\n\n        parent.updateLocalTransform();\n\n        parentTransform.append(parent.localTransform);\n    }\n\n    return parentTransform;\n}\n","import { Matrix } from '../../../maths/matrix/Matrix';\nimport { warn } from '../../../utils/logging/warn';\nimport { boundsPool, matrixPool } from './utils/matrixAndBoundsPool';\n\nimport type { Renderable } from '../../../rendering/renderers/shared/Renderable';\nimport type { Container } from '../Container';\nimport type { Bounds } from './Bounds';\n\nexport function getLocalBounds(target: Container, bounds: Bounds, relativeMatrix?: Matrix): Bounds\n{\n    bounds.clear();\n\n    relativeMatrix ||= Matrix.IDENTITY;\n\n    _getLocalBounds(target, bounds, relativeMatrix, target, true);\n\n    if (!bounds.isValid)\n    {\n        bounds.set(0, 0, 0, 0);\n    }\n\n    return bounds;\n}\n\nfunction _getLocalBounds(\n    target: Container,\n    bounds: Bounds,\n    parentTransform: Matrix,\n    rootContainer: Container,\n    isRoot: boolean\n): void\n{\n    let relativeTransform: Matrix;\n\n    if (!isRoot)\n    {\n        if (!target.visible || !target.measurable) return;\n\n        target.updateLocalTransform();\n\n        const localTransform = target.localTransform;\n\n        relativeTransform = matrixPool.get();\n        relativeTransform.appendFrom(localTransform, parentTransform);\n    }\n    else\n    {\n        relativeTransform = matrixPool.get();\n        relativeTransform = parentTransform.copyTo(relativeTransform);\n    }\n\n    const parentBounds = bounds;\n    const preserveBounds = !!target.effects.length;\n\n    if (preserveBounds)\n    {\n        bounds = boundsPool.get().clear();\n    }\n\n    if (target.boundsArea)\n    {\n        bounds.addRect(target.boundsArea, relativeTransform);\n    }\n    else\n    {\n        if (target.renderPipeId)\n        {\n            bounds.matrix = relativeTransform;\n            (target as Renderable).addBounds(bounds);\n        }\n\n        const children = target.children;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            _getLocalBounds(children[i], bounds, relativeTransform, rootContainer, false);\n        }\n    }\n\n    if (preserveBounds)\n    {\n        for (let i = 0; i < target.effects.length; i++)\n        {\n            target.effects[i].addLocalBounds?.(bounds, rootContainer);\n        }\n\n        // TODO - make a add transformed bounds?\n        parentBounds.addBounds(bounds, Matrix.IDENTITY);\n\n        boundsPool.return(bounds);\n    }\n\n    matrixPool.return(relativeTransform);\n}\n\nexport function getParent(target: Container, root: Container, matrix: Matrix)\n{\n    const parent = target.parent;\n\n    if (!parent)\n    {\n        // we have reach the top of the tree!\n        // #if _DEBUG\n        warn('Item is not inside the root container');\n        // #endif\n\n        return;\n    }\n\n    if (parent !== root)\n    {\n        getParent(parent, root, matrix);\n\n        parent.updateLocalTransform();\n        matrix.append(parent.localTransform);\n    }\n}\n\n","import { Matrix } from '../../../../maths/matrix/Matrix';\nimport { Pool } from '../../../../utils/pool/Pool';\nimport { Bounds } from '../Bounds';\n\nimport type { PoolItem } from '../../../../utils/pool/Pool';\n\ntype MatrixPoolItem = Matrix & PoolItem;\ntype BoundsPoolItem = Bounds & PoolItem;\nexport const matrixPool = new Pool<MatrixPoolItem>(Matrix);\nexport const boundsPool = new Pool<BoundsPoolItem>(Bounds);\n","import { multiplyHexColors } from '../../container/utils/multiplyHexColors';\n\nimport type { Batch, BatchableObject, Batcher } from '../../../rendering/batcher/shared/Batcher';\nimport type { IndexBufferArray } from '../../../rendering/renderers/shared/geometry/Geometry';\nimport type { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport type { Graphics } from './Graphics';\n\n/**\n * A batchable graphics object.\n * @ignore\n */\nexport class BatchableGraphics implements BatchableObject\n{\n    public indexStart: number;\n    public textureId: number;\n    public texture: Texture;\n    public location: number;\n    public batcher: Batcher = null;\n    public batch: Batch = null;\n    public renderable: Graphics;\n    public indexOffset: number;\n    public indexSize: number;\n    public vertexOffset: number;\n    public vertexSize: number;\n    public color: number;\n    public alpha: number;\n    public applyTransform = true;\n    public roundPixels: 0 | 1 = 0;\n\n    public geometryData: { vertices: number[]; uvs: number[]; indices: number[]; };\n\n    get blendMode()\n    {\n        if (this.applyTransform)\n        {\n            return this.renderable.groupBlendMode;\n        }\n\n        return 'normal';\n    }\n\n    public packIndex(indexBuffer: IndexBufferArray, index: number, indicesOffset: number)\n    {\n        const indices = this.geometryData.indices;\n\n        for (let i = 0; i < this.indexSize; i++)\n        {\n            indexBuffer[index++] = indices[i + this.indexOffset] + indicesOffset - this.vertexOffset;\n        }\n    }\n\n    public packAttributes(\n        float32View: Float32Array,\n        uint32View: Uint32Array,\n        index: number,\n        textureId: number\n    )\n    {\n        const geometry = this.geometryData;\n        const graphics = this.renderable;\n\n        const positions = geometry.vertices;\n        const uvs = geometry.uvs;\n\n        const offset = this.vertexOffset * 2;\n        const vertSize = (this.vertexOffset + this.vertexSize) * 2;\n\n        const rgb = this.color;\n        const bgr = (rgb >> 16) | (rgb & 0xff00) | ((rgb & 0xff) << 16);\n\n        if (this.applyTransform)\n        {\n            const argb = multiplyHexColors(bgr, graphics.groupColor)\n            + ((this.alpha * graphics.groupAlpha * 255) << 24);\n\n            const wt = graphics.groupTransform;\n            const textureIdAndRound = (textureId << 16) | (this.roundPixels & 0xFFFF);\n\n            const a = wt.a;\n            const b = wt.b;\n            const c = wt.c;\n            const d = wt.d;\n            const tx = wt.tx;\n            const ty = wt.ty;\n\n            for (let i = offset; i < vertSize; i += 2)\n            {\n                const x = positions[i];\n                const y = positions[i + 1];\n\n                float32View[index] = (a * x) + (c * y) + tx;\n                float32View[index + 1] = (b * x) + (d * y) + ty;\n\n                float32View[index + 2] = uvs[i];\n                float32View[index + 3] = uvs[i + 1];\n\n                uint32View[index + 4] = argb;\n                uint32View[index + 5] = textureIdAndRound;\n\n                index += 6;\n            }\n        }\n        else\n        {\n            const argb = bgr + ((this.alpha * 255) << 24);\n\n            for (let i = offset; i < vertSize; i += 2)\n            {\n                float32View[index] = positions[i];\n                float32View[index + 1] = positions[i + 1];\n\n                float32View[index + 2] = uvs[i];\n                float32View[index + 3] = uvs[i + 1];\n\n                uint32View[index + 4] = argb;\n                uint32View[index + 5] = textureId << 16;\n\n                index += 6;\n            }\n        }\n    }\n\n    // TODO rename to vertexSize\n    get vertSize()\n    {\n        return this.vertexSize;\n    }\n\n    public copyTo(gpuBuffer: BatchableGraphics)\n    {\n        gpuBuffer.indexOffset = this.indexOffset;\n        gpuBuffer.indexSize = this.indexSize;\n\n        gpuBuffer.vertexOffset = this.vertexOffset;\n        gpuBuffer.vertexSize = this.vertexSize;\n\n        gpuBuffer.color = this.color;\n        gpuBuffer.alpha = this.alpha;\n\n        gpuBuffer.texture = this.texture;\n        gpuBuffer.geometryData = this.geometryData;\n    }\n\n    public reset()\n    {\n        this.applyTransform = true;\n    }\n}\n","export function multiplyHexColors(color1: number, color2: number): number\n{\n    if (color1 === 0xFFFFFF || !color2) return color2;\n    if (color2 === 0xFFFFFF || !color1) return color1;\n\n    const r1 = (color1 >> 16) & 0xFF;\n    const g1 = (color1 >> 8) & 0xFF;\n    const b1 = color1 & 0xFF;\n\n    const r2 = (color2 >> 16) & 0xFF;\n    const g2 = (color2 >> 8) & 0xFF;\n    const b2 = color2 & 0xFF;\n\n    const r = (r1 * r2) / 255;\n    const g = (g1 * g2) / 255;\n    const b = (b1 * b2) / 255;\n\n    return (r << 16) + (g << 8) + b;\n}\n","import { deprecation, v8_0_0 } from '../../../utils/logging/deprecation';\nimport { Container } from '../../container/Container';\nimport { GraphicsContext } from './GraphicsContext';\n\nimport type { ColorSource } from '../../../color/Color';\nimport type { Matrix } from '../../../maths/matrix/Matrix';\nimport type { PointData } from '../../../maths/point/PointData';\nimport type { Instruction } from '../../../rendering/renderers/shared/instructions/Instruction';\nimport type { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport type { View } from '../../../rendering/renderers/shared/view/View';\nimport type { Bounds } from '../../container/bounds/Bounds';\nimport type { ContainerOptions } from '../../container/Container';\nimport type { ContextDestroyOptions, DestroyOptions } from '../../container/destroyTypes';\nimport type { FillInput, FillStyle, StrokeStyle } from './FillTypes';\nimport type { GraphicsPath } from './path/GraphicsPath';\nimport type { RoundedPoint } from './path/roundShape';\n\n/**\n * Constructor options used for `Graphics` instances.\n * ```js\n * const graphics = new Graphics({\n *    fillStyle: { color: 0xff0000, alpha: 0.5 },\n *    strokeStyle: { color: 0x00ff00, width: 2 },\n * });\n * ```\n * @see {@link scene.Graphics}\n * @memberof scene\n */\nexport interface GraphicsOptions extends ContainerOptions\n{\n    /** The GraphicsContext to use, useful for reuse and optimisation */\n    context?: GraphicsContext;\n    /** Whether or not to round the x/y position. */\n    roundPixels?: boolean;\n}\n\n/**\n * The Graphics class is primarily used to render primitive shapes such as lines, circles and\n * rectangles to the display, and to color and fill them.  However, you can also use a Graphics\n * object to build a list of primitives to use as a mask, or as a complex hitArea.\n * @memberof scene\n * @extends scene.Container\n */\nexport class Graphics extends Container implements View, Instruction\n{\n    public readonly canBundle = true;\n    public readonly renderPipeId = 'graphics';\n    public batched: boolean;\n\n    public _roundPixels: 0 | 1 = 0;\n\n    public _didGraphicsUpdate: boolean;\n\n    private _context: GraphicsContext;\n    private readonly _ownedContext: GraphicsContext;\n\n    /**\n     * @param options - Options for the Graphics.\n     */\n    constructor(options?: GraphicsOptions | GraphicsContext)\n    {\n        if (options instanceof GraphicsContext)\n        {\n            options = { context: options };\n        }\n\n        const { context, roundPixels, ...rest } = options || {};\n\n        super({\n            label: 'Graphics',\n            ...rest\n        });\n\n        if (!context)\n        {\n            this._context = this._ownedContext = new GraphicsContext();\n        }\n        else\n        {\n            this._context = context;\n        }\n\n        this._context.on('update', this.onViewUpdate, this);\n\n        this.allowChildren = false;\n        this.roundPixels = roundPixels ?? false;\n    }\n\n    set context(context: GraphicsContext)\n    {\n        if (context === this._context) return;\n\n        this._context.off('update', this.onViewUpdate, this);\n\n        this._context = context;\n\n        // TODO store this bound function somewhere else..\n        this._context.on('update', this.onViewUpdate, this);\n\n        this.onViewUpdate();\n    }\n\n    get context(): GraphicsContext\n    {\n        return this._context;\n    }\n\n    /**\n     * The local bounds of the graphic.\n     * @type {rendering.Bounds}\n     */\n    get bounds(): Bounds\n    {\n        return this._context.bounds;\n    }\n\n    /**\n     * Adds the bounds of this object to the bounds object.\n     * @param bounds - The output bounds object.\n     */\n    public addBounds(bounds: Bounds)\n    {\n        bounds.addBounds(this._context.bounds);\n    }\n\n    /**\n     * Checks if the object contains the given point.\n     * @param point - The point to check\n     */\n    public containsPoint(point: PointData)\n    {\n        return this._context.containsPoint(point);\n    }\n\n    /**\n     *  Whether or not to round the x/y position of the graphic.\n     * @type {boolean}\n     */\n    get roundPixels()\n    {\n        return !!this._roundPixels;\n    }\n\n    set roundPixels(value: boolean)\n    {\n        this._roundPixels = value ? 1 : 0;\n    }\n\n    protected onViewUpdate()\n    {\n        // increment from the 12th bit!\n        this._didChangeId += 1 << 12;\n        this._didGraphicsUpdate = true;\n\n        if (this.didViewUpdate) return;\n        this.didViewUpdate = true;\n\n        const renderGroup = this.renderGroup || this.parentRenderGroup;\n\n        if (renderGroup)\n        {\n            renderGroup.onChildViewUpdate(this);\n        }\n    }\n\n    /**\n     * Destroys this graphics renderable and optionally its context.\n     * @param options - Options parameter. A boolean will act as if all options\n     *\n     * If the context was created by this graphics and `destroy(false)` or `destroy()` is called\n     * then the context will still be destroyed.\n     *\n     * If you want to explicitly not destroy this context that this graphics created,\n     * then you should pass destroy({ context: false })\n     *\n     * If the context was passed in as an argument to the constructor then it will not be destroyed\n     * @param {boolean} [options.texture=false] - Should destroy the texture of the graphics context\n     * @param {boolean} [options.textureSource=false] - Should destroy the texture source of the graphics context\n     * @param {boolean} [options.context=false] - Should destroy the context\n     */\n    public destroy(options?: DestroyOptions): void\n    {\n        if (this._ownedContext && !options)\n        {\n            this._ownedContext.destroy(options);\n        }\n        else if (options === true || (options as ContextDestroyOptions)?.context === true)\n        {\n            this._context.destroy(options);\n        }\n\n        (this._ownedContext as null) = null;\n        this._context = null;\n\n        super.destroy(options);\n    }\n\n    private _callContextMethod(method: keyof GraphicsContext, args: any[]): this\n    {\n        (this.context as any)[method](...args);\n\n        return this;\n    }\n\n    // --------------------------------------- GraphicsContext methods ---------------------------------------\n    /**\n     * Sets the current fill style of the graphics context. The fill style can be a color, gradient,\n     * pattern, or a more complex style defined by a FillStyle object.\n     * @param {FillInput} args - The fill style to apply. This can be a simple color, a gradient or\n     * pattern object, or a FillStyle or ConvertedFillStyle object.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public setFillStyle(...args: Parameters<GraphicsContext['setFillStyle']>): this\n    {\n        return this._callContextMethod('setFillStyle', args);\n    }\n\n    /**\n     * Sets the current stroke style of the graphics context. Similar to fill styles, stroke styles can\n     * encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n     * @param {StrokeInput} args - The stroke style to apply. Can be defined as a color, a gradient or pattern,\n     * or a StrokeStyle or ConvertedStrokeStyle object.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public setStrokeStyle(...args: Parameters<GraphicsContext['setStrokeStyle']>): this\n    {\n        return this._callContextMethod('setStrokeStyle', args);\n    }\n\n    /**\n     * Fills the current or given path with the current fill style. This method can optionally take\n     * a color and alpha for a simple fill, or a more complex FillStyle object for advanced fills.\n     * @param {FillStyle} style - (Optional) The style to fill the path with. Can be a color, gradient, pattern, or a\n     * complex style object. If omitted, uses the current fill style.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public fill(style?: FillStyle): this;\n    /** @deprecated 8.0.0 */\n    public fill(color: ColorSource, alpha?: number): this;\n    public fill(...args: [FillStyle | ColorSource, number?]): this\n    {\n        return this._callContextMethod('fill', args);\n    }\n    /**\n     * Strokes the current path with the current stroke style. This method can take an optional\n     * FillStyle parameter to define the stroke's appearance, including its color, width, and other properties.\n     * @param {FillStyle} args - (Optional) The stroke style to apply. Can be defined as a simple color or a more\n     * complex style object. If omitted, uses the current stroke style.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public stroke(...args: Parameters<GraphicsContext['stroke']>): this\n    {\n        return this._callContextMethod('stroke', args);\n    }\n    /**\n     * Adds a texture to the graphics context. This method supports multiple overloads for specifying the texture,\n     * tint, and dimensions. If only a texture is provided, it uses the texture's width and height for drawing.\n     * Additional parameters allow for specifying a tint color, and custom dimensions for the texture drawing area.\n     * @param texture - The Texture object to use.\n     * @param tint - (Optional) A ColorSource to tint the texture. If not provided, defaults to white (0xFFFFFF).\n     * @param dx - (Optional) The x-coordinate in the destination canvas at which to place the top-left corner of\n     * the source image.\n     * @param dy - (Optional) The y-coordinate in the destination canvas at which to place the top-left corner of\n     * the source image.\n     * @param dw - (Optional) The width of the rectangle within the source image to draw onto the destination canvas.\n     * If not provided, uses the texture's frame width.\n     * @param dh - (Optional) The height of the rectangle within the source image to draw onto the destination canvas.\n     * If not provided, uses the texture's frame height.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public texture(texture: Texture, tint?: ColorSource, dx?: number, dy?: number, dw?: number, dh?: number): this;\n    public texture(texture: Texture): this;\n    public texture(...args: [Texture, number?, number?, number?, number?, number?]): this\n    {\n        return this._callContextMethod('texture', args);\n    }\n    /**\n     * Resets the current path. Any previous path and its commands are discarded and a new path is\n     * started. This is typically called before beginning a new shape or series of drawing commands.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public beginPath(): this\n    {\n        return this._callContextMethod('beginPath', []);\n    }\n    /**\n     * Applies a cutout to the last drawn shape. This is used to create holes or complex shapes by\n     * subtracting a path from the previously drawn path. If a hole is not completely in a shape, it will\n     * fail to cut correctly!\n     */\n    public cut(): this\n    {\n        return this._callContextMethod('cut', []);\n    }\n    /**\n     * Adds an arc to the current path, which is centered at (x, y) with the specified radius,\n     * starting and ending angles, and direction.\n     * @param x - The x-coordinate of the arc's center.\n     * @param y - The y-coordinate of the arc's center.\n     * @param radius - The arc's radius.\n     * @param startAngle - The starting angle, in radians.\n     * @param endAngle - The ending angle, in radians.\n     * @param counterclockwise - (Optional) Specifies whether the arc is drawn counterclockwise (true) or clockwise\n     * (false). Defaults to false.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public arc(x: number, y: number, radius: number, startAngle: number, endAngle: number, counterclockwise?: boolean): this;\n    public arc(...args: Parameters<GraphicsContext['arc']>): this\n    {\n        return this._callContextMethod('arc', args);\n    }\n    /**\n     * Adds an arc to the current path with the given control points and radius, connected to the previous point\n     * by a straight line if necessary.\n     * @param x1 - The x-coordinate of the first control point.\n     * @param y1 - The y-coordinate of the first control point.\n     * @param x2 - The x-coordinate of the second control point.\n     * @param y2 - The y-coordinate of the second control point.\n     * @param radius - The arc's radius.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public arcTo(x1: number, y1: number, x2: number, y2: number, radius: number): this;\n    public arcTo(...args: Parameters<GraphicsContext['arcTo']>): this\n    {\n        return this._callContextMethod('arcTo', args);\n    }\n    /**\n     * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n     * @param rx - The x-radius of the ellipse.\n     * @param ry - The y-radius of the ellipse.\n     * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n     * to the x-axis of the coordinate system, in degrees.\n     * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n     * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n     * @param x - The x-coordinate of the arc's end point.\n     * @param y - The y-coordinate of the arc's end point.\n     * @returns The instance of the current object for chaining.\n     */\n    public arcToSvg(\n        rx: number, ry: number, xAxisRotation: number, largeArcFlag: number, sweepFlag: number, x: number, y: number\n    ): this;\n    public arcToSvg(...args: Parameters<GraphicsContext['arcToSvg']>): this\n    {\n        return this._callContextMethod('arcToSvg', args);\n    }\n    /**\n     * Adds a cubic Bezier curve to the path.\n     * It requires three points: the first two are control points and the third one is the end point.\n     * The starting point is the last point in the current path.\n     * @param cp1x - The x-coordinate of the first control point.\n     * @param cp1y - The y-coordinate of the first control point.\n     * @param cp2x - The x-coordinate of the second control point.\n     * @param cp2y - The y-coordinate of the second control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public bezierCurveTo(\n        cp1x: number, cp1y: number, cp2x: number, cp2y: number, x: number, y: number, smoothness?: number\n    ): this;\n    public bezierCurveTo(...args: Parameters<GraphicsContext['bezierCurveTo']>): this\n    {\n        return this._callContextMethod('bezierCurveTo', args);\n    }\n    /**\n     * Closes the current path by drawing a straight line back to the start.\n     * If the shape is already closed or there are no points in the path, this method does nothing.\n     * @returns The instance of the current object for chaining.\n     */\n    public closePath(): this\n    {\n        return this._callContextMethod('closePath', []);\n    }\n    /**\n     * Draws an ellipse at the specified location and with the given x and y radii.\n     * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n     * @param x - The x-coordinate of the center of the ellipse.\n     * @param y - The y-coordinate of the center of the ellipse.\n     * @param radiusX - The horizontal radius of the ellipse.\n     * @param radiusY - The vertical radius of the ellipse.\n     * @returns The instance of the current object for chaining.\n     */\n    public ellipse(x: number, y: number, radiusX: number, radiusY: number): this;\n    public ellipse(...args: Parameters<GraphicsContext['ellipse']>): this\n    {\n        return this._callContextMethod('ellipse', args);\n    }\n    /**\n     * Draws a circle shape. This method adds a new circle path to the current drawing.\n     * @param x - The x-coordinate of the center of the circle.\n     * @param y - The y-coordinate of the center of the circle.\n     * @param radius - The radius of the circle.\n     * @returns The instance of the current object for chaining.\n     */\n    public circle(x: number, y: number, radius: number): this;\n    public circle(...args: Parameters<GraphicsContext['circle']>): this\n    {\n        return this._callContextMethod('circle', args);\n    }\n    /**\n     * Adds another `GraphicsPath` to this path, optionally applying a transformation.\n     * @param path - The `GraphicsPath` to add.\n     * @returns The instance of the current object for chaining.\n     */\n    public path(path: GraphicsPath): this;\n    public path(...args: Parameters<GraphicsContext['path']>): this\n    {\n        return this._callContextMethod('path', args);\n    }\n    /**\n     * Connects the current point to a new point with a straight line. This method updates the current path.\n     * @param x - The x-coordinate of the new point to connect to.\n     * @param y - The y-coordinate of the new point to connect to.\n     * @returns The instance of the current object for chaining.\n     */\n    public lineTo(x: number, y: number): this;\n    public lineTo(...args: Parameters<GraphicsContext['lineTo']>): this\n    {\n        return this._callContextMethod('lineTo', args);\n    }\n    /**\n     * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n     * @param x - The x-coordinate for the starting point.\n     * @param y - The y-coordinate for the starting point.\n     * @returns The instance of the current object for chaining.\n     */\n    public moveTo(x: number, y: number): this;\n    public moveTo(...args: Parameters<GraphicsContext['moveTo']>): this\n    {\n        return this._callContextMethod('moveTo', args);\n    }\n    /**\n     * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n     * The starting point is the last point in the current path.\n     * @param cpx - The x-coordinate of the control point.\n     * @param cpy - The y-coordinate of the control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public quadraticCurveTo(cpx: number, cpy: number, x: number, y: number, smoothness?: number): this;\n    public quadraticCurveTo(...args: Parameters<GraphicsContext['quadraticCurveTo']>): this\n    {\n        return this._callContextMethod('quadraticCurveTo', args);\n    }\n    /**\n     * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n     * @param x - The x-coordinate of the top-left corner of the rectangle.\n     * @param y - The y-coordinate of the top-left corner of the rectangle.\n     * @param w - The width of the rectangle.\n     * @param h - The height of the rectangle.\n     * @returns The instance of the current object for chaining.\n     */\n    public rect(x: number, y: number, w: number, h: number): this;\n    public rect(...args: Parameters<GraphicsContext['rect']>): this\n    {\n        return this._callContextMethod('rect', args);\n    }\n    /**\n     * Draws a rectangle with rounded corners.\n     * The corner radius can be specified to determine how rounded the corners should be.\n     * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n     * @param x - The x-coordinate of the top-left corner of the rectangle.\n     * @param y - The y-coordinate of the top-left corner of the rectangle.\n     * @param w - The width of the rectangle.\n     * @param h - The height of the rectangle.\n     * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundRect(x: number, y: number, w: number, h: number, radius?: number): this;\n    public roundRect(...args: Parameters<GraphicsContext['roundRect']>): this\n    {\n        return this._callContextMethod('roundRect', args);\n    }\n    /**\n     * Draws a polygon shape by specifying a sequence of points. This method allows for the creation of complex polygons,\n     * which can be both open and closed. An optional transformation can be applied, enabling the polygon to be scaled,\n     * rotated, or translated as needed.\n     * @param points - An array of numbers, or an array of PointData objects eg [{x,y}, {x,y}, {x,y}]\n     * representing the x and y coordinates, of the polygon's vertices, in sequence.\n     * @param close - A boolean indicating whether to close the polygon path. True by default.\n     * @returns The instance of the current object for chaining further drawing commands.\n     */\n    public poly(points: number[] | PointData[], close?: boolean): this;\n    public poly(...args: Parameters<GraphicsContext['poly']>): this\n    {\n        return this._callContextMethod('poly', args);\n    }\n    /**\n     * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n     * @param x - The x-coordinate of the center of the polygon.\n     * @param y - The y-coordinate of the center of the polygon.\n     * @param radius - The radius of the circumscribed circle of the polygon.\n     * @param sides - The number of sides of the polygon. Must be 3 or more.\n     * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n     * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n     * @returns The instance of the current object for chaining.\n     */\n    public regularPoly(x: number, y: number, radius: number, sides: number, rotation?: number, transform?: Matrix): this;\n    public regularPoly(...args: Parameters<GraphicsContext['regularPoly']>): this\n    {\n        return this._callContextMethod('regularPoly', args);\n    }\n    /**\n     * Draws a polygon with rounded corners.\n     * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n     * @param x - The x-coordinate of the center of the polygon.\n     * @param y - The y-coordinate of the center of the polygon.\n     * @param radius - The radius of the circumscribed circle of the polygon.\n     * @param sides - The number of sides of the polygon. Must be 3 or more.\n     * @param corner - The radius of the rounding of the corners.\n     * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundPoly(x: number, y: number, radius: number, sides: number, corner: number, rotation?: number): this;\n    public roundPoly(...args: Parameters<GraphicsContext['roundPoly']>): this\n    {\n        return this._callContextMethod('roundPoly', args);\n    }\n    /**\n     * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n     * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n     * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n     * A minimum of 3 points is required.\n     * @param radius - The default radius for the corners.\n     * This radius is applied to all corners unless overridden in `points`.\n     * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n     *  method instead of an arc method. Defaults to false.\n     * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n     * Higher values make the curve smoother.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundShape(points: RoundedPoint[], radius: number, useQuadratic?: boolean, smoothness?: number): this;\n    public roundShape(...args: Parameters<GraphicsContext['roundShape']>): this\n    {\n        return this._callContextMethod('roundShape', args);\n    }\n    /**\n     * Draw Rectangle with fillet corners. This is much like rounded rectangle\n     * however it support negative numbers as well for the corner radius.\n     * @param x - Upper left corner of rect\n     * @param y - Upper right corner of rect\n     * @param width - Width of rect\n     * @param height - Height of rect\n     * @param fillet - accept negative or positive values\n     */\n    public filletRect(x: number, y: number, width: number, height: number, fillet: number): this;\n    public filletRect(...args: Parameters<GraphicsContext['filletRect']>): this\n    {\n        return this._callContextMethod('filletRect', args);\n    }\n    /**\n     * Draw Rectangle with chamfer corners. These are angled corners.\n     * @param x - Upper left corner of rect\n     * @param y - Upper right corner of rect\n     * @param width - Width of rect\n     * @param height - Height of rect\n     * @param chamfer - non-zero real number, size of corner cutout\n     * @param transform\n     */\n    public chamferRect(x: number, y: number, width: number, height: number, chamfer: number, transform?: Matrix): this;\n    public chamferRect(...args: Parameters<GraphicsContext['chamferRect']>): this\n    {\n        return this._callContextMethod('chamferRect', args);\n    }\n    /**\n     * Draws a star shape centered at a specified location. This method allows for the creation\n     *  of stars with a variable number of points, outer radius, optional inner radius, and rotation.\n     * The star is drawn as a closed polygon with alternating outer and inner vertices to create the star's points.\n     * An optional transformation can be applied to scale, rotate, or translate the star as needed.\n     * @param x - The x-coordinate of the center of the star.\n     * @param y - The y-coordinate of the center of the star.\n     * @param points - The number of points of the star.\n     * @param radius - The outer radius of the star (distance from the center to the outer points).\n     * @param innerRadius - Optional. The inner radius of the star\n     * (distance from the center to the inner points between the outer points).\n     * If not provided, defaults to half of the `radius`.\n     * @param rotation - Optional. The rotation of the star in radians, where 0 is aligned with the y-axis.\n     * Defaults to 0, meaning one point is directly upward.\n     * @returns The instance of the current object for chaining further drawing commands.\n     */\n    public star(x: number, y: number, points: number, radius: number, innerRadius?: number, rotation?: number): this;\n    public star(...args: Parameters<GraphicsContext['star']>): this\n    {\n        return this._callContextMethod('star', args);\n    }\n    /**\n     * Parses and renders an SVG string into the graphics context. This allows for complex shapes and paths\n     * defined in SVG format to be drawn within the graphics context.\n     * @param svg - The SVG string to be parsed and rendered.\n     */\n    public svg(svg: string): this;\n    public svg(...args: Parameters<GraphicsContext['svg']>): this\n    {\n        return this._callContextMethod('svg', args);\n    }\n    /**\n     * Restores the most recently saved graphics state by popping the top of the graphics state stack.\n     * This includes transformations, fill styles, and stroke styles.\n     */\n    public restore(): this;\n    public restore(...args: Parameters<GraphicsContext['restore']>): this\n    {\n        return this._callContextMethod('restore', args);\n    }\n    /** Saves the current graphics state, including transformations, fill styles, and stroke styles, onto a stack. */\n    public save(): this\n    {\n        return this._callContextMethod('save', []);\n    }\n    /**\n     * Returns the current transformation matrix of the graphics context.\n     * @returns The current transformation matrix.\n     */\n    public getTransform(): Matrix\n    {\n        return this.context.getTransform();\n    }\n    /**\n     * Resets the current transformation matrix to the identity matrix, effectively removing\n     * any transformations (rotation, scaling, translation) previously applied.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public resetTransform(): this\n    {\n        return this._callContextMethod('resetTransform', []);\n    }\n    /**\n     * Applies a rotation transformation to the graphics context around the current origin.\n     * @param angle - The angle of rotation in radians.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public rotateTransform(angle: number): this;\n    public rotateTransform(...args: Parameters<GraphicsContext['rotate']>): this\n    {\n        return this._callContextMethod('rotate', args);\n    }\n    /**\n     * Applies a scaling transformation to the graphics context, scaling drawings by x horizontally and by y vertically.\n     * @param x - The scale factor in the horizontal direction.\n     * @param y - (Optional) The scale factor in the vertical direction.\n     * If not specified, the x value is used for both directions.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public scaleTransform(x: number, y?: number): this;\n    public scaleTransform(...args: Parameters<GraphicsContext['scale']>): this\n    {\n        return this._callContextMethod('scale', args);\n    }\n    /**\n     * Sets the current transformation matrix of the graphics context to the specified matrix or values.\n     * This replaces the current transformation matrix.\n     * @param a - The value for the a property of the matrix, or a Matrix object to use directly.\n     * @param b - The value for the b property of the matrix.\n     * @param c - The value for the c property of the matrix.\n     * @param d - The value for the d property of the matrix.\n     * @param dx - The value for the tx (translate x) property of the matrix.\n     * @param dy - The value for the ty (translate y) property of the matrix.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public setTransform(transform: Matrix): this;\n    public setTransform(a: number, b: number, c: number, d: number, dx: number, dy: number): this;\n    public setTransform(a: number | Matrix, b?: number, c?: number, d?: number, dx?: number, dy?: number): this;\n    public setTransform(...args: [Matrix] | [number, number, number, number, number, number]): this\n    {\n        return this._callContextMethod('setTransform', args);\n    }\n    /**\n     * Applies the specified transformation matrix to the current graphics context by multiplying\n     * the current matrix with the specified matrix.\n     * @param a - The value for the a property of the matrix, or a Matrix object to use directly.\n     * @param b - The value for the b property of the matrix.\n     * @param c - The value for the c property of the matrix.\n     * @param d - The value for the d property of the matrix.\n     * @param dx - The value for the tx (translate x) property of the matrix.\n     * @param dy - The value for the ty (translate y) property of the matrix.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public transform(transform: Matrix): this;\n    public transform(a: number, b: number, c: number, d: number, dx: number, dy: number): this;\n    public transform(a: number | Matrix, b?: number, c?: number, d?: number, dx?: number, dy?: number): this;\n    public transform(...args: [Matrix] | [number, number, number, number, number, number]): this\n    {\n        return this._callContextMethod('transform', args);\n    }\n    /**\n     * Applies a translation transformation to the graphics context, moving the origin by the specified amounts.\n     * @param x - The amount to translate in the horizontal direction.\n     * @param y - (Optional) The amount to translate in the vertical direction. If not specified,\n     * the x value is used for both directions.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public translateTransform(x: number, y?: number): this;\n    public translateTransform(...args: Parameters<GraphicsContext['translate']>): this\n    {\n        return this._callContextMethod('translate', args);\n    }\n    /**\n     * Clears all drawing commands from the graphics context, effectively resetting it. This includes clearing the path,\n     * and optionally resetting transformations to the identity matrix.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public clear(): this\n    {\n        return this._callContextMethod('clear', []);\n    }\n    /**\n     * The fill style to use.\n     * @type {ConvertedFillStyle}\n     */\n    get fillStyle(): GraphicsContext['fillStyle']\n    {\n        return this._context.fillStyle;\n    }\n    set fillStyle(value: FillInput)\n    {\n        this._context.fillStyle = value;\n    }\n    /**\n     * The stroke style to use.\n     * @type {ConvertedStrokeStyle}\n     */\n    get strokeStyle(): GraphicsContext['strokeStyle']\n    {\n        return this._context.strokeStyle;\n    }\n    set strokeStyle(value: StrokeStyle)\n    {\n        this._context.strokeStyle = value;\n    }\n\n    /**\n     * Creates a new Graphics object.\n     * Note that only the context of the object is cloned, not its transform (position,scale,etc)\n     * @param deep - Whether to create a deep clone of the graphics object. If false, the context\n     * will be shared between the two objects (default false). If true, the context will be\n     * cloned (recommended if you need to modify the context in any way).\n     * @returns - A clone of the graphics object\n     */\n    public clone(deep = false): Graphics\n    {\n        if (deep)\n        {\n            return new Graphics(this._context.clone());\n        }\n\n        (this._ownedContext as null) = null;\n        const clone = new Graphics(this._context);\n\n        return clone;\n    }\n\n    // -------- v7 deprecations ---------\n\n    /**\n     * @param width\n     * @param color\n     * @param alpha\n     * @deprecated since 8.0.0 Use {@link Graphics#setStrokeStyle} instead\n     */\n    public lineStyle(width?: number, color?: ColorSource, alpha?: number): this\n    {\n        // #if _DEBUG\n        // eslint-disable-next-line max-len\n        deprecation(v8_0_0, 'Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.');\n        // #endif\n\n        const strokeStyle: Partial<StrokeStyle> = {};\n\n        // avoid undefined assignment\n        width && (strokeStyle.width = width);\n        color && (strokeStyle.color = color);\n        alpha && (strokeStyle.alpha = alpha);\n\n        this.context.strokeStyle = strokeStyle;\n\n        return this;\n    }\n\n    /**\n     * @param color\n     * @param alpha\n     * @deprecated since 8.0.0 Use {@link Graphics#fill} instead\n     */\n    public beginFill(color: ColorSource, alpha?: number)\n    {\n        // #if _DEBUG\n        // eslint-disable-next-line max-len\n        deprecation(v8_0_0, 'Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.');\n        // #endif\n\n        const fillStyle: Partial<FillStyle> = {};\n\n        // avoid undefined assignment\n        color && (fillStyle.color = color);\n        alpha && (fillStyle.alpha = alpha);\n\n        this.context.fillStyle = fillStyle;\n\n        return this;\n    }\n\n    /**\n     * @deprecated since 8.0.0 Use {@link Graphics#fill} instead\n     */\n    public endFill()\n    {\n        // #if _DEBUG\n        // eslint-disable-next-line max-len\n        deprecation(v8_0_0, 'Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.');\n        // #endif\n\n        this.context.fill();\n        const strokeStyle = this.context.strokeStyle;\n\n        if (strokeStyle.width !== GraphicsContext.defaultStrokeStyle.width\n            || strokeStyle.color !== GraphicsContext.defaultStrokeStyle.color\n            || strokeStyle.alpha !== GraphicsContext.defaultStrokeStyle.alpha)\n        {\n            this.context.stroke();\n        }\n\n        return this;\n    }\n\n    /**\n     * @param {...any} args\n     * @deprecated since 8.0.0 Use {@link Graphics#circle} instead\n     */\n    public drawCircle(...args: Parameters<GraphicsContext['circle']>): this\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'Graphics#drawCircle has been renamed to Graphics#circle');\n        // #endif\n\n        return this._callContextMethod('circle', args);\n    }\n\n    /**\n     * @param {...any} args\n     * @deprecated since 8.0.0 Use {@link Graphics#ellipse} instead\n     */\n    public drawEllipse(...args: Parameters<GraphicsContext['ellipse']>): this\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'Graphics#drawEllipse has been renamed to Graphics#ellipse');\n        // #endif\n\n        return this._callContextMethod('ellipse', args);\n    }\n\n    /**\n     * @param {...any} args\n     * @deprecated since 8.0.0 Use {@link Graphics#poly} instead\n     */\n    public drawPolygon(...args: Parameters<GraphicsContext['poly']>): this\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'Graphics#drawPolygon has been renamed to Graphics#poly');\n        // #endif\n\n        return this._callContextMethod('poly', args);\n    }\n\n    /**\n     * @param {...any} args\n     * @deprecated since 8.0.0 Use {@link Graphics#rect} instead\n     */\n    public drawRect(...args: Parameters<GraphicsContext['rect']>): this\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'Graphics#drawRect has been renamed to Graphics#rect');\n        // #endif\n\n        return this._callContextMethod('rect', args);\n    }\n\n    /**\n     * @param {...any} args\n     * @deprecated since 8.0.0 Use {@link Graphics#roundRect} instead\n     */\n    public drawRoundedRect(...args: Parameters<GraphicsContext['roundRect']>): this\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'Graphics#drawRoundedRect has been renamed to Graphics#roundRect');\n        // #endif\n\n        return this._callContextMethod('roundRect', args);\n    }\n\n    /**\n     * @param {...any} args\n     * @deprecated since 8.0.0 Use {@link Graphics#star} instead\n     */\n    public drawStar(...args: Parameters<GraphicsContext['star']>): this\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'Graphics#drawStar has been renamed to Graphics#star');\n        // #endif\n\n        return this._callContextMethod('star', args);\n    }\n}\n","import { Rectangle } from './Rectangle';\n\nimport type { SHAPE_PRIMITIVE } from '../misc/const';\nimport type { ShapePrimitive } from './ShapePrimitive';\n\n/**\n * The Circle object is used to help draw graphics and can also be used to specify a hit area for containers.\n * @memberof maths\n */\nexport class Circle implements ShapePrimitive\n{\n    /**\n     * The X coordinate of the center of this circle\n     * @default 0\n     */\n    public x: number;\n\n    /**\n     * The Y coordinate of the center of this circle\n     * @default 0\n     */\n    public y: number;\n\n    /**\n     * The radius of the circle\n     *  @default 0\n     */\n    public radius: number;\n\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'circle'\n     */\n    public readonly type: SHAPE_PRIMITIVE = 'circle';\n\n    /**\n     * @param x - The X coordinate of the center of this circle\n     * @param y - The Y coordinate of the center of this circle\n     * @param radius - The radius of the circle\n     */\n    constructor(x = 0, y = 0, radius = 0)\n    {\n        this.x = x;\n        this.y = y;\n        this.radius = radius;\n    }\n\n    /**\n     * Creates a clone of this Circle instance\n     * @returns A copy of the Circle\n     */\n    public clone(): Circle\n    {\n        return new Circle(this.x, this.y, this.radius);\n    }\n\n    /**\n     * Checks whether the x and y coordinates given are contained within this circle\n     * @param x - The X coordinate of the point to test\n     * @param y - The Y coordinate of the point to test\n     * @returns Whether the x/y coordinates are within this Circle\n     */\n    public contains(x: number, y: number): boolean\n    {\n        if (this.radius <= 0) return false;\n\n        const r2 = this.radius * this.radius;\n        let dx = (this.x - x);\n        let dy = (this.y - y);\n\n        dx *= dx;\n        dy *= dy;\n\n        return (dx + dy <= r2);\n    }\n\n    /**\n     * Checks whether the x and y coordinates given are contained within this circle including the stroke.\n     * @param x - The X coordinate of the point to test\n     * @param y - The Y coordinate of the point to test\n     * @param width - The width of the line to check\n     * @returns Whether the x/y coordinates are within this Circle\n     */\n    public strokeContains(x: number, y: number, width: number): boolean\n    {\n        if (this.radius === 0) return false;\n\n        const dx = (this.x - x);\n        const dy = (this.y - y);\n        const r = this.radius;\n        const w2 = width / 2;\n        const distance = Math.sqrt((dx * dx) + (dy * dy));\n\n        return (distance < r + w2 && distance > r - w2);\n    }\n\n    /**\n     * Returns the framing rectangle of the circle as a Rectangle object\n     * @param out\n     * @returns The framing rectangle\n     */\n    public getBounds(out?: Rectangle): Rectangle\n    {\n        out = out || new Rectangle();\n\n        out.x = this.x - this.radius;\n        out.y = this.y - this.radius;\n        out.width = this.radius * 2;\n        out.height = this.radius * 2;\n\n        return out;\n    }\n\n    /**\n     * Copies another circle to this one.\n     * @param circle - The circle to copy from.\n     * @returns Returns itself.\n     */\n    public copyFrom(circle: Circle): this\n    {\n        this.x = circle.x;\n        this.y = circle.y;\n        this.radius = circle.radius;\n\n        return this;\n    }\n\n    /**\n     * Copies this circle to another one.\n     * @param circle - The circle to copy to.\n     * @returns Returns given parameter.\n     */\n    public copyTo(circle: Circle): Circle\n    {\n        circle.copyFrom(this);\n\n        return circle;\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`;\n    }\n    // #endif\n}\n","import { Rectangle } from './Rectangle';\n\nimport type { ShapePrimitive } from './ShapePrimitive';\n\n/**\n * The Ellipse object is used to help draw graphics and can also be used to specify a hit area for containers.\n * ```js\n * import { Ellipse } from 'pixi.js';\n *\n * const ellipse = new Ellipse(0, 0, 20, 10); // 40x20 rectangle\n * const isPointInEllipse = ellipse.contains(0, 0); // true\n * ```\n * @memberof maths\n */\nexport class Ellipse implements ShapePrimitive\n{\n    /**\n     * The X coordinate of the center of this ellipse\n     * @default 0\n     */\n    public x: number;\n\n    /**\n     * The Y coordinate of the center of this ellipse\n     * @default 0\n     */\n    public y: number;\n\n    /**\n     * The half width of this ellipse\n     * @default 0\n     */\n    public halfWidth: number;\n\n    /**\n     * The half height of this ellipse\n     * @default 0\n     */\n    public halfHeight: number;\n\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'ellipse'\n     */\n    public readonly type = 'ellipse';\n\n    /**\n     * @param x - The X coordinate of the center of this ellipse\n     * @param y - The Y coordinate of the center of this ellipse\n     * @param halfWidth - The half width of this ellipse\n     * @param halfHeight - The half height of this ellipse\n     */\n    constructor(x = 0, y = 0, halfWidth = 0, halfHeight = 0)\n    {\n        this.x = x;\n        this.y = y;\n        this.halfWidth = halfWidth;\n        this.halfHeight = halfHeight;\n    }\n\n    /**\n     * Creates a clone of this Ellipse instance\n     * @returns {Ellipse} A copy of the ellipse\n     */\n    public clone(): Ellipse\n    {\n        return new Ellipse(this.x, this.y, this.halfWidth, this.halfHeight);\n    }\n\n    /**\n     * Checks whether the x and y coordinates given are contained within this ellipse\n     * @param x - The X coordinate of the point to test\n     * @param y - The Y coordinate of the point to test\n     * @returns Whether the x/y coords are within this ellipse\n     */\n    public contains(x: number, y: number): boolean\n    {\n        if (this.halfWidth <= 0 || this.halfHeight <= 0)\n        {\n            return false;\n        }\n\n        // normalize the coords to an ellipse with center 0,0\n        let normx = ((x - this.x) / this.halfWidth);\n        let normy = ((y - this.y) / this.halfHeight);\n\n        normx *= normx;\n        normy *= normy;\n\n        return (normx + normy <= 1);\n    }\n\n    /**\n     * Checks whether the x and y coordinates given are contained within this ellipse including stroke\n     * @param x - The X coordinate of the point to test\n     * @param y - The Y coordinate of the point to test\n     * @param width\n     * @returns Whether the x/y coords are within this ellipse\n     */\n    public strokeContains(x: number, y: number, width: number): boolean\n    {\n        const { halfWidth, halfHeight } = this;\n\n        if (halfWidth <= 0 || halfHeight <= 0)\n        {\n            return false;\n        }\n\n        const halfStrokeWidth = width / 2;\n        const innerA = halfWidth - halfStrokeWidth;\n        const innerB = halfHeight - halfStrokeWidth;\n        const outerA = halfWidth + halfStrokeWidth;\n        const outerB = halfHeight + halfStrokeWidth;\n\n        const normalizedX = x - this.x;\n        const normalizedY = y - this.y;\n\n        const innerEllipse = ((normalizedX * normalizedX) / (innerA * innerA))\n                           + ((normalizedY * normalizedY) / (innerB * innerB));\n        const outerEllipse = ((normalizedX * normalizedX) / (outerA * outerA))\n                           + ((normalizedY * normalizedY) / (outerB * outerB));\n\n        return innerEllipse > 1 && outerEllipse <= 1;\n    }\n\n    /**\n     * Returns the framing rectangle of the ellipse as a Rectangle object\n     * @returns The framing rectangle\n     */\n    public getBounds(): Rectangle\n    {\n        return new Rectangle(this.x - this.halfWidth, this.y - this.halfHeight, this.halfWidth * 2, this.halfHeight * 2);\n    }\n\n    /**\n     * Copies another ellipse to this one.\n     * @param ellipse - The ellipse to copy from.\n     * @returns Returns itself.\n     */\n    public copyFrom(ellipse: Ellipse): this\n    {\n        this.x = ellipse.x;\n        this.y = ellipse.y;\n        this.halfWidth = ellipse.halfWidth;\n        this.halfHeight = ellipse.halfHeight;\n\n        return this;\n    }\n\n    /**\n     * Copies this ellipse to another one.\n     * @param ellipse - The ellipse to copy to.\n     * @returns Returns given parameter.\n     */\n    public copyTo(ellipse: Ellipse): Ellipse\n    {\n        ellipse.copyFrom(this);\n\n        return ellipse;\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`;\n    }\n    // #endif\n}\n","export function squaredDistanceToLineSegment(\n    x: number, y: number,\n    x1: number, y1: number,\n    x2: number, y2: number\n): number\n{\n    const a = x - x1;\n    const b = y - y1;\n    const c = x2 - x1;\n    const d = y2 - y1;\n\n    const dot = (a * c) + (b * d);\n    const lenSq = (c * c) + (d * d);\n    let param = -1;\n\n    if (lenSq !== 0)\n    {\n        param = dot / lenSq;\n    }\n\n    let xx; let\n        yy;\n\n    if (param < 0)\n    {\n        xx = x1;\n        yy = y1;\n    }\n    else if (param > 1)\n    {\n        xx = x2;\n        yy = y2;\n    }\n\n    else\n    {\n        xx = x1 + (param * c);\n        yy = y1 + (param * d);\n    }\n\n    const dx = x - xx;\n    const dy = y - yy;\n\n    return (dx * dx) + (dy * dy);\n}\n","import { squaredDistanceToLineSegment } from '../misc/squaredDistanceToLineSegment';\nimport { Rectangle } from './Rectangle';\n\nimport type { SHAPE_PRIMITIVE } from '../misc/const';\nimport type { PointData } from '../point/PointData';\nimport type { ShapePrimitive } from './ShapePrimitive';\n\n/**\n * A class to define a shape via user defined coordinates.\n *\n *\n * `Polygon` can accept the following different constructor arguments:\n * - An array of `Point` objects\n * - An array of coordinate pairs\n *\n *\n * These can be passed as a single array, or as a sequence of arguments.\n * ```js\n * import { Polygon } from 'pixi.js';\n *\n * // create a polygon object from an array of points, or an array of coordinate pairs\n * const polygon1 = new Polygon([ new Point(0, 0), new Point(0, 100), new Point(100, 100) ]);\n * const polygon2 = new Polygon([ 0, 0, 0, 100, 100, 100 ]);\n *\n * // or create a polygon object from a sequence of points, or coordinate pairs\n * const polygon3 = new Polygon(new Point(0, 0), new Point(0, 100), new Point(100, 100));\n * const polygon4 = new Polygon(0, 0, 0, 100, 100, 100);\n * ```\n * @memberof maths\n */\nexport class Polygon implements ShapePrimitive\n{\n    /** An array of the points of this polygon. */\n    public points: number[];\n\n    /** `false` after moveTo, `true` after `closePath`. In all other cases it is `true`. */\n    public closePath: boolean;\n\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'polygon'\n     */\n    public readonly type: SHAPE_PRIMITIVE = 'polygon';\n\n    constructor(points: PointData[] | number[]);\n    constructor(...points: PointData[] | number[]);\n    /**\n     * @param points - This can be an array of Points\n     *  that form the polygon, a flat array of numbers that will be interpreted as [x,y, x,y, ...], or\n     *  the arguments passed can be all the points of the polygon e.g.\n     *  `new Polygon(new Point(), new Point(), ...)`, or the arguments passed can be flat\n     *  x,y values e.g. `new Polygon(x,y, x,y, x,y, ...)` where `x` and `y` are Numbers.\n     */\n    constructor(...points: (PointData[] | number[])[] | PointData[] | number[])\n    {\n        let flat = Array.isArray(points[0]) ? points[0] : points;\n\n        // if this is an array of points, convert it to a flat array of numbers\n        if (typeof flat[0] !== 'number')\n        {\n            const p: number[] = [];\n\n            for (let i = 0, il = flat.length; i < il; i++)\n            {\n                p.push((flat[i] as PointData).x, (flat[i] as PointData).y);\n            }\n\n            flat = p;\n        }\n\n        this.points = flat as number[];\n\n        this.closePath = true;\n    }\n\n    /**\n     * Creates a clone of this polygon.\n     * @returns - A copy of the polygon.\n     */\n    public clone(): Polygon\n    {\n        const points = this.points.slice();\n        const polygon = new Polygon(points);\n\n        polygon.closePath = this.closePath;\n\n        return polygon;\n    }\n\n    /**\n     * Checks whether the x and y coordinates passed to this function are contained within this polygon.\n     * @param x - The X coordinate of the point to test.\n     * @param y - The Y coordinate of the point to test.\n     * @returns - Whether the x/y coordinates are within this polygon.\n     */\n    public contains(x: number, y: number): boolean\n    {\n        let inside = false;\n\n        // use some raycasting to test hits\n        // https://github.com/substack/point-in-polygon/blob/master/index.js\n        const length = this.points.length / 2;\n\n        for (let i = 0, j = length - 1; i < length; j = i++)\n        {\n            const xi = this.points[i * 2];\n            const yi = this.points[(i * 2) + 1];\n            const xj = this.points[j * 2];\n            const yj = this.points[(j * 2) + 1];\n            const intersect = ((yi > y) !== (yj > y)) && (x < ((xj - xi) * ((y - yi) / (yj - yi))) + xi);\n\n            if (intersect)\n            {\n                inside = !inside;\n            }\n        }\n\n        return inside;\n    }\n\n    /**\n     * Checks whether the x and y coordinates given are contained within this polygon including the stroke.\n     * @param x - The X coordinate of the point to test\n     * @param y - The Y coordinate of the point to test\n     * @param strokeWidth - The width of the line to check\n     * @returns Whether the x/y coordinates are within this polygon\n     */\n    public strokeContains(x: number, y: number, strokeWidth: number): boolean\n    {\n        const halfStrokeWidth = strokeWidth / 2;\n        const halfStrokeWidthSqrd = halfStrokeWidth * halfStrokeWidth;\n        const { points } = this;\n        const iterationLength = points.length - (this.closePath ? 0 : 2);\n\n        for (let i = 0; i < iterationLength; i += 2)\n        {\n            const x1 = points[i];\n            const y1 = points[i + 1];\n            const x2 = points[(i + 2) % points.length];\n            const y2 = points[(i + 3) % points.length];\n\n            const distanceSqrd = squaredDistanceToLineSegment(x, y, x1, y1, x2, y2);\n\n            if (distanceSqrd <= halfStrokeWidthSqrd)\n            {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Returns the framing rectangle of the polygon as a Rectangle object\n     * @param out - optional rectangle to store the result\n     * @returns The framing rectangle\n     */\n    public getBounds(out?: Rectangle): Rectangle\n    {\n        out = out || new Rectangle();\n\n        const points = this.points;\n\n        let minX = Infinity;\n        let maxX = -Infinity;\n\n        let minY = Infinity;\n        let maxY = -Infinity;\n\n        for (let i = 0, n = points.length; i < n; i += 2)\n        {\n            const x = points[i];\n            const y = points[i + 1];\n\n            minX = x < minX ? x : minX;\n            maxX = x > maxX ? x : maxX;\n\n            minY = y < minY ? y : minY;\n            maxY = y > maxY ? y : maxY;\n        }\n\n        out.x = minX;\n        out.width = maxX - minX;\n\n        out.y = minY;\n        out.height = maxY - minY;\n\n        return out;\n    }\n\n    /**\n     * Copies another polygon to this one.\n     * @param polygon - The polygon to copy from.\n     * @returns Returns itself.\n     */\n    public copyFrom(polygon: Polygon): this\n    {\n        this.points = polygon.points.slice();\n        this.closePath = polygon.closePath;\n\n        return this;\n    }\n\n    /**\n     * Copies this polygon to another one.\n     * @param polygon - The polygon to copy to.\n     * @returns Returns given parameter.\n     */\n    public copyTo(polygon: Polygon): Polygon\n    {\n        polygon.copyFrom(this);\n\n        return polygon;\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js/math:Polygon`\n            + `closeStroke=${this.closePath}`\n            + `points=${this.points.reduce((pointsDesc, currentPoint) => `${pointsDesc}, ${currentPoint}`, '')}]`;\n    }\n    // #endif\n\n    /**\n     * Get the last X coordinate of the polygon\n     * @readonly\n     */\n    get lastX(): number\n    {\n        return this.points[this.points.length - 2];\n    }\n\n    /**\n     * Get the last Y coordinate of the polygon\n     * @readonly\n     */\n    get lastY(): number\n    {\n        return this.points[this.points.length - 1];\n    }\n\n    /**\n     * Get the first X coordinate of the polygon\n     * @readonly\n     */\n    get x(): number\n    {\n        return this.points[this.points.length - 2];\n    }\n    /**\n     * Get the first Y coordinate of the polygon\n     * @readonly\n     */\n    get y(): number\n    {\n        return this.points[this.points.length - 1];\n    }\n}\n\n","import { Rectangle } from './Rectangle';\n\nimport type { ShapePrimitive } from './ShapePrimitive';\n\n// Check corner within stroke width\nconst isCornerWithinStroke = (\n    pX: number,\n    pY: number,\n    cornerX: number,\n    cornerY: number,\n    radius: number,\n    halfStrokeWidth: number\n) =>\n{\n    const dx = pX - cornerX;\n    const dy = pY - cornerY;\n    const distance = Math.sqrt((dx * dx) + (dy * dy));\n\n    return distance >= radius - halfStrokeWidth && distance <= radius + halfStrokeWidth;\n};\n\n/**\n * The `RoundedRectangle` object is an area defined by its position, as indicated by its top-left corner\n * point (`x`, `y`) and by its `width` and its `height`, including a `radius` property that\n * defines the radius of the rounded corners.\n * @memberof maths\n */\nexport class RoundedRectangle implements ShapePrimitive\n{\n    /**\n     * The X coordinate of the upper-left corner of the rounded rectangle\n     * @default 0\n     */\n    public x: number;\n\n    /**\n     * The Y coordinate of the upper-left corner of the rounded rectangle\n     * @default 0\n     */\n    public y: number;\n\n    /**\n     * The overall width of this rounded rectangle\n     * @default 0\n     */\n    public width: number;\n\n    /**\n     * The overall height of this rounded rectangle\n     * @default 0\n     */\n    public height: number;\n\n    /**\n     * Controls the radius of the rounded corners\n     * @default 20\n     */\n    public radius: number;\n\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'roundedRectangle'\n     */\n    public readonly type = 'roundedRectangle';\n\n    /**\n     * @param x - The X coordinate of the upper-left corner of the rounded rectangle\n     * @param y - The Y coordinate of the upper-left corner of the rounded rectangle\n     * @param width - The overall width of this rounded rectangle\n     * @param height - The overall height of this rounded rectangle\n     * @param radius - Controls the radius of the rounded corners\n     */\n    constructor(x = 0, y = 0, width = 0, height = 0, radius = 20)\n    {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.radius = radius;\n    }\n\n    /**\n     * Returns the framing rectangle of the rounded rectangle as a Rectangle object\n     * @param out - optional rectangle to store the result\n     * @returns The framing rectangle\n     */\n    public getBounds(out?: Rectangle): Rectangle\n    {\n        out = out || new Rectangle();\n\n        out.x = this.x;\n        out.y = this.y;\n        out.width = this.width;\n        out.height = this.height;\n\n        return out;\n    }\n\n    /**\n     * Creates a clone of this Rounded Rectangle.\n     * @returns - A copy of the rounded rectangle.\n     */\n    public clone(): RoundedRectangle\n    {\n        return new RoundedRectangle(this.x, this.y, this.width, this.height, this.radius);\n    }\n\n    /**\n     * Copies another rectangle to this one.\n     * @param rectangle - The rectangle to copy from.\n     * @returns Returns itself.\n     */\n    public copyFrom(rectangle: RoundedRectangle): this\n    {\n        this.x = rectangle.x;\n        this.y = rectangle.y;\n        this.width = rectangle.width;\n        this.height = rectangle.height;\n\n        return this;\n    }\n\n    /**\n     * Copies this rectangle to another one.\n     * @param rectangle - The rectangle to copy to.\n     * @returns Returns given parameter.\n     */\n    public copyTo(rectangle: RoundedRectangle): RoundedRectangle\n    {\n        rectangle.copyFrom(this);\n\n        return rectangle;\n    }\n\n    /**\n     * Checks whether the x and y coordinates given are contained within this Rounded Rectangle\n     * @param x - The X coordinate of the point to test.\n     * @param y - The Y coordinate of the point to test.\n     * @returns - Whether the x/y coordinates are within this Rounded Rectangle.\n     */\n    public contains(x: number, y: number): boolean\n    {\n        if (this.width <= 0 || this.height <= 0)\n        {\n            return false;\n        }\n        if (x >= this.x && x <= this.x + this.width)\n        {\n            if (y >= this.y && y <= this.y + this.height)\n            {\n                const radius = Math.max(0, Math.min(this.radius, Math.min(this.width, this.height) / 2));\n\n                if ((y >= this.y + radius && y <= this.y + this.height - radius)\n                || (x >= this.x + radius && x <= this.x + this.width - radius))\n                {\n                    return true;\n                }\n                let dx = x - (this.x + radius);\n                let dy = y - (this.y + radius);\n                const radius2 = radius * radius;\n\n                if ((dx * dx) + (dy * dy) <= radius2)\n                {\n                    return true;\n                }\n                dx = x - (this.x + this.width - radius);\n                if ((dx * dx) + (dy * dy) <= radius2)\n                {\n                    return true;\n                }\n                dy = y - (this.y + this.height - radius);\n                if ((dx * dx) + (dy * dy) <= radius2)\n                {\n                    return true;\n                }\n                dx = x - (this.x + radius);\n                if ((dx * dx) + (dy * dy) <= radius2)\n                {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Checks whether the x and y coordinates given are contained within this rectangle including the stroke.\n     * @param pX - The X coordinate of the point to test\n     * @param pY - The Y coordinate of the point to test\n     * @param strokeWidth - The width of the line to check\n     * @returns Whether the x/y coordinates are within this rectangle\n     */\n    public strokeContains(pX: number, pY: number, strokeWidth: number): boolean\n    {\n        const { x, y, width, height, radius } = this;\n\n        const halfStrokeWidth = strokeWidth / 2;\n        const innerX = x + radius;\n        const innerY = y + radius;\n        const innerWidth = width - (radius * 2);\n        const innerHeight = height - (radius * 2);\n        const rightBound = x + width;\n        const bottomBound = y + height;\n\n        // Check if point is within the vertical edges (excluding corners)\n        if (((pX >= x - halfStrokeWidth && pX <= x + halfStrokeWidth)\n             || (pX >= rightBound - halfStrokeWidth && pX <= rightBound + halfStrokeWidth))\n            && pY >= innerY && pY <= innerY + innerHeight)\n        {\n            return true;\n        }\n\n        // Check if point is within the horizontal edges (excluding corners)\n        if (((pY >= y - halfStrokeWidth && pY <= y + halfStrokeWidth)\n             || (pY >= bottomBound - halfStrokeWidth && pY <= bottomBound + halfStrokeWidth))\n            && pX >= innerX && pX <= innerX + innerWidth)\n        {\n            return true;\n        }\n\n        // Top-left, top-right, bottom-right, bottom-left corners\n        return (\n            // Top-left\n            (pX < innerX && pY < innerY\n                && isCornerWithinStroke(pX, pY, innerX, innerY, radius, halfStrokeWidth))\n            //  top-right\n            || (pX > rightBound - radius && pY < innerY\n                && isCornerWithinStroke(pX, pY, rightBound - radius, innerY, radius, halfStrokeWidth))\n            // bottom-right\n            || (pX > rightBound - radius && pY > bottomBound - radius\n                && isCornerWithinStroke(pX, pY, rightBound - radius, bottomBound - radius, radius, halfStrokeWidth))\n            // bottom-left\n            || (pX < innerX && pY > bottomBound - radius\n                && isCornerWithinStroke(pX, pY, innerX, bottomBound - radius, radius, halfStrokeWidth)));\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}`\n            + `width=${this.width} height=${this.height} radius=${this.radius}]`;\n    }\n    // #endif\n}\n","// thanks to https://github.com/mattdesl/adaptive-bezier-curve\n// for the original code!\n\nimport { GraphicsContextSystem } from '../GraphicsContextSystem';\n\nconst RECURSION_LIMIT = 8;\nconst FLT_EPSILON = 1.19209290e-7;\nconst PATH_DISTANCE_EPSILON = 1.0;\n\nconst curveAngleToleranceEpsilon = 0.01;\nconst mAngleTolerance = 0;\nconst mCuspLimit = 0;\n\nexport function buildAdaptiveBezier(\n    points: number[],\n    sX: number, sY: number,\n    cp1x: number, cp1y: number,\n    cp2x: number, cp2y: number,\n    eX: number, eY: number,\n    smoothness?: number,\n)\n{\n    // TODO expose as a parameter\n    const scale = 1;\n    const smoothing = Math.min(\n        0.99, // a value of 1.0 actually inverts smoothing, so we cap it at 0.99\n        Math.max(0, smoothness ?? GraphicsContextSystem.defaultOptions.bezierSmoothness)\n    );\n    let distanceTolerance = (PATH_DISTANCE_EPSILON - smoothing) / scale;\n\n    distanceTolerance *= distanceTolerance;\n    begin(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance);\n\n    return points;\n}\n\n// //// Based on:\n// //// https://github.com/pelson/antigrain/blob/master/agg-2.4/src/agg_curves.cpp\n\nfunction begin(\n    sX: number, sY: number,\n    cp1x: number, cp1y: number,\n    cp2x: number, cp2y: number,\n    eX: number, eY: number,\n    points: number[],\n    distanceTolerance: number\n)\n{\n    // dont need to actually ad this!\n    // points.push(sX, sY);\n    recursive(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance, 0);\n    points.push(eX, eY);\n}\n\n// eslint-disable-next-line max-params\nfunction recursive(\n    x1: number, y1: number,\n    x2: number, y2: number,\n    x3: number, y3: number,\n    x4: number, y4: number,\n    points: number[],\n    distanceTolerance: number,\n    level: number)\n{\n    if (level > RECURSION_LIMIT)\n    { return; }\n\n    const pi = Math.PI;\n\n    // Calculate all the mid-points of the line segments\n    // ----------------------\n    const x12 = (x1 + x2) / 2;\n    const y12 = (y1 + y2) / 2;\n    const x23 = (x2 + x3) / 2;\n    const y23 = (y2 + y3) / 2;\n    const x34 = (x3 + x4) / 2;\n    const y34 = (y3 + y4) / 2;\n    const x123 = (x12 + x23) / 2;\n    const y123 = (y12 + y23) / 2;\n    const x234 = (x23 + x34) / 2;\n    const y234 = (y23 + y34) / 2;\n    const x1234 = (x123 + x234) / 2;\n    const y1234 = (y123 + y234) / 2;\n\n    if (level > 0)\n    { // Enforce subdivision first time\n        // Try to approximate the full cubic curve by a single straight line\n        // ------------------\n        let dx = x4 - x1;\n        let dy = y4 - y1;\n\n        const d2 = Math.abs(((x2 - x4) * dy) - ((y2 - y4) * dx));\n        const d3 = Math.abs(((x3 - x4) * dy) - ((y3 - y4) * dx));\n\n        let da1; let da2;\n\n        if (d2 > FLT_EPSILON && d3 > FLT_EPSILON)\n        {\n            // Regular care\n            // -----------------\n            if ((d2 + d3) * (d2 + d3) <= distanceTolerance * ((dx * dx) + (dy * dy)))\n            {\n                // If the curvature doesn't exceed the distanceTolerance value\n                // we tend to finish subdivisions.\n                // ----------------------\n                if (mAngleTolerance < curveAngleToleranceEpsilon)\n                {\n                    points.push(x1234, y1234);\n\n                    return;\n                }\n\n                // Angle & Cusp Condition\n                // ----------------------\n                const a23 = Math.atan2(y3 - y2, x3 - x2);\n\n                da1 = Math.abs(a23 - Math.atan2(y2 - y1, x2 - x1));\n                da2 = Math.abs(Math.atan2(y4 - y3, x4 - x3) - a23);\n                if (da1 >= pi) da1 = (2 * pi) - da1;\n                if (da2 >= pi) da2 = (2 * pi) - da2;\n\n                if (da1 + da2 < mAngleTolerance)\n                {\n                    // Finally we can stop the recursion\n                    // ----------------------\n                    points.push(x1234, y1234);\n\n                    return;\n                }\n\n                if (mCuspLimit !== 0.0)\n                {\n                    if (da1 > mCuspLimit)\n                    {\n                        points.push(x2, y2);\n\n                        return;\n                    }\n\n                    if (da2 > mCuspLimit)\n                    {\n                        points.push(x3, y3);\n\n                        return;\n                    }\n                }\n            }\n        }\n        else if (d2 > FLT_EPSILON)\n        {\n            // p1,p3,p4 are collinear, p2 is considerable\n            // ----------------------\n            if (d2 * d2 <= distanceTolerance * ((dx * dx) + (dy * dy)))\n            {\n                if (mAngleTolerance < curveAngleToleranceEpsilon)\n                {\n                    points.push(x1234, y1234);\n\n                    return;\n                }\n\n                // Angle Condition\n                // ----------------------\n                da1 = Math.abs(Math.atan2(y3 - y2, x3 - x2) - Math.atan2(y2 - y1, x2 - x1));\n                if (da1 >= pi) da1 = (2 * pi) - da1;\n\n                if (da1 < mAngleTolerance)\n                {\n                    points.push(x2, y2);\n                    points.push(x3, y3);\n\n                    return;\n                }\n\n                if (mCuspLimit !== 0.0)\n                {\n                    if (da1 > mCuspLimit)\n                    {\n                        points.push(x2, y2);\n\n                        return;\n                    }\n                }\n            }\n        }\n        else if (d3 > FLT_EPSILON)\n        {\n            // p1,p2,p4 are collinear, p3 is considerable\n            // ----------------------\n            if (d3 * d3 <= distanceTolerance * ((dx * dx) + (dy * dy)))\n            {\n                if (mAngleTolerance < curveAngleToleranceEpsilon)\n                {\n                    points.push(x1234, y1234);\n\n                    return;\n                }\n\n                // Angle Condition\n                // ----------------------\n                da1 = Math.abs(Math.atan2(y4 - y3, x4 - x3) - Math.atan2(y3 - y2, x3 - x2));\n                if (da1 >= pi) da1 = (2 * pi) - da1;\n\n                if (da1 < mAngleTolerance)\n                {\n                    points.push(x2, y2);\n                    points.push(x3, y3);\n\n                    return;\n                }\n\n                if (mCuspLimit !== 0.0)\n                {\n                    if (da1 > mCuspLimit)\n                    {\n                        points.push(x3, y3);\n\n                        return;\n                    }\n                }\n            }\n        }\n        else\n        {\n            // Collinear case\n            // -----------------\n            dx = x1234 - ((x1 + x4) / 2);\n            dy = y1234 - ((y1 + y4) / 2);\n            if ((dx * dx) + (dy * dy) <= distanceTolerance)\n            {\n                points.push(x1234, y1234);\n\n                return;\n            }\n        }\n    }\n\n    // Continue subdivision\n    // ----------------------\n    recursive(x1, y1, x12, y12, x123, y123, x1234, y1234, points, distanceTolerance, level + 1);\n    recursive(x1234, y1234, x234, y234, x34, y34, x4, y4, points, distanceTolerance, level + 1);\n}\n\n","// thanks to https://github.com/mattdesl/adaptive-quadratic-curve\n// for the original code!\n\nimport { GraphicsContextSystem } from '../GraphicsContextSystem';\n\nconst RECURSION_LIMIT = 8;\nconst FLT_EPSILON = 1.19209290e-7;\nconst PATH_DISTANCE_EPSILON = 1.0;\n\nconst curveAngleToleranceEpsilon = 0.01;\nconst mAngleTolerance = 0;\n\nexport function buildAdaptiveQuadratic(\n    points: number[],\n    sX: number, sY: number,\n    cp1x: number, cp1y: number,\n    eX: number, eY: number,\n    smoothness?: number,\n)\n{\n    const scale = 1.0;\n    const smoothing = Math.min(\n        0.99, // a value of 1.0 actually inverts smoothing, so we cap it at 0.99\n        Math.max(0, smoothness ?? GraphicsContextSystem.defaultOptions.bezierSmoothness)\n    );\n    let distanceTolerance = (PATH_DISTANCE_EPSILON - smoothing) / scale;\n\n    distanceTolerance *= distanceTolerance;\n    begin(sX, sY, cp1x, cp1y, eX, eY, points, distanceTolerance);\n\n    return points;\n}\n\n// //// Based on:\n// //// https://github.com/pelson/antigrain/blob/master/agg-2.4/src/agg_curves.cpp\n\nfunction begin(\n    sX: number, sY: number,\n    cp1x: number, cp1y: number,\n    eX: number, eY: number,\n    points: number[],\n    distanceTolerance: number\n)\n{\n    recursive(points, sX, sY, cp1x, cp1y, eX, eY, distanceTolerance, 0);\n\n    points.push(eX, eY);\n}\n\nfunction recursive(\n    points: number[],\n    x1: number, y1: number,\n    x2: number, y2: number,\n    x3: number, y3: number,\n    distanceTolerance: number,\n    level: number\n)\n{\n    if (level > RECURSION_LIMIT)\n    { return; }\n\n    const pi = Math.PI;\n\n    // Calculate all the mid-points of the line segments\n    // ----------------------\n    const x12 = (x1 + x2) / 2;\n    const y12 = (y1 + y2) / 2;\n    const x23 = (x2 + x3) / 2;\n    const y23 = (y2 + y3) / 2;\n    const x123 = (x12 + x23) / 2;\n    const y123 = (y12 + y23) / 2;\n\n    let dx = x3 - x1;\n    let dy = y3 - y1;\n    const d = Math.abs((((x2 - x3) * dy) - ((y2 - y3) * dx)));\n\n    if (d > FLT_EPSILON)\n    {\n        // Regular care\n        // -----------------\n        if (d * d <= distanceTolerance * ((dx * dx) + (dy * dy)))\n        {\n            // If the curvature doesn't exceed the distance_tolerance value\n            // we tend to finish subdivisions.\n            // ----------------------\n            if (mAngleTolerance < curveAngleToleranceEpsilon)\n            {\n                points.push(x123, y123);\n\n                return;\n            }\n\n            // Angle & Cusp Condition\n            // ----------------------\n            let da = Math.abs(Math.atan2(y3 - y2, x3 - x2) - Math.atan2(y2 - y1, x2 - x1));\n\n            if (da >= pi) da = (2 * pi) - da;\n\n            if (da < mAngleTolerance)\n            {\n                // Finally we can stop the recursion\n                // ----------------------\n                points.push(x123, y123);\n\n                return;\n            }\n        }\n    }\n    else\n    {\n        // Collinear case\n        // -----------------\n        dx = x123 - ((x1 + x3) / 2);\n        dy = y123 - ((y1 + y3) / 2);\n        if ((dx * dx) + (dy * dy) <= distanceTolerance)\n        {\n            points.push(x123, y123);\n\n            return;\n        }\n    }\n\n    // Continue subdivision\n    // ----------------------\n    recursive(points, x1, y1, x12, y12, x123, y123, distanceTolerance, level + 1);\n    recursive(points, x123, y123, x23, y23, x3, y3, distanceTolerance, level + 1);\n}\n\n","export function buildArc(\n    points: number[],\n    x: number, y: number,\n    radius: number,\n    start: number,\n    end: number,\n    clockwise: boolean,\n    steps?: number\n)\n{\n    // determine distance between the two angles\n    // ...probably a nicer way of writing this\n    let dist = Math.abs(start - end);\n\n    if (!clockwise && start > end)\n    {\n        dist = (2 * Math.PI) - dist;\n    }\n    else if (clockwise && end > start)\n    {\n        dist = (2 * Math.PI) - dist;\n    }\n\n    // approximate the # of steps using the cube root of the radius\n\n    steps = steps || Math.max(6, Math.floor(6 * Math.pow(radius, 1 / 3) * (dist / (Math.PI))));\n\n    // ensure we have at least 3 steps..\n    steps = Math.max(steps, 3);\n\n    let f = dist / (steps);\n    let t = start;\n\n    // modify direction\n    f *= clockwise ? -1 : 1;\n\n    for (let i = 0; i < steps + 1; i++)\n    {\n        const cs = Math.cos(t);\n        const sn = Math.sin(t);\n\n        const nx = x + (cs * radius);\n        const ny = y + (sn * radius);\n\n        points.push(nx, ny);\n\n        t += f;\n    }\n}\n","import { buildAdaptiveBezier } from './buildAdaptiveBezier';\n\nconst TAU = Math.PI * 2;\n\nconst out = {\n    centerX: 0,\n    centerY: 0,\n    ang1: 0,\n    ang2: 0\n};\n\nconst mapToEllipse = (\n    { x, y }: {x: number, y: number},\n    rx: number, ry: number,\n    cosPhi: number, sinPhi: number,\n    centerX: number, centerY: number,\n    out: {x: number, y: number}\n): {x: number, y: number} =>\n{\n    x *= rx;\n    y *= ry;\n\n    const xp = (cosPhi * x) - (sinPhi * y);\n    const yp = (sinPhi * x) + (cosPhi * y);\n\n    out.x = xp + centerX;\n    out.y = yp + centerY;\n\n    return out;\n};\n\nfunction approxUnitArc(ang1: number, ang2: number): {x: number, y: number}[]\n{\n    // If 90 degree circular arc, use a constant\n    // as derived from http://spencermortensen.com/articles/bezier-circle\n\n    const a1 = ang2 === -1.5707963267948966 ? -0.551915024494 : 4 / 3 * Math.tan(ang2 / 4);\n\n    const a = ang2 === 1.5707963267948966 ? 0.551915024494 : a1;\n\n    const x1 = Math.cos(ang1);\n    const y1 = Math.sin(ang1);\n    const x2 = Math.cos(ang1 + ang2);\n    const y2 = Math.sin(ang1 + ang2);\n\n    return [\n        {\n            x: x1 - (y1 * a),\n            y: y1 + (x1 * a)\n        },\n        {\n            x: x2 + (y2 * a),\n            y: y2 - (x2 * a)\n        },\n        {\n            x: x2,\n            y: y2\n        }\n    ];\n}\n\nconst vectorAngle = (ux: number, uy: number, vx: number, vy: number) =>\n{\n    const sign = ((ux * vy) - (uy * vx) < 0) ? -1 : 1;\n\n    let dot = (ux * vx) + (uy * vy);\n\n    if (dot > 1)\n    {\n        dot = 1;\n    }\n\n    if (dot < -1)\n    {\n        dot = -1;\n    }\n\n    return sign * Math.acos(dot);\n};\n\nconst getArcCenter = (\n    px: number,\n    py: number,\n    cx: number,\n    cy: number,\n    rx: number,\n    ry: number,\n    largeArcFlag: number,\n    sweepFlag: number,\n    sinPhi: number,\n    cosPhi: number,\n    pxp: number,\n    pyp: number,\n    out: {\n        centerX: number,\n        centerY: number,\n        ang1: number,\n        ang2: number\n    }\n// eslint-disable-next-line max-params\n) =>\n{\n    const rxSq = Math.pow(rx, 2);\n    const rySq = Math.pow(ry, 2);\n    const pxpSq = Math.pow(pxp, 2);\n    const pypSq = Math.pow(pyp, 2);\n\n    let radicant = (rxSq * rySq) - (rxSq * pypSq) - (rySq * pxpSq);\n\n    if (radicant < 0)\n    {\n        radicant = 0;\n    }\n\n    radicant /= (rxSq * pypSq) + (rySq * pxpSq);\n    radicant = Math.sqrt(radicant) * (largeArcFlag === sweepFlag ? -1 : 1);\n\n    const centerXp = radicant * rx / ry * pyp;\n    const centerYp = radicant * -ry / rx * pxp;\n\n    const centerX = (cosPhi * centerXp) - (sinPhi * centerYp) + ((px + cx) / 2);\n    const centerY = (sinPhi * centerXp) + (cosPhi * centerYp) + ((py + cy) / 2);\n\n    const vx1 = (pxp - centerXp) / rx;\n    const vy1 = (pyp - centerYp) / ry;\n    const vx2 = (-pxp - centerXp) / rx;\n    const vy2 = (-pyp - centerYp) / ry;\n\n    const ang1 = vectorAngle(1, 0, vx1, vy1);\n    let ang2 = vectorAngle(vx1, vy1, vx2, vy2);\n\n    if (sweepFlag === 0 && ang2 > 0)\n    {\n        ang2 -= TAU;\n    }\n\n    if (sweepFlag === 1 && ang2 < 0)\n    {\n        ang2 += TAU;\n    }\n\n    out.centerX = centerX;\n    out.centerY = centerY;\n    out.ang1 = ang1;\n    out.ang2 = ang2;\n};\n\nexport function buildArcToSvg(\n    points: number[],\n    px: number,\n    py: number,\n    cx: number,\n    cy: number,\n    rx: number,\n    ry: number,\n    xAxisRotation = 0,\n    largeArcFlag = 0,\n    sweepFlag = 0\n): void\n{\n    if (rx === 0 || ry === 0)\n    {\n        return;\n    }\n\n    const sinPhi = Math.sin(xAxisRotation * TAU / 360);\n    const cosPhi = Math.cos(xAxisRotation * TAU / 360);\n\n    const pxp = (cosPhi * (px - cx) / 2) + (sinPhi * (py - cy) / 2);\n    const pyp = (-sinPhi * (px - cx) / 2) + (cosPhi * (py - cy) / 2);\n\n    if (pxp === 0 && pyp === 0)\n    {\n        return;\n    }\n\n    rx = Math.abs(rx);\n    ry = Math.abs(ry);\n\n    const lambda = (Math.pow(pxp, 2) / Math.pow(rx, 2)) + (Math.pow(pyp, 2) / Math.pow(ry, 2));\n\n    if (lambda > 1)\n    {\n        rx *= Math.sqrt(lambda);\n        ry *= Math.sqrt(lambda);\n    }\n\n    getArcCenter(\n        px,\n        py,\n        cx,\n        cy,\n        rx,\n        ry,\n        largeArcFlag,\n        sweepFlag,\n        sinPhi,\n        cosPhi,\n        pxp,\n        pyp,\n        out\n    );\n\n    let { ang1, ang2 } = out;\n    const { centerX, centerY } = out;\n\n    // If 'ang2' == 90.0000000001, then `ratio` will devalue to\n    // 1.0000000001. This causes `segments` to be greater than one, which is an\n    // unnecessary split, and adds extra points to the bezier curve. To alleviate\n    // this issue, we round to 1.0 when the ratio is close to 1.0.\n    let ratio = Math.abs(ang2) / (TAU / 4);\n\n    if (Math.abs(1.0 - ratio) < 0.0000001)\n    {\n        ratio = 1.0;\n    }\n\n    const segments = Math.max(Math.ceil(ratio), 1);\n\n    ang2 /= segments;\n\n    let lastX = points[points.length - 2];\n    let lastY = points[points.length - 1];\n\n    const outCurvePoint = { x: 0, y: 0 };\n\n    for (let i = 0; i < segments; i++)\n    {\n        const curve = approxUnitArc(ang1, ang2);\n\n        const { x: x1, y: y1 } = mapToEllipse(curve[0], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n        const { x: x2, y: y2 } = mapToEllipse(curve[1], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n        const { x, y } = mapToEllipse(curve[2], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n\n        buildAdaptiveBezier(\n            points,\n            lastX, lastY,\n            x1, y1, x2, y2, x, y\n        );\n\n        lastX = x;\n        lastY = y;\n\n        ang1 += ang2;\n    }\n}\n","// a shape lets you build out a shape with lines and curves and primitives..\n\nimport { Circle } from '../../../../maths/shapes/Circle';\nimport { Ellipse } from '../../../../maths/shapes/Ellipse';\nimport { Polygon } from '../../../../maths/shapes/Polygon';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle';\nimport { RoundedRectangle } from '../../../../maths/shapes/RoundedRectangle';\nimport { Bounds } from '../../../container/bounds/Bounds';\nimport { buildAdaptiveBezier } from '../buildCommands/buildAdaptiveBezier';\nimport { buildAdaptiveQuadratic } from '../buildCommands/buildAdaptiveQuadratic';\nimport { buildArc } from '../buildCommands/buildArc';\nimport { buildArcTo } from '../buildCommands/buildArcTo';\nimport { buildArcToSvg } from '../buildCommands/buildArcToSvg';\nimport { roundedShapeArc, roundedShapeQuadraticCurve } from './roundShape';\n\nimport type { Matrix } from '../../../../maths/matrix/Matrix';\nimport type { PointData } from '../../../../maths/point/PointData';\nimport type { ShapePrimitive } from '../../../../maths/shapes/ShapePrimitive';\nimport type { GraphicsPath } from './GraphicsPath';\nimport type { RoundedPoint } from './roundShape';\n\nconst tempRectangle = new Rectangle();\n\n/**\n * The `ShapePath` class acts as a bridge between high-level drawing commands\n * and the lower-level `GraphicsContext` rendering engine.\n * It translates drawing commands, such as those for creating lines, arcs, ellipses, rectangles, and complex polygons, into a\n * format that can be efficiently processed by a `GraphicsContext`. This includes handling path starts,\n * ends, and transformations for shapes.\n *\n * It is used internally by `GraphicsPath` to build up the path.\n * @memberof scene\n */\nexport class ShapePath\n{\n    /** The list of shape primitives that make up the path. */\n    public shapePrimitives: { shape: ShapePrimitive, transform?: Matrix }[] = [];\n    private _currentPoly: Polygon | null = null;\n    private readonly _graphicsPath2D: GraphicsPath;\n    private readonly _bounds = new Bounds();\n\n    constructor(graphicsPath2D: GraphicsPath)\n    {\n        this._graphicsPath2D = graphicsPath2D;\n    }\n\n    /**\n     * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n     * @param x - The x-coordinate for the starting point.\n     * @param y - The y-coordinate for the starting point.\n     * @returns The instance of the current object for chaining.\n     */\n    public moveTo(x: number, y: number): this\n    {\n        this.startPoly(x, y);\n\n        return this;\n    }\n\n    /**\n     * Connects the current point to a new point with a straight line. This method updates the current path.\n     * @param x - The x-coordinate of the new point to connect to.\n     * @param y - The y-coordinate of the new point to connect to.\n     * @returns The instance of the current object for chaining.\n     */\n    public lineTo(x: number, y: number): this\n    {\n        this._ensurePoly();\n\n        const points = this._currentPoly.points;\n\n        const fromX = points[points.length - 2];\n        const fromY = points[points.length - 1];\n\n        if (fromX !== x || fromY !== y)\n        {\n            points.push(x, y);\n        }\n\n        return this;\n    }\n\n    /**\n     * Adds an arc to the path. The arc is centered at (x, y)\n     *  position with radius `radius` starting at `startAngle` and ending at `endAngle`.\n     * @param x - The x-coordinate of the arc's center.\n     * @param y - The y-coordinate of the arc's center.\n     * @param radius - The radius of the arc.\n     * @param startAngle - The starting angle of the arc, in radians.\n     * @param endAngle - The ending angle of the arc, in radians.\n     * @param counterclockwise - Specifies whether the arc should be drawn in the anticlockwise direction. False by default.\n     * @returns The instance of the current object for chaining.\n     */\n    public arc(x: number, y: number, radius: number, startAngle: number, endAngle: number, counterclockwise: boolean): this\n    {\n        // TODO - if its 360 degrees.. make it a circle object?\n\n        this._ensurePoly(false);\n\n        const points = this._currentPoly.points;\n\n        buildArc(points, x, y, radius, startAngle, endAngle, counterclockwise);\n\n        return this;\n    }\n\n    /**\n     * Adds an arc to the path with the arc tangent to the line joining two specified points.\n     * The arc radius is specified by `radius`.\n     * @param x1 - The x-coordinate of the first point.\n     * @param y1 - The y-coordinate of the first point.\n     * @param x2 - The x-coordinate of the second point.\n     * @param y2 - The y-coordinate of the second point.\n     * @param radius - The radius of the arc.\n     * @returns The instance of the current object for chaining.\n     */\n    public arcTo(x1: number, y1: number, x2: number, y2: number, radius: number): this\n    {\n        this._ensurePoly();\n\n        const points = this._currentPoly.points;\n\n        buildArcTo(points, x1, y1, x2, y2, radius);\n\n        return this;\n    }\n\n    /**\n     * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n     * @param rx - The x-radius of the ellipse.\n     * @param ry - The y-radius of the ellipse.\n     * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n     * to the x-axis of the coordinate system, in degrees.\n     * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n     * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n     * @param x - The x-coordinate of the arc's end point.\n     * @param y - The y-coordinate of the arc's end point.\n     * @returns The instance of the current object for chaining.\n     */\n    public arcToSvg(\n        rx: number, ry: number,\n        xAxisRotation: number, largeArcFlag: number, sweepFlag: number,\n        x: number, y: number\n    ): this\n    {\n        const points = this._currentPoly.points;\n\n        // this needs to work on both canvas and GPU backends so might want to move this to the Graphics2D path..\n        buildArcToSvg(\n            points,\n            this._currentPoly.lastX,\n            this._currentPoly.lastY,\n            x,\n            y,\n            rx,\n            ry,\n            xAxisRotation,\n            largeArcFlag,\n            sweepFlag,\n        );\n\n        return this;\n    }\n\n    /**\n     * Adds a cubic Bezier curve to the path.\n     * It requires three points: the first two are control points and the third one is the end point.\n     * The starting point is the last point in the current path.\n     * @param cp1x - The x-coordinate of the first control point.\n     * @param cp1y - The y-coordinate of the first control point.\n     * @param cp2x - The x-coordinate of the second control point.\n     * @param cp2y - The y-coordinate of the second control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public bezierCurveTo(\n        cp1x: number, cp1y: number, cp2x: number, cp2y: number,\n        x: number, y: number,\n        smoothness?: number\n    ): this\n    {\n        this._ensurePoly();\n\n        const currentPoly = this._currentPoly;\n\n        // ensure distance from last point to first control point is not too small\n\n        // TODO - make this a plugin that people can override..\n        buildAdaptiveBezier(\n            this._currentPoly.points,\n            currentPoly.lastX, currentPoly.lastY,\n            cp1x, cp1y, cp2x, cp2y, x, y,\n            smoothness,\n        );\n\n        return this;\n    }\n\n    /**\n     * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n     * The starting point is the last point in the current path.\n     * @param cp1x - The x-coordinate of the control point.\n     * @param cp1y - The y-coordinate of the control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothing - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public quadraticCurveTo(cp1x: number, cp1y: number, x: number, y: number, smoothing?: number): this\n    {\n        this._ensurePoly();\n\n        const currentPoly = this._currentPoly;\n\n        // ensure distance from last point to first control point is not too small\n\n        // TODO - make this a plugin that people can override..\n        buildAdaptiveQuadratic(\n            this._currentPoly.points,\n            currentPoly.lastX, currentPoly.lastY,\n            cp1x, cp1y, x, y,\n            smoothing,\n        );\n\n        return this;\n    }\n\n    /**\n     * Closes the current path by drawing a straight line back to the start.\n     * If the shape is already closed or there are no points in the path, this method does nothing.\n     * @returns The instance of the current object for chaining.\n     */\n    public closePath(): this\n    {\n        this.endPoly(true);\n\n        return this;\n    }\n\n    /**\n     * Adds another path to the current path. This method allows for the combination of multiple paths into one.\n     * @param path - The `GraphicsPath` object representing the path to add.\n     * @param transform - An optional `Matrix` object to apply a transformation to the path before adding it.\n     * @returns The instance of the current object for chaining.\n     */\n    public addPath(path: GraphicsPath, transform?: Matrix): this\n    {\n        this.endPoly();\n\n        if (transform && !transform.isIdentity())\n        {\n            path = path.clone(true);\n            path.transform(transform);\n        }\n\n        for (let i = 0; i < path.instructions.length; i++)\n        {\n            const instruction = path.instructions[i];\n\n            // Sorry TS! this is the best we could do...\n            this[instruction.action](...(instruction.data as [never, never, never, never, never, never, never]));\n            // build out the path points\n        }\n\n        return this;\n    }\n\n    /**\n     * Finalizes the drawing of the current path. Optionally, it can close the path.\n     * @param closePath - A boolean indicating whether to close the path after finishing. False by default.\n     */\n    public finish(closePath = false)\n    {\n        this.endPoly(closePath);\n    }\n\n    /**\n     * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n     * @param x - The x-coordinate of the top-left corner of the rectangle.\n     * @param y - The y-coordinate of the top-left corner of the rectangle.\n     * @param w - The width of the rectangle.\n     * @param h - The height of the rectangle.\n     * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n     * @returns The instance of the current object for chaining.\n     */\n    public rect(x: number, y: number, w: number, h: number, transform?: Matrix): this\n    {\n        this.drawShape(new Rectangle(x, y, w, h), transform);\n\n        return this;\n    }\n\n    /**\n     * Draws a circle shape. This method adds a new circle path to the current drawing.\n     * @param x - The x-coordinate of the center of the circle.\n     * @param y - The y-coordinate of the center of the circle.\n     * @param radius - The radius of the circle.\n     * @param transform - An optional `Matrix` object to apply a transformation to the circle.\n     * @returns The instance of the current object for chaining.\n     */\n    public circle(x: number, y: number, radius: number, transform?: Matrix): this\n    {\n        this.drawShape(new Circle(x, y, radius), transform);\n\n        return this;\n    }\n\n    /**\n     * Draws a polygon shape. This method allows for the creation of complex polygons by specifying a sequence of points.\n     * @param points - An array of numbers, or or an array of PointData objects eg [{x,y}, {x,y}, {x,y}]\n     * representing the x and y coordinates of the polygon's vertices, in sequence.\n     * @param close - A boolean indicating whether to close the polygon path. True by default.\n     * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n     * @returns The instance of the current object for chaining.\n     */\n    public poly(points: number[] | PointData[], close?: boolean, transform?: Matrix): this\n    {\n        const polygon = new Polygon(points);\n\n        polygon.closePath = close;\n\n        this.drawShape(polygon, transform);\n\n        return this;\n    }\n\n    /**\n     * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n     * @param x - The x-coordinate of the center of the polygon.\n     * @param y - The y-coordinate of the center of the polygon.\n     * @param radius - The radius of the circumscribed circle of the polygon.\n     * @param sides - The number of sides of the polygon. Must be 3 or more.\n     * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n     * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n     * @returns The instance of the current object for chaining.\n     */\n    public regularPoly(x: number, y: number, radius: number, sides: number, rotation = 0, transform?: Matrix): this\n    {\n        sides = Math.max(sides | 0, 3);\n        const startAngle = (-1 * Math.PI / 2) + rotation;\n        const delta = (Math.PI * 2) / sides;\n        const polygon = [];\n\n        for (let i = 0; i < sides; i++)\n        {\n            const angle = (i * delta) + startAngle;\n\n            polygon.push(\n                x + (radius * Math.cos(angle)),\n                y + (radius * Math.sin(angle))\n            );\n        }\n\n        this.poly(polygon, true, transform);\n\n        return this;\n    }\n\n    /**\n     * Draws a polygon with rounded corners.\n     * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n     * @param x - The x-coordinate of the center of the polygon.\n     * @param y - The y-coordinate of the center of the polygon.\n     * @param radius - The radius of the circumscribed circle of the polygon.\n     * @param sides - The number of sides of the polygon. Must be 3 or more.\n     * @param corner - The radius of the rounding of the corners.\n     * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n     * @param smoothness - Optional parameter to adjust the smoothness of the rounding.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundPoly(\n        x: number, y: number,\n        radius: number,\n        sides: number, corner: number,\n        rotation = 0,\n        smoothness?: number,\n    ): this\n    {\n        sides = Math.max((sides | 0), 3);\n\n        if (corner <= 0)\n        {\n            return this.regularPoly(x, y, radius, sides, rotation);\n        }\n\n        const sideLength = (radius * Math.sin(Math.PI / sides)) - 0.001;\n\n        corner = Math.min(corner, sideLength);\n\n        const startAngle = (-1 * Math.PI / 2) + rotation;\n        const delta = (Math.PI * 2) / sides;\n        const internalAngle = ((sides - 2) * Math.PI) / sides / 2;\n\n        for (let i = 0; i < sides; i++)\n        {\n            const angle = (i * delta) + startAngle;\n            const x0 = x + (radius * Math.cos(angle));\n            const y0 = y + (radius * Math.sin(angle));\n            const a1 = angle + (Math.PI) + internalAngle;\n            const a2 = angle - (Math.PI) - internalAngle;\n            const x1 = x0 + (corner * Math.cos(a1));\n            const y1 = y0 + (corner * Math.sin(a1));\n            const x3 = x0 + (corner * Math.cos(a2));\n            const y3 = y0 + (corner * Math.sin(a2));\n\n            if (i === 0)\n            {\n                this.moveTo(x1, y1);\n            }\n            else\n            {\n                this.lineTo(x1, y1);\n            }\n            this.quadraticCurveTo(x0, y0, x3, y3, smoothness);\n        }\n\n        return this.closePath();\n    }\n\n    /**\n     * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n     * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n     * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n     * A minimum of 3 points is required.\n     * @param radius - The default radius for the corners.\n     * This radius is applied to all corners unless overridden in `points`.\n     * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n     *  method instead of an arc method. Defaults to false.\n     * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n     * Higher values make the curve smoother.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundShape(points: RoundedPoint[], radius: number, useQuadratic = false, smoothness?: number): this\n    {\n        if (points.length < 3)\n        {\n            return this;\n        }\n\n        if (useQuadratic)\n        {\n            roundedShapeQuadraticCurve(this, points, radius, smoothness);\n        }\n        else\n        {\n            roundedShapeArc(this, points, radius);\n        }\n\n        return this.closePath();\n    }\n\n    /**\n     * Draw Rectangle with fillet corners. This is much like rounded rectangle\n     * however it support negative numbers as well for the corner radius.\n     * @param x - Upper left corner of rect\n     * @param y - Upper right corner of rect\n     * @param width - Width of rect\n     * @param height - Height of rect\n     * @param fillet - accept negative or positive values\n     */\n    public filletRect(x: number, y: number, width: number, height: number, fillet: number): this\n    {\n        if (fillet === 0)\n        {\n            return this.rect(x, y, width, height);\n        }\n\n        const maxFillet = Math.min(width, height) / 2;\n        const inset = Math.min(maxFillet, Math.max(-maxFillet, fillet));\n        const right = x + width;\n        const bottom = y + height;\n        const dir = inset < 0 ? -inset : 0;\n        const size = Math.abs(inset);\n\n        return this\n            .moveTo(x, y + size)\n            .arcTo(x + dir, y + dir, x + size, y, size)\n            .lineTo(right - size, y)\n            .arcTo(right - dir, y + dir, right, y + size, size)\n            .lineTo(right, bottom - size)\n            .arcTo(right - dir, bottom - dir, x + width - size, bottom, size)\n            .lineTo(x + size, bottom)\n            .arcTo(x + dir, bottom - dir, x, bottom - size, size)\n            .closePath();\n    }\n\n    /**\n     * Draw Rectangle with chamfer corners. These are angled corners.\n     * @param x - Upper left corner of rect\n     * @param y - Upper right corner of rect\n     * @param width - Width of rect\n     * @param height - Height of rect\n     * @param chamfer - non-zero real number, size of corner cutout\n     * @param transform\n     */\n    public chamferRect(x: number, y: number, width: number, height: number, chamfer: number, transform?: Matrix): this\n    {\n        if (chamfer <= 0)\n        {\n            return this.rect(x, y, width, height);\n        }\n\n        const inset = Math.min(chamfer, Math.min(width, height) / 2);\n        const right = x + width;\n        const bottom = y + height;\n        const points = [\n            x + inset, y,\n            right - inset, y,\n            right, y + inset,\n            right, bottom - inset,\n            right - inset, bottom,\n            x + inset, bottom,\n            x, bottom - inset,\n            x, y + inset,\n        ];\n\n        // Remove overlapping points\n        for (let i = points.length - 1; i >= 2; i -= 2)\n        {\n            if (points[i] === points[i - 2] && points[i - 1] === points[i - 3])\n            {\n                points.splice(i - 1, 2);\n            }\n        }\n\n        return this.poly(points, true, transform);\n    }\n\n    /**\n     * Draws an ellipse at the specified location and with the given x and y radii.\n     * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n     * @param x - The x-coordinate of the center of the ellipse.\n     * @param y - The y-coordinate of the center of the ellipse.\n     * @param radiusX - The horizontal radius of the ellipse.\n     * @param radiusY - The vertical radius of the ellipse.\n     * @param transform - An optional `Matrix` object to apply a transformation to the ellipse. This can include rotations.\n     * @returns The instance of the current object for chaining.\n     */\n    public ellipse(x: number, y: number, radiusX: number, radiusY: number, transform?: Matrix): this\n    {\n        // TODO apply rotation to transform...\n\n        this.drawShape(new Ellipse(x, y, radiusX, radiusY), transform);\n\n        return this;\n    }\n\n    /**\n     * Draws a rectangle with rounded corners.\n     * The corner radius can be specified to determine how rounded the corners should be.\n     * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n     * @param x - The x-coordinate of the top-left corner of the rectangle.\n     * @param y - The y-coordinate of the top-left corner of the rectangle.\n     * @param w - The width of the rectangle.\n     * @param h - The height of the rectangle.\n     * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n     * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundRect(x: number, y: number, w: number, h: number, radius?: number, transform?: Matrix): this\n    {\n        this.drawShape(new RoundedRectangle(x, y, w, h, radius), transform);\n\n        return this;\n    }\n\n    /**\n     * Draws a given shape on the canvas.\n     * This is a generic method that can draw any type of shape specified by the `ShapePrimitive` parameter.\n     * An optional transformation matrix can be applied to the shape, allowing for complex transformations.\n     * @param shape - The shape to draw, defined as a `ShapePrimitive` object.\n     * @param matrix - An optional `Matrix` for transforming the shape. This can include rotations,\n     * scaling, and translations.\n     * @returns The instance of the current object for chaining.\n     */\n    public drawShape(shape: ShapePrimitive, matrix?: Matrix): this\n    {\n        this.endPoly();\n\n        this.shapePrimitives.push({ shape, transform: matrix });\n\n        return this;\n    }\n\n    /**\n     * Starts a new polygon path from the specified starting point.\n     * This method initializes a new polygon or ends the current one if it exists.\n     * @param x - The x-coordinate of the starting point of the new polygon.\n     * @param y - The y-coordinate of the starting point of the new polygon.\n     * @returns The instance of the current object for chaining.\n     */\n    public startPoly(x: number, y: number): this\n    {\n        let currentPoly = this._currentPoly;\n\n        if (currentPoly)\n        {\n            this.endPoly();\n        }\n\n        currentPoly = new Polygon();\n\n        currentPoly.points.push(x, y);\n\n        this._currentPoly = currentPoly;\n\n        return this;\n    }\n\n    /**\n     * Ends the current polygon path. If `closePath` is set to true,\n     * the path is closed by connecting the last point to the first one.\n     * This method finalizes the current polygon and prepares it for drawing or adding to the shape primitives.\n     * @param closePath - A boolean indicating whether to close the polygon by connecting the last point\n     *  back to the starting point. False by default.\n     * @returns The instance of the current object for chaining.\n     */\n    public endPoly(closePath = false): this\n    {\n        const shape = this._currentPoly;\n\n        if (shape && shape.points.length > 2)\n        {\n            shape.closePath = closePath;\n\n            this.shapePrimitives.push({ shape });\n        }\n\n        this._currentPoly = null;\n\n        return this;\n    }\n\n    private _ensurePoly(start = true): void\n    {\n        if (this._currentPoly) return;\n\n        this._currentPoly = new Polygon();\n\n        if (start)\n        {\n            // get last points..\n            const lastShape = this.shapePrimitives[this.shapePrimitives.length - 1];\n\n            if (lastShape)\n            {\n                // i KNOW its a rect..\n                let lx = lastShape.shape.x;\n                let ly = lastShape.shape.y;\n\n                if (!lastShape.transform.isIdentity())\n                {\n                    const t = lastShape.transform;\n\n                    const tempX = lx;\n\n                    lx = (t.a * lx) + (t.c * ly) + t.tx;\n                    ly = (t.b * tempX) + (t.d * ly) + t.ty;\n                }\n\n                this._currentPoly.points.push(lx, ly);\n            }\n            else\n            {\n                this._currentPoly.points.push(0, 0);\n            }\n        }\n    }\n\n    /** Builds the path. */\n    public buildPath()\n    {\n        const path = this._graphicsPath2D;\n\n        this.shapePrimitives.length = 0;\n        this._currentPoly = null;\n\n        for (let i = 0; i < path.instructions.length; i++)\n        {\n            const instruction = path.instructions[i];\n\n            // Sorry TS! this is the best we could do...\n            this[instruction.action](...(instruction.data as [never, never, never, never, never, never, never]));\n        }\n\n        this.finish();\n    }\n\n    /** Gets the bounds of the path. */\n    get bounds(): Bounds\n    {\n        const bounds = this._bounds;\n\n        bounds.clear();\n\n        const shapePrimitives = this.shapePrimitives;\n\n        for (let i = 0; i < shapePrimitives.length; i++)\n        {\n            const shapePrimitive = shapePrimitives[i];\n\n            const boundsRect = shapePrimitive.shape.getBounds(tempRectangle);\n\n            if (shapePrimitive.transform)\n            {\n                bounds.addRect(boundsRect, shapePrimitive.transform);\n            }\n            else\n            {\n                bounds.addRect(boundsRect);\n            }\n        }\n\n        return bounds;\n    }\n}\n","import { buildArc } from './buildArc';\n\n/**\n * The arcTo() method creates an arc/curve between two tangents on the canvas.\n *\n * \"borrowed\" from https://code.google.com/p/fxcanvas/ - thanks google!\n * @param points\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param radius\n */\nexport function buildArcTo(\n    points: number[],\n    x1: number, y1: number,\n    x2: number, y2: number,\n    radius: number,\n): void\n{\n    const fromX = points[points.length - 2];\n    const fromY = points[points.length - 1];\n\n    const a1 = fromY - y1;\n    const b1 = fromX - x1;\n    const a2 = y2 - y1;\n    const b2 = x2 - x1;\n    const mm = Math.abs((a1 * b2) - (b1 * a2));\n\n    if (mm < 1.0e-8 || radius === 0)\n    {\n        if (points[points.length - 2] !== x1 || points[points.length - 1] !== y1)\n        {\n            points.push(x1, y1);\n        }\n\n        return;\n    }\n\n    const dd = (a1 * a1) + (b1 * b1);\n    const cc = (a2 * a2) + (b2 * b2);\n    const tt = (a1 * a2) + (b1 * b2);\n    const k1 = radius * Math.sqrt(dd) / mm;\n    const k2 = radius * Math.sqrt(cc) / mm;\n    const j1 = k1 * tt / dd;\n    const j2 = k2 * tt / cc;\n    const cx = (k1 * b2) + (k2 * b1);\n    const cy = (k1 * a2) + (k2 * a1);\n    const px = b1 * (k2 + j1);\n    const py = a1 * (k2 + j1);\n    const qx = b2 * (k1 + j2);\n    const qy = a2 * (k1 + j2);\n    const startAngle = Math.atan2(py - cy, px - cx);\n    const endAngle = Math.atan2(qy - cy, qx - cx);\n\n    buildArc(points,\n        (cx + x1),\n        (cy + y1),\n        radius,\n        startAngle,\n        endAngle,\n        b1 * a2 > b2 * a1\n    );\n}\n","import type { PointData } from '../../../../maths/point/PointData';\nimport type { ShapePath } from './ShapePath';\n\n/**\n * Typed and cleaned up version of:\n * https://stackoverflow.com/questions/44855794/html5-canvas-triangle-with-rounded-corners/44856925#44856925\n * @param g - Graphics to be drawn on.\n * @param points - Corners of the shape to draw. Minimum length is 3.\n * @param radius - Corners default radius.\n * @ignore\n */\nexport function roundedShapeArc(\n    g: ShapePath,\n    points: RoundedPoint[],\n    radius: number\n): void\n{\n    const vecFrom = (p: PointData, pp: PointData) =>\n    {\n        const x = pp.x - p.x;\n        const y = pp.y - p.y;\n        const len = Math.sqrt((x * x) + (y * y));\n        const nx = x / len;\n        const ny = y / len;\n\n        return { len, nx, ny };\n    };\n\n    const sharpCorner = (i: number, p: PointData) =>\n    {\n        if (i === 0)\n        {\n            g.moveTo(p.x, p.y);\n        }\n        else\n        {\n            g.lineTo(p.x, p.y);\n        }\n    };\n\n    let p1 = points[points.length - 1];\n\n    for (let i = 0; i < points.length; i++)\n    {\n        const p2 = points[i % points.length];\n        const pRadius = p2.radius ?? radius;\n\n        if (pRadius <= 0)\n        {\n            sharpCorner(i, p2);\n            p1 = p2;\n            continue;\n        }\n\n        const p3 = points[(i + 1) % points.length];\n        const v1 = vecFrom(p2, p1);\n        const v2 = vecFrom(p2, p3);\n\n        if (v1.len < 1e-4 || v2.len < 1e-4)\n        {\n            sharpCorner(i, p2);\n            p1 = p2;\n            continue;\n        }\n\n        let angle = Math.asin((v1.nx * v2.ny) - (v1.ny * v2.nx));\n        let radDirection = 1;\n        let drawDirection = false;\n\n        if ((v1.nx * v2.nx) - (v1.ny * -v2.ny) < 0)\n        {\n            if (angle < 0)\n            {\n                angle = Math.PI + angle;\n            }\n            else\n            {\n                angle = Math.PI - angle;\n                radDirection = -1;\n                drawDirection = true;\n            }\n        }\n        else if (angle > 0)\n        {\n            radDirection = -1;\n            drawDirection = true;\n        }\n\n        const halfAngle = angle / 2;\n\n        let cRadius: number;\n        let lenOut = Math.abs(\n            (Math.cos(halfAngle) * pRadius) / Math.sin(halfAngle)\n        );\n\n        if (lenOut > Math.min(v1.len / 2, v2.len / 2))\n        {\n            lenOut = Math.min(v1.len / 2, v2.len / 2);\n            cRadius = Math.abs((lenOut * Math.sin(halfAngle)) / Math.cos(halfAngle));\n        }\n        else\n        {\n            cRadius = pRadius;\n        }\n\n        const cX = p2.x + (v2.nx * lenOut) + (-v2.ny * cRadius * radDirection);\n        const cY = p2.y + (v2.ny * lenOut) + (v2.nx * cRadius * radDirection);\n        const startAngle = Math.atan2(v1.ny, v1.nx) + ((Math.PI / 2) * radDirection);\n        const endAngle = Math.atan2(v2.ny, v2.nx) - ((Math.PI / 2) * radDirection);\n\n        if (i === 0)\n        {\n            g.moveTo(\n                cX + (Math.cos(startAngle) * cRadius),\n                cY + (Math.sin(startAngle) * cRadius)\n            );\n        }\n\n        g.arc(cX, cY, cRadius, startAngle, endAngle, drawDirection);\n\n        p1 = p2;\n    }\n}\n\nexport type RoundedPoint = PointData & { radius?: number };\n\n/**\n * Typed and cleaned up version of:\n * https://stackoverflow.com/questions/44855794/html5-canvas-triangle-with-rounded-corners/56214413#56214413\n * @param g - Graphics to be drawn on.\n * @param points - Corners of the shape to draw. Minimum length is 3.\n * @param radius - Corners default radius.\n * @ignore\n */\nexport function roundedShapeQuadraticCurve(\n    g: ShapePath,\n    points: RoundedPoint[],\n    radius: number,\n    smoothness?: number,\n): void\n{\n    const distance = (p1: PointData, p2: PointData) =>\n        Math.sqrt(((p1.x - p2.x) ** 2) + ((p1.y - p2.y) ** 2));\n\n    const pointLerp = (p1: PointData, p2: PointData, t: number) => ({\n        x: p1.x + ((p2.x - p1.x) * t),\n        y: p1.y + ((p2.y - p1.y) * t),\n    });\n\n    const numPoints = points.length;\n\n    for (let i = 0; i < numPoints; i++)\n    {\n        const thisPoint = points[(i + 1) % numPoints];\n        const pRadius = thisPoint.radius ?? radius;\n\n        if (pRadius <= 0)\n        {\n            if (i === 0)\n            {\n                g.moveTo(thisPoint.x, thisPoint.y);\n            }\n            else\n            {\n                g.lineTo(thisPoint.x, thisPoint.y);\n            }\n\n            continue;\n        }\n\n        const lastPoint = points[i];\n        const nextPoint = points[(i + 2) % numPoints];\n\n        const lastEdgeLength = distance(lastPoint, thisPoint);\n        let start;\n\n        if (lastEdgeLength < 1e-4)\n        {\n            start = thisPoint;\n        }\n        else\n        {\n            const lastOffsetDistance = Math.min(lastEdgeLength / 2, pRadius);\n\n            start = pointLerp(\n                thisPoint,\n                lastPoint,\n                lastOffsetDistance / lastEdgeLength\n            );\n        }\n\n        const nextEdgeLength = distance(nextPoint, thisPoint);\n        let end;\n\n        if (nextEdgeLength < 1e-4)\n        {\n            end = thisPoint;\n        }\n        else\n        {\n            const nextOffsetDistance = Math.min(nextEdgeLength / 2, pRadius);\n\n            end = pointLerp(\n                thisPoint,\n                nextPoint,\n                nextOffsetDistance / nextEdgeLength\n            );\n        }\n\n        if (i === 0)\n        {\n            g.moveTo(start.x, start.y);\n        }\n        else\n        {\n            g.lineTo(start.x, start.y);\n        }\n        g.quadraticCurveTo(thisPoint.x, thisPoint.y, end.x, end.y, smoothness);\n    }\n}\n","import { Point } from '../../../../maths/point/Point';\nimport { uid } from '../../../../utils/data/uid';\nimport { warn } from '../../../../utils/logging/warn';\nimport { SVGToGraphicsPath } from '../svg/SVGToGraphicsPath';\nimport { ShapePath } from './ShapePath';\n\nimport type { Matrix } from '../../../../maths/matrix/Matrix';\nimport type { PointData } from '../../../../maths/point/PointData';\nimport type { Bounds } from '../../../container/bounds/Bounds';\nimport type { RoundedPoint } from './roundShape';\n\nexport interface PathInstruction\n{\n    action: 'moveTo' | 'lineTo' | 'quadraticCurveTo' |\n    'bezierCurveTo' | 'arc' | 'closePath' |\n    'addPath' | 'arcTo' | 'ellipse' |\n    'rect' | 'roundRect' | 'arcToSvg' |\n    'poly' | 'circle' |\n    'regularPoly' | 'roundPoly' | 'roundShape' | 'filletRect' | 'chamferRect'\n    data: any[];\n}\n\n/**\n * The `GraphicsPath` class is designed to represent a graphical path consisting of multiple drawing instructions.\n * This class serves as a collection of drawing commands that can be executed to render shapes and paths on a canvas or\n * similar graphical context. It supports high-level drawing operations like lines, arcs, curves, and more, enabling\n * complex graphic constructions with relative ease.\n */\nexport class GraphicsPath\n{\n    public instructions: PathInstruction[] = [];\n\n    public uid = uid('graphicsPath');\n\n    private _dirty = true;\n    // needed for hit testing and bounds calculations\n    private _shapePath: ShapePath;\n\n    /**\n     * Provides access to the internal shape path, ensuring it is up-to-date with the current instructions.\n     * @returns The `ShapePath` instance associated with this `GraphicsPath`.\n     */\n    get shapePath(): ShapePath\n    {\n        if (!this._shapePath)\n        {\n            this._shapePath = new ShapePath(this);\n        }\n\n        if (this._dirty)\n        {\n            this._dirty = false;\n            this._shapePath.buildPath();\n        }\n\n        return this._shapePath;\n    }\n\n    /**\n     * Creates a `GraphicsPath` instance optionally from an SVG path string or an array of `PathInstruction`.\n     * @param instructions - An SVG path string or an array of `PathInstruction` objects.\n     */\n    constructor(instructions?: string | PathInstruction[])\n    {\n        if (typeof instructions === 'string')\n        {\n            SVGToGraphicsPath(instructions, this);\n        }\n        else\n        {\n            this.instructions = instructions?.slice() ?? [];\n        }\n    }\n\n    /**\n     * Adds another `GraphicsPath` to this path, optionally applying a transformation.\n     * @param path - The `GraphicsPath` to add.\n     * @param transform - An optional transformation to apply to the added path.\n     * @returns The instance of the current object for chaining.\n     */\n    public addPath(path: GraphicsPath, transform?: Matrix): this\n    {\n        path = path.clone();\n        this.instructions.push({ action: 'addPath', data: [path, transform] });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Adds an arc to the path. The arc is centered at (x, y)\n     *  position with radius `radius` starting at `startAngle` and ending at `endAngle`.\n     * @param x - The x-coordinate of the arc's center.\n     * @param y - The y-coordinate of the arc's center.\n     * @param radius - The radius of the arc.\n     * @param startAngle - The starting angle of the arc, in radians.\n     * @param endAngle - The ending angle of the arc, in radians.\n     * @param counterclockwise - Specifies whether the arc should be drawn in the anticlockwise direction. False by default.\n     * @returns The instance of the current object for chaining.\n     */\n    public arc(x: number, y: number, radius: number, startAngle: number, endAngle: number, counterclockwise?: boolean): this;\n    public arc(...args: [number, number, number, number, number, boolean]): this\n    {\n        this.instructions.push({ action: 'arc', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Adds an arc to the path with the arc tangent to the line joining two specified points.\n     * The arc radius is specified by `radius`.\n     * @param x1 - The x-coordinate of the first point.\n     * @param y1 - The y-coordinate of the first point.\n     * @param x2 - The x-coordinate of the second point.\n     * @param y2 - The y-coordinate of the second point.\n     * @param radius - The radius of the arc.\n     * @returns The instance of the current object for chaining.\n     */\n    public arcTo(x1: number, y1: number, x2: number, y2: number, radius: number): this;\n    public arcTo(...args: [number, number, number, number, number]): this\n    {\n        this.instructions.push({ action: 'arcTo', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n     * @param rx - The x-radius of the ellipse.\n     * @param ry - The y-radius of the ellipse.\n     * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n     * to the x-axis of the coordinate system, in degrees.\n     * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n     * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n     * @param x - The x-coordinate of the arc's end point.\n     * @param y - The y-coordinate of the arc's end point.\n     * @returns The instance of the current object for chaining.\n     */\n    // eslint-disable-next-line max-len\n    public arcToSvg(rx: number, ry: number, xAxisRotation: number, largeArcFlag: number, sweepFlag: number, x: number, y: number): this;\n    public arcToSvg(...args: [number, number, number, number, number, number, number]): this\n    {\n        this.instructions.push({ action: 'arcToSvg', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Adds a cubic Bezier curve to the path.\n     * It requires three points: the first two are control points and the third one is the end point.\n     * The starting point is the last point in the current path.\n     * @param cp1x - The x-coordinate of the first control point.\n     * @param cp1y - The y-coordinate of the first control point.\n     * @param cp2x - The x-coordinate of the second control point.\n     * @param cp2y - The y-coordinate of the second control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public bezierCurveTo(\n        cp1x: number, cp1y: number, cp2x: number, cp2y: number,\n        x: number, y: number,\n        smoothness?: number\n    ): this;\n    public bezierCurveTo(...args: [number, number, number, number, number, number, number]): this\n    {\n        this.instructions.push({ action: 'bezierCurveTo', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Adds a cubic Bezier curve to the path.\n     * It requires two points: the second control point and the end point. The first control point is assumed to be\n     * The starting point is the last point in the current path.\n     * @param cp2x - The x-coordinate of the second control point.\n     * @param cp2y - The y-coordinate of the second control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public bezierCurveToShort(cp2x: number, cp2y: number, x: number, y: number, smoothness?: number): this\n    {\n        const last = this.instructions[this.instructions.length - 1];\n\n        const lastPoint = this.getLastPoint(Point.shared);\n\n        let cp1x = 0;\n        let cp1y = 0;\n\n        if (!last || last.action !== 'bezierCurveTo')\n        {\n            cp1x = lastPoint.x;\n            cp1y = lastPoint.y;\n        }\n        else\n        {\n            cp1x = last.data[2];\n            cp1y = last.data[3];\n\n            const currentX = lastPoint.x;\n            const currentY = lastPoint.y;\n\n            cp1x = currentX + (currentX - cp1x);\n            cp1y = currentY + (currentY - cp1y);\n        }\n\n        this.instructions.push({ action: 'bezierCurveTo', data: [cp1x, cp1y, cp2x, cp2y, x, y, smoothness] });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Closes the current path by drawing a straight line back to the start.\n     * If the shape is already closed or there are no points in the path, this method does nothing.\n     * @returns The instance of the current object for chaining.\n     */\n    public closePath(): this\n    {\n        this.instructions.push({ action: 'closePath', data: [] });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draws an ellipse at the specified location and with the given x and y radii.\n     * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n     * @param x - The x-coordinate of the center of the ellipse.\n     * @param y - The y-coordinate of the center of the ellipse.\n     * @param radiusX - The horizontal radius of the ellipse.\n     * @param radiusY - The vertical radius of the ellipse.\n     * @param transform - An optional `Matrix` object to apply a transformation to the ellipse. This can include rotations.\n     * @returns The instance of the current object for chaining.\n     */\n    public ellipse(x: number, y: number, radiusX: number, radiusY: number, matrix?: Matrix): this;\n    public ellipse(...args: [number, number, number, number, Matrix]): this\n    {\n        this.instructions.push({ action: 'ellipse', data: args });\n\n        // TODO nail this!\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Connects the current point to a new point with a straight line. This method updates the current path.\n     * @param x - The x-coordinate of the new point to connect to.\n     * @param y - The y-coordinate of the new point to connect to.\n     * @returns The instance of the current object for chaining.\n     */\n    public lineTo(x: number, y: number): this;\n    public lineTo(...args: [number, number]): this\n    {\n        this.instructions.push({ action: 'lineTo', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n     * @param x - The x-coordinate for the starting point.\n     * @param y - The y-coordinate for the starting point.\n     * @returns The instance of the current object for chaining.\n     */\n    public moveTo(x: number, y: number): this;\n    public moveTo(...args: [number, number]): this\n    {\n        this.instructions.push({ action: 'moveTo', data: args });\n\n        return this;\n    }\n\n    /**\n     * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n     * The starting point is the last point in the current path.\n     * @param cp1x - The x-coordinate of the control point.\n     * @param cp1y - The y-coordinate of the control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public quadraticCurveTo(cpx: number, cpy: number, x: number, y: number, smoothness?: number): this;\n    public quadraticCurveTo(...args: [number, number, number, number, number]): this\n    {\n        this.instructions.push({ action: 'quadraticCurveTo', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Adds a quadratic curve to the path. It uses the previous point as the control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public quadraticCurveToShort(x: number, y: number, smoothness?: number): this\n    {\n        // check if we have a previous quadraticCurveTo\n        const last = this.instructions[this.instructions.length - 1];\n\n        const lastPoint = this.getLastPoint(Point.shared);\n\n        let cpx1 = 0;\n        let cpy1 = 0;\n\n        if (!last || last.action !== 'quadraticCurveTo')\n        {\n            cpx1 = lastPoint.x;\n            cpy1 = lastPoint.y;\n        }\n        else\n        {\n            cpx1 = last.data[0];\n            cpy1 = last.data[1];\n\n            const currentX = lastPoint.x;\n            const currentY = lastPoint.y;\n\n            cpx1 = currentX + (currentX - cpx1);\n            cpy1 = currentY + (currentY - cpy1);\n        }\n\n        this.instructions.push({ action: 'quadraticCurveTo', data: [cpx1, cpy1, x, y, smoothness] });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n     * @param x - The x-coordinate of the top-left corner of the rectangle.\n     * @param y - The y-coordinate of the top-left corner of the rectangle.\n     * @param w - The width of the rectangle.\n     * @param h - The height of the rectangle.\n     * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n     * @returns The instance of the current object for chaining.\n     */\n    public rect(x: number, y: number, w: number, h: number, transform?: Matrix): this\n    {\n        this.instructions.push({ action: 'rect', data: [x, y, w, h, transform] });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draws a circle shape. This method adds a new circle path to the current drawing.\n     * @param x - The x-coordinate of the center of the circle.\n     * @param y - The y-coordinate of the center of the circle.\n     * @param radius - The radius of the circle.\n     * @param transform - An optional `Matrix` object to apply a transformation to the circle.\n     * @returns The instance of the current object for chaining.\n     */\n    public circle(x: number, y: number, radius: number, transform?: Matrix): this\n    {\n        this.instructions.push({ action: 'circle', data: [x, y, radius, transform] });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draws a rectangle with rounded corners.\n     * The corner radius can be specified to determine how rounded the corners should be.\n     * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n     * @param x - The x-coordinate of the top-left corner of the rectangle.\n     * @param y - The y-coordinate of the top-left corner of the rectangle.\n     * @param w - The width of the rectangle.\n     * @param h - The height of the rectangle.\n     * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n     * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundRect(x: number, y: number, w: number, h: number, radius?: number, transform?: Matrix): this;\n    public roundRect(...args: [number, number, number, number, number, Matrix?]): this\n    {\n        this.instructions.push({ action: 'roundRect', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draws a polygon shape by specifying a sequence of points. This method allows for the creation of complex polygons,\n     * which can be both open and closed. An optional transformation can be applied, enabling the polygon to be scaled,\n     * rotated, or translated as needed.\n     * @param points - An array of numbers representing the x and y coordinates of the polygon's vertices, in sequence.\n     * @param close - A boolean indicating whether to close the polygon path. True by default.\n     * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n     * @returns The instance of the current object for chaining further drawing commands.\n     */\n    public poly(points: number[] | PointData[], close?: boolean, transform?: Matrix): this;\n    public poly(...args: [number[] | PointData[], boolean, Matrix?]): this\n    {\n        this.instructions.push({ action: 'poly', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n     * @param x - The x-coordinate of the center of the polygon.\n     * @param y - The y-coordinate of the center of the polygon.\n     * @param radius - The radius of the circumscribed circle of the polygon.\n     * @param sides - The number of sides of the polygon. Must be 3 or more.\n     * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n     * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n     * @returns The instance of the current object for chaining.\n     */\n    public regularPoly(x: number, y: number, radius: number, sides: number, rotation?: number, transform?: Matrix): this;\n    public regularPoly(...args: [number, number, number, number, number]): this\n    {\n        this.instructions.push({ action: 'regularPoly', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draws a polygon with rounded corners.\n     * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n     * @param x - The x-coordinate of the center of the polygon.\n     * @param y - The y-coordinate of the center of the polygon.\n     * @param radius - The radius of the circumscribed circle of the polygon.\n     * @param sides - The number of sides of the polygon. Must be 3 or more.\n     * @param corner - The radius of the rounding of the corners.\n     * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundPoly(x: number, y: number, radius: number, sides: number, corner: number, rotation?: number): this;\n    public roundPoly(...args: [number, number, number, number, number, number]): this\n    {\n        this.instructions.push({ action: 'roundPoly', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n     * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n     * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n     * A minimum of 3 points is required.\n     * @param radius - The default radius for the corners.\n     * This radius is applied to all corners unless overridden in `points`.\n     * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n     *  method instead of an arc method. Defaults to false.\n     * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n     * Higher values make the curve smoother.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundShape(points: RoundedPoint[], radius: number, useQuadratic?: boolean, smoothness?: number): this;\n    public roundShape(...args: [RoundedPoint[], number, boolean, number]): this\n    {\n        this.instructions.push({ action: 'roundShape', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draw Rectangle with fillet corners. This is much like rounded rectangle\n     * however it support negative numbers as well for the corner radius.\n     * @param x - Upper left corner of rect\n     * @param y - Upper right corner of rect\n     * @param width - Width of rect\n     * @param height - Height of rect\n     * @param fillet - accept negative or positive values\n     */\n    public filletRect(x: number, y: number, width: number, height: number, fillet: number): this;\n    public filletRect(...args: [number, number, number, number, number]): this\n    {\n        this.instructions.push({ action: 'filletRect', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draw Rectangle with chamfer corners. These are angled corners.\n     * @param x - Upper left corner of rect\n     * @param y - Upper right corner of rect\n     * @param width - Width of rect\n     * @param height - Height of rect\n     * @param chamfer - non-zero real number, size of corner cutout\n     * @param transform\n     */\n    public chamferRect(x: number, y: number, width: number, height: number, chamfer: number, transform?: Matrix): this;\n    public chamferRect(...args: [number, number, number, number, number]): this\n    {\n        this.instructions.push({ action: 'chamferRect', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draws a star shape centered at a specified location. This method allows for the creation\n     *  of stars with a variable number of points, outer radius, optional inner radius, and rotation.\n     * The star is drawn as a closed polygon with alternating outer and inner vertices to create the star's points.\n     * An optional transformation can be applied to scale, rotate, or translate the star as needed.\n     * @param x - The x-coordinate of the center of the star.\n     * @param y - The y-coordinate of the center of the star.\n     * @param points - The number of points of the star.\n     * @param radius - The outer radius of the star (distance from the center to the outer points).\n     * @param innerRadius - Optional. The inner radius of the star\n     * (distance from the center to the inner points between the outer points).\n     * If not provided, defaults to half of the `radius`.\n     * @param rotation - Optional. The rotation of the star in radians, where 0 is aligned with the y-axis.\n     * Defaults to 0, meaning one point is directly upward.\n     * @param transform - An optional `Matrix` object to apply a transformation to the star.\n     * This can include rotations, scaling, and translations.\n     * @returns The instance of the current object for chaining further drawing commands.\n     */\n    // eslint-disable-next-line max-len\n    public star(x: number, y: number, points: number, radius: number, innerRadius?: number, rotation?: number, transform?: Matrix): this\n    {\n        innerRadius = innerRadius || radius / 2;\n\n        const startAngle = (-1 * Math.PI / 2) + rotation;\n        const len = points * 2;\n        const delta = (Math.PI * 2) / len;\n        const polygon = [];\n\n        for (let i = 0; i < len; i++)\n        {\n            const r = i % 2 ? innerRadius : radius;\n            const angle = (i * delta) + startAngle;\n\n            polygon.push(\n                x + (r * Math.cos(angle)),\n                y + (r * Math.sin(angle))\n            );\n        }\n\n        this.poly(polygon, true, transform);\n\n        return this;\n    }\n\n    /**\n     * Creates a copy of the current `GraphicsPath` instance. This method supports both shallow and deep cloning.\n     * A shallow clone copies the reference of the instructions array, while a deep clone creates a new array and\n     * copies each instruction individually, ensuring that modifications to the instructions of the cloned `GraphicsPath`\n     * do not affect the original `GraphicsPath` and vice versa.\n     * @param deep - A boolean flag indicating whether the clone should be deep.\n     * @returns A new `GraphicsPath` instance that is a clone of the current instance.\n     */\n    public clone(deep = false): GraphicsPath\n    {\n        const newGraphicsPath2D = new GraphicsPath();\n\n        if (!deep)\n        {\n            newGraphicsPath2D.instructions = this.instructions.slice();\n        }\n        else\n        {\n            for (let i = 0; i < this.instructions.length; i++)\n            {\n                const instruction = this.instructions[i];\n\n                newGraphicsPath2D.instructions.push({ action: instruction.action, data: instruction.data.slice() });\n            }\n        }\n\n        return newGraphicsPath2D;\n    }\n\n    public clear(): this\n    {\n        this.instructions.length = 0;\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Applies a transformation matrix to all drawing instructions within the `GraphicsPath`.\n     * This method enables the modification of the path's geometry according to the provided\n     * transformation matrix, which can include translations, rotations, scaling, and skewing.\n     *\n     * Each drawing instruction in the path is updated to reflect the transformation,\n     * ensuring the visual representation of the path is consistent with the applied matrix.\n     *\n     * Note: The transformation is applied directly to the coordinates and control points of the drawing instructions,\n     * not to the path as a whole. This means the transformation's effects are baked into the individual instructions,\n     * allowing for fine-grained control over the path's appearance.\n     * @param matrix - A `Matrix` object representing the transformation to apply.\n     * @returns The instance of the current object for chaining further operations.\n     */\n    public transform(matrix: Matrix): this\n    {\n        if (matrix.isIdentity()) return this;\n\n        const a = matrix.a;\n        const b = matrix.b;\n        const c = matrix.c;\n        const d = matrix.d;\n        const tx = matrix.tx;\n        const ty = matrix.ty;\n\n        let x = 0;\n        let y = 0;\n\n        let cpx1 = 0;\n        let cpy1 = 0;\n        let cpx2 = 0;\n        let cpy2 = 0;\n\n        let rx = 0;\n        let ry = 0;\n\n        for (let i = 0; i < this.instructions.length; i++)\n        {\n            const instruction = this.instructions[i];\n            const data = instruction.data as any[];\n\n            switch (instruction.action)\n            {\n                case 'moveTo':\n                case 'lineTo':\n\n                    x = data[0];\n                    y = data[1];\n\n                    data[0] = (a * x) + (c * y) + tx;\n                    data[1] = (b * x) + (d * y) + ty;\n                    break;\n                case 'bezierCurveTo':\n\n                    cpx1 = data[0];\n                    cpy1 = data[1];\n                    cpx2 = data[2];\n                    cpy2 = data[3];\n\n                    x = data[4];\n                    y = data[5];\n\n                    data[0] = (a * cpx1) + (c * cpy1) + tx;\n                    data[1] = (b * cpx1) + (d * cpy1) + ty;\n                    data[2] = (a * cpx2) + (c * cpy2) + tx;\n                    data[3] = (b * cpx2) + (d * cpy2) + ty;\n                    data[4] = (a * x) + (c * y) + tx;\n                    data[5] = (b * x) + (d * y) + ty;\n                    break;\n\n                case 'quadraticCurveTo':\n\n                    cpx1 = data[0];\n                    cpy1 = data[1];\n\n                    x = data[2];\n                    y = data[3];\n\n                    data[0] = (a * cpx1) + (c * cpy1) + tx;\n                    data[1] = (b * cpx1) + (d * cpy1) + ty;\n\n                    data[2] = (a * x) + (c * y) + tx;\n                    data[3] = (b * x) + (d * y) + ty;\n\n                    break;\n\n                case 'arcToSvg':\n\n                    x = data[5];\n                    y = data[6];\n\n                    rx = data[0];\n                    ry = data[1];\n\n                    // multiply the radius by the transform..\n\n                    data[0] = (a * rx) + (c * ry);\n                    data[1] = (b * rx) + (d * ry);\n\n                    data[5] = (a * x) + (c * y) + tx;\n                    data[6] = (b * x) + (d * y) + ty;\n\n                    break;\n\n                case 'circle':\n                    data[4] = adjustTransform(data[3], matrix);\n                    break;\n                case 'rect':\n                    data[4] = adjustTransform(data[4], matrix);\n                    break;\n                case 'ellipse':\n                    data[8] = adjustTransform(data[8], matrix);\n                    break;\n                case 'roundRect':\n                    data[5] = adjustTransform(data[5], matrix);\n                    break;\n                case 'addPath':\n                    data[0].transform(matrix);\n                    break;\n                case 'poly':\n                    data[2] = adjustTransform(data[2], matrix);\n                    break;\n                default:\n                    // #if _DEBUG\n                    warn('unknown transform action', instruction.action);\n                    // #endif\n                    break;\n            }\n        }\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    get bounds(): Bounds\n    {\n        return this.shapePath.bounds;\n    }\n\n    /**\n     * Retrieves the last point from the current drawing instructions in the `GraphicsPath`.\n     * This method is useful for operations that depend on the path's current endpoint,\n     * such as connecting subsequent shapes or paths. It supports various drawing instructions,\n     * ensuring the last point's position is accurately determined regardless of the path's complexity.\n     *\n     * If the last instruction is a `closePath`, the method iterates backward through the instructions\n     *  until it finds an actionable instruction that defines a point (e.g., `moveTo`, `lineTo`,\n     * `quadraticCurveTo`, etc.). For compound paths added via `addPath`, it recursively retrieves\n     * the last point from the nested path.\n     * @param out - A `Point` object where the last point's coordinates will be stored.\n     * This object is modified directly to contain the result.\n     * @returns The `Point` object containing the last point's coordinates.\n     */\n    public getLastPoint(out: Point): Point\n    {\n        let index = this.instructions.length - 1;\n\n        let lastInstruction = this.instructions[index];\n\n        if (!lastInstruction)\n        {\n            out.x = 0;\n            out.y = 0;\n\n            return out;\n        }\n\n        while (lastInstruction.action === 'closePath')\n        {\n            index--;\n\n            if (index < 0)\n            {\n                out.x = 0;\n                out.y = 0;\n\n                return out;\n            }\n\n            lastInstruction = this.instructions[index];\n        }\n\n        switch (lastInstruction.action)\n        {\n            case 'moveTo':\n            case 'lineTo':\n                out.x = lastInstruction.data[0];\n                out.y = lastInstruction.data[1];\n                break;\n            case 'quadraticCurveTo':\n                out.x = lastInstruction.data[2];\n                out.y = lastInstruction.data[3];\n                break;\n            case 'bezierCurveTo':\n                out.x = lastInstruction.data[4];\n                out.y = lastInstruction.data[5];\n                break;\n            case 'arc':\n            case 'arcToSvg':\n                out.x = lastInstruction.data[5];\n                out.y = lastInstruction.data[6];\n                break;\n            case 'addPath':\n                // TODO prolly should transform the last point of the path\n                lastInstruction.data[0].getLastPoint(out);\n                break;\n        }\n\n        return out;\n    }\n}\n\nfunction adjustTransform(currentMatrix?: Matrix, transform?: Matrix): Matrix\n{\n    if (currentMatrix)\n    {\n        return currentMatrix.prepend(transform);\n    }\n\n    return transform.clone();\n}\n","/* eslint-disable no-console */\nimport parse from 'parse-svg-path';\nimport { warn } from '../../../../utils/logging/warn';\n\nimport type { GraphicsPath } from '../path/GraphicsPath';\n\ninterface SubPath\n{\n    startX: number;\n    startY: number;\n}\n\n// TODO optimise and cache the paths?\nexport function SVGToGraphicsPath(svgPath: string, path: GraphicsPath): GraphicsPath\n{\n    const commands = parse(svgPath);\n\n    const subpaths: SubPath[] = [];\n    let currentSubPath: SubPath | null = null;\n\n    let lastX = 0;\n    let lastY = 0;\n\n    for (let i = 0; i < commands.length; i++)\n    {\n        const command = commands[i];\n        const type = command[0];\n        const data = command; // alias for 1-based referencing\n\n        switch (type)\n        {\n            case 'M':\n                lastX = data[1];\n                lastY = data[2];\n\n                path.moveTo(lastX, lastY);\n                break;\n            case 'm':\n\n                lastX += data[1];\n                lastY += data[2];\n\n                path.moveTo(lastX, lastY);\n                break;\n            case 'H':\n                lastX = data[1];\n\n                path.lineTo(lastX, lastY);\n                break;\n            case 'h':\n                lastX += data[1];\n\n                path.lineTo(lastX, lastY);\n                break;\n            case 'V':\n                lastY = data[1];\n\n                path.lineTo(lastX, lastY);\n                break;\n            case 'v':\n                lastY += data[1];\n\n                path.lineTo(lastX, lastY);\n                break;\n            case 'L':\n                lastX = data[1];\n                lastY = data[2];\n\n                path.lineTo(lastX, lastY);\n                break;\n            case 'l':\n                lastX += data[1];\n                lastY += data[2];\n\n                path.lineTo(lastX, lastY);\n                break;\n            case 'C':\n\n                lastX = data[5];\n                lastY = data[6];\n\n                path.bezierCurveTo(\n                    data[1], data[2],\n                    data[3], data[4],\n                    lastX, lastY\n                );\n                break;\n            case 'c':\n                path.bezierCurveTo(\n                    lastX + data[1], lastY + data[2],\n                    lastX + data[3], lastY + data[4],\n                    lastX + data[5], lastY + data[6]\n                );\n\n                lastX += data[5];\n                lastY += data[6];\n                break;\n            case 'S':\n                lastX = data[3];\n                lastY = data[4];\n\n                path.bezierCurveToShort(\n                    data[1], data[2],\n                    lastX, lastY\n                );\n                break;\n            case 's':\n                path.bezierCurveToShort(\n                    lastX + data[1], lastY + data[2],\n                    lastX + data[3], lastY + data[4],\n                );\n\n                lastX += data[3];\n                lastY += data[4];\n                break;\n            case 'Q':\n                lastX = data[3];\n                lastY = data[4];\n\n                path.quadraticCurveTo(\n                    data[1], data[2],\n                    lastX, lastY\n                );\n                break;\n            case 'q':\n                path.quadraticCurveTo(\n                    lastX + data[1], lastY + data[2],\n                    lastX + data[3], lastY + data[4]\n                );\n\n                lastX += data[3];\n                lastY += data[4];\n                break;\n            case 'T':\n                lastX = data[1];\n                lastY = data[2];\n\n                path.quadraticCurveToShort(\n                    lastX, lastY\n                );\n                break;\n            case 't':\n                lastX += data[1];\n                lastY += data[2];\n\n                path.quadraticCurveToShort(\n                    lastX, lastY\n                );\n                break;\n            case 'A':\n                lastX = data[6];\n                lastY = data[7];\n\n                path.arcToSvg(\n                    data[1],\n                    data[2],\n                    data[3],\n                    data[4],\n                    data[5],\n                    lastX, lastY\n                );\n                break;\n            case 'a':\n                lastX += data[6];\n                lastY += data[7];\n\n                path.arcToSvg(\n                    data[1],\n                    data[2],\n                    data[3],\n                    data[4],\n                    data[5],\n                    lastX, lastY\n                );\n                break;\n            case 'Z':\n            case 'z':\n                path.closePath();\n                if (subpaths.length > 0)\n                {\n                    currentSubPath = subpaths.pop();\n                    if (currentSubPath)\n                    {\n                        lastX = currentSubPath.startX;\n                        lastY = currentSubPath.startY;\n                    }\n                    else\n                    {\n                        lastX = 0;\n                        lastY = 0;\n                    }\n                }\n                currentSubPath = null;\n                break;\n            default:\n                // #if _DEBUG\n                warn(`Unknown SVG path command: ${type}`);\n                // #endif\n        }\n\n        if (type !== 'Z' && type !== 'z')\n        {\n            if (currentSubPath === null)\n            {\n                currentSubPath = { startX: lastX, startY: lastY };\n                subpaths.push(currentSubPath);\n            }\n        }\n    }\n\n    return path;\n}\n","import { Color } from '../../../../color/Color';\nimport { GraphicsPath } from '../path/GraphicsPath';\n\nimport type { ConvertedFillStyle, ConvertedStrokeStyle, FillStyle, StrokeStyle } from '../FillTypes';\nimport type {\n    GraphicsContext,\n} from '../GraphicsContext';\n\ninterface Session\n{\n    context: GraphicsContext;\n    path: GraphicsPath;\n}\n\nexport function SVGParser(\n    svg: string | SVGElement | SVGSVGElement,\n    graphicsContext?: GraphicsContext\n): GraphicsContext\n{\n    if (typeof svg === 'string')\n    {\n        const div = document.createElement('div');\n\n        div.innerHTML = svg.trim();\n        svg = div.querySelector('svg') as SVGElement;\n    }\n\n    const session = {\n        context: graphicsContext,\n        path: new GraphicsPath(),\n    };\n\n    renderChildren(svg, session, null, null);\n\n    return graphicsContext;\n}\n\nfunction renderChildren(svg: SVGElement, session: Session, fillStyle: FillStyle, strokeStyle: StrokeStyle): void\n{\n    const children = svg.children;\n\n    const { fillStyle: f1, strokeStyle: s1 } = parseStyle(svg);\n\n    if (f1 && fillStyle)\n    {\n        fillStyle = { ...fillStyle, ...f1 };\n    }\n    else if (f1)\n    {\n        fillStyle = f1;\n    }\n\n    if (s1 && strokeStyle)\n    {\n        strokeStyle = { ...strokeStyle, ...s1 };\n    }\n    else if (s1)\n    {\n        strokeStyle = s1;\n    }\n\n    session.context.fillStyle = fillStyle;\n    session.context.strokeStyle = strokeStyle;\n\n    let x;\n    let y;\n    let x1;\n    let y1;\n    let x2;\n    let y2;\n    let cx;\n    let cy;\n    let r;\n    let rx;\n    let ry;\n    let points;\n    let pointsString;\n    let d;\n    let graphicsPath;\n    let width;\n    let height;\n\n    switch (svg.nodeName.toLowerCase())\n    {\n        case 'path':\n            d = svg.getAttribute('d') as string;\n\n            graphicsPath = new GraphicsPath(d);\n\n            session.context.path(graphicsPath);\n\n            if (fillStyle) session.context.fill();\n            if (strokeStyle) session.context.stroke();\n\n            break;\n        case 'circle':\n            cx = parseFloatAttribute(svg, 'cx', 0);\n            cy = parseFloatAttribute(svg, 'cy', 0);\n\n            r = parseFloatAttribute(svg, 'r', 0);\n\n            session.context.ellipse(cx, cy, r, r);\n\n            if (fillStyle) session.context.fill();\n            if (strokeStyle) session.context.stroke();\n\n            break;\n        case 'rect':\n            x = parseFloatAttribute(svg, 'x', 0);\n            y = parseFloatAttribute(svg, 'y', 0);\n\n            width = parseFloatAttribute(svg, 'width', 0);\n            height = parseFloatAttribute(svg, 'height', 0);\n\n            rx = parseFloatAttribute(svg, 'rx', 0);\n            ry = parseFloatAttribute(svg, 'ry', 0);\n\n            if (rx || ry)\n            {\n                session.context.roundRect(x, y, width, height, rx || ry);\n            }\n            else\n            {\n                session.context.rect(x, y, width, height);\n            }\n\n            if (fillStyle) session.context.fill();\n            if (strokeStyle) session.context.stroke();\n\n            break;\n        case 'ellipse':\n            cx = parseFloatAttribute(svg, 'cx', 0);\n            cy = parseFloatAttribute(svg, 'cy', 0);\n\n            rx = parseFloatAttribute(svg, 'rx', 0);\n            ry = parseFloatAttribute(svg, 'ry', 0);\n\n            session.context.beginPath();\n            session.context.ellipse(cx, cy, rx, ry); // , 0, Math.PI * 2);\n\n            if (fillStyle) session.context.fill();\n            if (strokeStyle) session.context.stroke();\n\n            break;\n        case 'line':\n            x1 = parseFloatAttribute(svg, 'x1', 0);\n            y1 = parseFloatAttribute(svg, 'y1', 0);\n\n            x2 = parseFloatAttribute(svg, 'x2', 0);\n            y2 = parseFloatAttribute(svg, 'y2', 0);\n\n            session.context.beginPath();\n            session.context.moveTo(x1, y1);\n            session.context.lineTo(x2, y2);\n\n            if (strokeStyle) session.context.stroke();\n\n            break;\n\n        case 'polygon':\n            pointsString = svg.getAttribute('points') as string;\n\n            points = pointsString.match(/\\d+/g).map((n) => parseInt(n, 10));\n\n            session.context.poly(points, true);\n\n            if (fillStyle) session.context.fill();\n            if (strokeStyle) session.context.stroke();\n\n            break;\n        case 'polyline':\n            pointsString = svg.getAttribute('points') as string;\n\n            points = pointsString.match(/\\d+/g).map((n) => parseInt(n, 10));\n\n            session.context.poly(points, false);\n\n            if (strokeStyle) session.context.stroke();\n\n            break;\n        // children will cover these two..\n        case 'g':\n        case 'svg':\n            break;\n        default: {\n            // eslint-disable-next-line no-console\n            console.info(`[SVG parser] <${svg.nodeName}> elements unsupported`);\n            break;\n        }\n    }\n\n    for (let i = 0; i < children.length; i++)\n    {\n        renderChildren(children[i] as SVGElement, session, fillStyle, strokeStyle);\n    }\n}\n\nfunction parseFloatAttribute(svg: SVGElement, id: string, defaultValue: number): number\n{\n    const value = svg.getAttribute(id) as string;\n\n    return value ? Number(value) : defaultValue;\n}\n\nfunction parseStyle(svg: SVGElement): { strokeStyle: ConvertedStrokeStyle; fillStyle: ConvertedFillStyle }\n{\n    const style = svg.getAttribute('style');\n\n    const strokeStyle: StrokeStyle = {};\n\n    const fillStyle: FillStyle = {};\n\n    let useFill = false;\n    let useStroke = false;\n\n    if (style)\n    {\n        const styleParts = style.split(';');\n\n        for (let i = 0; i < styleParts.length; i++)\n        {\n            const stylePart = styleParts[i];\n\n            const [key, value] = stylePart.split(':');\n\n            switch (key)\n            {\n                case 'stroke':\n                    if (value !== 'none')\n                    {\n                        strokeStyle.color = Color.shared.setValue(value).toNumber();\n                        useStroke = true;\n                    }\n\n                    break;\n                case 'stroke-width':\n                    strokeStyle.width = Number(value);\n                    break;\n                case 'fill':\n                    if (value !== 'none')\n                    {\n                        useFill = true;\n                        fillStyle.color = Color.shared.setValue(value).toNumber();\n                    }\n                    break;\n                case 'fill-opacity':\n                    fillStyle.alpha = Number(value);\n                    break;\n                case 'stroke-opacity':\n                    strokeStyle.alpha = Number(value);\n                    break;\n                case 'opacity':\n                    fillStyle.alpha = Number(value);\n                    strokeStyle.alpha = Number(value);\n                    break;\n            }\n        }\n    }\n    else\n    {\n        const stroke = svg.getAttribute('stroke');\n\n        if (stroke && stroke !== 'none')\n        {\n            useStroke = true;\n            strokeStyle.color = Color.shared.setValue(stroke).toNumber();\n\n            strokeStyle.width = parseFloatAttribute(svg, 'stroke-width', 1);\n        }\n\n        const fill = svg.getAttribute('fill');\n\n        if (fill && fill !== 'none')\n        {\n            useFill = true;\n            fillStyle.color = Color.shared.setValue(fill).toNumber();\n        }\n    }\n\n    return {\n        strokeStyle: useStroke ? (strokeStyle as ConvertedStrokeStyle) : null,\n        fillStyle: useFill ? (fillStyle as ConvertedFillStyle) : null,\n    };\n}\n","/* eslint-disable max-len */\nimport EventEmitter from 'eventemitter3';\nimport { Color, type ColorSource } from '../../../color/Color';\nimport { Matrix } from '../../../maths/matrix/Matrix';\nimport { Point } from '../../../maths/point/Point';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport { uid } from '../../../utils/data/uid';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation';\nimport { Bounds } from '../../container/bounds/Bounds';\nimport { GraphicsPath } from './path/GraphicsPath';\nimport { SVGParser } from './svg/SVGParser';\nimport { toFillStyle, toStrokeStyle } from './utils/convertFillInputToFillStyle';\n\nimport type { PointData } from '../../../maths/point/PointData';\nimport type { Shader } from '../../../rendering/renderers/shared/shader/Shader';\nimport type { TextureDestroyOptions, TypeOrBool } from '../../container/destroyTypes';\nimport type { ConvertedFillStyle, ConvertedStrokeStyle, FillInput, StrokeInput } from './FillTypes';\nimport type { RoundedPoint } from './path/roundShape';\n\nconst tmpPoint = new Point();\n\nexport type BatchMode = 'auto' | 'batch' | 'no-batch';\n\nexport interface FillInstruction\n{\n    action: 'fill' | 'cut'\n    data: { style: ConvertedFillStyle, path: GraphicsPath, hole?: GraphicsPath }\n}\n\nexport interface StrokeInstruction\n{\n    action: 'stroke'\n    data: { style: ConvertedStrokeStyle, path: GraphicsPath, hole?: GraphicsPath }\n}\n\nexport interface TextureInstruction\n{\n    action: 'texture'\n    data: {\n        image: Texture,\n\n        dx: number\n        dy: number\n\n        dw: number\n        dh: number\n\n        transform: Matrix\n        alpha: number\n        style: number,\n    }\n}\n\nexport type GraphicsInstructions = FillInstruction | StrokeInstruction | TextureInstruction;\n\nconst tempMatrix = new Matrix();\n\n/**\n * The GraphicsContext class allows for the creation of lightweight objects that contain instructions for drawing shapes and paths.\n * It is used internally by the Graphics class to draw shapes and paths, and can be used directly and shared between Graphics objects,\n *\n * This sharing of a `GraphicsContext` means that the intensive task of converting graphics instructions into GPU-ready geometry is done once, and the results are reused,\n * much like sprites reusing textures.\n * @memberof scene\n */\nexport class GraphicsContext extends EventEmitter<{\n    update: GraphicsContext\n    destroy: GraphicsContext\n}>\n{\n    /** The default fill style to use when none is provided. */\n    public static defaultFillStyle: ConvertedFillStyle = {\n        /** The color to use for the fill. */\n        color: 0xffffff,\n        /** The alpha value to use for the fill. */\n        alpha: 1,\n        /** The texture to use for the fill. */\n        texture: Texture.WHITE,\n        /** The matrix to apply. */\n        matrix: null,\n        /** The fill pattern to use. */\n        fill: null,\n    };\n\n    /** The default stroke style to use when none is provided. */\n    public static defaultStrokeStyle: ConvertedStrokeStyle = {\n        /** The width of the stroke. */\n        width: 1,\n        /** The color to use for the stroke. */\n        color: 0xffffff,\n        /** The alpha value to use for the stroke. */\n        alpha: 1,\n        /** The alignment of the stroke. */\n        alignment: 0.5,\n        /** The miter limit to use. */\n        miterLimit: 10,\n        /** The line cap style to use. */\n        cap: 'butt',\n        /** The line join style to use. */\n        join: 'miter',\n        /** The texture to use for the fill. */\n        texture: Texture.WHITE,\n        /** The matrix to apply. */\n        matrix: null,\n        /** The fill pattern to use. */\n        fill: null,\n    };\n\n    public uid = uid('graphicsContext');\n    public dirty = true;\n    public batchMode: BatchMode = 'auto';\n    public instructions: GraphicsInstructions[] = [];\n    public customShader?: Shader;\n\n    private _activePath: GraphicsPath = new GraphicsPath();\n    private _transform: Matrix = new Matrix();\n\n    private _fillStyle: ConvertedFillStyle = { ...GraphicsContext.defaultFillStyle };\n    private _strokeStyle: ConvertedStrokeStyle = { ...GraphicsContext.defaultStrokeStyle };\n    private _stateStack: { fillStyle: ConvertedFillStyle; strokeStyle: ConvertedStrokeStyle, transform: Matrix }[] = [];\n\n    private _tick = 0;\n\n    private _bounds = new Bounds();\n    private _boundsDirty = true;\n\n    /**\n     * Creates a new GraphicsContext object that is a clone of this instance, copying all properties,\n     * including the current drawing state, transformations, styles, and instructions.\n     * @returns A new GraphicsContext instance with the same properties and state as this one.\n     */\n    public clone(): GraphicsContext\n    {\n        const clone = new GraphicsContext();\n\n        clone.batchMode = this.batchMode;\n        clone.instructions = this.instructions.slice();\n        clone._activePath = this._activePath.clone();\n        clone._transform = this._transform.clone();\n        clone._fillStyle = { ...this._fillStyle };\n        clone._strokeStyle = { ...this._strokeStyle };\n        clone._stateStack = this._stateStack.slice();\n        clone._bounds = this._bounds.clone();\n        clone._boundsDirty = true;\n\n        return clone;\n    }\n\n    /**\n     * The current fill style of the graphics context. This can be a color, gradient, pattern, or a more complex style defined by a FillStyle object.\n     */\n    get fillStyle(): ConvertedFillStyle\n    {\n        return this._fillStyle;\n    }\n\n    set fillStyle(value: FillInput)\n    {\n        this._fillStyle = toFillStyle(value, GraphicsContext.defaultFillStyle);\n    }\n\n    /**\n     * The current stroke style of the graphics context. Similar to fill styles, stroke styles can encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n     */\n    get strokeStyle(): ConvertedStrokeStyle\n    {\n        return this._strokeStyle;\n    }\n\n    set strokeStyle(value: FillInput)\n    {\n        this._strokeStyle = toStrokeStyle(value, GraphicsContext.defaultStrokeStyle);\n    }\n\n    /**\n     * Sets the current fill style of the graphics context. The fill style can be a color, gradient,\n     * pattern, or a more complex style defined by a FillStyle object.\n     * @param style - The fill style to apply. This can be a simple color, a gradient or pattern object,\n     *                or a FillStyle or ConvertedFillStyle object.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public setFillStyle(style: FillInput): this\n    {\n        this._fillStyle = toFillStyle(style, GraphicsContext.defaultFillStyle);\n\n        return this;\n    }\n\n    /**\n     * Sets the current stroke style of the graphics context. Similar to fill styles, stroke styles can\n     * encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n     * @param style - The stroke style to apply. Can be defined as a color, a gradient or pattern,\n     *                or a StrokeStyle or ConvertedStrokeStyle object.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public setStrokeStyle(style: StrokeInput): this\n    {\n        this._strokeStyle = toFillStyle(style, GraphicsContext.defaultStrokeStyle) as ConvertedStrokeStyle;\n\n        return this;\n    }\n\n    /**\n     * Adds a texture to the graphics context. This method supports multiple overloads for specifying the texture, tint, and dimensions.\n     * If only a texture is provided, it uses the texture's width and height for drawing. Additional parameters allow for specifying\n     * a tint color, and custom dimensions for the texture drawing area.\n     * @param texture - The Texture object to use.\n     * @param tint - (Optional) A ColorSource to tint the texture. If not provided, defaults to white (0xFFFFFF).\n     * @param dx - (Optional) The x-coordinate in the destination canvas at which to place the top-left corner of the source image.\n     * @param dy - (Optional) The y-coordinate in the destination canvas at which to place the top-left corner of the source image.\n     * @param dw - (Optional) The width of the rectangle within the source image to draw onto the destination canvas. If not provided, uses the texture's frame width.\n     * @param dh - (Optional) The height of the rectangle within the source image to draw onto the destination canvas. If not provided, uses the texture's frame height.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public texture(texture: Texture): this;\n    public texture(texture: Texture, tint: ColorSource): this;\n    public texture(texture: Texture, tint: ColorSource, dx: number, dy: number): this;\n    public texture(texture: Texture, tint: ColorSource, dx: number, dy: number, dw: number, dh: number): this;\n    public texture(texture: Texture, tint?: ColorSource, dx?: number, dy?: number, dw?: number, dh?: number): this\n    {\n        this.instructions.push({\n            action: 'texture',\n            data: {\n                image: texture,\n\n                dx: dx || 0,\n                dy: dy || 0,\n\n                dw: dw || texture.frame.width,\n                dh: dh || texture.frame.height,\n\n                transform: this._transform.clone(),\n                alpha: this._fillStyle.alpha,\n                style: tint ? Color.shared.setValue(tint).toNumber() : 0xFFFFFF,\n            }\n        });\n\n        this.onUpdate();\n\n        return this;\n    }\n\n    /**\n     * Resets the current path. Any previous path and its commands are discarded and a new path is\n     * started. This is typically called before beginning a new shape or series of drawing commands.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public beginPath(): this\n    {\n        this._activePath = new GraphicsPath();\n\n        return this;\n    }\n\n    /**\n     * Fills the current or given path with the current fill style. This method can optionally take\n     * a color and alpha for a simple fill, or a more complex FillInput object for advanced fills.\n     * @param style - (Optional) The style to fill the path with. Can be a color, gradient, pattern, or a complex style object. If omitted, uses the current fill style.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public fill(style?: FillInput): this;\n    /** @deprecated 8.0.0 */\n    public fill(color: ColorSource, alpha: number): this;\n    public fill(style?: FillInput, alpha?: number): this\n    {\n        let path: GraphicsPath;\n\n        const lastInstruction = this.instructions[this.instructions.length - 1];\n\n        if (this._tick === 0 && lastInstruction && lastInstruction.action === 'stroke')\n        {\n            path = lastInstruction.data.path;\n        }\n        else\n        {\n            path = this._activePath.clone();\n        }\n\n        if (!path) return this;\n\n        // eslint-disable-next-line no-eq-null, eqeqeq\n        if (style != null)\n        {\n            if (alpha !== undefined && typeof style === 'number')\n            {\n                // #if _DEBUG\n                deprecation(v8_0_0, 'GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead');\n                // #endif\n\n                style = { color: style, alpha };\n            }\n            this._fillStyle = toFillStyle(style, GraphicsContext.defaultFillStyle);\n        }\n\n        // TODO not a fan of the clone!!\n        this.instructions.push({\n            action: 'fill',\n            // TODO copy fill style!\n            data: { style: this.fillStyle, path }\n        });\n\n        this.onUpdate();\n\n        this._initNextPathLocation();\n        this._tick = 0;\n\n        return this;\n    }\n\n    private _initNextPathLocation()\n    {\n        // Reset the _activePath with the last point of the current path\n        const { x, y } = this._activePath.getLastPoint(Point.shared);\n\n        this._activePath.clear();\n        this._activePath.moveTo(x, y);\n    }\n\n    /**\n     * Strokes the current path with the current stroke style. This method can take an optional\n     * FillInput parameter to define the stroke's appearance, including its color, width, and other properties.\n     * @param style - (Optional) The stroke style to apply. Can be defined as a simple color or a more complex style object. If omitted, uses the current stroke style.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public stroke(style?: StrokeInput): this\n    {\n        let path: GraphicsPath;\n\n        const lastInstruction = this.instructions[this.instructions.length - 1];\n\n        if (this._tick === 0 && lastInstruction && lastInstruction.action === 'fill')\n        {\n            path = lastInstruction.data.path;\n        }\n        else\n        {\n            path = this._activePath.clone();\n        }\n\n        if (!path) return this;\n\n        // eslint-disable-next-line no-eq-null, eqeqeq\n        if (style != null)\n        {\n            this._strokeStyle = toStrokeStyle(style, GraphicsContext.defaultStrokeStyle);\n        }\n\n        // TODO not a fan of the clone!!\n        this.instructions.push({\n            action: 'stroke',\n            // TODO copy fill style!\n            data: { style: this.strokeStyle, path }\n        });\n\n        this.onUpdate();\n\n        this._initNextPathLocation();\n        this._tick = 0;\n\n        return this;\n    }\n\n    /**\n     * Applies a cutout to the last drawn shape. This is used to create holes or complex shapes by\n     * subtracting a path from the previously drawn path. If a hole is not completely in a shape, it will\n     * fail to cut correctly!\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public cut(): this\n    {\n        for (let i = 0; i < 2; i++)\n        {\n            const lastInstruction = this.instructions[this.instructions.length - 1 - i];\n\n            const holePath = this._activePath.clone();\n\n            if (lastInstruction)\n            {\n                if (lastInstruction.action === 'stroke' || lastInstruction.action === 'fill')\n                {\n                    if (lastInstruction.data.hole)\n                    {\n                        lastInstruction.data.hole.addPath(holePath);\n                    }\n                    else\n                    {\n                        lastInstruction.data.hole = holePath;\n                        break;\n                    }\n                }\n            }\n        }\n\n        this._initNextPathLocation();\n\n        return this;\n    }\n\n    /**\n     * Adds an arc to the current path, which is centered at (x, y) with the specified radius,\n     * starting and ending angles, and direction.\n     * @param x - The x-coordinate of the arc's center.\n     * @param y - The y-coordinate of the arc's center.\n     * @param radius - The arc's radius.\n     * @param startAngle - The starting angle, in radians.\n     * @param endAngle - The ending angle, in radians.\n     * @param counterclockwise - (Optional) Specifies whether the arc is drawn counterclockwise (true) or clockwise (false). Defaults to false.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public arc(x: number, y: number, radius: number, startAngle: number, endAngle: number, counterclockwise?: boolean): this\n    {\n        this._tick++;\n\n        const t = this._transform;\n\n        this._activePath.arc(\n            (t.a * x) + (t.c * y) + t.tx,\n            (t.b * x) + (t.d * y) + t.ty,\n            radius,\n            startAngle,\n            endAngle,\n            counterclockwise,\n        );\n\n        return this;\n    }\n\n    /**\n     * Adds an arc to the current path with the given control points and radius, connected to the previous point\n     * by a straight line if necessary.\n     * @param x1 - The x-coordinate of the first control point.\n     * @param y1 - The y-coordinate of the first control point.\n     * @param x2 - The x-coordinate of the second control point.\n     * @param y2 - The y-coordinate of the second control point.\n     * @param radius - The arc's radius.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public arcTo(x1: number, y1: number, x2: number, y2: number, radius: number): this\n    {\n        this._tick++;\n\n        const t = this._transform;\n\n        this._activePath.arcTo(\n            (t.a * x1) + (t.c * y1) + t.tx,\n            (t.b * x1) + (t.d * y1) + t.ty,\n            (t.a * x2) + (t.c * y2) + t.tx,\n            (t.b * x2) + (t.d * y2) + t.ty,\n            radius,\n        );\n\n        return this;\n    }\n\n    /**\n     * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n     * @param rx - The x-radius of the ellipse.\n     * @param ry - The y-radius of the ellipse.\n     * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n     * to the x-axis of the coordinate system, in degrees.\n     * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n     * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n     * @param x - The x-coordinate of the arc's end point.\n     * @param y - The y-coordinate of the arc's end point.\n     * @returns The instance of the current object for chaining.\n     */\n    public arcToSvg(\n        rx: number, ry: number,\n        xAxisRotation: number,\n        largeArcFlag: number,\n        sweepFlag: number,\n        x: number, y: number\n    ): this\n    {\n        this._tick++;\n\n        const t = this._transform;\n\n        this._activePath.arcToSvg(\n            rx, ry,\n            xAxisRotation, // should we rotate this with transform??\n            largeArcFlag,\n            sweepFlag,\n            (t.a * x) + (t.c * y) + t.tx,\n            (t.b * x) + (t.d * y) + t.ty,\n        );\n\n        return this;\n    }\n\n    /**\n     * Adds a cubic Bezier curve to the path.\n     * It requires three points: the first two are control points and the third one is the end point.\n     * The starting point is the last point in the current path.\n     * @param cp1x - The x-coordinate of the first control point.\n     * @param cp1y - The y-coordinate of the first control point.\n     * @param cp2x - The x-coordinate of the second control point.\n     * @param cp2y - The y-coordinate of the second control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public bezierCurveTo(cp1x: number, cp1y: number, cp2x: number, cp2y: number, x: number, y: number, smoothness?: number): this\n    {\n        this._tick++;\n\n        // TODO optimize for no transform\n        const t = this._transform;\n\n        this._activePath.bezierCurveTo(\n            (t.a * cp1x) + (t.c * cp1y) + t.tx,\n            (t.b * cp1x) + (t.d * cp1y) + t.ty,\n            (t.a * cp2x) + (t.c * cp2y) + t.tx,\n            (t.b * cp2x) + (t.d * cp2y) + t.ty,\n            (t.a * x) + (t.c * y) + t.tx,\n            (t.b * x) + (t.d * y) + t.ty,\n            smoothness,\n        );\n\n        return this;\n    }\n\n    /**\n     * Closes the current path by drawing a straight line back to the start.\n     * If the shape is already closed or there are no points in the path, this method does nothing.\n     * @returns The instance of the current object for chaining.\n     */\n    public closePath(): this\n    {\n        this._tick++;\n\n        this._activePath?.closePath();\n\n        return this;\n    }\n\n    /**\n     * Draws an ellipse at the specified location and with the given x and y radii.\n     * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n     * @param x - The x-coordinate of the center of the ellipse.\n     * @param y - The y-coordinate of the center of the ellipse.\n     * @param radiusX - The horizontal radius of the ellipse.\n     * @param radiusY - The vertical radius of the ellipse.\n     * @returns The instance of the current object for chaining.\n     */\n    public ellipse(x: number, y: number, radiusX: number, radiusY: number): this\n    {\n        this._tick++;\n\n        this._activePath.ellipse(x, y, radiusX, radiusY, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Draws a circle shape. This method adds a new circle path to the current drawing.\n     * @param x - The x-coordinate of the center of the circle.\n     * @param y - The y-coordinate of the center of the circle.\n     * @param radius - The radius of the circle.\n     * @returns The instance of the current object for chaining.\n     */\n    public circle(x: number, y: number, radius: number): this\n    {\n        this._tick++;\n\n        this._activePath.circle(x, y, radius, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Adds another `GraphicsPath` to this path, optionally applying a transformation.\n     * @param path - The `GraphicsPath` to add.\n     * @returns The instance of the current object for chaining.\n     */\n    public path(path: GraphicsPath): this\n    {\n        this._tick++;\n\n        this._activePath.addPath(path, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Connects the current point to a new point with a straight line. This method updates the current path.\n     * @param x - The x-coordinate of the new point to connect to.\n     * @param y - The y-coordinate of the new point to connect to.\n     * @returns The instance of the current object for chaining.\n     */\n    public lineTo(x: number, y: number): this\n    {\n        this._tick++;\n\n        const t = this._transform;\n\n        this._activePath.lineTo(\n            (t.a * x) + (t.c * y) + t.tx,\n            (t.b * x) + (t.d * y) + t.ty\n        );\n\n        return this;\n    }\n\n    /**\n     * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n     * @param x - The x-coordinate for the starting point.\n     * @param y - The y-coordinate for the starting point.\n     * @returns The instance of the current object for chaining.\n     */\n    public moveTo(x: number, y: number): this\n    {\n        this._tick++;\n\n        const t = this._transform;\n\n        const instructions = this._activePath.instructions;\n\n        const transformedX = (t.a * x) + (t.c * y) + t.tx;\n        const transformedY = (t.b * x) + (t.d * y) + t.ty;\n\n        if (instructions.length === 1 && instructions[0].action === 'moveTo')\n        {\n            instructions[0].data[0] = transformedX;\n            instructions[0].data[1] = transformedY;\n\n            return this;\n        }\n        this._activePath.moveTo(\n            transformedX,\n            transformedY\n        );\n\n        return this;\n    }\n\n    /**\n     * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n     * The starting point is the last point in the current path.\n     * @param cpx - The x-coordinate of the control point.\n     * @param cpy - The y-coordinate of the control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public quadraticCurveTo(cpx: number, cpy: number, x: number, y: number, smoothness?: number): this\n    {\n        this._tick++;\n\n        const t = this._transform;\n\n        this._activePath.quadraticCurveTo(\n            (t.a * cpx) + (t.c * cpy) + t.tx,\n            (t.b * cpx) + (t.d * cpy) + t.ty,\n            (t.a * x) + (t.c * y) + t.tx,\n            (t.b * x) + (t.d * y) + t.ty,\n            smoothness,\n        );\n\n        return this;\n    }\n\n    /**\n     * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n     * @param x - The x-coordinate of the top-left corner of the rectangle.\n     * @param y - The y-coordinate of the top-left corner of the rectangle.\n     * @param w - The width of the rectangle.\n     * @param h - The height of the rectangle.\n     * @returns The instance of the current object for chaining.\n     */\n    public rect(x: number, y: number, w: number, h: number): this\n    {\n        this._tick++;\n\n        this._activePath.rect(x, y, w, h, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Draws a rectangle with rounded corners.\n     * The corner radius can be specified to determine how rounded the corners should be.\n     * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n     * @param x - The x-coordinate of the top-left corner of the rectangle.\n     * @param y - The y-coordinate of the top-left corner of the rectangle.\n     * @param w - The width of the rectangle.\n     * @param h - The height of the rectangle.\n     * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundRect(x: number, y: number, w: number, h: number, radius?: number): this\n    {\n        this._tick++;\n\n        this._activePath.roundRect(x, y, w, h, radius, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Draws a polygon shape by specifying a sequence of points. This method allows for the creation of complex polygons,\n     * which can be both open and closed. An optional transformation can be applied, enabling the polygon to be scaled,\n     * rotated, or translated as needed.\n     * @param points - An array of numbers, or an array of PointData objects eg [{x,y}, {x,y}, {x,y}]\n     * representing the x and y coordinates, of the polygon's vertices, in sequence.\n     * @param close - A boolean indicating whether to close the polygon path. True by default.\n     */\n    public poly(points: number[] | PointData[], close?: boolean): this\n    {\n        this._tick++;\n\n        this._activePath.poly(points, close, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n     * @param x - The x-coordinate of the center of the polygon.\n     * @param y - The y-coordinate of the center of the polygon.\n     * @param radius - The radius of the circumscribed circle of the polygon.\n     * @param sides - The number of sides of the polygon. Must be 3 or more.\n     * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n     * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n     * @returns The instance of the current object for chaining.\n     */\n    public regularPoly(x: number, y: number, radius: number, sides: number, rotation = 0, transform?: Matrix): this\n    {\n        this._tick++;\n        this._activePath.regularPoly(x, y, radius, sides, rotation, transform);\n\n        return this;\n    }\n\n    /**\n     * Draws a polygon with rounded corners.\n     * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n     * @param x - The x-coordinate of the center of the polygon.\n     * @param y - The y-coordinate of the center of the polygon.\n     * @param radius - The radius of the circumscribed circle of the polygon.\n     * @param sides - The number of sides of the polygon. Must be 3 or more.\n     * @param corner - The radius of the rounding of the corners.\n     * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundPoly(x: number, y: number, radius: number, sides: number, corner: number, rotation?: number): this\n    {\n        this._tick++;\n        this._activePath.roundPoly(x, y, radius, sides, corner, rotation);\n\n        return this;\n    }\n\n    /**\n     * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n     * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n     * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n     * A minimum of 3 points is required.\n     * @param radius - The default radius for the corners.\n     * This radius is applied to all corners unless overridden in `points`.\n     * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n     *  method instead of an arc method. Defaults to false.\n     * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n     * Higher values make the curve smoother.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundShape(points: RoundedPoint[], radius: number, useQuadratic?: boolean, smoothness?: number): this\n    {\n        this._tick++;\n        this._activePath.roundShape(points, radius, useQuadratic, smoothness);\n\n        return this;\n    }\n\n    /**\n     * Draw Rectangle with fillet corners. This is much like rounded rectangle\n     * however it support negative numbers as well for the corner radius.\n     * @param x - Upper left corner of rect\n     * @param y - Upper right corner of rect\n     * @param width - Width of rect\n     * @param height - Height of rect\n     * @param fillet - accept negative or positive values\n     */\n    public filletRect(x: number, y: number, width: number, height: number, fillet: number): this\n    {\n        this._tick++;\n        this._activePath.filletRect(x, y, width, height, fillet);\n\n        return this;\n    }\n\n    /**\n     * Draw Rectangle with chamfer corners. These are angled corners.\n     * @param x - Upper left corner of rect\n     * @param y - Upper right corner of rect\n     * @param width - Width of rect\n     * @param height - Height of rect\n     * @param chamfer - non-zero real number, size of corner cutout\n     * @param transform\n     */\n    public chamferRect(x: number, y: number, width: number, height: number, chamfer: number, transform?: Matrix): this\n    {\n        this._tick++;\n        this._activePath.chamferRect(x, y, width, height, chamfer, transform);\n\n        return this;\n    }\n\n    /**\n     * Draws a star shape centered at a specified location. This method allows for the creation\n     *  of stars with a variable number of points, outer radius, optional inner radius, and rotation.\n     * The star is drawn as a closed polygon with alternating outer and inner vertices to create the star's points.\n     * An optional transformation can be applied to scale, rotate, or translate the star as needed.\n     * @param x - The x-coordinate of the center of the star.\n     * @param y - The y-coordinate of the center of the star.\n     * @param points - The number of points of the star.\n     * @param radius - The outer radius of the star (distance from the center to the outer points).\n     * @param innerRadius - Optional. The inner radius of the star\n     * (distance from the center to the inner points between the outer points).\n     * If not provided, defaults to half of the `radius`.\n     * @param rotation - Optional. The rotation of the star in radians, where 0 is aligned with the y-axis.\n     * Defaults to 0, meaning one point is directly upward.\n     * @returns The instance of the current object for chaining further drawing commands.\n     */\n    public star(x: number, y: number, points: number, radius: number, innerRadius = 0, rotation = 0): this\n    {\n        this._tick++;\n\n        this._activePath.star(x, y, points, radius, innerRadius, rotation, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Parses and renders an SVG string into the graphics context. This allows for complex shapes and paths\n     * defined in SVG format to be drawn within the graphics context.\n     * @param svg - The SVG string to be parsed and rendered.\n     */\n    public svg(svg: string): this\n    {\n        this._tick++;\n\n        SVGParser(svg, this);\n\n        return this;\n    }\n\n    /**\n     * Restores the most recently saved graphics state by popping the top of the graphics state stack.\n     * This includes transformations, fill styles, and stroke styles.\n     */\n    public restore(): this\n    {\n        const state = this._stateStack.pop();\n\n        if (state)\n        {\n            this._transform = state.transform;\n            this._fillStyle = state.fillStyle;\n            this._strokeStyle = state.strokeStyle;\n        }\n\n        return this;\n    }\n\n    /** Saves the current graphics state, including transformations, fill styles, and stroke styles, onto a stack. */\n    public save(): this\n    {\n        this._stateStack.push({\n            transform: this._transform.clone(),\n            fillStyle: { ...this._fillStyle },\n            strokeStyle: { ...this._strokeStyle },\n        });\n\n        return this;\n    }\n\n    /**\n     * Returns the current transformation matrix of the graphics context.\n     * @returns The current transformation matrix.\n     */\n    public getTransform(): Matrix\n    {\n        return this._transform;\n    }\n\n    /**\n     * Resets the current transformation matrix to the identity matrix, effectively removing any transformations (rotation, scaling, translation) previously applied.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public resetTransform(): this\n    {\n        this._transform.identity();\n\n        return this;\n    }\n\n    /**\n     * Applies a rotation transformation to the graphics context around the current origin.\n     * @param angle - The angle of rotation in radians.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public rotate(angle: number): this\n    {\n        this._transform.rotate(angle);\n\n        return this;\n    }\n\n    /**\n     * Applies a scaling transformation to the graphics context, scaling drawings by x horizontally and by y vertically.\n     * @param x - The scale factor in the horizontal direction.\n     * @param y - (Optional) The scale factor in the vertical direction. If not specified, the x value is used for both directions.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public scale(x: number, y: number = x): this\n    {\n        this._transform.scale(x, y);\n\n        return this;\n    }\n\n    /**\n     * Sets the current transformation matrix of the graphics context to the specified matrix or values.\n     * This replaces the current transformation matrix.\n     * @param a - The value for the a property of the matrix, or a Matrix object to use directly.\n     * @param b - The value for the b property of the matrix.\n     * @param c - The value for the c property of the matrix.\n     * @param d - The value for the d property of the matrix.\n     * @param dx - The value for the tx (translate x) property of the matrix.\n     * @param dy - The value for the ty (translate y) property of the matrix.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public setTransform(transform: Matrix): this;\n    public setTransform(a: number, b: number, c: number, d: number, dx: number, dy: number): this;\n    public setTransform(a: number | Matrix, b?: number, c?: number, d?: number, dx?: number, dy?: number): this\n    {\n        if (a instanceof Matrix)\n        {\n            this._transform.set(a.a, a.b, a.c, a.d, a.tx, a.ty);\n\n            return this;\n        }\n\n        this._transform.set(a, b, c, d, dx, dy);\n\n        return this;\n    }\n\n    /**\n     * Applies the specified transformation matrix to the current graphics context by multiplying the current matrix with the specified matrix.\n     * @param a - The value for the a property of the matrix, or a Matrix object to use directly.\n     * @param b - The value for the b property of the matrix.\n     * @param c - The value for the c property of the matrix.\n     * @param d - The value for the d property of the matrix.\n     * @param dx - The value for the tx (translate x) property of the matrix.\n     * @param dy - The value for the ty (translate y) property of the matrix.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public transform(transform: Matrix): this;\n    public transform(a: number, b: number, c: number, d: number, dx: number, dy: number): this;\n    public transform(a: number | Matrix, b?: number, c?: number, d?: number, dx?: number, dy?: number): this\n    {\n        if (a instanceof Matrix)\n        {\n            this._transform.append(a);\n\n            return this;\n        }\n\n        tempMatrix.set(a, b, c, d, dx, dy);\n        this._transform.append(tempMatrix);\n\n        return this;\n    }\n\n    /**\n     * Applies a translation transformation to the graphics context, moving the origin by the specified amounts.\n     * @param x - The amount to translate in the horizontal direction.\n     * @param y - (Optional) The amount to translate in the vertical direction. If not specified, the x value is used for both directions.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public translate(x: number, y: number = x): this\n    {\n        this._transform.translate(x, y);\n\n        return this;\n    }\n\n    /**\n     * Clears all drawing commands from the graphics context, effectively resetting it. This includes clearing the path,\n     * and optionally resetting transformations to the identity matrix.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public clear(): this\n    {\n        this._activePath.clear();\n        this.instructions.length = 0;\n        this.resetTransform();\n\n        this.onUpdate();\n\n        return this;\n    }\n\n    protected onUpdate(): void\n    {\n        if (this.dirty) return;\n\n        this.emit('update', this, 0x10);\n        this.dirty = true;\n        this._boundsDirty = true;\n    }\n\n    /** The bounds of the graphic shape. */\n    get bounds(): Bounds\n    {\n        if (!this._boundsDirty) return this._bounds;\n\n        // TODO switch to idy dirty with tick..\n        const bounds = this._bounds;\n\n        bounds.clear();\n\n        for (let i = 0; i < this.instructions.length; i++)\n        {\n            const instruction = this.instructions[i];\n            const action = instruction.action;\n\n            if (action === 'fill')\n            {\n                const data = instruction.data as FillInstruction['data'];\n\n                bounds.addBounds(data.path.bounds);\n            }\n            else if (action === 'texture')\n            {\n                const data = instruction.data as TextureInstruction['data'];\n\n                bounds.addFrame(data.dx, data.dy, data.dx + data.dw, data.dy + data.dh, data.transform);\n            }\n            if (action === 'stroke')\n            {\n                const data = instruction.data as StrokeInstruction['data'];\n\n                const padding = data.style.width / 2;\n\n                const _bounds = data.path.bounds;\n\n                bounds.addFrame(\n                    _bounds.minX - padding,\n                    _bounds.minY - padding,\n                    _bounds.maxX + padding,\n                    _bounds.maxY + padding\n                );\n            }\n        }\n\n        return bounds;\n    }\n\n    /**\n     * Check to see if a point is contained within this geometry.\n     * @param point - Point to check if it's contained.\n     * @returns {boolean} `true` if the point is contained within geometry.\n     */\n    public containsPoint(point: PointData): boolean\n    {\n        // early out if the bounding box is not hit\n        if (!this.bounds.containsPoint(point.x, point.y)) return false;\n\n        const instructions = this.instructions;\n        let hasHit = false;\n\n        for (let k = 0; k < instructions.length; k++)\n        {\n            const instruction = instructions[k];\n\n            const data = instruction.data as FillInstruction['data'];\n            const path = data.path;\n\n            if (!instruction.action || !path) continue;\n\n            const style = data.style;\n            const shapes = path.shapePath.shapePrimitives;\n\n            for (let i = 0; i < shapes.length; i++)\n            {\n                const shape = shapes[i].shape;\n\n                if (!style || !shape) continue;\n\n                const transform = shapes[i].transform;\n\n                const transformedPoint = transform ? transform.applyInverse(point, tmpPoint) : point;\n\n                if (instruction.action === 'fill')\n                {\n                    hasHit = shape.contains(transformedPoint.x, transformedPoint.y);\n                }\n                else\n                {\n                    hasHit = shape.strokeContains(transformedPoint.x, transformedPoint.y, (style as ConvertedStrokeStyle).width);\n                }\n\n                const holes = data.hole;\n\n                if (holes)\n                {\n                    const holeShapes = holes.shapePath?.shapePrimitives;\n\n                    if (holeShapes)\n                    {\n                        for (let j = 0; j < holeShapes.length; j++)\n                        {\n                            if (holeShapes[j].shape.contains(transformedPoint.x, transformedPoint.y))\n                            {\n                                hasHit = false;\n                            }\n                        }\n                    }\n                }\n\n                if (hasHit)\n                {\n                    return true;\n                }\n            }\n        }\n\n        return hasHit;\n    }\n\n    /**\n     * Destroys the GraphicsData object.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @param {boolean} [options.texture=false] - Should it destroy the current texture of the fill/stroke style?\n     * @param {boolean} [options.textureSource=false] - Should it destroy the texture source of the fill/stroke style?\n     */\n    public destroy(options: TypeOrBool<TextureDestroyOptions> = false): void\n    {\n        this._stateStack.length = 0;\n        this._transform = null;\n\n        this.emit('destroy', this);\n        this.removeAllListeners();\n\n        const destroyTexture = typeof options === 'boolean' ? options : options?.texture;\n\n        if (destroyTexture)\n        {\n            const destroyTextureSource = typeof options === 'boolean' ? options : options?.textureSource;\n\n            if (this._fillStyle.texture)\n            {\n                this._fillStyle.texture.destroy(destroyTextureSource);\n            }\n\n            if (this._strokeStyle.texture)\n            {\n                this._strokeStyle.texture.destroy(destroyTextureSource);\n            }\n        }\n\n        this._fillStyle = null;\n        this._strokeStyle = null;\n\n        this.instructions = null;\n        this._activePath = null;\n        this._bounds = null;\n        this._stateStack = null;\n        this.customShader = null;\n        this._transform = null;\n    }\n}\n","import type { Matrix } from '../../../../../maths/matrix/Matrix';\n\n/**\n * Transforms the vertices in an array with the given matrix.\n * @param vertices - the vertices to transform\n * @param m - the matrix to apply to the vertices\n * @param offset - the offset of the vertices (defaults to 0)\n * @param stride - the stride of the vertices (defaults to 2)\n * @param size - the size of the vertices (defaults to vertices.length / stride - offset)\n * @memberof rendering\n */\nexport function transformVertices(vertices: number[], m: Matrix, offset?: number, stride?: number, size?: number)\n{\n    const a = m.a;\n    const b = m.b;\n    const c = m.c;\n    const d = m.d;\n    const tx = m.tx;\n    const ty = m.ty;\n\n    offset = offset || 0;\n    stride = stride || 2;\n    size = size || (vertices.length / stride) - offset;\n\n    let index = offset * stride;\n\n    for (let i = 0; i < size; i++)\n    {\n        const x = vertices[index];\n        const y = vertices[index + 1];\n\n        vertices[index] = (a * x) + (c * y) + tx;\n        vertices[index + 1] = (b * x) + (d * y) + ty;\n\n        index += stride;\n    }\n}\n","import type { Circle } from '../../../../maths/shapes/Circle';\nimport type { Ellipse } from '../../../../maths/shapes/Ellipse';\nimport type { RoundedRectangle } from '../../../../maths/shapes/RoundedRectangle';\nimport type { ShapeBuildCommand } from './ShapeBuildCommand';\n\ntype RoundedShape = Circle | Ellipse | RoundedRectangle;\n\n/**\n * Builds a rectangle to draw\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n */\nexport const buildCircle: ShapeBuildCommand<RoundedShape> = {\n\n    build(shape: RoundedShape, points: number[])\n    {\n        let x;\n        let y;\n        let dx;\n        let dy;\n\n        let rx;\n        let ry;\n\n        if (shape.type === 'circle')\n        {\n            const circle = shape as Circle;\n\n            x = circle.x;\n            y = circle.y;\n            rx = ry = circle.radius;\n            dx = dy = 0;\n        }\n\n        else if (shape.type === 'ellipse')\n        {\n            const ellipse = shape as Ellipse;\n\n            x = ellipse.x;\n            y = ellipse.y;\n            rx = ellipse.halfWidth;\n            ry = ellipse.halfHeight;\n            dx = dy = 0;\n        }\n        else\n        {\n            const roundedRect = shape as RoundedRectangle;\n            const halfWidth = roundedRect.width / 2;\n            const halfHeight = roundedRect.height / 2;\n\n            x = roundedRect.x + halfWidth;\n            y = roundedRect.y + halfHeight;\n            rx = ry = Math.max(0, Math.min(roundedRect.radius, Math.min(halfWidth, halfHeight)));\n            dx = halfWidth - rx;\n            dy = halfHeight - ry;\n        }\n\n        if (!(rx >= 0 && ry >= 0 && dx >= 0 && dy >= 0))\n        {\n            return points;\n        }\n\n        // Choose a number of segments such that the maximum absolute deviation from the circle is approximately 0.029\n        const n = Math.ceil(2.3 * Math.sqrt(rx + ry));\n        const m = (n * 8) + (dx ? 4 : 0) + (dy ? 4 : 0);\n\n        if (m === 0)\n        {\n            return points;\n        }\n\n        if (n === 0)\n        {\n            points[0] = points[6] = x + dx;\n            points[1] = points[3] = y + dy;\n            points[2] = points[4] = x - dx;\n            points[5] = points[7] = y - dy;\n\n            return points;\n        }\n\n        let j1 = 0;\n        let j2 = (n * 4) + (dx ? 2 : 0) + 2;\n        let j3 = j2;\n        let j4 = m;\n\n        let x0 = dx + rx;\n        let y0 = dy;\n        let x1 = x + x0;\n        let x2 = x - x0;\n        let y1 = y + y0;\n\n        points[j1++] = x1;\n        points[j1++] = y1;\n        points[--j2] = y1;\n        points[--j2] = x2;\n\n        if (dy)\n        {\n            const y2 = y - y0;\n\n            points[j3++] = x2;\n            points[j3++] = y2;\n            points[--j4] = y2;\n            points[--j4] = x1;\n        }\n\n        for (let i = 1; i < n; i++)\n        {\n            const a = Math.PI / 2 * (i / n);\n            const x0 = dx + (Math.cos(a) * rx);\n            const y0 = dy + (Math.sin(a) * ry);\n            const x1 = x + x0;\n            const x2 = x - x0;\n            const y1 = y + y0;\n            const y2 = y - y0;\n\n            points[j1++] = x1;\n            points[j1++] = y1;\n            points[--j2] = y1;\n            points[--j2] = x2;\n            points[j3++] = x2;\n            points[j3++] = y2;\n            points[--j4] = y2;\n            points[--j4] = x1;\n        }\n\n        x0 = dx;\n        y0 = dy + ry;\n        x1 = x + x0;\n        x2 = x - x0;\n        y1 = y + y0;\n        const y2 = y - y0;\n\n        points[j1++] = x1;\n        points[j1++] = y1;\n        points[--j4] = y2;\n        points[--j4] = x1;\n\n        if (dx)\n        {\n            points[j1++] = x2;\n            points[j1++] = y1;\n            points[--j4] = y2;\n            points[--j4] = x2;\n        }\n\n        return points;\n    },\n\n    triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset)\n    {\n        if (points.length === 0)\n        {\n            return;\n        }\n\n        // Compute center (average of all points)\n        let centerX = 0; let\n            centerY = 0;\n\n        for (let i = 0; i < points.length; i += 2)\n        {\n            centerX += points[i];\n            centerY += points[i + 1];\n        }\n        centerX /= (points.length / 2);\n        centerY /= (points.length / 2);\n\n        // Set center vertex\n        let count = verticesOffset;\n\n        vertices[count * verticesStride] = centerX;\n        vertices[(count * verticesStride) + 1] = centerY;\n        const centerIndex = count++;\n\n        // Set edge vertices and indices\n        for (let i = 0; i < points.length; i += 2)\n        {\n            vertices[count * verticesStride] = points[i];\n            vertices[(count * verticesStride) + 1] = points[i + 1];\n\n            if (i > 0)\n            { // Skip first point for indices\n                indices[indicesOffset++] = count;\n                indices[indicesOffset++] = centerIndex;\n                indices[indicesOffset++] = count - 1;\n            }\n            count++;\n        }\n\n        // Connect last point to the first edge point\n        indices[indicesOffset++] = centerIndex + 1;\n        indices[indicesOffset++] = centerIndex;\n        indices[indicesOffset++] = count - 1;\n    }\n\n};\n","export type LineCap = 'butt' | 'round' | 'square';\nexport type LineJoin = 'round' | 'bevel' | 'miter';\n\nexport const closePointEps = 1e-4;\nexport const curveEps = 0.0001;\n","import { Point } from '../../../../maths/point/Point';\nimport { closePointEps, curveEps } from '../const';\nimport { getOrientationOfPoints } from '../utils/getOrientationOfPoints';\n\nimport type { StrokeAttributes } from '../FillTypes';\n\n/**\n * Buffers vertices to draw a square cap.\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n * @param {number} x - X-coord of end point\n * @param {number} y - Y-coord of end point\n * @param {number} nx - X-coord of line normal pointing inside\n * @param {number} ny - Y-coord of line normal pointing inside\n * @param {number} innerWeight - Weight of inner points\n * @param {number} outerWeight - Weight of outer points\n * @param {boolean} clockwise - Whether the cap is drawn clockwise\n * @param {Array<number>} verts - vertex buffer\n * @returns {number} - no. of vertices pushed\n */\nfunction square(\n    x: number,\n    y: number,\n    nx: number,\n    ny: number,\n    innerWeight: number,\n    outerWeight: number,\n    clockwise: boolean, /* rotation for square (true at left end, false at right end) */\n    verts: Array<number>\n): number\n{\n    const ix = x - (nx * innerWeight);\n    const iy = y - (ny * innerWeight);\n    const ox = x + (nx * outerWeight);\n    const oy = y + (ny * outerWeight);\n\n    /* Rotate nx,ny for extension vector */\n    let exx; let\n        eyy;\n\n    if (clockwise)\n    {\n        exx = ny;\n        eyy = -nx;\n    }\n    else\n    {\n        exx = -ny;\n        eyy = nx;\n    }\n\n    /* [i|0]x,y extended at cap */\n    const eix = ix + exx;\n    const eiy = iy + eyy;\n    const eox = ox + exx;\n    const eoy = oy + eyy;\n\n    /* Square itself must be inserted clockwise*/\n    verts.push(eix, eiy);\n    verts.push(eox, eoy);\n\n    return 2;\n}\n\n/**\n * Buffers vertices to draw an arc at the line joint or cap.\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n * @param {number} cx - X-coord of center\n * @param {number} cy - Y-coord of center\n * @param {number} sx - X-coord of arc start\n * @param {number} sy - Y-coord of arc start\n * @param {number} ex - X-coord of arc end\n * @param {number} ey - Y-coord of arc end\n * @param {Array[]} verts - buffer of vertices\n * @param {boolean} clockwise - orientation of vertices\n * @returns {number} - no. of vertices pushed\n */\nfunction round(\n    cx: number,\n    cy: number,\n    sx: number,\n    sy: number,\n    ex: number,\n    ey: number,\n    verts: number[],\n    clockwise: boolean, /* if not cap, then clockwise is turn of joint, otherwise rotation from angle0 to angle1 */\n): number\n{\n    const cx2p0x = sx - cx;\n    const cy2p0y = sy - cy;\n\n    let angle0 = Math.atan2(cx2p0x, cy2p0y);\n    let angle1 = Math.atan2(ex - cx, ey - cy);\n\n    if (clockwise && angle0 < angle1)\n    {\n        angle0 += Math.PI * 2;\n    }\n    else if (!clockwise && angle0 > angle1)\n    {\n        angle1 += Math.PI * 2;\n    }\n\n    let startAngle = angle0;\n    const angleDiff = angle1 - angle0;\n    const absAngleDiff = Math.abs(angleDiff);\n\n    const radius = Math.sqrt((cx2p0x * cx2p0x) + (cy2p0y * cy2p0y));\n    const segCount = ((15 * absAngleDiff * Math.sqrt(radius) / Math.PI) >> 0) + 1;\n    const angleInc = angleDiff / segCount;\n\n    startAngle += angleInc;\n\n    if (clockwise)\n    {\n        verts.push(cx, cy);\n        verts.push(sx, sy);\n\n        for (let i = 1, angle = startAngle; i < segCount; i++, angle += angleInc)\n        {\n            verts.push(cx, cy);\n            verts.push(cx + ((Math.sin(angle) * radius)),\n                cy + ((Math.cos(angle) * radius)));\n        }\n\n        verts.push(cx, cy);\n        verts.push(ex, ey);\n    }\n    else\n    {\n        verts.push(sx, sy);\n        verts.push(cx, cy);\n\n        for (let i = 1, angle = startAngle; i < segCount; i++, angle += angleInc)\n        {\n            verts.push(cx + ((Math.sin(angle) * radius)),\n                cy + ((Math.cos(angle) * radius)));\n            verts.push(cx, cy);\n        }\n\n        verts.push(ex, ey);\n        verts.push(cx, cy);\n    }\n\n    return segCount * 2;\n}\n\n/**\n * Builds a line to draw using the polygon method.\n * @param points\n * @param lineStyle\n * @param flipAlignment\n * @param closed\n * @param vertices\n * @param _verticesStride\n * @param _verticesOffset\n * @param indices\n * @param _indicesOffset\n */\nexport function buildLine(\n    points: number[],\n    lineStyle: StrokeAttributes,\n    flipAlignment: boolean,\n    closed: boolean,\n    // alignment:number,\n\n    vertices: number[],\n    _verticesStride: number,\n    _verticesOffset: number,\n\n    indices: number[],\n    _indicesOffset: number,\n\n): void\n{\n    // const shape = graphicsData.shape as Polygon;\n    //   let points = graphicsData.points || shape.points.slice();\n    const eps = closePointEps;\n\n    if (points.length === 0)\n    {\n        return;\n    }\n\n    const style = lineStyle;\n\n    let alignment = style.alignment;\n\n    if (lineStyle.alignment !== 0.5)\n    {\n        // rotate the points!\n        let orientation = getOrientationOfPoints(points);\n\n        if (flipAlignment)orientation *= -1;\n\n        alignment = ((alignment - 0.5) * orientation) + 0.5;\n    }\n\n    // get first and last point.. figure out the middle!\n    const firstPoint = new Point(points[0], points[1]);\n    const lastPoint = new Point(points[points.length - 2], points[points.length - 1]);\n    const closedShape = closed;\n    const closedPath = Math.abs(firstPoint.x - lastPoint.x) < eps\n        && Math.abs(firstPoint.y - lastPoint.y) < eps;\n\n    // if the first point is the last point - gonna have issues :)\n    if (closedShape)\n    {\n        // need to clone as we are going to slightly modify the shape..\n        points = points.slice();\n\n        if (closedPath)\n        {\n            points.pop();\n            points.pop();\n            lastPoint.set(points[points.length - 2], points[points.length - 1]);\n        }\n\n        const midPointX = (firstPoint.x + lastPoint.x) * 0.5;\n        const midPointY = (lastPoint.y + firstPoint.y) * 0.5;\n\n        points.unshift(midPointX, midPointY);\n        points.push(midPointX, midPointY);\n    }\n\n    const verts = vertices;\n\n    const length = points.length / 2;\n    let indexCount = points.length;\n    const indexStart = verts.length / 2;\n\n    // Max. inner and outer width\n    const width = style.width / 2;\n    const widthSquared = width * width;\n    const miterLimitSquared = style.miterLimit * style.miterLimit;\n\n    /* Line segments of interest where (x1,y1) forms the corner. */\n    let x0 = points[0];\n    let y0 = points[1];\n    let x1 = points[2];\n    let y1 = points[3];\n    let x2 = 0;\n    let y2 = 0;\n\n    /* perp[?](x|y) = the line normal with magnitude lineWidth. */\n    let perpX = -(y0 - y1);\n    let perpY = x0 - x1;\n    let perp1x = 0;\n    let perp1y = 0;\n\n    let dist = Math.sqrt((perpX * perpX) + (perpY * perpY));\n\n    perpX /= dist;\n    perpY /= dist;\n    perpX *= width;\n    perpY *= width;\n\n    const ratio = alignment;// 0.5;\n    const innerWeight = (1 - ratio) * 2;\n    const outerWeight = ratio * 2;\n\n    if (!closedShape)\n    {\n        if (style.cap === 'round')\n        {\n            indexCount += round(\n                x0 - (perpX * (innerWeight - outerWeight) * 0.5),\n                y0 - (perpY * (innerWeight - outerWeight) * 0.5),\n                x0 - (perpX * innerWeight),\n                y0 - (perpY * innerWeight),\n                x0 + (perpX * outerWeight),\n                y0 + (perpY * outerWeight),\n                verts,\n                true,\n            ) + 2;\n        }\n        else if (style.cap === 'square')\n        {\n            indexCount += square(x0, y0, perpX, perpY, innerWeight, outerWeight, true, verts);\n        }\n    }\n\n    // Push first point (below & above vertices)\n    verts.push(\n        x0 - (perpX * innerWeight),\n        y0 - (perpY * innerWeight));\n    verts.push(\n        x0 + (perpX * outerWeight),\n        y0 + (perpY * outerWeight));\n\n    for (let i = 1; i < length - 1; ++i)\n    {\n        x0 = points[(i - 1) * 2];\n        y0 = points[((i - 1) * 2) + 1];\n\n        x1 = points[i * 2];\n        y1 = points[(i * 2) + 1];\n\n        x2 = points[(i + 1) * 2];\n        y2 = points[((i + 1) * 2) + 1];\n\n        perpX = -(y0 - y1);\n        perpY = x0 - x1;\n\n        dist = Math.sqrt((perpX * perpX) + (perpY * perpY));\n        perpX /= dist;\n        perpY /= dist;\n        perpX *= width;\n        perpY *= width;\n\n        perp1x = -(y1 - y2);\n        perp1y = x1 - x2;\n\n        dist = Math.sqrt((perp1x * perp1x) + (perp1y * perp1y));\n        perp1x /= dist;\n        perp1y /= dist;\n        perp1x *= width;\n        perp1y *= width;\n\n        /* d[x|y](0|1) = the component displacement between points p(0,1|1,2) */\n        const dx0 = x1 - x0;\n        const dy0 = y0 - y1;\n        const dx1 = x1 - x2;\n        const dy1 = y2 - y1;\n\n        /* +ve if internal angle < 90 degree, -ve if internal angle > 90 degree. */\n        const dot = (dx0 * dx1) + (dy0 * dy1);\n        /* +ve if internal angle counterclockwise, -ve if internal angle clockwise. */\n        const cross = (dy0 * dx1) - (dy1 * dx0);\n        const clockwise = (cross < 0);\n\n        /* Going nearly parallel? */\n        /* atan(0.001) ~= 0.001 rad ~= 0.057 degree */\n        if (Math.abs(cross) < 0.001 * Math.abs(dot))\n        {\n            verts.push(\n                x1 - (perpX * innerWeight),\n                y1 - (perpY * innerWeight));\n            verts.push(\n                x1 + (perpX * outerWeight),\n                y1 + (perpY * outerWeight));\n\n            /* 180 degree corner? */\n            if (dot >= 0)\n            {\n                if (style.join === 'round')\n                {\n                    indexCount += round(\n                        x1, y1,\n                        x1 - (perpX * innerWeight), y1 - (perpY * innerWeight),\n                        x1 - (perp1x * innerWeight), y1 - (perp1y * innerWeight),\n                        verts, false) + 4;\n                }\n                else\n                {\n                    indexCount += 2;\n                }\n\n                verts.push(\n                    x1 - (perp1x * outerWeight),\n                    y1 - (perp1y * outerWeight));\n                verts.push(\n                    x1 + (perp1x * innerWeight),\n                    y1 + (perp1y * innerWeight));\n            }\n\n            continue;\n        }\n\n        /* p[x|y] is the miter point. pDist is the distance between miter point and p1. */\n        const c1 = ((-perpX + x0) * (-perpY + y1)) - ((-perpX + x1) * (-perpY + y0));\n        const c2 = ((-perp1x + x2) * (-perp1y + y1)) - ((-perp1x + x1) * (-perp1y + y2));\n        const px = ((dx0 * c2) - (dx1 * c1)) / cross;\n        const py = ((dy1 * c1) - (dy0 * c2)) / cross;\n        const pDist = ((px - x1) * (px - x1)) + ((py - y1) * (py - y1));\n\n        /* Inner miter point */\n        const imx = x1 + ((px - x1) * innerWeight);\n        const imy = y1 + ((py - y1) * innerWeight);\n        /* Outer miter point */\n        const omx = x1 - ((px - x1) * outerWeight);\n        const omy = y1 - ((py - y1) * outerWeight);\n\n        /* Is the inside miter point too far away, creating a spike? */\n        const smallerInsideSegmentSq = Math.min((dx0 * dx0) + (dy0 * dy0), (dx1 * dx1) + (dy1 * dy1));\n        const insideWeight = clockwise ? innerWeight : outerWeight;\n        const smallerInsideDiagonalSq = smallerInsideSegmentSq + (insideWeight * insideWeight * widthSquared);\n        const insideMiterOk = pDist <= smallerInsideDiagonalSq;\n\n        if (insideMiterOk)\n        {\n            if (style.join === 'bevel' || pDist / widthSquared > miterLimitSquared)\n            {\n                if (clockwise) /* rotating at inner angle */\n                {\n                    verts.push(imx, imy); // inner miter point\n                    verts.push(x1 + (perpX * outerWeight), y1 + (perpY * outerWeight)); // first segment's outer vertex\n                    verts.push(imx, imy); // inner miter point\n                    verts.push(x1 + (perp1x * outerWeight), y1 + (perp1y * outerWeight)); // second segment's outer vertex\n                }\n                else /* rotating at outer angle */\n                {\n                    verts.push(x1 - (perpX * innerWeight), y1 - (perpY * innerWeight)); // first segment's inner vertex\n                    verts.push(omx, omy); // outer miter point\n                    verts.push(x1 - (perp1x * innerWeight), y1 - (perp1y * innerWeight)); // second segment's outer vertex\n                    verts.push(omx, omy); // outer miter point\n                }\n\n                indexCount += 2;\n            }\n            else if (style.join === 'round')\n            {\n                if (clockwise) /* arc is outside */\n                {\n                    verts.push(imx, imy);\n                    verts.push(x1 + (perpX * outerWeight), y1 + (perpY * outerWeight));\n\n                    indexCount += round(\n                        x1, y1,\n                        x1 + (perpX * outerWeight), y1 + (perpY * outerWeight),\n                        x1 + (perp1x * outerWeight), y1 + (perp1y * outerWeight),\n                        verts, true\n                    ) + 4;\n\n                    verts.push(imx, imy);\n                    verts.push(x1 + (perp1x * outerWeight), y1 + (perp1y * outerWeight));\n                }\n                else /* arc is inside */\n                {\n                    verts.push(x1 - (perpX * innerWeight), y1 - (perpY * innerWeight));\n                    verts.push(omx, omy);\n\n                    indexCount += round(\n                        x1, y1,\n                        x1 - (perpX * innerWeight), y1 - (perpY * innerWeight),\n                        x1 - (perp1x * innerWeight), y1 - (perp1y * innerWeight),\n                        verts, false\n                    ) + 4;\n\n                    verts.push(x1 - (perp1x * innerWeight), y1 - (perp1y * innerWeight));\n                    verts.push(omx, omy);\n                }\n            }\n            else\n            {\n                verts.push(imx, imy);\n                verts.push(omx, omy);\n            }\n        }\n        else // inside miter is NOT ok\n        {\n            verts.push(x1 - (perpX * innerWeight), y1 - (perpY * innerWeight)); // first segment's inner vertex\n            verts.push(x1 + (perpX * outerWeight), y1 + (perpY * outerWeight)); // first segment's outer vertex\n            if (style.join === 'round')\n            {\n                if (clockwise) /* arc is outside */\n                {\n                    indexCount += round(\n                        x1, y1,\n                        x1 + (perpX * outerWeight), y1 + (perpY * outerWeight),\n                        x1 + (perp1x * outerWeight), y1 + (perp1y * outerWeight),\n                        verts, true\n                    ) + 2;\n                }\n                else /* arc is inside */\n                {\n                    indexCount += round(\n                        x1, y1,\n                        x1 - (perpX * innerWeight), y1 - (perpY * innerWeight),\n                        x1 - (perp1x * innerWeight), y1 - (perp1y * innerWeight),\n                        verts, false\n                    ) + 2;\n                }\n            }\n            else if (style.join === 'miter' && pDist / widthSquared <= miterLimitSquared)\n            {\n                if (clockwise)\n                {\n                    verts.push(omx, omy); // inner miter point\n                    verts.push(omx, omy); // inner miter point\n                }\n                else\n                {\n                    verts.push(imx, imy); // outer miter point\n                    verts.push(imx, imy); // outer miter point\n                }\n                indexCount += 2;\n            }\n            verts.push(x1 - (perp1x * innerWeight), y1 - (perp1y * innerWeight)); // second segment's inner vertex\n            verts.push(x1 + (perp1x * outerWeight), y1 + (perp1y * outerWeight)); // second segment's outer vertex\n            indexCount += 2;\n        }\n    }\n\n    x0 = points[(length - 2) * 2];\n    y0 = points[((length - 2) * 2) + 1];\n\n    x1 = points[(length - 1) * 2];\n    y1 = points[((length - 1) * 2) + 1];\n\n    perpX = -(y0 - y1);\n    perpY = x0 - x1;\n\n    dist = Math.sqrt((perpX * perpX) + (perpY * perpY));\n    perpX /= dist;\n    perpY /= dist;\n    perpX *= width;\n    perpY *= width;\n\n    verts.push(x1 - (perpX * innerWeight), y1 - (perpY * innerWeight));\n    verts.push(x1 + (perpX * outerWeight), y1 + (perpY * outerWeight));\n\n    if (!closedShape)\n    {\n        if (style.cap === 'round')\n        {\n            indexCount += round(\n                x1 - (perpX * (innerWeight - outerWeight) * 0.5),\n                y1 - (perpY * (innerWeight - outerWeight) * 0.5),\n                x1 - (perpX * innerWeight),\n                y1 - (perpY * innerWeight),\n                x1 + (perpX * outerWeight),\n                y1 + (perpY * outerWeight),\n                verts,\n                false\n            ) + 2;\n        }\n        else if (style.cap === 'square')\n        {\n            indexCount += square(x1, y1, perpX, perpY, innerWeight, outerWeight, false, verts);\n        }\n    }\n\n    // const indices = graphicsGeometry.indices;\n    const eps2 = curveEps * curveEps;\n\n    // indices.push(indexStart);\n    for (let i = indexStart; i < indexCount + indexStart - 2; ++i)\n    {\n        x0 = verts[(i * 2)];\n        y0 = verts[(i * 2) + 1];\n\n        x1 = verts[(i + 1) * 2];\n        y1 = verts[((i + 1) * 2) + 1];\n\n        x2 = verts[(i + 2) * 2];\n        y2 = verts[((i + 2) * 2) + 1];\n\n        /* Skip zero area triangles */\n        if (Math.abs((x0 * (y1 - y2)) + (x1 * (y2 - y0)) + (x2 * (y0 - y1))) < eps2)\n        {\n            continue;\n        }\n\n        indices.push(i, i + 1, i + 2);\n    }\n}\n\n","import { default as earcut } from 'earcut';\n\nexport function triangulateWithHoles(\n    points: number[],\n    holes: number[],\n    vertices: number[],\n    verticesStride: number,\n    verticesOffset: number,\n\n    indices: number[],\n    indicesOffset: number\n)\n{\n    const triangles = earcut(points, holes, 2);\n\n    if (!triangles)\n    {\n        return;\n    }\n\n    for (let i = 0; i < triangles.length; i += 3)\n    {\n        indices[indicesOffset++] = (triangles[i] + verticesOffset);\n        indices[indicesOffset++] = (triangles[i + 1] + verticesOffset);\n        indices[indicesOffset++] = (triangles[i + 2] + verticesOffset);\n    }\n\n    let index = verticesOffset * verticesStride;\n\n    for (let i = 0; i < points.length; i += 2)\n    {\n        vertices[index] = points[i];\n        vertices[index + 1] = points[i + 1];\n\n        index += verticesStride;\n    }\n}\n\n","import { triangulateWithHoles } from '../utils/triangulateWithHoles';\n\nimport type { Polygon } from '../../../../maths/shapes/Polygon';\nimport type { ShapeBuildCommand } from './ShapeBuildCommand';\n\nconst emptyArray: number[] = [];\n\n/**\n * Builds a rectangle to draw\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n */\nexport const buildPolygon: ShapeBuildCommand<Polygon> = {\n\n    build(shape: Polygon, points: number[]): number[]\n    {\n        for (let i = 0; i < shape.points.length; i++)\n        {\n            points[i] = shape.points[i];\n        }\n\n        return points;\n    },\n\n    triangulate(\n        points: number[],\n        //  holes: number[],\n        vertices: number[],\n        verticesStride: number,\n        verticesOffset: number,\n\n        indices: number[],\n        indicesOffset: number\n    )\n    {\n        triangulateWithHoles(points, emptyArray, vertices, verticesStride, verticesOffset, indices, indicesOffset);\n    },\n\n};\n","import { Rectangle } from '../../../../maths/shapes/Rectangle';\nimport { buildSimpleUvs, buildUvs } from '../../../../rendering/renderers/shared/geometry/utils/buildUvs';\nimport { transformVertices } from '../../../../rendering/renderers/shared/geometry/utils/transformVertices';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport { BigPool } from '../../../../utils/pool/PoolGroup';\nimport { BatchableGraphics } from '../BatchableGraphics';\nimport { buildCircle } from '../buildCommands/buildCircle';\nimport { buildLine } from '../buildCommands/buildLine';\nimport { buildPolygon } from '../buildCommands/buildPolygon';\nimport { buildRectangle } from '../buildCommands/buildRectangle';\nimport { buildTriangle } from '../buildCommands/buildTriangle';\nimport { triangulateWithHoles } from './triangulateWithHoles';\n\nimport type { Polygon } from '../../../../maths/shapes/Polygon';\nimport type { ShapeBuildCommand } from '../buildCommands/ShapeBuildCommand';\nimport type { ConvertedFillStyle, ConvertedStrokeStyle } from '../FillTypes';\nimport type { GraphicsContext, TextureInstruction } from '../GraphicsContext';\nimport type { GpuGraphicsContext } from '../GraphicsContextSystem';\nimport type { GraphicsPath } from '../path/GraphicsPath';\nimport type { ShapePath } from '../path/ShapePath';\n\nconst buildMap: Record<string, ShapeBuildCommand> = {\n    rectangle: buildRectangle,\n    polygon: buildPolygon,\n    triangle: buildTriangle,\n    circle: buildCircle,\n    ellipse: buildCircle,\n    roundedRectangle: buildCircle,\n};\n\nconst tempRect = new Rectangle();\n\nexport function buildContextBatches(context: GraphicsContext, gpuContext: GpuGraphicsContext)\n{\n    const { geometryData, batches } = gpuContext;\n\n    // reset them..\n    batches.length = 0;\n    geometryData.indices.length = 0;\n    geometryData.vertices.length = 0;\n    geometryData.uvs.length = 0;\n\n    for (let i = 0; i < context.instructions.length; i++)\n    {\n        const instruction = context.instructions[i];\n\n        if (instruction.action === 'texture')\n        {\n            // add a quad!\n            addTextureToGeometryData(instruction.data, batches, geometryData);\n        }\n        else if (instruction.action === 'fill' || instruction.action === 'stroke')\n        {\n            const isStroke = instruction.action === 'stroke';\n\n            // build path collection of polys and shapes points..\n            const shapePath = instruction.data.path.shapePath;\n\n            const style = instruction.data.style;\n\n            const hole = instruction.data.hole;\n\n            if (isStroke && hole)\n            {\n                addShapePathToGeometryData(hole.shapePath, style, null, true, batches, geometryData);\n            }\n\n            addShapePathToGeometryData(shapePath, style, hole, isStroke, batches, geometryData);\n        }\n    }\n}\n\nfunction addTextureToGeometryData(\n    data: TextureInstruction['data'],\n    batches: BatchableGraphics[],\n    geometryData: {\n        vertices: number[];\n        uvs: number[];\n        indices: number[];\n    }\n)\n{\n    const { vertices, uvs, indices } = geometryData;\n\n    const indexOffset = indices.length;\n    const vertOffset = vertices.length / 2;\n\n    const points: number[] = [];\n\n    const build = buildMap.rectangle;\n\n    const rect = tempRect;\n\n    const texture = data.image;\n\n    rect.x = data.dx;\n    rect.y = data.dy;\n    rect.width = data.dw;\n    rect.height = data.dh;\n\n    const matrix = data.transform;\n\n    // TODO - this can be cached...\n    build.build(rect, points);\n\n    if (matrix)\n    {\n        transformVertices(points, matrix);\n    }\n\n    build.triangulate(points, vertices, 2, vertOffset, indices, indexOffset);\n\n    const textureUvs = texture.uvs;\n\n    uvs.push(\n        textureUvs.x0, textureUvs.y0,\n        textureUvs.x1, textureUvs.y1,\n        textureUvs.x3, textureUvs.y3,\n        textureUvs.x2, textureUvs.y2,\n    );\n\n    const graphicsBatch = BigPool.get(BatchableGraphics);\n\n    graphicsBatch.indexOffset = indexOffset;\n    graphicsBatch.indexSize = indices.length - indexOffset;\n\n    graphicsBatch.vertexOffset = vertOffset;\n    graphicsBatch.vertexSize = (vertices.length / 2) - vertOffset;\n\n    graphicsBatch.color = data.style;\n    graphicsBatch.alpha = data.alpha;\n\n    graphicsBatch.texture = texture;\n    graphicsBatch.geometryData = geometryData;\n\n    batches.push(graphicsBatch);\n}\n\nfunction addShapePathToGeometryData(\n    shapePath: ShapePath,\n    style: ConvertedFillStyle | ConvertedStrokeStyle,\n    hole: GraphicsPath,\n    isStroke: boolean,\n    batches: BatchableGraphics[],\n    geometryData: {\n        vertices: number[];\n        uvs: number[];\n        indices: number[];\n    }\n)\n{\n    const { vertices, uvs, indices } = geometryData;\n    const lastIndex = shapePath.shapePrimitives.length - 1;\n\n    shapePath.shapePrimitives.forEach(({ shape, transform: matrix }, i) =>\n    {\n        const indexOffset = indices.length;\n        const vertOffset = vertices.length / 2;\n\n        const points: number[] = [];\n\n        const build = buildMap[shape.type];\n\n        // TODO - this can be cached...\n        // TODO - THIS IS DONE TWICE!!!!!!\n        // ONCE FOR STROKE AND ONCE FOR FILL\n        // move to the ShapePath2D class itself?\n        build.build(shape, points);\n\n        if (matrix)\n        {\n            transformVertices(points, matrix);\n        }\n\n        if (!isStroke)\n        {\n            if (hole && lastIndex === i)\n            {\n                if (lastIndex !== 0)\n                {\n                    console.warn('[Pixi Graphics] only the last shape have be cut out');\n                }\n\n                const holeIndices: number[] = [];\n\n                const otherPoints = points.slice();\n\n                const holeArrays = getHoleArrays(hole.shapePath);\n\n                holeArrays.forEach((holePoints) =>\n                {\n                    holeIndices.push(otherPoints.length / 2);\n                    otherPoints.push(...holePoints);\n                });\n\n                triangulateWithHoles(otherPoints, holeIndices, vertices, 2, vertOffset, indices, indexOffset);\n            }\n            else\n            {\n                build.triangulate(points, vertices, 2, vertOffset, indices, indexOffset);\n            }\n        }\n        else\n        {\n            const close = (shape as Polygon).closePath ?? true;\n            const lineStyle = style as ConvertedStrokeStyle;\n\n            buildLine(points, lineStyle, false, close, vertices, 2, vertOffset, indices, indexOffset);\n        }\n\n        const uvsOffset = uvs.length / 2;\n\n        const texture = style.texture;\n\n        if (texture !== Texture.WHITE)\n        {\n            const textureMatrix = style.matrix;\n\n            if (matrix && textureMatrix)\n            {\n                // todo can prolly do this before calculating uvs..\n                textureMatrix.append(matrix.clone().invert());\n            }\n\n            buildUvs(vertices, 2, vertOffset, uvs, uvsOffset, 2, (vertices.length / 2) - vertOffset, textureMatrix);\n        }\n        else\n        {\n            buildSimpleUvs(uvs, uvsOffset, 2, (vertices.length / 2) - vertOffset);\n        }\n\n        const graphicsBatch = BigPool.get(BatchableGraphics);\n\n        graphicsBatch.indexOffset = indexOffset;\n        graphicsBatch.indexSize = indices.length - indexOffset;\n\n        graphicsBatch.vertexOffset = vertOffset;\n        graphicsBatch.vertexSize = (vertices.length / 2) - vertOffset;\n\n        graphicsBatch.color = style.color as number;\n        graphicsBatch.alpha = style.alpha;\n\n        graphicsBatch.texture = texture;\n        graphicsBatch.geometryData = geometryData;\n\n        batches.push(graphicsBatch);\n    });\n}\n\nfunction getHoleArrays(shape: ShapePath)\n{\n    if (!shape) return [];\n\n    const holePrimitives = shape.shapePrimitives;\n\n    const holeArrays = [];\n\n    for (let k = 0; k < holePrimitives.length; k++)\n    {\n        const holePrimitive = holePrimitives[k].shape;\n\n        // TODO - need to transform the points via there transform here..\n        const holePoints: number[] = [];\n\n        const holeBuilder = buildMap[holePrimitive.type] as ShapeBuildCommand;\n\n        holeBuilder.build(holePrimitive, holePoints);\n\n        holeArrays.push(holePoints);\n    }\n\n    return holeArrays;\n}\n","import type { Rectangle } from '../../../../maths/shapes/Rectangle';\nimport type { ShapeBuildCommand } from './ShapeBuildCommand';\n\n/**\n * Builds a rectangle to draw\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n */\nexport const buildRectangle: ShapeBuildCommand<Rectangle> = {\n\n    build(shape: Rectangle, points: number[]): number[]\n    {\n        const rectData = shape;\n        const x = rectData.x;\n        const y = rectData.y;\n        const width = rectData.width;\n        const height = rectData.height;\n\n        if (!(width >= 0 && height >= 0))\n        {\n            return points;\n        }\n\n        points[0] = x;\n        points[1] = y;\n        points[2] = x + width;\n        points[3] = y;\n        points[4] = x + width;\n        points[5] = y + height;\n        points[6] = x;\n        points[7] = y + height;\n\n        return points;\n    },\n\n    triangulate(\n        points: number[],\n\n        vertices: number[],\n        verticesStride: number,\n        verticesOffset: number,\n\n        indices: number[],\n        indicesOffset: number\n    )\n    {\n        let count = 0;\n\n        verticesOffset *= verticesStride;\n\n        vertices[verticesOffset + count] = points[0];\n        vertices[verticesOffset + count + 1] = points[1];\n\n        count += verticesStride;\n\n        vertices[verticesOffset + count] = points[2];\n        vertices[verticesOffset + count + 1] = points[3];\n\n        count += verticesStride;\n\n        vertices[verticesOffset + count] = points[6];\n        vertices[verticesOffset + count + 1] = points[7];\n\n        count += verticesStride;\n\n        vertices[verticesOffset + count] = points[4];\n        vertices[verticesOffset + count + 1] = points[5];\n\n        count += verticesStride;\n\n        const verticesIndex = verticesOffset / verticesStride;\n\n        // triangle 1\n        indices[indicesOffset++] = verticesIndex;\n        indices[indicesOffset++] = verticesIndex + 1;\n        indices[indicesOffset++] = verticesIndex + 2;\n\n        // triangle 2\n        indices[indicesOffset++] = verticesIndex + 1;\n        indices[indicesOffset++] = verticesIndex + 3;\n        indices[indicesOffset++] = verticesIndex + 2;\n    },\n};\n","import type { Triangle } from '../../../../maths/shapes/Triangle';\nimport type { ShapeBuildCommand } from './ShapeBuildCommand';\n\n/**\n * Builds a triangle to draw\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n */\nexport const buildTriangle: ShapeBuildCommand<Triangle> = {\n\n    build(shape: Triangle, points: number[]): number[]\n    {\n        points[0] = shape.x;\n        points[1] = shape.y;\n        points[2] = shape.x2;\n        points[3] = shape.y2;\n        points[4] = shape.x3;\n        points[5] = shape.y3;\n\n        return points;\n    },\n\n    triangulate(\n        points: number[],\n\n        vertices: number[],\n        verticesStride: number,\n        verticesOffset: number,\n\n        indices: number[],\n        indicesOffset: number\n    )\n    {\n        let count = 0;\n\n        verticesOffset *= verticesStride;\n\n        vertices[verticesOffset + count] = points[0];\n        vertices[verticesOffset + count + 1] = points[1];\n\n        count += verticesStride;\n\n        vertices[verticesOffset + count] = points[2];\n        vertices[verticesOffset + count + 1] = points[3];\n\n        count += verticesStride;\n\n        vertices[verticesOffset + count] = points[4];\n        vertices[verticesOffset + count + 1] = points[5];\n\n        const verticesIndex = verticesOffset / verticesStride;\n\n        // triangle 1\n        indices[indicesOffset++] = verticesIndex;\n        indices[indicesOffset++] = verticesIndex + 1;\n        indices[indicesOffset++] = verticesIndex + 2;\n    },\n};\n","export function getOrientationOfPoints(points: number[]): number\n{\n    const m = points.length;\n\n    if (m < 6)\n    {\n        return 1;\n    }\n\n    let area = 0;\n\n    for (let i = 0, x1 = points[m - 2], y1 = points[m - 1]; i < m; i += 2)\n    {\n        const x2 = points[i];\n        const y2 = points[i + 1];\n\n        area += (x2 - x1) * (y2 + y1);\n\n        x1 = x2;\n        y1 = y2;\n    }\n\n    if (area < 0)\n    {\n        return -1;\n    }\n\n    return 1;\n}\n","import type { Matrix } from '../../../../../maths/matrix/Matrix';\n\n/**\n * Takes a vertices array and a matrix and transforms the vertices based on the matrix.\n * this out put is written to the uvs array\n * @param vertices - the vertices to calculate uvs from\n * @param verticesStride - the stride of the vertice\n * @param verticesOffset - the offset of the vertices\n * @param uvs - the uvs to fill\n * @param uvsOffset - the offset of the uvs\n * @param uvsStride - the stride of the uvs\n * @param size - the size of the vertices\n * @param matrix - the matrix to apply to the uvs\n * @memberof rendering\n */\nexport function buildUvs(\n    vertices: number[],\n    verticesStride: number,\n    verticesOffset: number,\n\n    uvs: number[],\n    uvsOffset: number,\n    uvsStride: number,\n\n    size: number,\n    matrix: Matrix = null\n): void\n{\n    let index = 0;\n\n    verticesOffset *= verticesStride;\n    uvsOffset *= uvsStride;\n\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n\n    while (index < size)\n    {\n        const x = vertices[verticesOffset];\n        const y = vertices[verticesOffset + 1];\n\n        uvs[uvsOffset] = (a * x) + (c * y) + tx;\n        uvs[uvsOffset + 1] = (b * x) + (d * y) + ty;\n\n        uvsOffset += uvsStride;\n\n        verticesOffset += verticesStride;\n\n        index++;\n    }\n}\n\nexport function buildSimpleUvs(\n    uvs: number[],\n    uvsOffset: number,\n    uvsStride: number,\n    size: number,\n)\n{\n    let index = 0;\n\n    uvsOffset *= uvsStride;\n\n    while (index < size)\n    {\n        uvs[uvsOffset] = 0;\n        uvs[uvsOffset + 1] = 0;\n\n        uvsOffset += uvsStride;\n\n        index++;\n    }\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { BatchGeometry } from '../../../rendering/batcher/gpu/BatchGeometry';\nimport { getTextureBatchBindGroup } from '../../../rendering/batcher/gpu/getTextureBatchBindGroup';\nimport { Batcher } from '../../../rendering/batcher/shared/Batcher';\nimport { InstructionSet } from '../../../rendering/renderers/shared/instructions/InstructionSet';\nimport { BigPool } from '../../../utils/pool/PoolGroup';\nimport { buildContextBatches } from './utils/buildContextBatches';\n\nimport type { System } from '../../../rendering/renderers/shared/system/System';\nimport type { PoolItem } from '../../../utils/pool/Pool';\nimport type { BatchableGraphics } from './BatchableGraphics';\nimport type { GraphicsContext } from './GraphicsContext';\n\ninterface GeometryData\n{\n    vertices: number[];\n    uvs: number[];\n    indices: number[];\n}\n\n/**\n * A class that holds batchable graphics data for a GraphicsContext.\n * @memberof rendering\n * @ignore\n */\nexport class GpuGraphicsContext\n{\n    public isBatchable: boolean;\n    public context: GraphicsContext;\n    public batches: BatchableGraphics[] = [];\n    public geometryData: GeometryData = {\n        vertices: [],\n        uvs: [],\n        indices: [],\n    };\n    public graphicsData: GraphicsContextRenderData;\n}\n\n/**\n * A class that holds the render data for a GraphicsContext.\n * @memberof rendering\n * @ignore\n */\nexport class GraphicsContextRenderData\n{\n    public geometry = new BatchGeometry();\n    public instructions = new InstructionSet();\n\n    public init()\n    {\n        this.instructions.reset();\n    }\n}\n\n/**\n * Options for the GraphicsContextSystem.\n * @memberof rendering\n */\nexport interface GraphicsContextSystemOptions\n{\n    /** A value from 0 to 1 that controls the smoothness of bezier curves (the higher the smoother) */\n    bezierSmoothness?: number;\n}\n\n/**\n * A system that manages the rendering of GraphicsContexts.\n * @memberof rendering\n */\nexport class GraphicsContextSystem implements System<GraphicsContextSystemOptions>\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n            ExtensionType.WebGPUSystem,\n            ExtensionType.CanvasSystem,\n        ],\n        name: 'graphicsContext'\n    } as const;\n\n    /** The default options for the GraphicsContextSystem. */\n    public static readonly defaultOptions: GraphicsContextSystemOptions = {\n        /**\n         * A value from 0 to 1 that controls the smoothness of bezier curves (the higher the smoother)\n         * @default 0.5\n         */\n        bezierSmoothness: 0.5,\n    };\n\n    // the root context batches, used to either make a batch or geometry\n    // all graphics use this as a base\n    private readonly _activeBatchers: Batcher[] = [];\n    private _gpuContextHash: Record<number, GpuGraphicsContext> = {};\n    // used for non-batchable graphics\n    private _graphicsDataContextHash: Record<number, GraphicsContextRenderData> = Object.create(null);\n\n    /**\n     * Runner init called, update the default options\n     * @ignore\n     */\n    public init(options?: GraphicsContextSystemOptions)\n    {\n        GraphicsContextSystem.defaultOptions.bezierSmoothness = options?.bezierSmoothness\n            ?? GraphicsContextSystem.defaultOptions.bezierSmoothness;\n    }\n\n    protected prerender()\n    {\n        this._returnActiveBatchers();\n    }\n\n    public getContextRenderData(context: GraphicsContext): GraphicsContextRenderData\n    {\n        return this._graphicsDataContextHash[context.uid] || this._initContextRenderData(context);\n    }\n\n    // Context management functions\n    public updateGpuContext(context: GraphicsContext)\n    {\n        let gpuContext: GpuGraphicsContext = this._gpuContextHash[context.uid]\n\n            || this._initContext(context);\n\n        if (context.dirty)\n        {\n            if (gpuContext)\n            {\n                this._cleanGraphicsContextData(context);\n            }\n            else\n            {\n                gpuContext = this._initContext(context);\n            }\n\n            buildContextBatches(context, gpuContext);\n\n            const batchMode = context.batchMode;\n\n            if (context.customShader || batchMode === 'no-batch')\n            {\n                gpuContext.isBatchable = false;\n            }\n            else if (batchMode === 'auto')\n            {\n                gpuContext.isBatchable = (gpuContext.geometryData.vertices.length < 400);\n            }\n\n            context.dirty = false;\n        }\n\n        return gpuContext;\n    }\n\n    public getGpuContext(context: GraphicsContext): GpuGraphicsContext\n    {\n        return this._gpuContextHash[context.uid] || this._initContext(context);\n    }\n\n    private _returnActiveBatchers()\n    {\n        for (let i = 0; i < this._activeBatchers.length; i++)\n        {\n            BigPool.return(this._activeBatchers[i] as PoolItem);\n        }\n\n        this._activeBatchers.length = 0;\n    }\n\n    private _initContextRenderData(context: GraphicsContext): GraphicsContextRenderData\n    {\n        const graphicsData: GraphicsContextRenderData = BigPool.get(GraphicsContextRenderData);// ();\n\n        const { batches, geometryData } = this._gpuContextHash[context.uid];\n\n        const vertexSize = geometryData.vertices.length;\n        const indexSize = geometryData.indices.length;\n\n        for (let i = 0; i < batches.length; i++)\n        {\n            batches[i].applyTransform = false;\n        }\n\n        const batcher = BigPool.get(Batcher);\n\n        this._activeBatchers.push(batcher);\n\n        batcher.ensureAttributeBuffer(vertexSize);\n        batcher.ensureIndexBuffer(indexSize);\n\n        batcher.begin();\n\n        for (let i = 0; i < batches.length; i++)\n        {\n            const batch = batches[i];\n\n            batcher.add(batch);\n        }\n\n        batcher.finish(graphicsData.instructions);\n\n        const geometry = graphicsData.geometry;\n\n        // not to self - this works as we are assigning the batchers array buffer\n        // once its up loaded - this buffer is then put back in the pool to be reused.\n        // this mean we don't have to creating new Batchers for each graphics items\n        geometry.indexBuffer.setDataWithSize(batcher.indexBuffer, batcher.indexSize, true);\n        geometry.buffers[0].setDataWithSize(batcher.attributeBuffer.float32View, batcher.attributeSize, true);\n\n        const drawBatches = batcher.batches;\n\n        for (let i = 0; i < drawBatches.length; i++)\n        {\n            const batch = drawBatches[i];\n\n            batch.bindGroup = getTextureBatchBindGroup(batch.textures.textures, batch.textures.count);\n        }\n\n        this._graphicsDataContextHash[context.uid] = graphicsData;\n\n        return graphicsData;\n    }\n\n    private _initContext(context: GraphicsContext): GpuGraphicsContext\n    {\n        const gpuContext = new GpuGraphicsContext();\n\n        gpuContext.context = context;\n\n        this._gpuContextHash[context.uid] = gpuContext;\n\n        context.on('destroy', this.onGraphicsContextDestroy, this);\n\n        return this._gpuContextHash[context.uid];\n    }\n\n    protected onGraphicsContextDestroy(context: GraphicsContext)\n    {\n        this._cleanGraphicsContextData(context);\n\n        context.off('destroy', this.onGraphicsContextDestroy, this);\n\n        this._gpuContextHash[context.uid] = null;\n    }\n\n    private _cleanGraphicsContextData(context: GraphicsContext)\n    {\n        const gpuContext: GpuGraphicsContext = this._gpuContextHash[context.uid];\n\n        if (!gpuContext.isBatchable)\n        {\n            if (this._graphicsDataContextHash[context.uid])\n            {\n                BigPool.return(this.getContextRenderData(context) as PoolItem);\n\n                // we will rebuild this...\n                this._graphicsDataContextHash[context.uid] = null;\n            }\n        }\n\n        if (gpuContext.batches)\n        {\n            gpuContext.batches.forEach((batch) =>\n            {\n                BigPool.return(batch as PoolItem);\n            });\n        }\n    }\n\n    public destroy()\n    {\n        // Clean up all graphics contexts\n\n        for (const i in this._gpuContextHash)\n        {\n            if (this._gpuContextHash[i])\n            {\n                this.onGraphicsContextDestroy(this._gpuContextHash[i].context);\n            }\n        }\n    }\n}\n","import { Color } from '../../../../color/Color';\nimport { DOMAdapter } from '../../../../environment/adapter';\nimport { Matrix } from '../../../../maths/matrix/Matrix';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport { uid } from '../../../../utils/data/uid';\n\nimport type { ColorSource } from '../../../../color/Color';\n\nexport type GradientType = 'linear' | 'radial';\n\n// export type GradientSource =\n//     string // CSS gradient string: 'linear-gradient(...)'\n//     | IGradientOptions // Gradient options: { x0, y0, x1, y1, ...}\n//     | Gradient; // class Gradient itself\n\nexport interface LinearGradientFillStyle\n{\n    x0: number;\n    y0: number;\n    x1: number;\n    y1: number;\n    colors: number[];\n    stops: number[];\n}\n\nexport class FillGradient implements CanvasGradient\n{\n    public static defaultTextureSize = 256;\n\n    public readonly uid = uid('fillGradient');\n    public readonly type: GradientType = 'linear';\n\n    public x0: number;\n    public y0: number;\n    public x1: number;\n    public y1: number;\n\n    public texture: Texture;\n    public transform: Matrix;\n    public gradientStops: Array<{ offset: number, color: string }> = [];\n\n    private _styleKey: string | null = null;\n\n    constructor(x0: number, y0: number, x1: number, y1: number)\n    {\n        this.x0 = x0;\n        this.y0 = y0;\n\n        this.x1 = x1;\n        this.y1 = y1;\n    }\n\n    public addColorStop(offset: number, color: ColorSource): this\n    {\n        this.gradientStops.push({ offset, color: Color.shared.setValue(color).toHex() });\n        this._styleKey = null;\n\n        return this;\n    }\n\n    // TODO move to the system!\n    public buildLinearGradient(): void\n    {\n        const defaultSize = FillGradient.defaultTextureSize;\n\n        const { gradientStops } = this;\n\n        const canvas = DOMAdapter.get().createCanvas();\n\n        canvas.width = defaultSize;\n        canvas.height = defaultSize;\n\n        const ctx = canvas.getContext('2d');\n\n        const gradient = ctx.createLinearGradient(0, 0, FillGradient.defaultTextureSize, 1);\n\n        for (let i = 0; i < gradientStops.length; i++)\n        {\n            const stop = gradientStops[i];\n\n            gradient.addColorStop(stop.offset, stop.color);\n        }\n\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, defaultSize, defaultSize);\n\n        this.texture = new Texture({\n            source: new ImageSource({\n                resource: canvas,\n                addressModeU: 'clamp-to-edge',\n                addressModeV: 'repeat',\n            }),\n        });\n\n        // generate some UVS based on the gradient direction sent\n\n        const { x0, y0, x1, y1 } = this;\n\n        const m = new Matrix();\n\n        // get angle\n        const dx = x1 - x0;\n        const dy = y1 - y0;\n\n        const dist = Math.sqrt((dx * dx) + (dy * dy));\n\n        const angle = Math.atan2(dy, dx);\n\n        m.translate(-x0, -y0);\n        m.scale(1 / defaultSize, 1 / defaultSize);\n        m.rotate(-angle);\n        m.scale(256 / dist, 1);\n\n        this.transform = m;\n        this._styleKey = null;\n    }\n\n    public get styleKey(): string\n    {\n        if (this._styleKey)\n        {\n            return this._styleKey;\n        }\n\n        const stops = this.gradientStops.map((stop) => `${stop.offset}-${stop.color}`).join('-');\n        const texture = this.texture.uid;\n        const transform = this.transform.toArray().join('-');\n\n        return `fill-gradient-${this.uid}-${stops}-${texture}-${transform}-${this.x0}-${this.y0}-${this.x1}-${this.y1}`;\n    }\n}\n","import { Matrix } from '../../../../maths/matrix/Matrix';\nimport { uid } from '../../../../utils/data/uid';\n\nimport type { WRAP_MODE } from '../../../../rendering/renderers/shared/texture/const';\nimport type { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\n\nexport type PatternRepetition = 'repeat' | 'repeat-x' | 'repeat-y' | 'no-repeat';\n\nconst repetitionMap = {\n    repeat: {\n        addressModeU: 'repeat',\n        addressModeV: 'repeat',\n    },\n    'repeat-x': {\n        addressModeU: 'repeat',\n        addressModeV: 'clamp-to-edge',\n    },\n    'repeat-y': {\n        addressModeU: 'clamp-to-edge',\n        addressModeV: 'repeat',\n    },\n    'no-repeat': {\n        addressModeU: 'clamp-to-edge',\n        addressModeV: 'clamp-to-edge',\n    },\n};\n\nexport class FillPattern implements CanvasPattern\n{\n    public readonly uid = uid('fillPattern');\n    public texture: Texture;\n    public transform = new Matrix();\n\n    private _styleKey: string | null = null;\n\n    constructor(texture: Texture, repetition?: PatternRepetition)\n    {\n        this.texture = texture;\n\n        this.transform.scale(\n            1 / texture.frame.width,\n            1 / texture.frame.height\n        );\n\n        if (repetition)\n        {\n            texture.source.style.addressModeU = repetitionMap[repetition].addressModeU as WRAP_MODE;\n            texture.source.style.addressModeV = repetitionMap[repetition].addressModeV as WRAP_MODE;\n        }\n    }\n\n    public setTransform(transform?: Matrix): void\n    {\n        const texture = this.texture;\n\n        this.transform.copyFrom(transform);\n        this.transform.invert();\n        //  transform.scale\n        this.transform.scale(\n            1 / texture.frame.width,\n            1 / texture.frame.height\n        );\n\n        this._styleKey = null;\n    }\n\n    public get styleKey(): string\n    {\n        if (this._styleKey) return this._styleKey;\n\n        this._styleKey = `fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join('-')}`;\n\n        return this._styleKey;\n    }\n}\n","import { Color } from '../../../../color/Color';\nimport { Matrix } from '../../../../maths/matrix/Matrix';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport { FillGradient } from '../fill/FillGradient';\nimport { FillPattern } from '../fill/FillPattern';\n\nimport type { ColorSource } from '../../../../color/Color';\nimport type {\n    ConvertedFillStyle,\n    ConvertedStrokeStyle,\n    FillInput,\n    FillStyle,\n    StrokeInput,\n} from '../FillTypes';\n\nfunction isColorLike(value: unknown): value is ColorSource\n{\n    return Color.isColorLike(value as ColorSource);\n}\n\nfunction isFillPattern(value: unknown): value is FillPattern\n{\n    return value instanceof FillPattern;\n}\n\nfunction isFillGradient(value: unknown): value is FillGradient\n{\n    return value instanceof FillGradient;\n}\n\n/**\n * Handles the case where the value is a ColorLike\n * @param fill\n * @param value\n * @param defaultStyle\n * @example\n * graphics.fill(0xff0000)\n * graphics.fill(new Color(0xff0000))\n * graphics.fill({ r: 255, g: 0, b: 0 })\n */\nfunction handleColorLike(\n    fill: FillStyle,\n    value: ColorSource,\n    defaultStyle: ConvertedFillStyle\n): ConvertedFillStyle\n{\n    const temp = Color.shared.setValue(value ?? 0);\n\n    fill.color = temp.toNumber();\n    fill.alpha = temp.alpha === 1 ? defaultStyle.alpha : temp.alpha;\n    fill.texture = Texture.WHITE;\n\n    return { ...defaultStyle, ...fill } as ConvertedFillStyle;\n}\n\n/**\n * Handles the case where the value is a FillPattern\n * @param fill\n * @param value\n * @param defaultStyle\n * @example\n * graphics.fill(new FillPattern(0xff0000))\n */\nfunction handleFillPattern(\n    fill: FillStyle,\n    value: FillPattern,\n    defaultStyle: ConvertedFillStyle\n): ConvertedFillStyle\n{\n    fill.fill = value;\n    fill.color = 0xffffff;\n    fill.texture = value.texture;\n    fill.matrix = value.transform;\n\n    return { ...defaultStyle, ...fill } as ConvertedFillStyle;\n}\n\n/**\n * Handles the case where the value is a FillGradient\n * @param fill\n * @param value\n * @param defaultStyle\n * @example\n * graphics.fill(new FillGradient(0, 0, 200, 0))\n */\nfunction handleFillGradient(\n    fill: FillStyle,\n    value: FillGradient,\n    defaultStyle: ConvertedFillStyle\n): ConvertedFillStyle\n{\n    value.buildLinearGradient();\n    fill.fill = value;\n    fill.color = 0xffffff;\n    fill.texture = value.texture;\n    fill.matrix = value.transform;\n\n    return { ...defaultStyle, ...fill } as ConvertedFillStyle;\n}\n\n/**\n * Handles the case where the value is not a direct Pixi Color, PatternFill, or GradientFill but instead\n * an object with potentially `color`\n * @example\n * {\n *   color: new Color(0xff0000)\n *   alpha: 0.5,\n *   texture?: null,\n *   matrix?: null,\n * }\n * @param value\n * @param defaultStyle\n */\nfunction handleFillObject(value: FillStyle, defaultStyle: ConvertedFillStyle): ConvertedFillStyle\n{\n    const style = { ...defaultStyle, ...(value as FillStyle) };\n\n    if (style.texture)\n    {\n        if (style.texture !== Texture.WHITE)\n        {\n            const m = style.matrix?.invert() || new Matrix();\n\n            m.scale(1 / style.texture.frame.width, 1 / style.texture.frame.height);\n\n            style.matrix = m;\n        }\n\n        const sourceStyle = style.texture.source.style;\n\n        if (sourceStyle.addressMode === 'clamp-to-edge')\n        {\n            sourceStyle.addressMode = 'repeat';\n        }\n    }\n\n    const color = Color.shared.setValue(style.color);\n\n    style.alpha *= color.alpha;\n    style.color = color.toNumber();\n    style.matrix = style.matrix ? style.matrix.clone() : null; // todo: lets optimise this!\n\n    return style as ConvertedFillStyle;\n}\n\n/**\n * Converts a value to a fill style, we do this as PixiJS has a number of ways to define a fill style\n * They can be a direct color, a texture, a gradient, or an object with these values in them\n * This function will take any of these input types and convert them into a single object\n * that PixiJS can understand and use internally.\n * @param value - The value to convert to a fill style\n * @param defaultStyle - The default fill style to use\n * @private\n */\nexport function toFillStyle<T extends FillInput>(\n    value: T,\n    defaultStyle: ConvertedFillStyle\n): ConvertedFillStyle\n{\n    if (value === undefined || value === null)\n    {\n        return null;\n    }\n\n    const fill: ConvertedFillStyle = {} as ConvertedFillStyle;\n    const objectStyle = value as FillStyle;\n\n    if (isColorLike(value))\n    {\n        return handleColorLike(fill, value, defaultStyle);\n    }\n    else if (isFillPattern(value))\n    {\n        return handleFillPattern(fill, value, defaultStyle);\n    }\n    else if (isFillGradient(value))\n    {\n        return handleFillGradient(fill, value, defaultStyle);\n    }\n    else if (objectStyle.fill && isFillPattern(objectStyle.fill))\n    {\n        return handleFillPattern(objectStyle, objectStyle.fill, defaultStyle);\n    }\n    else if (objectStyle.fill && isFillGradient(objectStyle.fill))\n    {\n        return handleFillGradient(objectStyle, objectStyle.fill, defaultStyle);\n    }\n\n    return handleFillObject(objectStyle, defaultStyle);\n}\n\n/**\n * Converts a value to a stroke style, similar to `toFillStyle` but for strokes\n * @param value - The value to convert to a stroke style\n * @param defaultStyle - The default stroke style to use\n * @private\n */\nexport function toStrokeStyle(value: StrokeInput, defaultStyle: ConvertedStrokeStyle): ConvertedStrokeStyle\n{\n    const { width, alignment, miterLimit, cap, join, ...rest } = defaultStyle;\n    const fill = toFillStyle(value, rest);\n\n    if (!fill)\n    {\n        return null;\n    }\n\n    return {\n        width,\n        alignment,\n        miterLimit,\n        cap,\n        join,\n        ...fill,\n    };\n}\n","import { ObservablePoint } from '../../maths/point/ObservablePoint';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { updateQuadBounds } from '../../utils/data/updateQuadBounds';\nimport { Container } from '../container/Container';\n\nimport type { Size } from '../../maths/misc/Size';\nimport type { PointData } from '../../maths/point/PointData';\nimport type { TextureSourceLike } from '../../rendering/renderers/shared/texture/Texture';\nimport type { View } from '../../rendering/renderers/shared/view/View';\nimport type { Bounds, BoundsData } from '../container/bounds/Bounds';\nimport type { ContainerOptions } from '../container/Container';\nimport type { Optional } from '../container/container-mixins/measureMixin';\nimport type { DestroyOptions } from '../container/destroyTypes';\n\n/**\n * Options for the {@link scene.Sprite} constructor.\n * @memberof scene\n */\nexport interface SpriteOptions extends ContainerOptions\n{\n    /** The texture to use for the sprite. */\n    texture?: Texture;\n    /** The anchor point of the sprite. */\n    anchor?: PointData | number;\n    /** Whether or not to round the x/y position. */\n    roundPixels?: boolean;\n}\n\n/**\n * The Sprite object is one of the most important objects in PixiJS. It is a\n * drawing item that can be added to a scene and rendered to the screen.\n *\n * A sprite can be created directly from an image like this:\n *\n * ```js\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('assets/image.png');\n * ```\n *\n * The more efficient way to create sprites is using a {@link assets.Spritesheet},\n * as swapping base textures when rendering to the screen is inefficient.\n *\n * ```js\n * import { Assets, Sprite } from 'pixi.js';\n *\n * const sheet = await Assets.load('assets/spritesheet.json');\n * const sprite = new Sprite(sheet.textures['image.png']);\n * ```\n * @memberof scene\n * @extends scene.Container\n */\nexport class Sprite extends Container implements View\n{\n    private _width: number;\n    private _height: number;\n    /**\n     * Helper function that creates a new sprite based on the source you provide.\n     * The source can be - frame id, image, video, canvas element, video element, texture\n     * @param source - Source to create texture from\n     * @param [skipCache] - Whether to skip the cache or not\n     * @returns The newly created sprite\n     */\n    public static from(source: Texture | TextureSourceLike, skipCache = false): Sprite\n    {\n        if (source instanceof Texture)\n        {\n            return new Sprite(source);\n        }\n\n        return new Sprite(Texture.from(source, skipCache));\n    }\n\n    public readonly renderPipeId = 'sprite';\n\n    public batched = true;\n    public readonly _anchor: ObservablePoint;\n\n    // sprite specific..\n    public _texture: Texture;\n    public _didSpriteUpdate = false;\n\n    private readonly _bounds: BoundsData = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    private readonly _sourceBounds: BoundsData = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    private _boundsDirty = true;\n    private _sourceBoundsDirty = true;\n\n    public _roundPixels: 0 | 1 = 0;\n\n    /**\n     * @param options - The options for creating the sprite.\n     */\n    constructor(options: SpriteOptions | Texture = Texture.EMPTY)\n    {\n        if (options instanceof Texture)\n        {\n            options = { texture: options };\n        }\n\n        // split out\n        const { texture = Texture.EMPTY, anchor, roundPixels, width, height, ...rest } = options;\n\n        super({\n            label: 'Sprite',\n            ...rest\n        });\n\n        this._anchor = new ObservablePoint(\n            {\n                _onUpdate: () =>\n                {\n                    this.onViewUpdate();\n                }\n            },\n        );\n\n        if (anchor)\n        {\n            this.anchor = anchor;\n        }\n        else if (texture.defaultAnchor)\n        {\n            this.anchor = texture.defaultAnchor;\n        }\n\n        this.texture = texture;\n\n        this.allowChildren = false;\n        this.roundPixels = roundPixels ?? false;\n\n        // needs to be set after the container has initiated\n        if (width) this.width = width;\n        if (height) this.height = height;\n    }\n\n    set texture(value: Texture)\n    {\n        value ||= Texture.EMPTY;\n\n        const currentTexture = this._texture;\n\n        if (currentTexture === value) return;\n\n        if (currentTexture && currentTexture.dynamic) currentTexture.off('update', this.onViewUpdate, this);\n        if (value.dynamic) value.on('update', this.onViewUpdate, this);\n\n        this._texture = value;\n\n        if (this._width)\n        {\n            this._setWidth(this._width, this._texture.orig.width);\n        }\n\n        if (this._height)\n        {\n            this._setHeight(this._height, this._texture.orig.height);\n        }\n\n        this.onViewUpdate();\n    }\n\n    /** The texture that the sprite is using. */\n    get texture()\n    {\n        return this._texture;\n    }\n\n    /**\n     * The local bounds of the sprite.\n     * @type {rendering.Bounds}\n     */\n    get bounds()\n    {\n        if (this._boundsDirty)\n        {\n            this._updateBounds();\n            this._boundsDirty = false;\n        }\n\n        return this._bounds;\n    }\n\n    /**\n     * The bounds of the sprite, taking the texture's trim into account.\n     * @type {rendering.Bounds}\n     */\n    get sourceBounds()\n    {\n        if (this._sourceBoundsDirty)\n        {\n            this._updateSourceBounds();\n            this._sourceBoundsDirty = false;\n        }\n\n        return this._sourceBounds;\n    }\n\n    /**\n     * Checks if the object contains the given point.\n     * @param point - The point to check\n     */\n    public containsPoint(point: PointData)\n    {\n        const bounds = this.sourceBounds;\n\n        if (point.x >= bounds.maxX && point.x <= bounds.minX)\n        {\n            if (point.y >= bounds.maxY && point.y <= bounds.minY)\n            {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Adds the bounds of this object to the bounds object.\n     * @param bounds - The output bounds object.\n     */\n    public addBounds(bounds: Bounds)\n    {\n        const _bounds = this._texture.trim ? this.sourceBounds : this.bounds;\n\n        bounds.addFrame(_bounds.minX, _bounds.minY, _bounds.maxX, _bounds.maxY);\n    }\n\n    public onViewUpdate()\n    {\n        // increment from the 12th bit!\n        this._didChangeId += 1 << 12;\n        this._didSpriteUpdate = true;\n        this._sourceBoundsDirty = this._boundsDirty = true;\n\n        if (this.didViewUpdate) return;\n        this.didViewUpdate = true;\n\n        const renderGroup = this.renderGroup || this.parentRenderGroup;\n\n        if (renderGroup)\n        {\n            renderGroup.onChildViewUpdate(this);\n        }\n    }\n\n    private _updateBounds()\n    {\n        updateQuadBounds(this._bounds, this._anchor, this._texture, 0);\n    }\n\n    private _updateSourceBounds()\n    {\n        const anchor = this._anchor;\n        const texture = this._texture;\n\n        const sourceBounds = this._sourceBounds;\n\n        const { width, height } = texture.orig;\n\n        sourceBounds.maxX = -anchor._x * width;\n        sourceBounds.minX = sourceBounds.maxX + width;\n\n        sourceBounds.maxY = -anchor._y * height;\n        sourceBounds.minY = sourceBounds.maxY + height;\n    }\n\n    /**\n     * Destroys this sprite renderable and optionally its texture.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @param {boolean} [options.texture=false] - Should it destroy the current texture of the renderable as well\n     * @param {boolean} [options.textureSource=false] - Should it destroy the textureSource of the renderable as well\n     */\n    public destroy(options: DestroyOptions = false)\n    {\n        super.destroy(options);\n\n        const destroyTexture = typeof options === 'boolean' ? options : options?.texture;\n\n        if (destroyTexture)\n        {\n            const destroyTextureSource = typeof options === 'boolean' ? options : options?.textureSource;\n\n            this._texture.destroy(destroyTextureSource);\n        }\n\n        this._texture = null;\n        (this._bounds as null) = null;\n        (this._sourceBounds as null) = null;\n        (this._anchor as null) = null;\n    }\n\n    /**\n     * The anchor sets the origin point of the sprite. The default value is taken from the {@link Texture}\n     * and passed to the constructor.\n     *\n     * The default is `(0,0)`, this means the sprite's origin is the top left.\n     *\n     * Setting the anchor to `(0.5,0.5)` means the sprite's origin is centered.\n     *\n     * Setting the anchor to `(1,1)` would mean the sprite's origin point will be the bottom right corner.\n     *\n     * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.\n     * @example\n     * import { Sprite } from 'pixi.js';\n     *\n     * const sprite = new Sprite({texture: Texture.WHITE});\n     * sprite.anchor.set(0.5); // This will set the origin to center. (0.5) is same as (0.5, 0.5).\n     */\n    get anchor(): ObservablePoint\n    {\n        return this._anchor;\n    }\n\n    set anchor(value: PointData | number)\n    {\n        typeof value === 'number' ? this._anchor.set(value) : this._anchor.copyFrom(value);\n    }\n\n    /**\n     *  Whether or not to round the x/y position of the sprite.\n     * @type {boolean}\n     */\n    get roundPixels()\n    {\n        return !!this._roundPixels;\n    }\n\n    set roundPixels(value: boolean)\n    {\n        this._roundPixels = value ? 1 : 0;\n    }\n\n    /** The width of the sprite, setting this will actually modify the scale to achieve the value set. */\n    override get width(): number\n    {\n        return Math.abs(this.scale.x) * this._texture.orig.width;\n    }\n\n    override set width(value: number)\n    {\n        this._setWidth(value, this._texture.orig.width);\n        this._width = value;\n    }\n\n    /** The height of the sprite, setting this will actually modify the scale to achieve the value set. */\n    override get height(): number\n    {\n        return Math.abs(this.scale.y) * this._texture.orig.height;\n    }\n\n    override set height(value: number)\n    {\n        this._setHeight(value, this._texture.orig.height);\n        this._height = value;\n    }\n\n    /**\n     * Retrieves the size of the Sprite as a [Size]{@link Size} object.\n     * This is faster than get the width and height separately.\n     * @param out - Optional object to store the size in.\n     * @returns - The size of the Sprite.\n     */\n    public override getSize(out?: Size): Size\n    {\n        if (!out)\n        {\n            out = {} as Size;\n        }\n\n        out.width = Math.abs(this.scale.x) * this._texture.orig.width;\n        out.height = Math.abs(this.scale.y) * this._texture.orig.height;\n\n        return out;\n    }\n\n    /**\n     * Sets the size of the Sprite to the specified width and height.\n     * This is faster than setting the width and height separately.\n     * @param value - This can be either a number or a [Size]{@link Size} object.\n     * @param height - The height to set. Defaults to the value of `width` if not provided.\n     */\n    public override setSize(value: number | Optional<Size, 'height'>, height?: number)\n    {\n        let convertedWidth: number;\n        let convertedHeight: number;\n\n        if (typeof value !== 'object')\n        {\n            convertedWidth = value;\n            convertedHeight = height ?? value;\n        }\n        else\n        {\n            convertedWidth = value.width;\n            convertedHeight = value.height ?? value.width;\n        }\n\n        if (convertedWidth !== undefined)\n        {\n            this._setWidth(convertedWidth, this._texture.orig.width);\n        }\n\n        if (convertedHeight !== undefined)\n        {\n            this._setHeight(convertedHeight, this._texture.orig.height);\n        }\n    }\n}\n","import EventEmitter from 'eventemitter3';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\n\nimport type { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport type { FontMetrics } from '../text/canvas/CanvasTextMetrics';\n\n/** @memberof text */\nexport interface CharData\n{\n    /** Unique id of character */\n    id: number;\n    /** x-offset to apply when rendering character */\n    xOffset: number;\n    /** y-offset to apply when rendering character. */\n    yOffset: number;\n    /** Advancement to apply to next character. */\n    xAdvance: number;\n    /** The kerning values for this character. */\n    kerning: Record<string, number>;\n    /** The texture of the character. */\n    texture?: Texture;\n}\n\n/**\n * The raw data of a character in a bitmap font.\n * @memberof text\n */\nexport interface RawCharData extends Omit<CharData, 'texture'>\n{\n    /** The page of the font texture that the character is on. */\n    page: number;\n    /** The x position of the character in the page. */\n    x: number;\n    /** The y position of the character in the page. */\n    y: number;\n    /** The width of the character in the page. */\n    width: number;\n    /** The height of the character in the page. */\n    height: number;\n    /** The letter of the character. */\n    letter: string;\n}\n\n/**\n * The raw data of a bitmap font.\n * @memberof text\n */\nexport interface BitmapFontData\n{\n    /** The offset of the font face from the baseline. */\n    baseLineOffset: number;\n    /** The map of characters by character code. */\n    chars: Record<string, RawCharData>;\n    /** The map of base page textures (i.e., sheets of glyphs). */\n    pages: {\n        /** Unique id for bitmap texture */\n        id: number;\n        /** File name */\n        file: string\n    }[];\n    /** The line-height of the font face in pixels. */\n    lineHeight: number;\n    /** The size of the font face in pixels. */\n    fontSize: number;\n    /** The name of the font face. */\n    fontFamily: string;\n    /** The range and type of the distance field for this font. */\n    distanceField?: {\n        /** Type of distance field */\n        type: 'sdf' | 'msdf' | 'none';\n        /** Range of the distance field in pixels */\n        range: number;\n    };\n}\n\ninterface BitmapFontEvents<Type>\n{\n    destroy: [Type];\n}\n\n/**\n * An abstract representation of a bitmap font.\n * @memberof text\n */\nexport abstract class AbstractBitmapFont<FontType>\n    extends EventEmitter<BitmapFontEvents<FontType>>\n    implements Omit<BitmapFontData, 'chars' | 'pages' | 'fontSize'>\n{\n    /** The map of characters by character code. */\n    public readonly chars: Record<string, CharData> = Object.create(null);\n\n    /**\n     * The line-height of the font face in pixels.\n     * @type {number}\n     */\n    public readonly lineHeight: BitmapFontData['lineHeight'] = 0;\n\n    /**\n     * The name of the font face\n     * @type {string}\n     */\n    public readonly fontFamily: BitmapFontData['fontFamily'] = '';\n    /** The metrics of the font face. */\n    public readonly fontMetrics: FontMetrics = { fontSize: 0, ascent: 0, descent: 0 };\n    /**\n     * The offset of the font face from the baseline.\n     * @type {number}\n     */\n    public readonly baseLineOffset: BitmapFontData['baseLineOffset'] = 0;\n    /** The range and type of the distance field for this font. */\n    public readonly distanceField: BitmapFontData['distanceField'] = { type: 'none', range: 0 };\n    /** The map of base page textures (i.e., sheets of glyphs). */\n    public readonly pages: { texture: Texture }[] = [];\n\n    /** The size of the font face in pixels. */\n    public readonly baseMeasurementFontSize: number = 100;\n    protected baseRenderedFontSize = 100;\n\n    /**\n     * The name of the font face.\n     * @deprecated since 8.0.0 Use `fontFamily` instead.\n     */\n    public get font(): BitmapFontData['fontFamily']\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead.');\n        // #endif\n\n        return this.fontFamily;\n    }\n\n    /**\n     * The map of base page textures (i.e., sheets of glyphs).\n     * @deprecated since 8.0.0 Use `pages` instead.\n     */\n    public get pageTextures(): AbstractBitmapFont<FontType>['pages']\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead.');\n        // #endif\n\n        return this.pages;\n    }\n\n    /**\n     * The size of the font face in pixels.\n     * @deprecated since 8.0.0 Use `fontMetrics.fontSize` instead.\n     */\n    public get size(): BitmapFontData['fontSize']\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead.');\n        // #endif\n\n        return this.fontMetrics.fontSize;\n    }\n\n    /**\n     * The kind of distance field for this font or \"none\".\n     * @deprecated since 8.0.0 Use `distanceField.type` instead.\n     */\n    public get distanceFieldRange(): NonNullable<BitmapFontData['distanceField']>['range']\n    {\n        // #if _DEBUG\n        // eslint-disable-next-line max-len\n        deprecation(v8_0_0, 'BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead.');\n        // #endif\n\n        return this.distanceField.range;\n    }\n\n    /**\n     * The range of the distance field in pixels.\n     * @deprecated since 8.0.0 Use `distanceField.range` instead.\n     */\n    public get distanceFieldType(): NonNullable<BitmapFontData['distanceField']>['type']\n    {\n        // #if _DEBUG\n        // eslint-disable-next-line max-len\n        deprecation(v8_0_0, 'BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead.');\n        // #endif\n\n        return this.distanceField.type;\n    }\n\n    public destroy(destroyTextures = false): void\n    {\n        this.emit('destroy', this as unknown as FontType);\n\n        this.removeAllListeners();\n\n        for (const i in this.chars)\n        {\n            // texture may not exist if the char is \" \", \\n, \\r, or \\t.\n            this.chars[i].texture?.destroy();\n        }\n\n        (this.chars as null) = null;\n\n        if (destroyTextures)\n        {\n            this.pages.forEach((page) => page.texture.destroy(true));\n            (this.pages as any) = null;\n        }\n    }\n}\n","/**\n * Processes the passed character set data and returns a flattened array of all the characters.\n *\n * Ignored because not directly exposed.\n * @ignore\n * @param {string | string[] | string[][] } chars\n * @returns {string[]} the flattened array of characters\n */\n\nexport function resolveCharacters(chars: string | (string | string[])[]): string[]\n{\n    // Skip unexpected 'empty set' check at end\n    if (chars === '')\n    {\n        return [];\n    }\n\n    // Split the chars string into individual characters\n    if (typeof chars === 'string')\n    {\n        chars = [chars];\n    }\n\n    // Handle an array of characters+ranges\n    const result: string[] = [];\n\n    for (let i = 0, j = chars.length; i < j; i++)\n    {\n        const item = chars[i];\n\n        // Handle range delimited by start/end chars\n        if (Array.isArray(item))\n        {\n            if (item.length !== 2)\n            {\n                throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${item.length}.`);\n            }\n            if (item[0].length === 0 || item[1].length === 0)\n            {\n                throw new Error('[BitmapFont]: Invalid character delimiter.');\n            }\n\n            const startCode = item[0].charCodeAt(0);\n            const endCode = item[1].charCodeAt(0);\n\n            if (endCode < startCode)\n            {\n                throw new Error('[BitmapFont]: Invalid character range.');\n            }\n\n            for (let i = startCode, j = endCode; i <= j; i++)\n            {\n                result.push(String.fromCharCode(i));\n            }\n        }\n        else\n        {\n            result.push(...Array.from(item));\n        }\n    }\n\n    if (result.length === 0)\n    {\n        throw new Error('[BitmapFont]: Empty set when resolving characters.');\n    }\n\n    return result;\n}\n","import { Color } from '../../color/Color';\nimport { Rectangle } from '../../maths/shapes/Rectangle';\nimport { CanvasPool } from '../../rendering/renderers/shared/texture/CanvasPool';\nimport { ImageSource } from '../../rendering/renderers/shared/texture/sources/ImageSource';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\nimport { CanvasTextMetrics } from '../text/canvas/CanvasTextMetrics';\nimport { fontStringFromTextStyle } from '../text/canvas/utils/fontStringFromTextStyle';\nimport { getCanvasFillStyle } from '../text/canvas/utils/getCanvasFillStyle';\nimport { AbstractBitmapFont } from './AbstractBitmapFont';\nimport { resolveCharacters } from './utils/resolveCharacters';\n\nimport type { ICanvasRenderingContext2D } from '../../environment/canvas/ICanvasRenderingContext2D';\nimport type { CanvasAndContext } from '../../rendering/renderers/shared/texture/CanvasPool';\nimport type { FontMetrics } from '../text/canvas/CanvasTextMetrics';\nimport type { TextStyle } from '../text/TextStyle';\n\nexport interface DynamicBitmapFontOptions\n{\n    style: TextStyle\n    skipKerning?: boolean\n    resolution?: number\n    padding?: number\n    overrideFill?: boolean\n    overrideSize?: boolean\n}\n\n/**\n * A BitmapFont that generates its glyphs dynamically.\n * @memberof text\n * @ignore\n */\nexport class DynamicBitmapFont extends AbstractBitmapFont<DynamicBitmapFont>\n{\n    /**\n     * this is a resolution modifier for the font size..\n     * texture resolution will also be used to scale texture according to its font size also\n     */\n    public resolution = 1;\n    /** The pages of the font. */\n    public override readonly pages: {canvasAndContext?: CanvasAndContext, texture: Texture}[] = [];\n\n    private readonly _padding: number = 4;\n    private readonly _measureCache: Record<string, number> = Object.create(null);\n    private _currentChars: string[] = [];\n    private _currentX = 0;\n    private _currentY = 0;\n    private _currentPageIndex = -1;\n    private readonly _style: TextStyle;\n    private readonly _skipKerning: boolean = false;\n\n    /**\n     * @param options - The options for the dynamic bitmap font.\n     */\n    constructor(options: DynamicBitmapFontOptions)\n    {\n        super();\n\n        const dynamicOptions = options;\n        const style = dynamicOptions.style.clone();\n\n        if (dynamicOptions.overrideFill)\n        {\n            // assuming no shape fill..\n            style._fill.color = 0xffffff;\n            style._fill.alpha = 1;\n            style._fill.texture = Texture.WHITE;\n            style._fill.fill = null;\n        }\n\n        const requestedFontSize = style.fontSize;\n\n        // adjust font size to match the base measurement size\n        style.fontSize = this.baseMeasurementFontSize;\n\n        const font = fontStringFromTextStyle(style);\n\n        if (dynamicOptions.overrideSize)\n        {\n            if (style._stroke)\n            {\n                // we want the stroke to fit the size of the requested text, so we need to scale it\n                // accordingly (eg font size 20, with stroke 10 - stroke is 50% of size,\n                // as dynamic font is size 100, the stroke should be adjusted to 50 to make it look right)\n                style._stroke.width *= this.baseRenderedFontSize / requestedFontSize;\n            }\n        }\n        else\n        {\n            style.fontSize = this.baseRenderedFontSize = requestedFontSize;\n        }\n\n        this._style = style;\n        this._skipKerning = dynamicOptions.skipKerning ?? false;\n        this.resolution = dynamicOptions.resolution ?? 1;\n        this._padding = dynamicOptions.padding ?? 4;\n\n        (this.fontMetrics as FontMetrics) = CanvasTextMetrics.measureFont(font);\n        (this.lineHeight as number) = style.lineHeight || this.fontMetrics.fontSize || style.fontSize;\n    }\n\n    public ensureCharacters(chars: string): void\n    {\n        const charList = resolveCharacters(chars)\n            .filter((char) => !this._currentChars.includes(char))\n            .filter((char, index, self) => self.indexOf(char) === index);\n        // filter returns..\n\n        if (!charList.length) return;\n\n        this._currentChars = [...this._currentChars, ...charList];\n\n        let pageData;\n\n        if (this._currentPageIndex === -1)\n        {\n            pageData = this._nextPage();\n        }\n        else\n        {\n            pageData = this.pages[this._currentPageIndex];\n        }\n\n        let { canvas, context } = pageData.canvasAndContext;\n        let textureSource = pageData.texture.source;\n\n        const style = this._style;\n\n        let currentX = this._currentX;\n        let currentY = this._currentY;\n\n        const fontScale = this.baseRenderedFontSize / this.baseMeasurementFontSize;\n        const padding = this._padding * fontScale;\n\n        const widthScale = style.fontStyle === 'italic' ? 2 : 1;\n        let maxCharHeight = 0;\n        let skipTexture = false;\n\n        for (let i = 0; i < charList.length; i++)\n        {\n            const char = charList[i];\n\n            const metrics = CanvasTextMetrics.measureText(char, style, canvas, false);\n\n            // override the line height.. we want this to be the glyps heigh\n            // not the user specified one.\n            metrics.lineHeight = metrics.height;\n\n            const width = (widthScale * metrics.width) * fontScale;\n            const height = (metrics.height) * fontScale;\n\n            const paddedWidth = width + (padding * 2);\n            const paddedHeight = height + (padding * 2);\n\n            skipTexture = false;\n            // don't let empty characters count towards the maxCharHeight\n            if (char !== '\\n' && char !== '\\r' && char !== '\\t' && char !== ' ')\n            {\n                skipTexture = true;\n                maxCharHeight = Math.ceil(Math.max(paddedHeight, maxCharHeight));// / 1.5;\n            }\n\n            if (currentX + paddedWidth > 512)\n            {\n                currentY += maxCharHeight;\n\n                // reset the line x and height..\n                maxCharHeight = paddedHeight;\n                currentX = 0;\n\n                if (currentY + maxCharHeight > 512)\n                {\n                    textureSource.update();\n\n                    const pageData = this._nextPage();\n\n                    canvas = pageData.canvasAndContext.canvas;\n                    context = pageData.canvasAndContext.context;\n                    textureSource = pageData.texture.source;\n\n                    currentY = 0;\n                }\n            }\n\n            const xAdvance = (width / fontScale)\n                - (style.dropShadow?.distance ?? 0)\n                - (style._stroke?.width ?? 0);\n\n            // This is in coord space of the measurements.. not the texture\n            this.chars[char] = {\n                id: char.codePointAt(0),\n                xOffset: -this._padding,\n                yOffset: -this._padding,\n                xAdvance,\n                kerning: {},\n            };\n\n            if (skipTexture)\n            {\n                this._drawGlyph(\n                    context,\n                    metrics,\n                    currentX + padding,\n                    currentY + padding,\n                    fontScale,\n                    style,\n                );\n\n                const px = textureSource.width * fontScale;\n                const py = textureSource.height * fontScale;\n\n                const frame = new Rectangle(\n                    ((currentX) / px) * textureSource.width,\n                    ((currentY) / py) * textureSource.height,\n                    ((paddedWidth) / px) * textureSource.width,\n                    ((paddedHeight) / py) * textureSource.height,\n                );\n\n                this.chars[char].texture = new Texture({\n                    source: textureSource,\n                    frame,\n                });\n\n                currentX += Math.ceil(paddedWidth);\n            }\n\n            // now add it to the font data..\n        }\n\n        textureSource.update();\n\n        this._currentX = currentX;\n        this._currentY = currentY;\n\n        // now apply kerning..\n        this._skipKerning && this._applyKerning(charList, context);\n    }\n\n    /**\n     * @deprecated since 8.0.0\n     * The map of base page textures (i.e., sheets of glyphs).\n     */\n    public override get pageTextures(): DynamicBitmapFont['pages']\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead.');\n        // #endif\n\n        return this.pages;\n    }\n\n    private _applyKerning(newChars: string[], context: ICanvasRenderingContext2D): void\n    {\n        const measureCache = this._measureCache;\n\n        for (let i = 0; i < newChars.length; i++)\n        {\n            const first = newChars[i];\n\n            for (let j = 0; j < this._currentChars.length; j++)\n            {\n                // first go through new char being first\n                const second = this._currentChars[j];\n\n                let c1 = measureCache[first];\n\n                if (!c1) c1 = measureCache[first] = context.measureText(first).width;\n\n                let c2 = measureCache[second];\n\n                if (!c2) c2 = measureCache[second] = context.measureText(second).width;\n\n                let total = context.measureText(first + second).width;\n                let amount = total - (c1 + c2);\n\n                if (amount)\n                {\n                    this.chars[first].kerning[second] = amount;\n                }\n\n                // then go through new char being second\n                total = context.measureText(first + second).width;\n                amount = total - (c1 + c2);\n\n                if (amount)\n                {\n                    this.chars[second].kerning[first] = amount;\n                }\n            }\n        }\n    }\n\n    private _nextPage(): {canvasAndContext: CanvasAndContext, texture: Texture}\n    {\n        this._currentPageIndex++;\n\n        const textureResolution = this.resolution;\n        const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(512, 512, textureResolution);\n\n        this._setupContext(canvasAndContext.context, this._style, textureResolution);\n\n        const resolution = textureResolution * (this.baseRenderedFontSize / this.baseMeasurementFontSize);\n        const texture = new Texture({\n            source: new ImageSource({\n                resource: canvasAndContext.canvas,\n                resolution,\n                alphaMode: 'premultiply-alpha-on-upload'\n            }),\n\n        });\n\n        const pageData = {\n            canvasAndContext,\n            texture,\n        };\n\n        this.pages[this._currentPageIndex] = pageData;\n\n        return pageData;\n    }\n\n    // canvas style!\n    private _setupContext(context: ICanvasRenderingContext2D, style: TextStyle, resolution: number): void\n    {\n        style.fontSize = this.baseRenderedFontSize;\n        context.scale(resolution, resolution);\n        context.font = fontStringFromTextStyle(style);\n        style.fontSize = this.baseMeasurementFontSize;\n        context.textBaseline = style.textBaseline;\n\n        const stroke = style._stroke;\n        const strokeThickness = stroke?.width ?? 0;\n\n        if (stroke)\n        {\n            context.lineWidth = strokeThickness;\n            context.lineJoin = stroke.join;\n            context.miterLimit = stroke.miterLimit;\n\n            // TODO prolly cache this??\n            context.strokeStyle = getCanvasFillStyle(stroke, context);\n        }\n\n        if (style._fill)\n        {\n            // set canvas text styles\n            context.fillStyle = getCanvasFillStyle(style._fill, context);\n        }\n\n        if (style.dropShadow)\n        {\n            const shadowOptions = style.dropShadow;\n            const rgb = Color.shared.setValue(shadowOptions.color).toArray();\n\n            const dropShadowBlur = shadowOptions.blur * resolution;\n            const dropShadowDistance = shadowOptions.distance * resolution;\n\n            context.shadowColor = `rgba(${rgb[0] * 255},${rgb[1] * 255},${rgb[2] * 255},${shadowOptions.alpha})`;\n            context.shadowBlur = dropShadowBlur;\n            context.shadowOffsetX = Math.cos(shadowOptions.angle) * dropShadowDistance;\n            context.shadowOffsetY = Math.sin(shadowOptions.angle) * dropShadowDistance;\n        }\n        else\n        {\n            context.shadowColor = 'black';\n            context.shadowBlur = 0;\n            context.shadowOffsetX = 0;\n            context.shadowOffsetY = 0;\n        }\n    }\n\n    private _drawGlyph(\n        context: ICanvasRenderingContext2D,\n        metrics: CanvasTextMetrics,\n        x: number,\n        y: number,\n        fontScale: number,\n        style: TextStyle\n    ): void\n    {\n        const char = metrics.text;\n        const fontProperties = metrics.fontProperties;\n        const stroke = style._stroke;\n\n        const strokeThickness = (stroke?.width ?? 0) * fontScale;\n\n        const tx = x + (strokeThickness / 2);\n        const ty = y - (strokeThickness / 2);\n\n        const descent = fontProperties.descent * fontScale;\n        const lineHeight = metrics.lineHeight * fontScale;\n\n        if (style.stroke && strokeThickness)\n        {\n            context.strokeText(char, tx, ty + lineHeight - descent);\n        }\n\n        if (style._fill)\n        {\n            context.fillText(char, tx, ty + lineHeight - descent);\n        }\n    }\n\n    public override destroy(): void\n    {\n        super.destroy();\n\n        for (let i = 0; i < this.pages.length; i++)\n        {\n            const { canvasAndContext, texture } = this.pages[i];\n\n            CanvasPool.returnCanvasAndContext(canvasAndContext);\n            texture.destroy(true);\n        }\n\n        (this.pages as null) = null;\n    }\n}\n","import { Cache } from '../../assets/cache/Cache';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\nimport { TextStyle } from '../text/TextStyle';\nimport { DynamicBitmapFont } from './DynamicBitmapFont';\nimport { getBitmapTextLayout } from './utils/getBitmapTextLayout';\nimport { resolveCharacters } from './utils/resolveCharacters';\n\nimport type { TextStyleOptions } from '../text/TextStyle';\nimport type { BitmapFont } from './BitmapFont';\nimport type { BitmapTextLayoutData } from './utils/getBitmapTextLayout';\n\n/**\n *\n * The options for installing a new BitmapFont. Once installed the font will be available for use in the BitmapText.\n * It can be accessed by the `fontFamily` property of the TextStyle.\n *\n * Install a new BitmapFont will create the characters provided for the font and store them in the cache.\n * But don't worry, if a character is requested that hasn't been generated yet, it will be created on the fly.\n * @memberof text\n */\nexport interface BitmapFontInstallOptions\n{\n    /** the name of the font, this will be the name you use in the fontFamily of text style to access this font */\n    name?: string;\n    /**\n     * Characters included in the font set. You can also use ranges.\n     * For example, `[['a', 'z'], ['A', 'Z'], \"!@#$%^&*()~{}[] \"]`.\n     * Don't forget to include spaces ' ' in your character set!\n     * @default BitmapFont.ALPHANUMERIC\n     */\n    chars?: string | (string | string[])[];\n    /**\n     * Render resolution for glyphs.\n     * @default 1\n     */\n    resolution?: number;\n    /**\n     * Padding between glyphs on texture atlas. Lower values could mean more visual artifacts\n     * and bleeding from other glyphs, larger values increase the space required on the texture.\n     * @default 4\n     */\n    padding?: number;\n    /**\n     * Skip generation of kerning information for the BitmapFont.\n     * If true, this could potentially increase the performance, but may impact the rendered text appearance.\n     * @default false\n     */\n    skipKerning?: boolean;\n    /** Style options to render with BitmapFont. */\n    style?: TextStyle | TextStyleOptions;\n}\n\n/**\n * The BitmapFontManager is a helper that exists to install and uninstall fonts\n * into the cache for BitmapText objects.\n * @memberof text\n * @name BitmapFontManager\n * @example\n * import { BitmapFontManager, BitmapText } from 'pixi.js';\n *\n * BitmapFontManager.install({\n *   name: 'TitleFont',\n *   style: {}\n * });\n *\n * const title = new BitmapText({ text: 'This is the title', style: { fontFamily: 'TitleFont' }});\n */\nclass BitmapFontManagerClass\n{\n    /**\n     * This character set includes all the letters in the alphabet (both lower- and upper- case).\n     * @type {string[][]}\n     * @example\n     * BitmapFont.from('ExampleFont', style, { chars: BitmapFont.ALPHA })\n     */\n    public readonly ALPHA = [['a', 'z'], ['A', 'Z'], ' '];\n\n    /**\n     * This character set includes all decimal digits (from 0 to 9).\n     * @type {string[][]}\n     * @example\n     * BitmapFont.from('ExampleFont', style, { chars: BitmapFont.NUMERIC })\n     */\n    public readonly NUMERIC = [['0', '9']];\n\n    /**\n     * This character set is the union of `BitmapFont.ALPHA` and `BitmapFont.NUMERIC`.\n     * @type {string[][]}\n     */\n    public readonly ALPHANUMERIC = [['a', 'z'], ['A', 'Z'], ['0', '9'], ' '];\n\n    /**\n     * This character set consists of all the ASCII table.\n     * @member {string[][]}\n     * @see http://www.asciitable.com/\n     */\n    public readonly ASCII = [[' ', '~']];\n\n    /** Default options for installing a new BitmapFont. */\n    public defaultOptions: Omit<BitmapFontInstallOptions, 'style'> = {\n        chars: this.ALPHANUMERIC,\n        resolution: 1,\n        padding: 4,\n        skipKerning: false,\n    };\n\n    /**\n     * Get a font for the specified text and style.\n     * @param text - The text to get the font for\n     * @param style - The style to use\n     */\n    public getFont(text: string, style: TextStyle): BitmapFont\n    {\n        let fontFamilyKey = `${style.fontFamily as string}-bitmap`;\n        let overrideFill = true;\n\n        // assuming there is no texture we can use a tint!\n        if (style._fill.fill)\n        {\n            fontFamilyKey += style._fill.fill.uid;\n            overrideFill = false;\n        }\n\n        // first get us the the right font...\n        if (!Cache.has(fontFamilyKey))\n        {\n            const fnt = new DynamicBitmapFont({\n                style,\n                overrideFill,\n                overrideSize: true,\n                ...this.defaultOptions,\n            });\n\n            fnt.once('destroy', () => Cache.remove(fontFamilyKey));\n\n            Cache.set(\n                fontFamilyKey as string,\n                fnt\n            );\n        }\n\n        const dynamicFont = Cache.get(fontFamilyKey);\n\n        (dynamicFont as DynamicBitmapFont).ensureCharacters?.(text);\n\n        return dynamicFont;\n    }\n\n    /**\n     * Get the layout of a text for the specified style.\n     * @param text - The text to get the layout for\n     * @param style - The style to use\n     */\n    public getLayout(text: string, style: TextStyle): BitmapTextLayoutData\n    {\n        const bitmapFont = this.getFont(text, style);\n\n        return getBitmapTextLayout([...text], style, bitmapFont);\n    }\n\n    /**\n     * Measure the text using the specified style.\n     * @param text - The text to measure\n     * @param style - The style to use\n     */\n    public measureText(text: string, style: TextStyle): { width: number; height: number; scale: number; offsetY: number }\n    {\n        return this.getLayout(text, style);\n    }\n\n    /**\n     * Generates a bitmap-font for the given style and character set\n     * @param options - Setup options for font generation.\n     * @returns Font generated by style options.\n     * @example\n     * import { BitmapFontManager, BitmapText } from 'pixi.js';\n     *\n     * BitmapFontManager.install('TitleFont', {\n     *     fontFamily: 'Arial',\n     *     fontSize: 12,\n     *     strokeThickness: 2,\n     *     fill: 'purple',\n     * });\n     *\n     * const title = new BitmapText({ text: 'This is the title', fontFamily: 'TitleFont' });\n     */\n    public install(options: BitmapFontInstallOptions): BitmapFont;\n    /** @deprecated since 7.0.0 */\n    public install(name: string, style?: TextStyle | TextStyleOptions, options?: BitmapFontInstallOptions): BitmapFont;\n    // eslint-disable-next-line max-len\n    public install(...args: [string | BitmapFontInstallOptions, (TextStyle | TextStyleOptions)?, BitmapFontInstallOptions?]): BitmapFont\n    {\n        let options = args[0] as BitmapFontInstallOptions;\n\n        if (typeof options === 'string')\n        {\n            options = {\n                name: options,\n                style: args[1],\n                chars: args[2]?.chars,\n                resolution: args[2]?.resolution,\n                padding: args[2]?.padding,\n                skipKerning: args[2]?.skipKerning,\n            } as BitmapFontInstallOptions;\n\n            // #if _DEBUG\n            // eslint-disable-next-line max-len\n            deprecation(v8_0_0, 'BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})');\n            // #endif\n        }\n\n        const name = options?.name;\n\n        if (!name)\n        {\n            throw new Error('[BitmapFontManager] Property `name` is required.');\n        }\n\n        options = { ...this.defaultOptions, ...options };\n\n        const textStyle = options.style;\n\n        const style = textStyle instanceof TextStyle ? textStyle : new TextStyle(textStyle);\n        const overrideFill = style._fill.fill !== null && style._fill.fill !== undefined;\n        const font = new DynamicBitmapFont({\n            style,\n            overrideFill,\n            skipKerning: options.skipKerning,\n            padding: options.padding,\n            resolution: options.resolution,\n            overrideSize: false\n        });\n\n        const flatChars = resolveCharacters(options.chars);\n\n        font.ensureCharacters(flatChars.join(''));\n\n        Cache.set(`${name}-bitmap`, font);\n\n        font.once('destroy', () => Cache.remove(`${name}-bitmap`));\n\n        return font;\n    }\n\n    /**\n     * Uninstalls a bitmap font from the cache.\n     * @param {string} name - The name of the bitmap font to uninstall.\n     */\n    public uninstall(name: string)\n    {\n        const cacheKey = `${name}-bitmap`;\n        const font = Cache.get<BitmapFont>(cacheKey);\n\n        if (font)\n        {\n            Cache.remove(cacheKey);\n            font.destroy();\n        }\n    }\n}\n\nexport const BitmapFontManager = new BitmapFontManagerClass();\n","import type { TextStyle } from '../../text/TextStyle';\nimport type { AbstractBitmapFont } from '../AbstractBitmapFont';\n\nexport interface BitmapTextLayoutData\n{\n    width: number;\n    height: number;\n    scale: number;\n    offsetY: number;\n    lines: {\n        width: number\n        charPositions: number[],\n        chars: string[],\n        // / spaces: number\n        spaceWidth: number\n        spacesIndex: number[]\n    }[];\n}\n\nexport function getBitmapTextLayout(chars: string[], style: TextStyle, font: AbstractBitmapFont<any>): BitmapTextLayoutData\n{\n    const layoutData: BitmapTextLayoutData = {\n        width: 0,\n        height: 0,\n        offsetY: 0,\n        scale: style.fontSize / font.baseMeasurementFontSize,\n        lines: [{\n            width: 0,\n            charPositions: [] as number[],\n            spaceWidth: 0,\n            spacesIndex: [],\n            chars: [],\n        }]\n    };\n\n    layoutData.offsetY = font.baseLineOffset;\n\n    let currentLine = layoutData.lines[0];\n\n    let previousChar: string = null;\n    let firstWord = true;\n    //    let spaceCount = 0;\n\n    const currentWord = {\n        spaceWord: false,\n        width: 0,\n        start: 0,\n        index: 0, // use index to not modify the array as we use it a lot!\n        positions: [] as number[],\n        chars: [] as string[],\n    };\n\n    const nextWord = (word: typeof currentWord) =>\n    {\n        const start = currentLine.width;\n\n        for (let j = 0; j < currentWord.index; j++)\n        {\n            const position = word.positions[j];\n\n            currentLine.chars.push(word.chars[j]);\n            currentLine.charPositions.push(position + start);\n        }\n\n        currentLine.width += word.width;\n\n        firstWord = false;\n\n        // reset the word..\n        currentWord.width = 0;\n        currentWord.index = 0;\n        currentWord.chars.length = 0;\n\n        // spaceCount = 0;\n    };\n\n    const nextLine = () =>\n    {\n        let index = currentLine.chars.length - 1;\n        let lastChar = currentLine.chars[index];\n\n        while (lastChar === ' ')\n        {\n            currentLine.width -= font.chars[lastChar].xAdvance;\n            lastChar = currentLine.chars[--index];\n        }\n\n        layoutData.width = Math.max(layoutData.width, currentLine.width);\n\n        currentLine = {\n            width: 0,\n            charPositions: [],\n            chars: [],\n            spaceWidth: 0,\n            spacesIndex: [],\n        };\n\n        firstWord = true;\n        layoutData.lines.push(currentLine);\n        layoutData.height += font.lineHeight;\n    };\n\n    const scale = font.baseMeasurementFontSize / style.fontSize;\n\n    const adjustedLetterSpacing = style.letterSpacing * scale;\n    const adjustedWordWrapWidth = style.wordWrapWidth * scale;\n\n    // loop an extra time to force a line break..\n    for (let i = 0; i < chars.length + 1; i++)\n    {\n        let char: string;\n\n        const isEnd = i === chars.length;\n\n        if (!isEnd)\n        {\n            char = chars[i];\n        }\n\n        const charData = font.chars[char] || font.chars[' '];\n\n        const isSpace = (/(?:\\s)/).test(char);\n        const isWordBreak = isSpace || char === '\\r' || char === '\\n' || isEnd;\n\n        // spaceCount++;\n        // wasSpace = isSpace;\n\n        if (isWordBreak)\n        {\n            const addWordToNextLine = !firstWord\n                && style.wordWrap\n                && (currentLine.width + currentWord.width - adjustedLetterSpacing) > adjustedWordWrapWidth;\n\n            if (addWordToNextLine)\n            {\n                nextLine();\n\n                nextWord(currentWord);\n\n                if (!isEnd)\n                {\n                    currentLine.charPositions.push(0);\n                }\n            }\n            else\n            {\n                currentWord.start = currentLine.width;\n\n                nextWord(currentWord);\n\n                if (!isEnd)\n                {\n                    currentLine.charPositions.push(0);\n                }\n            }\n\n            if (char === '\\r' || char === '\\n')\n            {\n                if (currentLine.width !== 0)\n                {\n                    nextLine();\n                }\n            }\n            else if (!isEnd)\n            {\n                const spaceWidth = charData.xAdvance + (charData.kerning[previousChar] || 0) + adjustedLetterSpacing;\n\n                currentLine.width += spaceWidth;\n\n                currentLine.spaceWidth = spaceWidth;\n                currentLine.spacesIndex.push(currentLine.charPositions.length);\n                currentLine.chars.push(char);\n\n                // spaceCount++;\n            }\n        }\n        else\n        {\n            const kerning = charData.kerning[previousChar] || 0;\n\n            const nextCharWidth = charData.xAdvance + kerning + adjustedLetterSpacing;\n\n            currentWord.positions[currentWord.index++] = currentWord.width + kerning;\n            currentWord.chars.push(char);\n\n            currentWord.width += nextCharWidth;\n        }\n\n        previousChar = char;\n        // lastChar = char;\n    }\n\n    nextLine();\n\n    if (style.align === 'center')\n    {\n        alignCenter(layoutData);\n    }\n    else if (style.align === 'right')\n    {\n        alignRight(layoutData);\n    }\n    else if (style.align === 'justify')\n    {\n        alignJustify(layoutData);\n    }\n\n    return layoutData;\n}\n\nfunction alignCenter(measurementData: BitmapTextLayoutData)\n{\n    for (let i = 0; i < measurementData.lines.length; i++)\n    {\n        const line = measurementData.lines[i];\n        const offset = ((measurementData.width / 2) - (line.width / 2));\n\n        for (let j = 0; j < line.charPositions.length; j++)\n        {\n            line.charPositions[j] += offset;\n        }\n    }\n}\n\nfunction alignRight(measurementData: BitmapTextLayoutData)\n{\n    for (let i = 0; i < measurementData.lines.length; i++)\n    {\n        const line = measurementData.lines[i];\n        const offset = ((measurementData.width) - (line.width));\n\n        for (let j = 0; j < line.charPositions.length; j++)\n        {\n            line.charPositions[j] += offset;\n        }\n    }\n}\n\nfunction alignJustify(measurementData: BitmapTextLayoutData)\n{\n    const width = measurementData.width;\n\n    for (let i = 0; i < measurementData.lines.length; i++)\n    {\n        const line = measurementData.lines[i];\n\n        let indy = 0;\n        let spaceIndex = line.spacesIndex[indy++];\n\n        let offset = 0;\n\n        const totalSpaces = line.spacesIndex.length;\n\n        const newSpaceWidth = (width - line.width) / totalSpaces;\n\n        const spaceWidth = newSpaceWidth;\n\n        for (let j = 0; j < line.charPositions.length; j++)\n        {\n            if (j === spaceIndex)\n            {\n                spaceIndex = line.spacesIndex[indy++];\n\n                offset += spaceWidth;\n            }\n\n            line.charPositions[j] += offset;\n        }\n    }\n}\n","import EventEmitter from 'eventemitter3';\nimport { Color, type ColorSource } from '../../color/Color';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\nimport { FillGradient } from '../graphics/shared/fill/FillGradient';\nimport { FillPattern } from '../graphics/shared/fill/FillPattern';\nimport { GraphicsContext } from '../graphics/shared/GraphicsContext';\nimport {\n    toFillStyle,\n    toStrokeStyle\n} from '../graphics/shared/utils/convertFillInputToFillStyle';\nimport { generateTextStyleKey } from './utils/generateTextStyleKey';\n\nimport type { TextureDestroyOptions, TypeOrBool } from '../container/destroyTypes';\nimport type {\n    ConvertedFillStyle,\n    ConvertedStrokeStyle,\n    FillInput,\n    FillStyle,\n    StrokeInput,\n    StrokeStyle\n} from '../graphics/shared/FillTypes';\n\nexport type TextStyleAlign = 'left' | 'center' | 'right' | 'justify';\nexport type TextStyleFill = string | string[] | number | number[] | CanvasGradient | CanvasPattern;\nexport type TextStyleFontStyle = 'normal' | 'italic' | 'oblique';\nexport type TextStyleFontVariant = 'normal' | 'small-caps';\n// eslint-disable-next-line max-len\nexport type TextStyleFontWeight = 'normal' | 'bold' | 'bolder' | 'lighter' | '100' | '200' | '300' | '400' | '500' | '600' | '700' | '800' | '900';\nexport type TextStyleLineJoin = 'miter' | 'round' | 'bevel';\nexport type TextStyleTextBaseline = 'alphabetic' | 'top' | 'hanging' | 'middle' | 'ideographic' | 'bottom';\nexport type TextStyleWhiteSpace = 'normal' | 'pre' | 'pre-line';\n\n/**\n * A collection of text related classes.\n * @namespace text\n */\n\n/**\n * A drop shadow effect.\n * @memberof text\n */\nexport type TextDropShadow = {\n    /** Set alpha for the drop shadow  */\n    alpha: number;\n    /** Set a angle of the drop shadow */\n    angle: number;\n    /** Set a shadow blur radius */\n    blur: number;\n    /** A fill style to be used on the  e.g., 'red', '#00FF00' */\n    color: ColorSource;\n    /** Set a distance of the drop shadow */\n    distance: number;\n};\n\n/**\n * Constructor options used for `TextStyle` instances.\n * ```js\n * const textStyle = new TextStyle({\n *    fontSize: 12,\n *    fill: 'black',\n * });\n * ```\n * @see {@link text.TextStyle}\n * @memberof text\n */\nexport interface TextStyleOptions\n{\n    /**\n     * Alignment for multiline text, does not affect single line text\n     * @type {'left'|'center'|'right'|'justify'}\n     */\n    align?: TextStyleAlign;\n    /** Indicates if lines can be wrapped within words, it needs `wordWrap` to be set to `true` */\n    breakWords?: boolean;\n    /** Set a drop shadow for the text */\n    dropShadow?: boolean | Partial<TextDropShadow>;\n    /**\n     * A canvas fillstyle that will be used on the text e.g., 'red', '#00FF00'.\n     * Can be an array to create a gradient, e.g., `['#000000','#FFFFFF']`\n     * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fillStyle|MDN}\n     * @type {string|string[]|number|number[]|CanvasGradient|CanvasPattern}\n     */\n    fill?: FillInput;\n    /** The font family, can be a single font name, or a list of names where the first is the preferred font. */\n    fontFamily?: string | string[];\n    /** The font size (as a number it converts to px, but as a string, equivalents are '26px','20pt','160%' or '1.6em') */\n    fontSize?: number | string;\n    /**\n     * The font style.\n     * @type {'normal'|'italic'|'oblique'}\n     */\n    fontStyle?: TextStyleFontStyle;\n    /**\n     * The font variant.\n     * @type {'normal'|'small-caps'}\n     */\n    fontVariant?: TextStyleFontVariant;\n    /**\n     * The font weight.\n     * @type {'normal'|'bold'|'bolder'|'lighter'|'100'|'200'|'300'|'400'|'500'|'600'|'700'|'800'|'900'}\n     */\n    fontWeight?: TextStyleFontWeight;\n    /** The height of the line, a number that represents the vertical space that a letter uses. */\n    leading?: number;\n    /** The amount of spacing between letters, default is 0 */\n    letterSpacing?: number;\n    /** The line height, a number that represents the vertical space that a letter uses */\n    lineHeight?: number;\n    /**\n     * Occasionally some fonts are cropped. Adding some padding will prevent this from\n     * happening by adding padding to all sides of the text.\n     */\n    padding?: number;\n    /** A canvas fillstyle that will be used on the text stroke, e.g., 'blue', '#FCFF00' */\n    stroke?: StrokeInput;\n    /**\n     * The baseline of the text that is rendered.\n     * @type {'alphabetic'|'top'|'hanging'|'middle'|'ideographic'|'bottom'}\n     */\n    textBaseline?: TextStyleTextBaseline;\n    trim?: boolean,\n    /**\n     * Determines whether newlines & spaces are collapsed or preserved \"normal\"\n     * (collapse, collapse), \"pre\" (preserve, preserve) | \"pre-line\" (preserve,\n     * collapse). It needs wordWrap to be set to true.\n     * @type {'normal'|'pre'|'pre-line'}\n     */\n    whiteSpace?: TextStyleWhiteSpace;\n    /** Indicates if word wrap should be used */\n    wordWrap?: boolean;\n    /** The width at which text will wrap, it needs wordWrap to be set to true */\n    wordWrapWidth?: number;\n}\n\n/**\n * A TextStyle Object contains information to decorate a Text objects.\n *\n * An instance can be shared between multiple Text objects; then changing the style will update all text objects using it.\n * @memberof text\n * @example\n * import { TextStyle } from 'pixi.js';\n * const style = new TextStyle({\n *   fontFamily: ['Helvetica', 'Arial', 'sans-serif'],\n *   fontSize: 36,\n * });\n */\nexport class TextStyle extends EventEmitter<{\n    update: TextDropShadow\n}>\n{\n    /** The default drop shadow settings */\n    public static defaultDropShadow: TextDropShadow = {\n        /** Set alpha for the drop shadow */\n        alpha: 1,\n        /** Set a angle of the drop shadow */\n        angle: Math.PI / 6,\n        /** Set a shadow blur radius */\n        blur: 0,\n        /** A fill style to be used on the  e.g., 'red', '#00FF00' */\n        color: 'black',\n        /** Set a distance of the drop shadow */\n        distance: 5,\n    };\n\n    /** The default text style settings */\n    public static defaultTextStyle: TextStyleOptions = {\n        /**\n         * See {@link TextStyle.align}\n         * @type {'left'|'center'|'right'|'justify'}\n         */\n        align: 'left',\n        /** See {@link TextStyle.breakWords} */\n        breakWords: false,\n        /** See {@link TextStyle.dropShadow} */\n        dropShadow:  null,\n        /**\n         * See {@link TextStyle.fill}\n         * @type {string|string[]|number|number[]|CanvasGradient|CanvasPattern}\n         */\n        fill: 'black',\n        /**\n         * See {@link TextStyle.fontFamily}\n         * @type {string|string[]}\n         */\n        fontFamily: 'Arial',\n        /**\n         * See {@link TextStyle.fontSize}\n         * @type {number|string}\n         */\n        fontSize: 26,\n        /**\n         * See {@link TextStyle.fontStyle}\n         * @type {'normal'|'italic'|'oblique'}\n         */\n        fontStyle: 'normal',\n        /**\n         * See {@link TextStyle.fontVariant}\n         * @type {'normal'|'small-caps'}\n         */\n        fontVariant: 'normal',\n        /**\n         * See {@link TextStyle.fontWeight}\n         * @type {'normal'|'bold'|'bolder'|'lighter'|'100'|'200'|'300'|'400'|'500'|'600'|'700'|'800'|'900'}\n         */\n        fontWeight: 'normal',\n        /** See {@link TextStyle.leading} */\n        leading: 0,\n        /** See {@link TextStyle.letterSpacing} */\n        letterSpacing: 0,\n        /** See {@link TextStyle.lineHeight} */\n        lineHeight: 0,\n        /** See {@link TextStyle.padding} */\n        padding: 0,\n        /**\n         * See {@link TextStyle.stroke}\n         * @type {string|number}\n         */\n        stroke: null,\n        /**\n         * See {@link TextStyle.textBaseline}\n         * @type {'alphabetic'|'top'|'hanging'|'middle'|'ideographic'|'bottom'}\n         */\n        textBaseline: 'alphabetic',\n        /** See {@link TextStyle.trim} */\n        trim: false,\n        /**\n         * See {@link TextStyle.whiteSpace}\n         * @type {'normal'|'pre'|'pre-line'}\n         */\n        whiteSpace: 'pre',\n        /** See {@link TextStyle.wordWrap} */\n        wordWrap: false,\n        /** See {@link TextStyle.wordWrapWidth} */\n        wordWrapWidth: 100,\n    };\n\n    // colors!!\n    public _fill: ConvertedFillStyle;\n    private _originalFill: FillInput;\n\n    public _stroke: ConvertedStrokeStyle;\n    private _originalStroke: StrokeInput;\n\n    private _dropShadow: TextDropShadow;\n\n    private _fontFamily: string | string[];\n    private _fontSize: number;\n    private _fontStyle: TextStyleFontStyle;\n    private _fontVariant: TextStyleFontVariant;\n    private _fontWeight: TextStyleFontWeight;\n\n    private _breakWords: boolean;\n    private _align: TextStyleAlign;\n    private _leading: number;\n    private _letterSpacing: number;\n    private _lineHeight: number;\n\n    private _textBaseline: TextStyleTextBaseline;\n    private _whiteSpace: TextStyleWhiteSpace;\n    private _wordWrap: boolean;\n    private _wordWrapWidth: number;\n\n    private _padding: number;\n\n    protected _styleKey: string;\n    private _trim: boolean;\n\n    constructor(style: Partial<TextStyleOptions> = {})\n    {\n        super();\n\n        convertV7Tov8Style(style);\n\n        const fullStyle = { ...TextStyle.defaultTextStyle, ...style };\n\n        for (const key in fullStyle)\n        {\n            const thisKey = key as keyof typeof this;\n\n            this[thisKey] = fullStyle[key as keyof TextStyleOptions] as any;\n        }\n\n        this.update();\n    }\n\n    /**\n     * Alignment for multiline text, does not affect single line text.\n     * @member {'left'|'center'|'right'|'justify'}\n     */\n    get align(): TextStyleAlign { return this._align; }\n    set align(value: TextStyleAlign) { this._align = value; this.update(); }\n    /** Indicates if lines can be wrapped within words, it needs wordWrap to be set to true. */\n    get breakWords(): boolean { return this._breakWords; }\n    set breakWords(value: boolean) { this._breakWords = value; this.update(); }\n    /** Set a drop shadow for the text. */\n    get dropShadow(): TextDropShadow { return this._dropShadow; }\n    set dropShadow(value: boolean | TextDropShadow)\n    {\n        if (value !== null && typeof value === 'object')\n        {\n            this._dropShadow = this._createProxy({ ...TextStyle.defaultDropShadow, ...value });\n        }\n        else\n        {\n            this._dropShadow = value ? this._createProxy({ ...TextStyle.defaultDropShadow }) : null;\n        }\n\n        this.update();\n    }\n    /** The font family, can be a single font name, or a list of names where the first is the preferred font. */\n    get fontFamily(): string | string[] { return this._fontFamily; }\n    set fontFamily(value: string | string[]) { this._fontFamily = value; this.update(); }\n    /** The font size (as a number it converts to px, but as a string, equivalents are '26px','20pt','160%' or '1.6em') */\n    get fontSize(): number { return this._fontSize; }\n    set fontSize(value: string | number)\n    {\n        if (typeof value === 'string')\n        {\n            // eg '34px' to number\n            this._fontSize = parseInt(value as string, 10);\n        }\n        else\n        {\n            this._fontSize = value as number;\n        }\n        this.update();\n    }\n    /**\n     * The font style.\n     * @member {'normal'|'italic'|'oblique'}\n     */\n    get fontStyle(): TextStyleFontStyle { return this._fontStyle; }\n    set fontStyle(value: TextStyleFontStyle) { this._fontStyle = value; this.update(); }\n    /**\n     * The font variant.\n     * @member {'normal'|'small-caps'}\n     */\n    get fontVariant(): TextStyleFontVariant { return this._fontVariant; }\n    set fontVariant(value: TextStyleFontVariant) { this._fontVariant = value; this.update(); }\n    /**\n     * The font weight.\n     * @member {'normal'|'bold'|'bolder'|'lighter'|'100'|'200'|'300'|'400'|'500'|'600'|'700'|'800'|'900'}\n     */\n    get fontWeight(): TextStyleFontWeight { return this._fontWeight; }\n    set fontWeight(value: TextStyleFontWeight) { this._fontWeight = value; this.update(); }\n    /** The space between lines. */\n    get leading(): number { return this._leading; }\n    set leading(value: number) { this._leading = value; this.update(); }\n    /** The amount of spacing between letters, default is 0. */\n    get letterSpacing(): number { return this._letterSpacing; }\n    set letterSpacing(value: number) { this._letterSpacing = value; this.update(); }\n    /** The line height, a number that represents the vertical space that a letter uses. */\n    get lineHeight(): number { return this._lineHeight; }\n    set lineHeight(value: number) { this._lineHeight = value; this.update(); }\n    /**\n     * Occasionally some fonts are cropped. Adding some padding will prevent this from happening\n     * by adding padding to all sides of the text.\n     */\n    get padding(): number { return this._padding; }\n    set padding(value: number) { this._padding = value; this.update(); }\n\n    /** Trim transparent borders. This is an expensive operation so only use this if you have to! */\n    get trim(): boolean { return this._trim; }\n    set trim(value: boolean) { this._trim = value; this.update(); }\n    /**\n     * The baseline of the text that is rendered.\n     * @member {'alphabetic'|'top'|'hanging'|'middle'|'ideographic'|'bottom'}\n     */\n    get textBaseline(): TextStyleTextBaseline { return this._textBaseline; }\n    set textBaseline(value: TextStyleTextBaseline) { this._textBaseline = value; this.update(); }\n    /**\n     * How newlines and spaces should be handled.\n     * Default is 'pre' (preserve, preserve).\n     *\n     *  value       | New lines     |   Spaces\n     *  ---         | ---           |   ---\n     * 'normal'     | Collapse      |   Collapse\n     * 'pre'        | Preserve      |   Preserve\n     * 'pre-line'   | Preserve      |   Collapse\n     * @member {'normal'|'pre'|'pre-line'}\n     */\n    get whiteSpace(): TextStyleWhiteSpace { return this._whiteSpace; }\n    set whiteSpace(value: TextStyleWhiteSpace) { this._whiteSpace = value; this.update(); }\n    /** Indicates if word wrap should be used. */\n    get wordWrap(): boolean { return this._wordWrap; }\n    set wordWrap(value: boolean) { this._wordWrap = value; this.update(); }\n    /** The width at which text will wrap, it needs wordWrap to be set to true. */\n    get wordWrapWidth(): number { return this._wordWrapWidth; }\n    set wordWrapWidth(value: number) { this._wordWrapWidth = value; this.update(); }\n\n    /** A fillstyle that will be used on the text e.g., 'red', '#00FF00'. */\n    get fill(): FillInput\n    {\n        return this._originalFill;\n    }\n\n    set fill(value: FillInput)\n    {\n        if (value === this._originalFill) return;\n\n        this._originalFill = value;\n\n        if (this._isFillStyle(value))\n        {\n            this._originalFill = this._createProxy({ ...GraphicsContext.defaultFillStyle, ...value }, () =>\n            {\n                this._fill = toFillStyle(\n                    { ...this._originalFill as FillStyle },\n                    GraphicsContext.defaultFillStyle\n                );\n            });\n        }\n\n        this._fill = toFillStyle(\n            value === 0x0 ? 'black' : value,\n            GraphicsContext.defaultFillStyle\n        );\n        this.update();\n    }\n\n    /** A fillstyle that will be used on the text stroke, e.g., 'blue', '#FCFF00'. */\n    get stroke(): StrokeInput\n    {\n        return this._originalStroke;\n    }\n\n    set stroke(value: StrokeInput)\n    {\n        if (value === this._originalStroke) return;\n\n        this._originalStroke = value;\n\n        if (this._isFillStyle(value))\n        {\n            this._originalStroke = this._createProxy({ ...GraphicsContext.defaultStrokeStyle, ...value }, () =>\n            {\n                this._stroke = toStrokeStyle(\n                    { ...this._originalStroke as StrokeStyle },\n                    GraphicsContext.defaultStrokeStyle\n                );\n            });\n        }\n\n        this._stroke = toStrokeStyle(value, GraphicsContext.defaultStrokeStyle);\n        this.update();\n    }\n\n    protected _generateKey(): string\n    {\n        this._styleKey = generateTextStyleKey(this);\n\n        return this._styleKey;\n    }\n\n    public update()\n    {\n        this._styleKey = null;\n        this.emit('update', this);\n    }\n\n    /** Resets all properties to the default values */\n    public reset()\n    {\n        const defaultStyle = TextStyle.defaultTextStyle;\n\n        for (const key in defaultStyle)\n        {\n            this[key as keyof typeof this] = defaultStyle[key as keyof TextStyleOptions] as any;\n        }\n    }\n\n    get styleKey()\n    {\n        return this._styleKey || this._generateKey();\n    }\n\n    /**\n     * Creates a new TextStyle object with the same values as this one.\n     * @returns New cloned TextStyle object\n     */\n    public clone(): TextStyle\n    {\n        return new TextStyle({\n            align: this.align,\n            breakWords: this.breakWords,\n            dropShadow: this._dropShadow ? { ...this._dropShadow } : null,\n            fill: this._fill,\n            fontFamily: this.fontFamily,\n            fontSize: this.fontSize,\n            fontStyle: this.fontStyle,\n            fontVariant: this.fontVariant,\n            fontWeight: this.fontWeight,\n            leading: this.leading,\n            letterSpacing: this.letterSpacing,\n            lineHeight: this.lineHeight,\n            padding: this.padding,\n            stroke: this._stroke,\n            textBaseline: this.textBaseline,\n            whiteSpace: this.whiteSpace,\n            wordWrap: this.wordWrap,\n            wordWrapWidth: this.wordWrapWidth,\n        });\n    }\n\n    /**\n     * Destroys this text style.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @param {boolean} [options.texture=false] - Should it destroy the texture of the this style\n     * @param {boolean} [options.textureSource=false] - Should it destroy the textureSource of the this style\n     */\n    public destroy(options: TypeOrBool<TextureDestroyOptions> = false)\n    {\n        this.removeAllListeners();\n\n        const destroyTexture = typeof options === 'boolean' ? options : options?.texture;\n\n        if (destroyTexture)\n        {\n            const destroyTextureSource = typeof options === 'boolean' ? options : options?.textureSource;\n\n            if (this._fill?.texture)\n            {\n                this._fill.texture.destroy(destroyTextureSource);\n            }\n\n            if ((this._originalFill as FillStyle)?.texture)\n            {\n                (this._originalFill as FillStyle).texture.destroy(destroyTextureSource);\n            }\n\n            if (this._stroke?.texture)\n            {\n                this._stroke.texture.destroy(destroyTextureSource);\n            }\n\n            if ((this._originalStroke as FillStyle)?.texture)\n            {\n                (this._originalStroke as FillStyle).texture.destroy(destroyTextureSource);\n            }\n        }\n\n        this._fill = null;\n        this._stroke = null;\n        this.dropShadow = null;\n        this._originalStroke = null;\n        this._originalFill = null;\n    }\n\n    private _createProxy<T extends object>(value: T, cb?: (property: string, newValue: any) => void): T\n    {\n        return new Proxy<T>(value, {\n            set: (target, property, newValue) =>\n            {\n                target[property as keyof T] = newValue;\n                cb?.(property as string, newValue);\n                this.update();\n\n                return true;\n            }\n        });\n    }\n\n    private _isFillStyle(value: FillInput): value is FillStyle\n    {\n        return ((value ?? null) !== null\n            && !(Color.isColorLike(value) || value instanceof FillGradient || value instanceof FillPattern));\n    }\n}\n\nfunction convertV7Tov8Style(style: TextStyleOptions)\n{\n    const oldStyle = style as TextStyleOptions & {\n        dropShadowAlpha?: number;\n        dropShadowAngle?: number;\n        dropShadowBlur?: number;\n        dropShadowColor?: number;\n        dropShadowDistance?: number;\n        fillGradientStops?: number[];\n        strokeThickness?: number;\n    };\n\n    if (typeof oldStyle.dropShadow === 'boolean' && oldStyle.dropShadow)\n    {\n        const defaults = TextStyle.defaultDropShadow;\n\n        style.dropShadow = {\n            alpha: oldStyle.dropShadowAlpha ?? defaults.alpha,\n            angle: oldStyle.dropShadowAngle ?? defaults.angle,\n            blur: oldStyle.dropShadowBlur ?? defaults.blur,\n            color: oldStyle.dropShadowColor ?? defaults.color,\n            distance:   oldStyle.dropShadowDistance ?? defaults.distance,\n        };\n    }\n\n    if (oldStyle.strokeThickness !== undefined)\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'strokeThickness is now a part of stroke');\n        // #endif\n\n        const color = oldStyle.stroke;\n        let obj: FillStyle = {};\n\n        // handles stroke: 0x0, stroke: { r: 0, g: 0, b: 0, a: 0 } stroke: new Color(0x0)\n        if (Color.isColorLike(color as ColorSource))\n        {\n            obj.color = color as ColorSource;\n        }\n        // handles stroke: new FillGradient()\n        else if (color instanceof FillGradient || color instanceof FillPattern)\n        {\n            obj.fill = color as FillGradient | FillPattern;\n        }\n        // handles stroke: { color: 0x0 } or stroke: { fill: new FillGradient() }\n        else if (Object.hasOwnProperty.call(color, 'color') || Object.hasOwnProperty.call(color, 'fill'))\n        {\n            obj = color as FillStyle;\n        }\n        else\n        {\n            throw new Error('Invalid stroke value.');\n        }\n\n        style.stroke = {\n            ...obj,\n            width: oldStyle.strokeThickness\n        };\n    }\n\n    if (Array.isArray(oldStyle.fillGradientStops))\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'gradient fill is now a fill pattern: `new FillGradient(...)`');\n        // #endif\n\n        let fontSize: number;\n\n        // eslint-disable-next-line no-eq-null, eqeqeq\n        if (style.fontSize == null)\n        {\n            style.fontSize = TextStyle.defaultTextStyle.fontSize;\n        }\n        else if (typeof style.fontSize === 'string')\n        {\n            // eg '34px' to number\n            fontSize = parseInt(style.fontSize as string, 10);\n        }\n        else\n        {\n            fontSize = style.fontSize as number;\n        }\n\n        const gradientFill = new FillGradient(0, 0, 0, fontSize * 1.7);\n\n        const fills: number[] = oldStyle.fillGradientStops\n            .map((color: ColorSource) => Color.shared.setValue(color).toNumber());\n\n        fills.forEach((number, index) =>\n        {\n            const ratio = index / (fills.length - 1);\n\n            gradientFill.addColorStop(ratio, number);\n        });\n\n        style.fill = {\n            fill: gradientFill\n        };\n    }\n}\n\n","import { DOMAdapter } from '../../../environment/adapter';\nimport { fontStringFromTextStyle } from './utils/fontStringFromTextStyle';\n\nimport type { ICanvas, ICanvasRenderingContext2DSettings } from '../../../environment/canvas/ICanvas';\nimport type { ICanvasRenderingContext2D } from '../../../environment/canvas/ICanvasRenderingContext2D';\nimport type { TextStyle, TextStyleWhiteSpace } from '../TextStyle';\n\n// The type for Intl.Segmenter is only available since TypeScript 4.7.2, so let's make a polyfill for it.\ninterface ISegmentData\n{\n    segment: string;\n}\ninterface ISegments\n{\n    [Symbol.iterator](): IterableIterator<ISegmentData>;\n}\ninterface ISegmenter\n{\n    segment(input: string): ISegments;\n}\ninterface IIntl\n{\n    Segmenter?: {\n        prototype: ISegmenter;\n        new(): ISegmenter;\n    };\n}\n\n/**\n * A number, or a string containing a number.\n * @memberof text\n * @typedef {object} FontMetrics\n * @property {number} ascent - Font ascent\n * @property {number} descent - Font descent\n * @property {number} fontSize - Font size\n */\nexport interface FontMetrics\n{\n    ascent: number;\n    descent: number;\n    fontSize: number;\n}\n\ntype CharacterWidthCache = Record<string, number>;\n\n// Default settings used for all getContext calls\nconst contextSettings: ICanvasRenderingContext2DSettings = {\n    // TextMetrics requires getImageData readback for measuring fonts.\n    willReadFrequently: true,\n};\n\n/**\n * The TextMetrics object represents the measurement of a block of text with a specified style.\n * @example\n * import { TextMetrics, TextStyle } from 'pixi.js';\n *\n * const style = new TextStyle({\n *     fontFamily: 'Arial',\n *     fontSize: 24,\n *     fill: 0xff1010,\n *     align: 'center',\n * });\n * const textMetrics = TextMetrics.measureText('Your text', style);\n * @memberof text\n */\nexport class CanvasTextMetrics\n{\n    /** The text that was measured. */\n    public text: string;\n\n    /** The style that was measured. */\n    public style: TextStyle;\n\n    /** The measured width of the text. */\n    public width: number;\n\n    /** The measured height of the text. */\n    public height: number;\n\n    /** An array of lines of the text broken by new lines and wrapping is specified in style. */\n    public lines: string[];\n\n    /** An array of the line widths for each line matched to `lines`. */\n    public lineWidths: number[];\n\n    /** The measured line height for this style. */\n    public lineHeight: number;\n\n    /** The maximum line width for all measured lines. */\n    public maxLineWidth: number;\n\n    /** The font properties object from TextMetrics.measureFont. */\n    public fontProperties: FontMetrics;\n\n    /**\n     * String used for calculate font metrics.\n     * These characters are all tall to help calculate the height required for text.\n     */\n    public static METRICS_STRING = '|q';\n\n    /** Baseline symbol for calculate font metrics. */\n    public static BASELINE_SYMBOL = 'M';\n\n    /** Baseline multiplier for calculate font metrics. */\n    public static BASELINE_MULTIPLIER = 1.4;\n\n    /** Height multiplier for setting height of canvas to calculate font metrics. */\n    public static HEIGHT_MULTIPLIER = 2.0;\n\n    /**\n     * A Unicode \"character\", or \"grapheme cluster\", can be composed of multiple Unicode code points,\n     * such as letters with diacritical marks (e.g. `'\\u0065\\u0301'`, letter e with acute)\n     * or emojis with modifiers (e.g. `'\\uD83E\\uDDD1\\u200D\\uD83D\\uDCBB'`, technologist).\n     * The new `Intl.Segmenter` API in ES2022 can split the string into grapheme clusters correctly. If it is not available,\n     * PixiJS will fallback to use the iterator of String, which can only spilt the string into code points.\n     * If you want to get full functionality in environments that don't support `Intl.Segmenter` (such as Firefox),\n     * you can use other libraries such as [grapheme-splitter]{@link https://www.npmjs.com/package/grapheme-splitter}\n     * or [graphemer]{@link https://www.npmjs.com/package/graphemer} to create a polyfill. Since these libraries can be\n     * relatively large in size to handle various Unicode grapheme clusters properly, PixiJS won't use them directly.\n     */\n    public static graphemeSegmenter: (s: string) => string[] = (() =>\n    {\n        if (typeof (Intl as IIntl)?.Segmenter === 'function')\n        {\n            const segmenter = new (Intl as IIntl).Segmenter();\n\n            return (s: string) => [...segmenter.segment(s)].map((x) => x.segment);\n        }\n\n        return (s: string) => [...s];\n    })();\n\n    public static _experimentalLetterSpacingSupported?: boolean;\n\n    /**\n     * Checking that we can use modern canvas 2D API.\n     *\n     * Note: This is an unstable API, Chrome < 94 use `textLetterSpacing`, later versions use `letterSpacing`.\n     * @see TextMetrics.experimentalLetterSpacing\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ICanvasRenderingContext2D/letterSpacing\n     * @see https://developer.chrome.com/origintrials/#/view_trial/3585991203293757441\n     */\n    public static get experimentalLetterSpacingSupported(): boolean\n    {\n        let result = CanvasTextMetrics._experimentalLetterSpacingSupported;\n\n        if (result !== undefined)\n        {\n            const proto = DOMAdapter.get().getCanvasRenderingContext2D().prototype;\n\n            result\n                = CanvasTextMetrics._experimentalLetterSpacingSupported\n                = 'letterSpacing' in proto || 'textLetterSpacing' in proto;\n        }\n\n        return result;\n    }\n\n    /**\n     * New rendering behavior for letter-spacing which uses Chrome's new native API. This will\n     * lead to more accurate letter-spacing results because it does not try to manually draw\n     * each character. However, this Chrome API is experimental and may not serve all cases yet.\n     * @see TextMetrics.experimentalLetterSpacingSupported\n     */\n    public static experimentalLetterSpacing = false;\n\n    /** Cache of {@see TextMetrics.FontMetrics} objects. */\n    private static _fonts: Record<string, FontMetrics> = {};\n\n    /** Cache of new line chars. */\n    private static readonly _newlines: number[] = [\n        0x000A, // line feed\n        0x000D, // carriage return\n    ];\n\n    /** Cache of breaking spaces. */\n    private static readonly _breakingSpaces: number[] = [\n        0x0009, // character tabulation\n        0x0020, // space\n        0x2000, // en quad\n        0x2001, // em quad\n        0x2002, // en space\n        0x2003, // em space\n        0x2004, // three-per-em space\n        0x2005, // four-per-em space\n        0x2006, // six-per-em space\n        0x2008, // punctuation space\n        0x2009, // thin space\n        0x200A, // hair space\n        0x205F, // medium mathematical space\n        0x3000, // ideographic space\n    ];\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    private static __canvas: ICanvas;\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    private static __context: ICanvasRenderingContext2D;\n\n    private static readonly _measurementCache: Record<string, CanvasTextMetrics> = {};\n\n    /**\n     * @param text - the text that was measured\n     * @param style - the style that was measured\n     * @param width - the measured width of the text\n     * @param height - the measured height of the text\n     * @param lines - an array of the lines of text broken by new lines and wrapping if specified in style\n     * @param lineWidths - an array of the line widths for each line matched to `lines`\n     * @param lineHeight - the measured line height for this style\n     * @param maxLineWidth - the maximum line width for all measured lines\n     * @param {FontMetrics} fontProperties - the font properties object from TextMetrics.measureFont\n     */\n    constructor(text: string, style: TextStyle, width: number, height: number, lines: string[], lineWidths: number[],\n        lineHeight: number, maxLineWidth: number, fontProperties: FontMetrics)\n    {\n        this.text = text;\n        this.style = style;\n        this.width = width;\n        this.height = height;\n        this.lines = lines;\n        this.lineWidths = lineWidths;\n        this.lineHeight = lineHeight;\n        this.maxLineWidth = maxLineWidth;\n        this.fontProperties = fontProperties;\n    }\n\n    /**\n     * Measures the supplied string of text and returns a Rectangle.\n     * @param text - The text to measure.\n     * @param style - The text style to use for measuring\n     * @param canvas - optional specification of the canvas to use for measuring.\n     * @param wordWrap\n     * @returns Measured width and height of the text.\n     */\n    public static measureText(\n        text = ' ',\n        style: TextStyle,\n        canvas: ICanvas = CanvasTextMetrics._canvas,\n        wordWrap: boolean = style.wordWrap,\n    ): CanvasTextMetrics\n    {\n        const textKey = `${text}:${style.styleKey}`;\n\n        // TODO - if we find this starts to go nuts with memory, we can remove the cache\n        // or instead just stick a usage tick that we increment each time we return it.\n        // if some are not used, we can just tidy them up!\n        if (CanvasTextMetrics._measurementCache[textKey]) return CanvasTextMetrics._measurementCache[textKey];\n\n        const font = fontStringFromTextStyle(style);\n        const fontProperties = CanvasTextMetrics.measureFont(font);\n\n        // fallback in case UA disallow canvas data extraction\n        if (fontProperties.fontSize === 0)\n        {\n            fontProperties.fontSize = style.fontSize as number;\n            fontProperties.ascent = style.fontSize as number;\n        }\n\n        const context = CanvasTextMetrics.__context; // canvas.getContext('2d', contextSettings);\n\n        context.font = font;\n\n        const outputText = wordWrap ? CanvasTextMetrics._wordWrap(text, style, canvas) : text;\n        const lines = outputText.split(/(?:\\r\\n|\\r|\\n)/);\n        const lineWidths = new Array<number>(lines.length);\n        let maxLineWidth = 0;\n\n        for (let i = 0; i < lines.length; i++)\n        {\n            const lineWidth = CanvasTextMetrics._measureText(lines[i], style.letterSpacing, context);\n\n            lineWidths[i] = lineWidth;\n            maxLineWidth = Math.max(maxLineWidth, lineWidth);\n        }\n\n        const strokeWidth = style._stroke?.width || 0;\n\n        let width = maxLineWidth + strokeWidth;\n\n        if (style.dropShadow)\n        {\n            width += style.dropShadow.distance;\n        }\n\n        const lineHeight = style.lineHeight || fontProperties.fontSize + strokeWidth;\n\n        let height = Math.max(lineHeight, fontProperties.fontSize + (strokeWidth * 2))\n            + ((lines.length - 1) * (lineHeight + style.leading));\n\n        if (style.dropShadow)\n        {\n            height += style.dropShadow.distance;\n        }\n\n        const measurements = new CanvasTextMetrics(\n            text,\n            style,\n            width,\n            height,\n            lines,\n            lineWidths,\n            lineHeight + style.leading,\n            maxLineWidth,\n            fontProperties\n        );\n\n        // CanvasTextMetrics._measurementCache[textKey] = measurements;\n\n        return measurements;\n    }\n\n    private static _measureText(\n        text: string,\n        letterSpacing: number,\n        context: ICanvasRenderingContext2D\n    )\n    {\n        let useExperimentalLetterSpacing = false;\n\n        if (CanvasTextMetrics.experimentalLetterSpacingSupported)\n        {\n            if (CanvasTextMetrics.experimentalLetterSpacing)\n            {\n                context.letterSpacing = `${letterSpacing}px`;\n                context.textLetterSpacing = `${letterSpacing}px`;\n                useExperimentalLetterSpacing = true;\n            }\n            else\n            {\n                context.letterSpacing = '0px';\n                context.textLetterSpacing = '0px';\n            }\n        }\n\n        let width = context.measureText(text).width;\n\n        if (width > 0)\n        {\n            if (useExperimentalLetterSpacing)\n            {\n                width -= letterSpacing;\n            }\n            else\n            {\n                width += (CanvasTextMetrics.graphemeSegmenter(text).length - 1) * letterSpacing;\n            }\n        }\n\n        return width;\n    }\n\n    /**\n     * Applies newlines to a string to have it optimally fit into the horizontal\n     * bounds set by the Text object's wordWrapWidth property.\n     * @param text - String to apply word wrapping to\n     * @param style - the style to use when wrapping\n     * @param canvas - optional specification of the canvas to use for measuring.\n     * @returns New string with new lines applied where required\n     */\n    private static _wordWrap(\n        text: string,\n        style: TextStyle,\n        canvas: ICanvas = CanvasTextMetrics._canvas\n    ): string\n    {\n        const context = canvas.getContext('2d', contextSettings);\n\n        let width = 0;\n        let line = '';\n        let lines = '';\n\n        const cache: CharacterWidthCache = Object.create(null);\n        const { letterSpacing, whiteSpace } = style;\n\n        // How to handle whitespaces\n        const collapseSpaces = CanvasTextMetrics._collapseSpaces(whiteSpace);\n        const collapseNewlines = CanvasTextMetrics._collapseNewlines(whiteSpace);\n\n        // whether or not spaces may be added to the beginning of lines\n        let canPrependSpaces = !collapseSpaces;\n\n        // There is letterSpacing after every char except the last one\n        // t_h_i_s_' '_i_s_' '_a_n_' '_e_x_a_m_p_l_e_' '_!\n        // so for convenience the above needs to be compared to width + 1 extra letterSpace\n        // t_h_i_s_' '_i_s_' '_a_n_' '_e_x_a_m_p_l_e_' '_!_\n        // ________________________________________________\n        // And then the final space is simply no appended to each line\n        const wordWrapWidth = style.wordWrapWidth + letterSpacing;\n\n        // break text into words, spaces and newline chars\n        const tokens = CanvasTextMetrics._tokenize(text);\n\n        for (let i = 0; i < tokens.length; i++)\n        {\n            // get the word, space or newlineChar\n            let token = tokens[i];\n\n            // if word is a new line\n            if (CanvasTextMetrics._isNewline(token))\n            {\n                // keep the new line\n                if (!collapseNewlines)\n                {\n                    lines += CanvasTextMetrics._addLine(line);\n                    canPrependSpaces = !collapseSpaces;\n                    line = '';\n                    width = 0;\n                    continue;\n                }\n\n                // if we should collapse new lines\n                // we simply convert it into a space\n                token = ' ';\n            }\n\n            // if we should collapse repeated whitespaces\n            if (collapseSpaces)\n            {\n                // check both this and the last tokens for spaces\n                const currIsBreakingSpace = CanvasTextMetrics.isBreakingSpace(token);\n                const lastIsBreakingSpace = CanvasTextMetrics.isBreakingSpace(line[line.length - 1]);\n\n                if (currIsBreakingSpace && lastIsBreakingSpace)\n                {\n                    continue;\n                }\n            }\n\n            // get word width from cache if possible\n            const tokenWidth = CanvasTextMetrics._getFromCache(token, letterSpacing, cache, context);\n\n            // word is longer than desired bounds\n            if (tokenWidth > wordWrapWidth)\n            {\n                // if we are not already at the beginning of a line\n                if (line !== '')\n                {\n                    // start newlines for overflow words\n                    lines += CanvasTextMetrics._addLine(line);\n                    line = '';\n                    width = 0;\n                }\n\n                // break large word over multiple lines\n                if (CanvasTextMetrics.canBreakWords(token, style.breakWords))\n                {\n                    // break word into characters\n                    const characters = CanvasTextMetrics.wordWrapSplit(token);\n\n                    // loop the characters\n                    for (let j = 0; j < characters.length; j++)\n                    {\n                        let char = characters[j];\n                        let lastChar = char;\n\n                        let k = 1;\n\n                        // we are not at the end of the token\n                        while (characters[j + k])\n                        {\n                            const nextChar = characters[j + k];\n\n                            // should not split chars\n                            if (!CanvasTextMetrics.canBreakChars(lastChar, nextChar, token, j, style.breakWords))\n                            {\n                                // combine chars & move forward one\n                                char += nextChar;\n                            }\n                            else\n                            {\n                                break;\n                            }\n\n                            lastChar = nextChar;\n                            k++;\n                        }\n\n                        j += k - 1;\n\n                        const characterWidth = CanvasTextMetrics._getFromCache(char, letterSpacing, cache, context);\n\n                        if (characterWidth + width > wordWrapWidth)\n                        {\n                            lines += CanvasTextMetrics._addLine(line);\n                            canPrependSpaces = false;\n                            line = '';\n                            width = 0;\n                        }\n\n                        line += char;\n                        width += characterWidth;\n                    }\n                }\n\n                // run word out of the bounds\n                else\n                {\n                    // if there are words in this line already\n                    // finish that line and start a new one\n                    if (line.length > 0)\n                    {\n                        lines += CanvasTextMetrics._addLine(line);\n                        line = '';\n                        width = 0;\n                    }\n\n                    const isLastToken = i === tokens.length - 1;\n\n                    // give it its own line if it's not the end\n                    lines += CanvasTextMetrics._addLine(token, !isLastToken);\n                    canPrependSpaces = false;\n                    line = '';\n                    width = 0;\n                }\n            }\n\n            // word could fit\n            else\n            {\n                // word won't fit because of existing words\n                // start a new line\n                if (tokenWidth + width > wordWrapWidth)\n                {\n                    // if its a space we don't want it\n                    canPrependSpaces = false;\n\n                    // add a new line\n                    lines += CanvasTextMetrics._addLine(line);\n\n                    // start a new line\n                    line = '';\n                    width = 0;\n                }\n\n                // don't add spaces to the beginning of lines\n                if (line.length > 0 || !CanvasTextMetrics.isBreakingSpace(token) || canPrependSpaces)\n                {\n                    // add the word to the current line\n                    line += token;\n\n                    // update width counter\n                    width += tokenWidth;\n                }\n            }\n        }\n\n        lines += CanvasTextMetrics._addLine(line, false);\n\n        return lines;\n    }\n\n    /**\n     * Convienience function for logging each line added during the wordWrap method.\n     * @param line    - The line of text to add\n     * @param newLine - Add new line character to end\n     * @returns A formatted line\n     */\n    private static _addLine(line: string, newLine = true): string\n    {\n        line = CanvasTextMetrics._trimRight(line);\n\n        line = (newLine) ? `${line}\\n` : line;\n\n        return line;\n    }\n\n    /**\n     * Gets & sets the widths of calculated characters in a cache object\n     * @param key            - The key\n     * @param letterSpacing  - The letter spacing\n     * @param cache          - The cache\n     * @param context        - The canvas context\n     * @returns The from cache.\n     */\n    private static _getFromCache(key: string, letterSpacing: number, cache: CharacterWidthCache,\n        context: ICanvasRenderingContext2D): number\n    {\n        let width = cache[key];\n\n        if (typeof width !== 'number')\n        {\n            width = CanvasTextMetrics._measureText(key, letterSpacing, context) + letterSpacing;\n            cache[key] = width;\n        }\n\n        return width;\n    }\n\n    /**\n     * Determines whether we should collapse breaking spaces.\n     * @param whiteSpace - The TextStyle property whiteSpace\n     * @returns Should collapse\n     */\n    private static _collapseSpaces(whiteSpace: TextStyleWhiteSpace): boolean\n    {\n        return (whiteSpace === 'normal' || whiteSpace === 'pre-line');\n    }\n\n    /**\n     * Determines whether we should collapse newLine chars.\n     * @param whiteSpace - The white space\n     * @returns should collapse\n     */\n    private static _collapseNewlines(whiteSpace: TextStyleWhiteSpace): boolean\n    {\n        return (whiteSpace === 'normal');\n    }\n\n    /**\n     * Trims breaking whitespaces from string.\n     * @param text - The text\n     * @returns Trimmed string\n     */\n    private static _trimRight(text: string): string\n    {\n        if (typeof text !== 'string')\n        {\n            return '';\n        }\n\n        for (let i = text.length - 1; i >= 0; i--)\n        {\n            const char = text[i];\n\n            if (!CanvasTextMetrics.isBreakingSpace(char))\n            {\n                break;\n            }\n\n            text = text.slice(0, -1);\n        }\n\n        return text;\n    }\n\n    /**\n     * Determines if char is a newline.\n     * @param char - The character\n     * @returns True if newline, False otherwise.\n     */\n    private static _isNewline(char: string): boolean\n    {\n        if (typeof char !== 'string')\n        {\n            return false;\n        }\n\n        return CanvasTextMetrics._newlines.includes(char.charCodeAt(0));\n    }\n\n    /**\n     * Determines if char is a breaking whitespace.\n     *\n     * It allows one to determine whether char should be a breaking whitespace\n     * For example certain characters in CJK langs or numbers.\n     * It must return a boolean.\n     * @param char - The character\n     * @param [_nextChar] - The next character\n     * @returns True if whitespace, False otherwise.\n     */\n    public static isBreakingSpace(char: string, _nextChar?: string): boolean\n    {\n        if (typeof char !== 'string')\n        {\n            return false;\n        }\n\n        return CanvasTextMetrics._breakingSpaces.includes(char.charCodeAt(0));\n    }\n\n    /**\n     * Splits a string into words, breaking-spaces and newLine characters\n     * @param text - The text\n     * @returns A tokenized array\n     */\n    private static _tokenize(text: string): string[]\n    {\n        const tokens: string[] = [];\n        let token = '';\n\n        if (typeof text !== 'string')\n        {\n            return tokens;\n        }\n\n        for (let i = 0; i < text.length; i++)\n        {\n            const char = text[i];\n            const nextChar = text[i + 1];\n\n            if (CanvasTextMetrics.isBreakingSpace(char, nextChar) || CanvasTextMetrics._isNewline(char))\n            {\n                if (token !== '')\n                {\n                    tokens.push(token);\n                    token = '';\n                }\n\n                tokens.push(char);\n\n                continue;\n            }\n\n            token += char;\n        }\n\n        if (token !== '')\n        {\n            tokens.push(token);\n        }\n\n        return tokens;\n    }\n\n    /**\n     * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n     *\n     * It allows one to customise which words should break\n     * Examples are if the token is CJK or numbers.\n     * It must return a boolean.\n     * @param _token - The token\n     * @param breakWords - The style attr break words\n     * @returns Whether to break word or not\n     */\n    public static canBreakWords(_token: string, breakWords: boolean): boolean\n    {\n        return breakWords;\n    }\n\n    /**\n     * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n     *\n     * It allows one to determine whether a pair of characters\n     * should be broken by newlines\n     * For example certain characters in CJK langs or numbers.\n     * It must return a boolean.\n     * @param _char - The character\n     * @param _nextChar - The next character\n     * @param _token - The token/word the characters are from\n     * @param _index - The index in the token of the char\n     * @param _breakWords - The style attr break words\n     * @returns whether to break word or not\n     */\n    public static canBreakChars(_char: string, _nextChar: string, _token: string, _index: number,\n        _breakWords: boolean): boolean\n    {\n        return true;\n    }\n\n    /**\n     * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n     *\n     * It is called when a token (usually a word) has to be split into separate pieces\n     * in order to determine the point to break a word.\n     * It must return an array of characters.\n     * @param token - The token to split\n     * @returns The characters of the token\n     * @see CanvasTextMetrics.graphemeSegmenter\n     */\n    public static wordWrapSplit(token: string): string[]\n    {\n        return CanvasTextMetrics.graphemeSegmenter(token);\n    }\n\n    /**\n     * Calculates the ascent, descent and fontSize of a given font-style\n     * @param font - String representing the style of the font\n     * @returns Font properties object\n     */\n    public static measureFont(font: string): FontMetrics\n    {\n        // as this method is used for preparing assets, don't recalculate things if we don't need to\n        if (CanvasTextMetrics._fonts[font])\n        {\n            return CanvasTextMetrics._fonts[font];\n        }\n\n        const context = CanvasTextMetrics._context;\n\n        context.font = font;\n        const metrics = context.measureText(CanvasTextMetrics.METRICS_STRING + CanvasTextMetrics.BASELINE_SYMBOL);\n\n        const properties = {\n            ascent: metrics.actualBoundingBoxAscent,\n            descent: metrics.actualBoundingBoxDescent,\n            fontSize: metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent\n        };\n\n        CanvasTextMetrics._fonts[font] = properties;\n\n        return properties;\n    }\n\n    /**\n     * Clear font metrics in metrics cache.\n     * @param {string} [font] - font name. If font name not set then clear cache for all fonts.\n     */\n    public static clearMetrics(font = ''): void\n    {\n        if (font)\n        {\n            delete CanvasTextMetrics._fonts[font];\n        }\n        else\n        {\n            CanvasTextMetrics._fonts = {};\n        }\n    }\n\n    /**\n     * Cached canvas element for measuring text\n     * TODO: this should be private, but isn't because of backward compat, will fix later.\n     * @ignore\n     */\n    public static get _canvas(): ICanvas\n    {\n        if (!CanvasTextMetrics.__canvas)\n        {\n            let canvas: ICanvas;\n\n            try\n            {\n                // OffscreenCanvas2D measureText can be up to 40% faster.\n                const c = new OffscreenCanvas(0, 0);\n                const context = c.getContext('2d', contextSettings);\n\n                if (context?.measureText)\n                {\n                    CanvasTextMetrics.__canvas = c as ICanvas;\n\n                    return c as ICanvas;\n                }\n\n                canvas = DOMAdapter.get().createCanvas();\n            }\n            catch (ex)\n            {\n                canvas = DOMAdapter.get().createCanvas();\n            }\n            canvas.width = canvas.height = 10;\n            CanvasTextMetrics.__canvas = canvas;\n        }\n\n        return CanvasTextMetrics.__canvas;\n    }\n\n    /**\n     * TODO: this should be private, but isn't because of backward compat, will fix later.\n     * @ignore\n     */\n    public static get _context(): ICanvasRenderingContext2D\n    {\n        if (!CanvasTextMetrics.__context)\n        {\n            CanvasTextMetrics.__context = CanvasTextMetrics._canvas.getContext('2d', contextSettings);\n        }\n\n        return CanvasTextMetrics.__context;\n    }\n}\n","import type { TextStyle } from '../../TextStyle';\n\nconst genericFontFamilies = [\n    'serif',\n    'sans-serif',\n    'monospace',\n    'cursive',\n    'fantasy',\n    'system-ui',\n];\n\n/**\n * Generates a font style string to use for `TextMetrics.measureFont()`.\n * @param style\n * @returns Font style string, for passing to `TextMetrics.measureFont()`\n */\nexport function fontStringFromTextStyle(style: TextStyle): string\n{\n    // build canvas api font setting from individual components. Convert a numeric style.fontSize to px\n    const fontSizeString = (typeof style.fontSize === 'number') ? `${style.fontSize}px` : style.fontSize;\n\n    // Clean-up fontFamily property by quoting each font name\n    // this will support font names with spaces\n    let fontFamilies: string | string[] = style.fontFamily;\n\n    if (!Array.isArray(style.fontFamily))\n    {\n        fontFamilies = style.fontFamily.split(',');\n    }\n\n    for (let i = fontFamilies.length - 1; i >= 0; i--)\n    {\n        // Trim any extra white-space\n        let fontFamily = fontFamilies[i].trim();\n\n        // Check if font already contains strings\n        if (!(/([\\\"\\'])[^\\'\\\"]+\\1/).test(fontFamily) && !genericFontFamilies.includes(fontFamily))\n        {\n            fontFamily = `\"${fontFamily}\"`;\n        }\n        (fontFamilies as string[])[i] = fontFamily;\n    }\n\n    // eslint-disable-next-line max-len\n    return `${style.fontStyle} ${style.fontVariant} ${style.fontWeight} ${fontSizeString} ${(fontFamilies as string[]).join(',')}`;\n}\n","import { Color } from '../../../../color/Color';\nimport { Matrix } from '../../../../maths/matrix/Matrix';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport { warn } from '../../../../utils/logging/warn';\nimport { FillGradient } from '../../../graphics/shared/fill/FillGradient';\nimport { FillPattern } from '../../../graphics/shared/fill/FillPattern';\n\nimport type { ICanvasRenderingContext2D } from '../../../../environment/canvas/ICanvasRenderingContext2D';\nimport type { ConvertedFillStyle } from '../../../graphics/shared/FillTypes';\n\nexport function getCanvasFillStyle(\n    fillStyle: ConvertedFillStyle,\n    context: ICanvasRenderingContext2D): string | CanvasGradient | CanvasPattern\n{\n    if (fillStyle.texture === Texture.WHITE && !fillStyle.fill)\n    {\n        return Color.shared.setValue(fillStyle.color).toHex();\n    }\n    else if (!fillStyle.fill)\n    {\n        // fancy set up...\n        const pattern = context.createPattern(fillStyle.texture.source.resource, 'repeat');\n\n        // create an inverted scale matrix..\n        const tempMatrix = fillStyle.matrix.copyTo(Matrix.shared);\n\n        tempMatrix.scale(fillStyle.texture.frame.width, fillStyle.texture.frame.height);\n\n        pattern.setTransform(tempMatrix);\n\n        return pattern;\n    }\n    else if (fillStyle.fill instanceof FillPattern)\n    {\n        const fillPattern = fillStyle.fill;\n\n        const pattern = context.createPattern(fillPattern.texture.source.resource, 'repeat');\n\n        const tempMatrix = fillPattern.transform.copyTo(Matrix.shared);\n\n        tempMatrix.scale(\n            fillPattern.texture.frame.width,\n            fillPattern.texture.frame.height\n        );\n\n        pattern.setTransform(tempMatrix);\n\n        return pattern;\n    }\n    else if (fillStyle.fill instanceof FillGradient)\n    {\n        const fillGradient = fillStyle.fill;\n\n        if (fillGradient.type === 'linear')\n        {\n            const gradient = context.createLinearGradient(\n                fillGradient.x0,\n                fillGradient.y0,\n                fillGradient.x1,\n                fillGradient.y1\n            );\n\n            fillGradient.gradientStops.forEach((stop) =>\n            {\n                gradient.addColorStop(stop.offset, Color.shared.setValue(stop.color).toHex());\n            });\n\n            return gradient;\n        }\n    }\n\n    // #if _DEBUG\n    warn('FillStyle not recognised', fillStyle);\n    // #endif\n\n    return 'red';\n}\n","import { Color } from '../../../color/Color';\n\nimport type { ConvertedFillStyle, ConvertedStrokeStyle } from '../../graphics/shared/FillTypes';\nimport type { HTMLTextStyle } from '../../text-html/HtmlTextStyle';\nimport type { TextStyle } from '../TextStyle';\n\nconst valuesToIterateForKeys: Partial<keyof TextStyle | keyof HTMLTextStyle>[] = [\n    'align',\n    'breakWords',\n    'cssOverrides',\n    'fontFamily',\n    'fontSize',\n    'fontStyle',\n    'fontVariant',\n    'fontWeight',\n    'leading',\n    'letterSpacing',\n    'lineHeight',\n    'padding',\n    'textBaseline',\n    'trim',\n    'whiteSpace',\n    'wordWrap',\n    'wordWrapWidth',\n] as const;\n\n/**\n * Generates a unique key for the text style.\n * @param style - The style to generate a key for.\n * @returns the key for the style.\n */\nexport function generateTextStyleKey(style: TextStyle): string\n{\n    const key = [];\n\n    let index = 0;\n\n    for (let i = 0; i < valuesToIterateForKeys.length; i++)\n    {\n        const prop = `_${valuesToIterateForKeys[i]}`;\n\n        key[index++] = style[prop as keyof typeof style];\n    }\n\n    index = addFillStyleKey(style._fill, key as string[], index);\n    index = addStokeStyleKey(style._stroke, key as string[], index);\n    index = addDropShadowKey(style.dropShadow, key as string[], index);\n\n    return key.join('-');\n}\n\nfunction addFillStyleKey(fillStyle: ConvertedFillStyle, key: (number | string)[], index: number)\n{\n    if (!fillStyle) return index;\n\n    key[index++] = fillStyle.color;\n    key[index++] = fillStyle.alpha;\n    key[index++] = fillStyle.fill?.styleKey;\n\n    return index;\n}\n\nfunction addStokeStyleKey(strokeStyle: ConvertedStrokeStyle, key: (number | string)[], index: number)\n{\n    if (!strokeStyle) return index;\n\n    index = addFillStyleKey(strokeStyle, key, index);\n\n    key[index++] = strokeStyle.width;\n    key[index++] = strokeStyle.alignment;\n    key[index++] = strokeStyle.cap;\n    key[index++] = strokeStyle.join;\n    key[index++] = strokeStyle.miterLimit;\n\n    return index;\n}\n\nfunction addDropShadowKey(dropShadow: TextStyle['dropShadow'], key: (number | string)[], index: number)\n{\n    if (!dropShadow) return index;\n\n    key[index++] = dropShadow.alpha;\n    key[index++] = dropShadow.angle;\n    key[index++] = dropShadow.blur;\n    key[index++] = dropShadow.distance;\n    key[index++] = Color.shared.setValue(dropShadow.color).toNumber();\n\n    return index;\n}\n","import { Rectangle } from '../maths/shapes/Rectangle';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture';\n\nimport type { PointData } from '../maths/point/PointData';\nimport type { TextureSource } from '../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { BindableTexture, TextureBorders } from '../rendering/renderers/shared/texture/Texture';\nimport type { Dict } from '../utils/types';\n\n/**\n * Represents the JSON data for a spritesheet atlas.\n * @memberof assets\n */\nexport interface SpritesheetFrameData\n{\n    /** The frame rectangle of the texture. */\n    frame: {\n        x: number;\n        y: number;\n        w: number;\n        h: number;\n    };\n    /** Whether the texture is trimmed. */\n    trimmed?: boolean;\n    /** Whether the texture is rotated. */\n    rotated?: boolean;\n    /** The source size of the texture. */\n    sourceSize?: {\n        w: number;\n        h: number;\n    };\n    /** The sprite source size. */\n    spriteSourceSize?: {\n        h?: number;\n        w?: number;\n        x: number;\n        y: number;\n    };\n    /** The anchor point of the texture. */\n    anchor?: PointData;\n    /** The 9-slice borders of the texture. */\n    borders?: TextureBorders\n}\n\n/**\n * Atlas format.\n * @memberof assets\n */\nexport interface SpritesheetData\n{\n    /** The frames of the atlas. */\n    frames: Dict<SpritesheetFrameData>;\n    /** The animations of the atlas. */\n    animations?: Dict<string[]>;\n    /** The meta data of the atlas. */\n    meta: {\n        app?: string;\n        format?: string;\n        frameTags?: {\n            from: number;\n            name: string;\n            to: number;\n            direction: string;\n        }[];\n        image?: string;\n        layers?: {\n            blendMode: string;\n            name: string;\n            opacity: number;\n        }[];\n        scale: number | string;\n        size?: {\n            h: number;\n            w: number;\n        };\n        slices?: {\n            color: string;\n            name: string;\n            keys: {\n                frame: number,\n                bounds: {\n                    x: number;\n                    y: number;\n                    w: number;\n                    h: number;\n                };\n            }[];\n        }[];\n        // eslint-disable-next-line camelcase\n        related_multi_packs?: string[];\n        version?: string;\n    };\n}\n\n/**\n * Utility class for maintaining reference to a collection\n * of Textures on a single Spritesheet.\n *\n * To access a sprite sheet from your code you may pass its JSON data file to Pixi's loader:\n *\n * ```js\n * import { Assets } from 'pixi.js';\n *\n * const sheet = await Assets.load('images/spritesheet.json');\n * ```\n *\n * Alternately, you may circumvent the loader by instantiating the Spritesheet directly:\n *\n * ```js\n * import { Spritesheet } from 'pixi.js';\n *\n * const sheet = new Spritesheet(texture, spritesheetData);\n * await sheet.parse();\n * console.log('Spritesheet ready to use!');\n * ```\n *\n * With the `sheet.textures` you can create Sprite objects, and `sheet.animations` can be used to create an AnimatedSprite.\n *\n * Here's an example of a sprite sheet JSON data file:\n * ```json\n * {\n *     \"frames\": {\n *         \"enemy1.png\":\n *         {\n *             \"frame\": {\"x\":103,\"y\":1,\"w\":32,\"h\":32},\n *             \"spriteSourceSize\": {\"x\":0,\"y\":0,\"w\":32,\"h\":32},\n *             \"sourceSize\": {\"w\":32,\"h\":32},\n *             \"anchor\": {\"x\":16,\"y\":16}\n *         },\n *         \"enemy2.png\":\n *         {\n *             \"frame\": {\"x\":103,\"y\":35,\"w\":32,\"h\":32},\n *             \"spriteSourceSize\": {\"x\":0,\"y\":0,\"w\":32,\"h\":32},\n *             \"sourceSize\": {\"w\":32,\"h\":32},\n *             \"anchor\": {\"x\":16,\"y\":16}\n *         },\n *         \"button.png\":\n *         {\n *             \"frame\": {\"x\":1,\"y\":1,\"w\":100,\"h\":100},\n *             \"spriteSourceSize\": {\"x\":0,\"y\":0,\"w\":100,\"h\":100},\n *             \"sourceSize\": {\"w\":100,\"h\":100},\n *             \"anchor\": {\"x\":0,\"y\":0},\n *             \"borders\": {\"left\":35,\"top\":35,\"right\":35,\"bottom\":35}\n *         }\n *     },\n *\n *     \"animations\": {\n *         \"enemy\": [\"enemy1.png\",\"enemy2.png\"]\n *     },\n *\n *     \"meta\": {\n *         \"image\": \"sheet.png\",\n *         \"format\": \"RGBA8888\",\n *         \"size\": {\"w\":136,\"h\":102},\n *         \"scale\": \"1\"\n *     }\n * }\n * ```\n * Sprite sheets can be packed using tools like {@link https://codeandweb.com/texturepacker|TexturePacker},\n * {@link https://renderhjs.net/shoebox/|Shoebox} or {@link https://github.com/krzysztof-o/spritesheet.js|Spritesheet.js}.\n * Default anchor points (see {@link Texture#defaultAnchor}), default 9-slice borders\n * (see {@link Texture#defaultBorders}) and grouping of animation sprites are currently only\n * supported by TexturePacker.\n *\n * Alternative ways for loading spritesheet image if you need more control:\n *\n * ```js\n * import { Assets } from 'pixi.js';\n *\n * const sheetTexture = await Assets.load('images/spritesheet.png');\n * Assets.add({\n *     alias: 'atlas',\n *     src: 'images/spritesheet.json',\n *     data: {texture: sheetTexture} // using of preloaded texture\n * });\n * const sheet = await Assets.load('atlas')\n * ```\n *\n * or:\n *\n * ```js\n * import { Assets } from 'pixi.js';\n *\n * Assets.add({\n *     alias: 'atlas',\n *     src: 'images/spritesheet.json',\n *     data: {imageFilename: 'my-spritesheet.2x.avif'} // using of custom filename located in \"images/my-spritesheet.2x.avif\"\n * });\n * const sheet = await Assets.load('atlas')\n * ```\n * @memberof assets\n */\nexport class Spritesheet<S extends SpritesheetData = SpritesheetData>\n{\n    /** The maximum number of Textures to build per process. */\n    public static readonly BATCH_SIZE = 1000;\n\n    /** For multi-packed spritesheets, this contains a reference to all the other spritesheets it depends on. */\n    public linkedSheets: Spritesheet<S>[] = [];\n\n    /** Reference to ths source texture. */\n    public textureSource: TextureSource;\n\n    /**\n     * A map containing all textures of the sprite sheet.\n     * Can be used to create a {@link Sprite|Sprite}:\n     * @example\n     * import { Sprite } from 'pixi.js';\n     *\n     * new Sprite(sheet.textures['image.png']);\n     */\n    public textures: Record<keyof S['frames'], Texture>;\n\n    /**\n     * A map containing the textures for each animation.\n     * Can be used to create an {@link AnimatedSprite|AnimatedSprite}:\n     * @example\n     * import { AnimatedSprite } from 'pixi.js';\n     *\n     * new AnimatedSprite(sheet.animations['anim_name']);\n     */\n    public animations: Record<keyof NonNullable<S['animations']>, Texture[]>;\n\n    /**\n     * Reference to the original JSON data.\n     * @type {object}\n     */\n    public data: S;\n\n    /** The resolution of the spritesheet. */\n    public resolution: number;\n\n    /**\n     * Reference to original source image from the Loader. This reference is retained so we\n     * can destroy the Texture later on. It is never used internally.\n     */\n    private _texture: Texture;\n\n    /**\n     * Map of spritesheet frames.\n     * @type {object}\n     */\n    private _frames: S['frames'];\n\n    /** Collection of frame names. */\n    private _frameKeys: (keyof S['frames'])[];\n\n    /** Current batch index being processed. */\n    private _batchIndex: number;\n\n    /**\n     * Callback when parse is completed.\n     * @type {Function}\n     */\n    private _callback: (textures: Dict<Texture>) => void;\n\n    /**\n     * @param texture - Reference to the source BaseTexture object.\n     * @param {object} data - Spritesheet image data.\n     */\n    constructor(texture: BindableTexture, data: S)\n    {\n        this._texture = texture instanceof Texture ? texture : null;\n        this.textureSource = texture.source;\n        this.textures = {} as Record<keyof S['frames'], Texture>;\n        this.animations = {} as Record<keyof NonNullable<S['animations']>, Texture[]>;\n        this.data = data;\n\n        const metaResolution = parseFloat(data.meta.scale as string);\n\n        if (metaResolution)\n        {\n            this.resolution = metaResolution;\n            texture.source.resolution = this.resolution;\n        }\n        else\n        {\n            this.resolution = texture.source._resolution;\n        }\n\n        this._frames = this.data.frames;\n        this._frameKeys = Object.keys(this._frames);\n        this._batchIndex = 0;\n        this._callback = null;\n    }\n\n    /**\n     * Parser spritesheet from loaded data. This is done asynchronously\n     * to prevent creating too many Texture within a single process.\n     */\n    public parse(): Promise<Record<string, Texture>>\n    {\n        return new Promise((resolve) =>\n        {\n            this._callback = resolve;\n            this._batchIndex = 0;\n\n            if (this._frameKeys.length <= Spritesheet.BATCH_SIZE)\n            {\n                this._processFrames(0);\n                this._processAnimations();\n                this._parseComplete();\n            }\n            else\n            {\n                this._nextBatch();\n            }\n        });\n    }\n\n    /**\n     * Process a batch of frames\n     * @param initialFrameIndex - The index of frame to start.\n     */\n    private _processFrames(initialFrameIndex: number): void\n    {\n        let frameIndex = initialFrameIndex;\n        const maxFrames = Spritesheet.BATCH_SIZE;\n\n        while (frameIndex - initialFrameIndex < maxFrames && frameIndex < this._frameKeys.length)\n        {\n            const i = this._frameKeys[frameIndex];\n            const data = this._frames[i];\n            const rect = data.frame;\n\n            if (rect)\n            {\n                let frame = null;\n                let trim = null;\n                const sourceSize = data.trimmed !== false && data.sourceSize\n                    ? data.sourceSize : data.frame;\n\n                const orig = new Rectangle(\n                    0,\n                    0,\n                    Math.floor(sourceSize.w) / this.resolution,\n                    Math.floor(sourceSize.h) / this.resolution\n                );\n\n                if (data.rotated)\n                {\n                    frame = new Rectangle(\n                        Math.floor(rect.x) / this.resolution,\n                        Math.floor(rect.y) / this.resolution,\n                        Math.floor(rect.h) / this.resolution,\n                        Math.floor(rect.w) / this.resolution\n                    );\n                }\n                else\n                {\n                    frame = new Rectangle(\n                        Math.floor(rect.x) / this.resolution,\n                        Math.floor(rect.y) / this.resolution,\n                        Math.floor(rect.w) / this.resolution,\n                        Math.floor(rect.h) / this.resolution\n                    );\n                }\n\n                //  Check to see if the sprite is trimmed\n                if (data.trimmed !== false && data.spriteSourceSize)\n                {\n                    trim = new Rectangle(\n                        Math.floor(data.spriteSourceSize.x) / this.resolution,\n                        Math.floor(data.spriteSourceSize.y) / this.resolution,\n                        Math.floor(rect.w) / this.resolution,\n                        Math.floor(rect.h) / this.resolution\n                    );\n                }\n\n                this.textures[i] = new Texture({\n                    source: this.textureSource,\n\n                    frame,\n                    orig,\n                    trim,\n                    rotate: data.rotated ? 2 : 0,\n                    defaultAnchor: data.anchor,\n                    defaultBorders: data.borders,\n\n                    label: i.toString(),\n                });\n            }\n\n            frameIndex++;\n        }\n    }\n\n    /** Parse animations config. */\n    private _processAnimations(): void\n    {\n        const animations = this.data.animations || {};\n\n        for (const animName in animations)\n        {\n            this.animations[animName as keyof S['animations']] = [];\n            for (let i = 0; i < animations[animName].length; i++)\n            {\n                const frameName = animations[animName][i];\n\n                this.animations[animName].push(this.textures[frameName]);\n            }\n        }\n    }\n\n    /** The parse has completed. */\n    private _parseComplete(): void\n    {\n        const callback = this._callback;\n\n        this._callback = null;\n        this._batchIndex = 0;\n        callback.call(this, this.textures);\n    }\n\n    /** Begin the next batch of textures. */\n    private _nextBatch(): void\n    {\n        this._processFrames(this._batchIndex * Spritesheet.BATCH_SIZE);\n        this._batchIndex++;\n        setTimeout(() =>\n        {\n            if (this._batchIndex * Spritesheet.BATCH_SIZE < this._frameKeys.length)\n            {\n                this._nextBatch();\n            }\n            else\n            {\n                this._processAnimations();\n                this._parseComplete();\n            }\n        }, 0);\n    }\n\n    /**\n     * Destroy Spritesheet and don't use after this.\n     * @param {boolean} [destroyBase=false] - Whether to destroy the base texture as well\n     */\n    public destroy(destroyBase = false): void\n    {\n        for (const i in this.textures)\n        {\n            this.textures[i].destroy();\n        }\n        this._frames = null;\n        this._frameKeys = null;\n        this.data = null;\n        this.textures = null;\n        if (destroyBase)\n        {\n            this._texture?.destroy();\n            this.textureSource.destroy();\n        }\n        this._texture = null;\n        this.textureSource = null;\n        this.linkedSheets = [];\n    }\n}\n","import { LoaderParserPriority } from '../assets/loader/parsers/LoaderParser';\nimport { Resolver } from '../assets/resolver/Resolver';\nimport { copySearchParams } from '../assets/utils/copySearchParams';\nimport { ExtensionType } from '../extensions/Extensions';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture';\nimport { path } from '../utils/path';\nimport { Spritesheet } from './Spritesheet';\n\nimport type { AssetExtensionAdvanced } from '../assets/AssetExtension';\nimport type { Loader } from '../assets/loader/Loader';\nimport type { ResolvedAsset } from '../assets/types';\nimport type { SpritesheetData } from './Spritesheet';\n\nexport interface SpriteSheetJson extends SpritesheetData\n{\n    meta: {\n        image: string;\n        scale: string;\n        // eslint-disable-next-line camelcase\n        related_multi_packs?: string[];\n    };\n}\n\nconst validImages = ['jpg', 'png', 'jpeg', 'avif', 'webp',\n    'basis', 'etc2', 'bc7', 'bc6h', 'bc5', 'bc4', 'bc3', 'bc2', 'bc1', 'eac', 'astc'];\n\nfunction getCacheableAssets(keys: string[], asset: Spritesheet, ignoreMultiPack: boolean)\n{\n    const out: Record<string, any> = {};\n\n    keys.forEach((key: string) =>\n    {\n        out[key] = asset;\n    });\n\n    Object.keys(asset.textures).forEach((key) =>\n    {\n        out[key] = asset.textures[key];\n    });\n\n    if (!ignoreMultiPack)\n    {\n        const basePath = path.dirname(keys[0]);\n\n        asset.linkedSheets.forEach((item: Spritesheet, i) =>\n        {\n            const out2 = getCacheableAssets([`${basePath}/${asset.data.meta.related_multi_packs[i]}`], item, true);\n\n            Object.assign(out, out2);\n        });\n    }\n\n    return out;\n}\n\n/**\n * Asset extension for loading spritesheets\n * @example\n * import { Assets } from 'pixi.js';\n *\n * Assets.load({\n *     alias: 'spritesheet',\n *     src: 'path/to/spritesheet.json',\n *     data: {\n *         ignoreMultiPack: true,\n *     }\n * })\n * @type {AssetExtension}\n * @memberof assets\n */\nexport const spritesheetAsset = {\n    extension: ExtensionType.Asset,\n    /** Handle the caching of the related Spritesheet Textures */\n    cache: {\n        test: (asset: Spritesheet) => asset instanceof Spritesheet,\n        getCacheableAssets: (keys: string[], asset: Spritesheet) => getCacheableAssets(keys, asset, false),\n    },\n    /** Resolve the resolution of the asset. */\n    resolver: {\n        extension: {\n            type: ExtensionType.ResolveParser,\n            name: 'resolveSpritesheet',\n        },\n        test: (value: string): boolean =>\n        {\n            const tempURL = value.split('?')[0];\n            const split = tempURL.split('.');\n            const extension = split.pop();\n            const format = split.pop();\n\n            return extension === 'json' && validImages.includes(format);\n        },\n        parse: (value: string) =>\n        {\n            const split = value.split('.');\n\n            return {\n                resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? '1'),\n                format: split[split.length - 2],\n                src: value,\n            };\n        },\n    },\n    /**\n     * Loader plugin that parses sprite sheets!\n     * once the JSON has been loaded this checks to see if the JSON is spritesheet data.\n     * If it is, we load the spritesheets image and parse the data into Spritesheet\n     * All textures in the sprite sheet are then added to the cache\n     */\n    loader: {\n        name: 'spritesheetLoader',\n\n        extension: {\n            type: ExtensionType.LoadParser,\n            priority: LoaderParserPriority.Normal,\n            name: 'spritesheetLoader',\n        },\n\n        async testParse(asset: SpriteSheetJson, options: ResolvedAsset): Promise<boolean>\n        {\n            return (path.extname(options.src).toLowerCase() === '.json' && !!asset.frames);\n        },\n\n        async parse(\n            asset: SpriteSheetJson,\n            options: ResolvedAsset<{texture?: Texture, imageFilename?: string, ignoreMultiPack?: boolean}>,\n            loader?: Loader\n        ): Promise<Spritesheet>\n        {\n            const {\n                texture: imageTexture, // if user need to use preloaded texture\n                imageFilename // if user need to use custom filename (not from jsonFile.meta.image)\n            } = options?.data ?? {};\n\n            let basePath = path.dirname(options.src);\n\n            if (basePath && basePath.lastIndexOf('/') !== (basePath.length - 1))\n            {\n                basePath += '/';\n            }\n\n            let texture: Texture;\n\n            if (imageTexture instanceof Texture)\n            {\n                texture = imageTexture;\n            }\n            else\n            {\n                const imagePath = copySearchParams(basePath + (imageFilename ?? asset.meta.image), options.src);\n\n                const assets = await loader.load<Texture>([imagePath]);\n\n                texture = assets[imagePath];\n            }\n\n            const spritesheet = new Spritesheet(\n                texture.source,\n                asset,\n            );\n\n            await spritesheet.parse();\n\n            // Check and add the multi atlas\n            // Heavily influenced and based on https://github.com/rocket-ua/pixi-tps-loader/blob/master/src/ResourceLoader.js\n            // eslint-disable-next-line camelcase\n            const multiPacks = asset?.meta?.related_multi_packs;\n\n            if (Array.isArray(multiPacks))\n            {\n                const promises: Promise<Spritesheet<SpriteSheetJson>>[] = [];\n\n                for (const item of multiPacks)\n                {\n                    if (typeof item !== 'string')\n                    {\n                        continue;\n                    }\n\n                    let itemUrl = basePath + item;\n\n                    // Check if the file wasn't already added as multipack\n                    if (options.data?.ignoreMultiPack)\n                    {\n                        continue;\n                    }\n\n                    itemUrl = copySearchParams(itemUrl, options.src);\n\n                    promises.push(loader.load<Spritesheet<SpriteSheetJson>>({\n                        src: itemUrl,\n                        data: {\n                            ignoreMultiPack: true,\n                        }\n                    }));\n                }\n\n                const res = await Promise.all(promises);\n\n                spritesheet.linkedSheets = res;\n                res.forEach((item) =>\n                {\n                    item.linkedSheets = [spritesheet].concat(spritesheet.linkedSheets.filter((sp) => (sp !== item)));\n                });\n            }\n\n            return spritesheet;\n        },\n\n        async unload(spritesheet: Spritesheet, _resolvedAsset, loader)\n        {\n            await loader.unload(spritesheet.textureSource._sourceOrigin);\n\n            spritesheet.destroy(false);\n        },\n    }\n} satisfies AssetExtensionAdvanced<SpriteSheetJson, Spritesheet, Spritesheet, Spritesheet>;\n","import { extensions } from '../extensions/Extensions';\nimport { spritesheetAsset } from './spritesheetAsset';\n\nextensions.add(spritesheetAsset);\n","import type { Ticker, TickerCallback } from './Ticker';\n\n/**\n * Internal class for handling the priority sorting of ticker handlers.\n * @private\n * @class\n */\nexport class TickerListener<T = any>\n{\n    /** The current priority. */\n    public priority: number;\n    /** The next item in chain. */\n    public next: TickerListener = null;\n    /** The previous item in chain. */\n    public previous: TickerListener = null;\n\n    /** The handler function to execute. */\n    private _fn: TickerCallback<T>;\n    /** The calling to execute. */\n    private _context: T;\n    /** If this should only execute once. */\n    private readonly _once: boolean;\n    /** `true` if this listener has been destroyed already. */\n    private _destroyed = false;\n\n    /**\n     * Constructor\n     * @private\n     * @param fn - The listener function to be added for one update\n     * @param context - The listener context\n     * @param priority - The priority for emitting\n     * @param once - If the handler should fire once\n     */\n    constructor(fn: TickerCallback<T>, context: T = null, priority = 0, once = false)\n    {\n        this._fn = fn;\n        this._context = context;\n        this.priority = priority;\n        this._once = once;\n    }\n\n    /**\n     * Simple compare function to figure out if a function and context match.\n     * @param fn - The listener function to be added for one update\n     * @param context - The listener context\n     * @returns `true` if the listener match the arguments\n     */\n    public match(fn: TickerCallback<T>, context: any = null): boolean\n    {\n        return this._fn === fn && this._context === context;\n    }\n\n    /**\n     * Emit by calling the current function.\n     * @param ticker - The ticker emitting.\n     * @returns Next ticker\n     */\n    public emit(ticker: Ticker): TickerListener\n    {\n        if (this._fn)\n        {\n            if (this._context)\n            {\n                this._fn.call(this._context, ticker);\n            }\n            else\n            {\n                (this as TickerListener<any>)._fn(ticker);\n            }\n        }\n\n        const redirect = this.next;\n\n        if (this._once)\n        {\n            this.destroy(true);\n        }\n\n        // Soft-destroying should remove\n        // the next reference\n        if (this._destroyed)\n        {\n            this.next = null;\n        }\n\n        return redirect;\n    }\n\n    /**\n     * Connect to the list.\n     * @param previous - Input node, previous listener\n     */\n    public connect(previous: TickerListener): void\n    {\n        this.previous = previous;\n        if (previous.next)\n        {\n            previous.next.previous = this;\n        }\n        this.next = previous.next;\n        previous.next = this;\n    }\n\n    /**\n     * Destroy and don't use after this.\n     * @param hard - `true` to remove the `next` reference, this\n     *        is considered a hard destroy. Soft destroy maintains the next reference.\n     * @returns The listener to redirect while emitting or removing.\n     */\n    public destroy(hard = false): TickerListener\n    {\n        this._destroyed = true;\n        this._fn = null;\n        this._context = null;\n\n        // Disconnect, hook up next and previous\n        if (this.previous)\n        {\n            this.previous.next = this.next;\n        }\n\n        if (this.next)\n        {\n            this.next.previous = this.previous;\n        }\n\n        // Redirect to the next item\n        const redirect = this.next;\n\n        // Remove references\n        this.next = hard ? null : redirect;\n        this.previous = null;\n\n        return redirect;\n    }\n}\n","import { UPDATE_PRIORITY } from './const';\nimport { TickerListener } from './TickerListener';\n\n/**\n * A callback which can be added to a ticker.\n * ```js\n * ticker.add(() => {\n *    // do something every frame\n * });\n * ```\n * @memberof ticker\n */\nexport type TickerCallback<T> = (this: T, ticker: Ticker) => any;\n\n/**\n * {@link ticker.Ticker|Tickers} provide periodic callbacks based on the system clock.\n * Your game update logic will generally be run in response to a tick once per frame.\n * You can have multiple tickers in use at one time.\n * ```js\n * import { Ticker } from 'pixi.js';\n *\n * const callback = (ticker: Ticker) => {\n *    // do something on the next animation frame\n * };\n *\n * // create a ticker\n * const ticker = new Ticker();\n *\n * // register the callback and start the ticker\n * ticker.add(callback);\n * ticker.start();\n * ```\n *\n * You can always use the {@link ticker.Ticker.shared|shared} ticker that Pixi renders with by default.\n * ```js\n * Ticker.shared.add(callback);\n * ```\n * @namespace ticker\n */\n\n/**\n * A Ticker class that runs an update loop that other objects listen to.\n *\n * This class is composed around listeners meant for execution on the next requested animation frame.\n * Animation frames are requested only when necessary, e.g. When the ticker is started and the emitter has listeners.\n * @class\n * @memberof ticker\n */\nexport class Ticker\n{\n    /**\n     * Target frames per millisecond.\n     * @static\n     */\n    public static targetFPMS = 0.06;\n\n    /** The private shared ticker instance */\n    private static _shared: Ticker;\n    /** The private system ticker instance  */\n    private static _system: Ticker;\n\n    /**\n     * Whether or not this ticker should invoke the method\n     * {@link ticker.Ticker#start|start} automatically when a listener is added.\n     */\n    public autoStart = false;\n    /**\n     * Scalar time value from last frame to this frame.\n     * This value is capped by setting {@link ticker.Ticker#minFPS|minFPS}\n     * and is scaled with {@link ticker.Ticker#speed|speed}.\n     * **Note:** The cap may be exceeded by scaling.\n     */\n    public deltaTime = 1;\n    /**\n     * Scaler time elapsed in milliseconds from last frame to this frame.\n     * This value is capped by setting {@link ticker.Ticker#minFPS|minFPS}\n     * and is scaled with {@link ticker.Ticker#speed|speed}.\n     * **Note:** The cap may be exceeded by scaling.\n     * If the platform supports DOMHighResTimeStamp,\n     * this value will have a precision of 1 s.\n     * Defaults to target frame time\n     * @default 16.66\n     */\n    public deltaMS: number;\n    /**\n     * Time elapsed in milliseconds from last frame to this frame.\n     * Opposed to what the scalar {@link ticker.Ticker#deltaTime|deltaTime}\n     * is based, this value is neither capped nor scaled.\n     * If the platform supports DOMHighResTimeStamp,\n     * this value will have a precision of 1 s.\n     * Defaults to target frame time\n     * @default 16.66\n     */\n    public elapsedMS: number;\n    /**\n     * The last time {@link ticker.Ticker#update|update} was invoked.\n     * This value is also reset internally outside of invoking\n     * update, but only when a new animation frame is requested.\n     * If the platform supports DOMHighResTimeStamp,\n     * this value will have a precision of 1 s.\n     */\n    public lastTime = -1;\n    /**\n     * Factor of current {@link ticker.Ticker#deltaTime|deltaTime}.\n     * @example\n     * // Scales ticker.deltaTime to what would be\n     * // the equivalent of approximately 120 FPS\n     * ticker.speed = 2;\n     */\n    public speed = 1;\n    /**\n     * Whether or not this ticker has been started.\n     * `true` if {@link ticker.Ticker#start|start} has been called.\n     * `false` if {@link ticker.Ticker#stop|Stop} has been called.\n     * While `false`, this value may change to `true` in the\n     * event of {@link ticker.Ticker#autoStart|autoStart} being `true`\n     * and a listener is added.\n     */\n    public started = false;\n\n    /** The first listener. All new listeners added are chained on this. */\n    private _head: TickerListener;\n    /** Internal current frame request ID */\n    private _requestId: number = null;\n    /**\n     * Internal value managed by minFPS property setter and getter.\n     * This is the maximum allowed milliseconds between updates.\n     */\n    private _maxElapsedMS = 100;\n    /**\n     * Internal value managed by minFPS property setter and getter.\n     * This is the minimum allowed milliseconds between updates.\n     */\n    private _minElapsedMS = 0;\n    /** If enabled, deleting is disabled.*/\n    private _protected = false;\n    /** The last time keyframe was executed. Maintains a relatively fixed interval with the previous value. */\n    private _lastFrame = -1;\n    /**\n     * Internal tick method bound to ticker instance.\n     * This is because in early 2015, Function.bind\n     * is still 60% slower in high performance scenarios.\n     * Also separating frame requests from update method\n     * so listeners may be called at any time and with\n     * any animation API, just invoke ticker.update(time).\n     * @param time - Time since last tick.\n     */\n    private readonly _tick: (time: number) => any;\n\n    constructor()\n    {\n        this._head = new TickerListener(null, null, Infinity);\n        this.deltaMS = 1 / Ticker.targetFPMS;\n        this.elapsedMS = 1 / Ticker.targetFPMS;\n\n        this._tick = (time: number): void =>\n        {\n            this._requestId = null;\n\n            if (this.started)\n            {\n                // Invoke listeners now\n                this.update(time);\n                // Listener side effects may have modified ticker state.\n                if (this.started && this._requestId === null && this._head.next)\n                {\n                    this._requestId = requestAnimationFrame(this._tick);\n                }\n            }\n        };\n    }\n\n    /**\n     * Conditionally requests a new animation frame.\n     * If a frame has not already been requested, and if the internal\n     * emitter has listeners, a new frame is requested.\n     * @private\n     */\n    private _requestIfNeeded(): void\n    {\n        if (this._requestId === null && this._head.next)\n        {\n            // ensure callbacks get correct delta\n            this.lastTime = performance.now();\n            this._lastFrame = this.lastTime;\n            this._requestId = requestAnimationFrame(this._tick);\n        }\n    }\n\n    /**\n     * Conditionally cancels a pending animation frame.\n     * @private\n     */\n    private _cancelIfNeeded(): void\n    {\n        if (this._requestId !== null)\n        {\n            cancelAnimationFrame(this._requestId);\n            this._requestId = null;\n        }\n    }\n\n    /**\n     * Conditionally requests a new animation frame.\n     * If the ticker has been started it checks if a frame has not already\n     * been requested, and if the internal emitter has listeners. If these\n     * conditions are met, a new frame is requested. If the ticker has not\n     * been started, but autoStart is `true`, then the ticker starts now,\n     * and continues with the previous conditions to request a new frame.\n     * @private\n     */\n    private _startIfPossible(): void\n    {\n        if (this.started)\n        {\n            this._requestIfNeeded();\n        }\n        else if (this.autoStart)\n        {\n            this.start();\n        }\n    }\n\n    /**\n     * Register a handler for tick events. Calls continuously unless\n     * it is removed or the ticker is stopped.\n     * @param fn - The listener function to be added for updates\n     * @param context - The listener context\n     * @param {number} [priority=UPDATE_PRIORITY.NORMAL] - The priority for emitting\n     * @returns This instance of a ticker\n     */\n    public add<T = any>(fn: TickerCallback<T>, context?: T, priority: number = UPDATE_PRIORITY.NORMAL): this\n    {\n        return this._addListener(new TickerListener(fn, context, priority));\n    }\n\n    /**\n     * Add a handler for the tick event which is only execute once.\n     * @param fn - The listener function to be added for one update\n     * @param context - The listener context\n     * @param {number} [priority=UPDATE_PRIORITY.NORMAL] - The priority for emitting\n     * @returns This instance of a ticker\n     */\n    public addOnce<T = any>(fn: TickerCallback<T>, context?: T, priority: number = UPDATE_PRIORITY.NORMAL): this\n    {\n        return this._addListener(new TickerListener(fn, context, priority, true));\n    }\n\n    /**\n     * Internally adds the event handler so that it can be sorted by priority.\n     * Priority allows certain handler (user, AnimatedSprite, Interaction) to be run\n     * before the rendering.\n     * @private\n     * @param listener - Current listener being added.\n     * @returns This instance of a ticker\n     */\n    private _addListener(listener: TickerListener): this\n    {\n        // For attaching to head\n        let current = this._head.next;\n        let previous = this._head;\n\n        // Add the first item\n        if (!current)\n        {\n            listener.connect(previous);\n        }\n        else\n        {\n            // Go from highest to lowest priority\n            while (current)\n            {\n                if (listener.priority > current.priority)\n                {\n                    listener.connect(previous);\n                    break;\n                }\n                previous = current;\n                current = current.next;\n            }\n\n            // Not yet connected\n            if (!listener.previous)\n            {\n                listener.connect(previous);\n            }\n        }\n\n        this._startIfPossible();\n\n        return this;\n    }\n\n    /**\n     * Removes any handlers matching the function and context parameters.\n     * If no handlers are left after removing, then it cancels the animation frame.\n     * @param fn - The listener function to be removed\n     * @param context - The listener context to be removed\n     * @returns This instance of a ticker\n     */\n    public remove<T = any>(fn: TickerCallback<T>, context?: T): this\n    {\n        let listener = this._head.next;\n\n        while (listener)\n        {\n            // We found a match, lets remove it\n            // no break to delete all possible matches\n            // incase a listener was added 2+ times\n            if (listener.match(fn, context))\n            {\n                listener = listener.destroy();\n            }\n            else\n            {\n                listener = listener.next;\n            }\n        }\n\n        if (!this._head.next)\n        {\n            this._cancelIfNeeded();\n        }\n\n        return this;\n    }\n\n    /**\n     * The number of listeners on this ticker, calculated by walking through linked list\n     * @readonly\n     * @member {number}\n     */\n    get count(): number\n    {\n        if (!this._head)\n        {\n            return 0;\n        }\n\n        let count = 0;\n        let current = this._head;\n\n        while ((current = current.next))\n        {\n            count++;\n        }\n\n        return count;\n    }\n\n    /** Starts the ticker. If the ticker has listeners a new animation frame is requested at this point. */\n    public start(): void\n    {\n        if (!this.started)\n        {\n            this.started = true;\n            this._requestIfNeeded();\n        }\n    }\n\n    /** Stops the ticker. If the ticker has requested an animation frame it is canceled at this point. */\n    public stop(): void\n    {\n        if (this.started)\n        {\n            this.started = false;\n            this._cancelIfNeeded();\n        }\n    }\n\n    /** Destroy the ticker and don't use after this. Calling this method removes all references to internal events. */\n    public destroy(): void\n    {\n        if (!this._protected)\n        {\n            this.stop();\n\n            let listener = this._head.next;\n\n            while (listener)\n            {\n                listener = listener.destroy(true);\n            }\n\n            this._head.destroy();\n            this._head = null;\n        }\n    }\n\n    /**\n     * Triggers an update. An update entails setting the\n     * current {@link ticker.Ticker#elapsedMS|elapsedMS},\n     * the current {@link ticker.Ticker#deltaTime|deltaTime},\n     * invoking all listeners with current deltaTime,\n     * and then finally setting {@link ticker.Ticker#lastTime|lastTime}\n     * with the value of currentTime that was provided.\n     * This method will be called automatically by animation\n     * frame callbacks if the ticker instance has been started\n     * and listeners are added.\n     * @param {number} [currentTime=performance.now()] - the current time of execution\n     */\n    public update(currentTime: number = performance.now()): void\n    {\n        let elapsedMS;\n\n        // If the difference in time is zero or negative, we ignore most of the work done here.\n        // If there is no valid difference, then should be no reason to let anyone know about it.\n        // A zero delta, is exactly that, nothing should update.\n        //\n        // The difference in time can be negative, and no this does not mean time traveling.\n        // This can be the result of a race condition between when an animation frame is requested\n        // on the current JavaScript engine event loop, and when the ticker's start method is invoked\n        // (which invokes the internal _requestIfNeeded method). If a frame is requested before\n        // _requestIfNeeded is invoked, then the callback for the animation frame the ticker requests,\n        // can receive a time argument that can be less than the lastTime value that was set within\n        // _requestIfNeeded. This difference is in microseconds, but this is enough to cause problems.\n        //\n        // This check covers this browser engine timing issue, as well as if consumers pass an invalid\n        // currentTime value. This may happen if consumers opt-out of the autoStart, and update themselves.\n\n        if (currentTime > this.lastTime)\n        {\n            // Save uncapped elapsedMS for measurement\n            elapsedMS = this.elapsedMS = currentTime - this.lastTime;\n\n            // cap the milliseconds elapsed used for deltaTime\n            if (elapsedMS > this._maxElapsedMS)\n            {\n                elapsedMS = this._maxElapsedMS;\n            }\n\n            elapsedMS *= this.speed;\n\n            // If not enough time has passed, exit the function.\n            // Get ready for next frame by setting _lastFrame, but based on _minElapsedMS\n            // adjustment to ensure a relatively stable interval.\n            if (this._minElapsedMS)\n            {\n                const delta = currentTime - this._lastFrame | 0;\n\n                if (delta < this._minElapsedMS)\n                {\n                    return;\n                }\n\n                this._lastFrame = currentTime - (delta % this._minElapsedMS);\n            }\n\n            this.deltaMS = elapsedMS;\n            this.deltaTime = this.deltaMS * Ticker.targetFPMS;\n\n            // Cache a local reference, in-case ticker is destroyed\n            // during the emit, we can still check for head.next\n            const head = this._head;\n\n            // Invoke listeners added to internal emitter\n            let listener = head.next;\n\n            while (listener)\n            {\n                listener = listener.emit(this);\n            }\n\n            if (!head.next)\n            {\n                this._cancelIfNeeded();\n            }\n        }\n        else\n        {\n            this.deltaTime = this.deltaMS = this.elapsedMS = 0;\n        }\n\n        this.lastTime = currentTime;\n    }\n\n    /**\n     * The frames per second at which this ticker is running.\n     * The default is approximately 60 in most modern browsers.\n     * **Note:** This does not factor in the value of\n     * {@link ticker.Ticker#speed|speed}, which is specific\n     * to scaling {@link ticker.Ticker#deltaTime|deltaTime}.\n     * @member {number}\n     * @readonly\n     */\n    get FPS(): number\n    {\n        return 1000 / this.elapsedMS;\n    }\n\n    /**\n     * Manages the maximum amount of milliseconds allowed to\n     * elapse between invoking {@link ticker.Ticker#update|update}.\n     * This value is used to cap {@link ticker.Ticker#deltaTime|deltaTime},\n     * but does not effect the measured value of {@link ticker.Ticker#FPS|FPS}.\n     * When setting this property it is clamped to a value between\n     * `0` and `Ticker.targetFPMS * 1000`.\n     * @member {number}\n     * @default 10\n     */\n    get minFPS(): number\n    {\n        return 1000 / this._maxElapsedMS;\n    }\n\n    set minFPS(fps: number)\n    {\n        // Minimum must be below the maxFPS\n        const minFPS = Math.min(this.maxFPS, fps);\n\n        // Must be at least 0, but below 1 / Ticker.targetFPMS\n        const minFPMS = Math.min(Math.max(0, minFPS) / 1000, Ticker.targetFPMS);\n\n        this._maxElapsedMS = 1 / minFPMS;\n    }\n\n    /**\n     * Manages the minimum amount of milliseconds required to\n     * elapse between invoking {@link ticker.Ticker#update|update}.\n     * This will effect the measured value of {@link ticker.Ticker#FPS|FPS}.\n     * If it is set to `0`, then there is no limit; PixiJS will render as many frames as it can.\n     * Otherwise it will be at least `minFPS`\n     * @member {number}\n     * @default 0\n     */\n    get maxFPS(): number\n    {\n        if (this._minElapsedMS)\n        {\n            return Math.round(1000 / this._minElapsedMS);\n        }\n\n        return 0;\n    }\n\n    set maxFPS(fps: number)\n    {\n        if (fps === 0)\n        {\n            this._minElapsedMS = 0;\n        }\n        else\n        {\n            // Max must be at least the minFPS\n            const maxFPS = Math.max(this.minFPS, fps);\n\n            this._minElapsedMS = 1 / (maxFPS / 1000);\n        }\n    }\n\n    /**\n     * The shared ticker instance used by {@link AnimatedSprite} and by\n     * {@link VideoResource} to update animation frames / video textures.\n     *\n     * It may also be used by {@link Application} if created with the `sharedTicker` option property set to true.\n     *\n     * The property {@link ticker.Ticker#autoStart|autoStart} is set to `true` for this instance.\n     * Please follow the examples for usage, including how to opt-out of auto-starting the shared ticker.\n     * @example\n     * import { Ticker } from 'pixi.js';\n     *\n     * const ticker = Ticker.shared;\n     * // Set this to prevent starting this ticker when listeners are added.\n     * // By default this is true only for the Ticker.shared instance.\n     * ticker.autoStart = false;\n     *\n     * // FYI, call this to ensure the ticker is stopped. It should be stopped\n     * // if you have not attempted to render anything yet.\n     * ticker.stop();\n     *\n     * // Call this when you are ready for a running shared ticker.\n     * ticker.start();\n     * @example\n     * import { autoDetectRenderer, Container } from 'pixi.js';\n     *\n     * // You may use the shared ticker to render...\n     * const renderer = autoDetectRenderer();\n     * const stage = new Container();\n     * document.body.appendChild(renderer.view);\n     * ticker.add((time) => renderer.render(stage));\n     *\n     * // Or you can just update it manually.\n     * ticker.autoStart = false;\n     * ticker.stop();\n     * const animate = (time) => {\n     *     ticker.update(time);\n     *     renderer.render(stage);\n     *     requestAnimationFrame(animate);\n     * };\n     * animate(performance.now());\n     * @member {ticker.Ticker}\n     * @readonly\n     * @static\n     */\n    static get shared(): Ticker\n    {\n        if (!Ticker._shared)\n        {\n            const shared = Ticker._shared = new Ticker();\n\n            shared.autoStart = true;\n            shared._protected = true;\n        }\n\n        return Ticker._shared;\n    }\n\n    /**\n     * The system ticker instance used by {@link BasePrepare} for core timing\n     * functionality that shouldn't usually need to be paused, unlike the `shared`\n     * ticker which drives visual animations and rendering which may want to be paused.\n     *\n     * The property {@link ticker.Ticker#autoStart|autoStart} is set to `true` for this instance.\n     * @member {ticker.Ticker}\n     * @readonly\n     * @static\n     */\n    static get system(): Ticker\n    {\n        if (!Ticker._system)\n        {\n            const system = Ticker._system = new Ticker();\n\n            system.autoStart = true;\n            system._protected = true;\n        }\n\n        return Ticker._system;\n    }\n}\n","/**\n * Represents the update priorities used by internal Pixi classes when registered with\n * the {@link ticker.Ticker} object. Higher priority items are updated first and lower\n * priority items, such as render, should go later.\n * @static\n * @enum {number}\n * @memberof ticker\n */\nexport enum UPDATE_PRIORITY\n// eslint-disable-next-line @typescript-eslint/indent\n{\n    /**\n     * Highest priority used for interaction events in {@link EventSystem}\n     * @default 50\n     */\n    INTERACTION = 50,\n    /**\n     * High priority updating, used by {@link AnimatedSprite}\n     * @default 25\n     */\n    HIGH = 25,\n    /**\n     * Default priority for ticker events, see {@link Ticker#add}.\n     * @default 0\n     */\n    NORMAL = 0,\n    /**\n     * Low priority used for {@link Application} rendering.\n     * @default -25\n     */\n    LOW = -25,\n    /**\n     * Lowest priority used for {@link BasePrepare} utility.\n     * @default -50\n     */\n    UTILITY = -50,\n}\n","import type { ALPHA_MODES } from '../../rendering/renderers/shared/texture/const';\n\nlet promise: Promise<ALPHA_MODES> | undefined;\n\n/**\n * Helper for detecting the correct alpha mode for video textures.\n * For some reason, some browsers/devices/WebGL implementations premultiply the alpha\n * of a video before and then a second time if `UNPACK_PREMULTIPLY_ALPHA_WEBGL`\n * is true. So the video is premultiplied twice if the alpha mode is `UNPACK`.\n * In this case we need the alpha mode to be `PMA`. This function detects\n * the upload behavior by uploading a white 2x2 webm with 50% alpha\n * without `UNPACK_PREMULTIPLY_ALPHA_WEBGL` and then checking whether\n * the uploaded pixels are premultiplied.\n * @memberof utils\n * @function detectVideoAlphaMode\n * @returns {Promise<ALPHA_MODES>} The correct alpha mode for video textures.\n */\nexport async function detectVideoAlphaMode(): Promise<ALPHA_MODES>\n{\n    promise ??= (async () =>\n    {\n        const canvas = document.createElement('canvas');\n        const gl = canvas.getContext('webgl');\n\n        if (!gl)\n        {\n            return 'premultiply-alpha-on-upload';\n        }\n\n        const video = await new Promise<HTMLVideoElement | null>((resolve) =>\n        {\n            const video = document.createElement('video');\n\n            video.onloadeddata = () => resolve(video);\n            video.onerror = () => resolve(null);\n            video.autoplay = false;\n            video.crossOrigin = 'anonymous';\n            video.preload = 'auto';\n            // eslint-disable-next-line max-len\n            video.src = 'data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=';\n            video.load();\n        });\n\n        if (!video)\n        {\n            return 'premultiply-alpha-on-upload';\n        }\n\n        const texture = gl.createTexture();\n\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n\n        const framebuffer = gl.createFramebuffer();\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n        gl.framebufferTexture2D(\n            gl.FRAMEBUFFER,\n            gl.COLOR_ATTACHMENT0,\n            gl.TEXTURE_2D,\n            texture,\n            0\n        );\n\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n        gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, gl.NONE);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, video);\n\n        const pixel = new Uint8Array(4);\n\n        gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixel);\n\n        gl.deleteFramebuffer(framebuffer);\n        gl.deleteTexture(texture);\n        gl.getExtension('WEBGL_lose_context')?.loseContext();\n\n        return pixel[0] <= pixel[3] ? 'premultiplied-alpha' : 'premultiply-alpha-on-upload';\n    })();\n\n    return promise;\n}\n","// Cache the result to prevent running this over and over\nlet unsafeEval: boolean;\n\n/**\n * Not all platforms allow to generate function code (e.g., `new Function`).\n * this provides the platform-level detection.\n * @private\n * @returns {boolean} `true` if `new Function` is supported.\n */\nexport function unsafeEvalSupported(): boolean\n{\n    if (typeof unsafeEval === 'boolean')\n    {\n        return unsafeEval;\n    }\n\n    try\n    {\n        /* eslint-disable no-new-func */\n        const func = new Function('param1', 'param2', 'param3', 'return param1[param2] === param3;');\n        /* eslint-enable no-new-func */\n\n        unsafeEval = func({ a: 'b' }, 'a', 'b') === true;\n    }\n    catch (e)\n    {\n        unsafeEval = false;\n    }\n\n    return unsafeEval;\n}\n","/**\n * Remove items from a javascript array without generating garbage\n * @function removeItems\n * @memberof utils\n * @param {Array<any>} arr - Array to remove elements from\n * @param {number} startIdx - starting index\n * @param {number} removeCount - how many to remove\n */\nexport function removeItems(arr: any[], startIdx: number, removeCount: number): void\n{\n    const length = arr.length;\n    let i;\n\n    if (startIdx >= length || removeCount === 0)\n    {\n        return;\n    }\n\n    removeCount = (startIdx + removeCount > length ? length - startIdx : removeCount);\n\n    const len = length - removeCount;\n\n    for (i = startIdx; i < len; ++i)\n    {\n        arr[i] = arr[i + removeCount];\n    }\n\n    arr.length = len;\n}\n","const uidCache: Record<string, number> = {\n    default: -1,\n};\n\ntype UIDNames =\n    | 'default'\n    | 'resource'\n    | 'texture'\n    | 'textureSource'\n    | 'textureResource'\n    | 'batcher' //\n    | 'graphicsContext' //\n    | 'graphicsView' //\n    | 'graphicsPath' //\n    | 'fillGradient' //\n    | 'fillPattern' //\n    | 'meshView' //\n    | 'renderable' //\n    | 'buffer' //\n    | 'bufferResource' //\n    | 'geometry'\n    | 'instructionSet' //\n    | 'renderTarget' //\n    | 'uniform' //\n    | 'spriteView' //\n    | 'textView' //\n    | 'tilingSpriteView'; // ;\n\n/**\n * Gets the next unique identifier\n * @param name - The name of the identifier.\n * @function uid\n * @returns {number} The next unique identifier to use.\n * @memberof utils\n */\nexport function uid(name: UIDNames = 'default'): number\n{\n    if (uidCache[name] === undefined)\n    {\n        uidCache[name] = -1;\n    }\n\n    return ++uidCache[name];\n}\n\n/** Resets the next unique identifier to 0. This is used for some tests, dont touch or things WILL explode :) */\nexport function resetUids(): void\n{\n    for (const key in uidCache)\n    {\n        delete uidCache[key];\n    }\n}\n","import type { ObservablePoint } from '../../maths/point/ObservablePoint';\nimport type { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport type { BoundsData } from '../../scene/container/bounds/Bounds';\n\nexport function updateQuadBounds(\n    bounds: BoundsData,\n    anchor: ObservablePoint,\n    texture: Texture,\n    padding: number\n)\n{\n    const { width, height } = texture.orig;\n    const trim = texture.trim;\n\n    if (trim)\n    {\n        const sourceWidth = trim.width;\n        const sourceHeight = trim.height;\n\n        bounds.minX = (trim.x) - (anchor._x * width) - padding;\n        bounds.maxX = bounds.minX + sourceWidth;\n\n        bounds.minY = (trim.y) - (anchor._y * height) - padding;\n        bounds.maxY = bounds.minY + sourceHeight;\n    }\n\n    else\n    {\n        bounds.minX = (-anchor._x * width) - padding;\n        bounds.maxX = bounds.minX + width;\n\n        bounds.minY = (-anchor._y * height) - padding;\n        bounds.maxY = bounds.minY + height;\n    }\n\n    return;\n}\n","import type { Dict } from '../types';\n\n// A map of warning messages already fired\nconst warnings: Dict<boolean> = {};\n\n/**\n * deprecation name for version 8.0.0\n * @ignore\n */\nexport const v8_0_0 = '8.0.0';\n\n/**\n * Helper for warning developers about deprecated features & settings.\n * A stack track for warnings is given; useful for tracking-down where\n * deprecated methods/properties/classes are being used within the code.\n * @memberof utils\n * @ignore\n * @function deprecation\n * @param {string} version - The version where the feature became deprecated\n * @param {string} message - Message should include what is deprecated, where, and the new solution\n * @param {number} [ignoreDepth=3] - The number of steps to ignore at the top of the error stack\n *        this is mostly to ignore internal deprecation calls.\n */\nexport function deprecation(version: string, message: string, ignoreDepth = 3): void\n{\n    // Ignore duplicat\n    if (warnings[message])\n    {\n        return;\n    }\n\n    /* eslint-disable no-console */\n    let stack = new Error().stack;\n\n    // Handle IE < 10 and Safari < 6\n    if (typeof stack === 'undefined')\n    {\n        console.warn('PixiJS Deprecation Warning: ', `${message}\\nDeprecated since v${version}`);\n    }\n    else\n    {\n        // chop off the stack trace which includes PixiJS internal calls\n        stack = stack.split('\\n').splice(ignoreDepth).join('\\n');\n\n        if (console.groupCollapsed)\n        {\n            console.groupCollapsed(\n                '%cPixiJS Deprecation Warning: %c%s',\n                'color:#614108;background:#fffbe6',\n                'font-weight:normal;color:#614108;background:#fffbe6',\n                `${message}\\nDeprecated since v${version}`\n            );\n            console.warn(stack);\n            console.groupEnd();\n        }\n        else\n        {\n            console.warn('PixiJS Deprecation Warning: ', `${message}\\nDeprecated since v${version}`);\n            console.warn(stack);\n        }\n    }\n    /* eslint-enable no-console */\n\n    warnings[message] = true;\n}\n","let warnCount = 0;\nconst maxWarnings = 500;\n\n/**\n * Logs a PixiJS warning message to the console. Stops logging after 500 warnings have been logged.\n * @param args - The warning message(s) to log\n * @returns {void}\n * @memberof utils\n * @ignore\n */\nexport function warn(...args: any[])\n{\n    if (warnCount === maxWarnings) return;\n\n    warnCount++;\n\n    if (warnCount === maxWarnings)\n    {\n        console.warn('PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS.');\n    }\n    else\n    {\n        console.warn('PixiJS Warning: ', ...args);\n    }\n}\n","import { DOMAdapter } from '../environment/adapter';\n\nfunction assertPath(path: string)\n{\n    if (typeof path !== 'string')\n    {\n        throw new TypeError(`Path must be a string. Received ${JSON.stringify(path)}`);\n    }\n}\n\nfunction removeUrlParams(url: string): string\n{\n    const re = url.split('?')[0];\n\n    return re.split('#')[0];\n}\n\nfunction escapeRegExp(string: string)\n{\n    return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n}\n\nfunction replaceAll(str: string, find: string, replace: string)\n{\n    return str.replace(new RegExp(escapeRegExp(find), 'g'), replace);\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeStringPosix(path: string, allowAboveRoot: boolean)\n{\n    let res = '';\n    let lastSegmentLength = 0;\n    let lastSlash = -1;\n    let dots = 0;\n    let code = -1;\n\n    for (let i = 0; i <= path.length; ++i)\n    {\n        if (i < path.length)\n        {\n            code = path.charCodeAt(i);\n        }\n        else if (code === 47)\n        {\n            break;\n        }\n        else\n        {\n            code = 47;\n        }\n        if (code === 47)\n        {\n            if (lastSlash === i - 1 || dots === 1)\n            {\n                // NOOP\n            }\n            else if (lastSlash !== i - 1 && dots === 2)\n            {\n                if (\n                    res.length < 2\n                    || lastSegmentLength !== 2\n                    || res.charCodeAt(res.length - 1) !== 46\n                    || res.charCodeAt(res.length - 2) !== 46\n                )\n                {\n                    if (res.length > 2)\n                    {\n                        const lastSlashIndex = res.lastIndexOf('/');\n\n                        if (lastSlashIndex !== res.length - 1)\n                        {\n                            if (lastSlashIndex === -1)\n                            {\n                                res = '';\n                                lastSegmentLength = 0;\n                            }\n                            else\n                            {\n                                res = res.slice(0, lastSlashIndex);\n                                lastSegmentLength = res.length - 1 - res.lastIndexOf('/');\n                            }\n                            lastSlash = i;\n                            dots = 0;\n                            continue;\n                        }\n                    }\n                    else if (res.length === 2 || res.length === 1)\n                    {\n                        res = '';\n                        lastSegmentLength = 0;\n                        lastSlash = i;\n                        dots = 0;\n                        continue;\n                    }\n                }\n                if (allowAboveRoot)\n                {\n                    if (res.length > 0)\n                    { res += '/..'; }\n                    else\n                    { res = '..'; }\n                    lastSegmentLength = 2;\n                }\n            }\n            else\n            {\n                if (res.length > 0)\n                {\n                    res += `/${path.slice(lastSlash + 1, i)}`;\n                }\n                else\n                {\n                    res = path.slice(lastSlash + 1, i);\n                }\n                lastSegmentLength = i - lastSlash - 1;\n            }\n            lastSlash = i;\n            dots = 0;\n        }\n        else if (code === 46 && dots !== -1)\n        {\n            ++dots;\n        }\n        else\n        {\n            dots = -1;\n        }\n    }\n\n    return res;\n}\n\n/**\n * Path utilities for working with URLs and file paths in a cross-platform way.\n * All paths that are passed in will become normalized to have posix separators.\n * ```js\n * import { path } from 'pixi.js';\n *\n * path.normalize('http://www.example.com/foo/bar/../baz'); // http://www.example.com/foo/baz\n * ```\n * @memberof utils\n */\nexport interface Path\n{\n    /**\n     * Converts a path to posix format.\n     * @param path - The path to convert to posix\n     */\n    toPosix: (path: string) => string;\n    /**\n     * Checks if the path is a URL e.g. http://, https://\n     * @param path - The path to check\n     */\n    isUrl: (path: string) => boolean;\n    /**\n     * Checks if the path is a data URL\n     * @param path - The path to check\n     */\n    isDataUrl: (path: string) => boolean;\n    /**\n     * Checks if the path is a blob URL\n     * @param path - The path to check\n     */\n    isBlobUrl: (path: string) => boolean;\n    /**\n     * Checks if the path has a protocol e.g. http://, https://, file:///, data:, blob:, C:/\n     * This will return true for windows file paths\n     * @param path - The path to check\n     */\n    hasProtocol: (path: string) => boolean;\n    /**\n     * Returns the protocol of the path e.g. http://, https://, file:///, data:, blob:, C:/\n     * @param path - The path to get the protocol from\n     */\n    getProtocol: (path: string) => string;\n    /**\n     * Converts URL to an absolute path.\n     * When loading from a Web Worker, we must use absolute paths.\n     * If the URL is already absolute we return it as is\n     * If it's not, we convert it\n     * @param url - The URL to test\n     * @param customBaseUrl - The base URL to use\n     * @param customRootUrl - The root URL to use\n     */\n    toAbsolute: (url: string, baseUrl?: string, rootUrl?: string) => string;\n    /**\n     * Normalizes the given path, resolving '..' and '.' segments\n     * @param path - The path to normalize\n     */\n    normalize: (path: string) => string;\n    /**\n     * Determines if path is an absolute path.\n     * Absolute paths can be urls, data urls, or paths on disk\n     * @param path - The path to test\n     */\n    isAbsolute: (path: string) => boolean;\n    /**\n     * Joins all given path segments together using the platform-specific separator as a delimiter,\n     * then normalizes the resulting path\n     * @param segments - The segments of the path to join\n     */\n    join: (...paths: string[]) => string;\n    /**\n     * Returns the directory name of a path\n     * @param path - The path to parse\n     */\n    dirname: (path: string) => string;\n    /**\n     * Returns the root of the path e.g. /, C:/, file:///, http://domain.com/\n     * @param path - The path to parse\n     */\n    rootname: (path: string) => string;\n    /**\n     * Returns the last portion of a path\n     * @param path - The path to test\n     * @param ext - Optional extension to remove\n     */\n    basename: (path: string, ext?: string) => string;\n    /**\n     * Returns the extension of the path, from the last occurrence of the . (period) character to end of string in the last\n     * portion of the path. If there is no . in the last portion of the path, or if there are no . characters other than\n     * the first character of the basename of path, an empty string is returned.\n     * @param path - The path to parse\n     */\n    extname: (path: string) => string;\n    /**\n     * Parses a path into an object containing the 'root', `dir`, `base`, `ext`, and `name` properties.\n     * @param path - The path to parse\n     */\n    parse: (path: string) => { root?: string, dir?: string, base?: string, ext?: string, name?: string };\n    sep: string,\n    delimiter: string,\n    joinExtensions: string[],\n}\n\n/**\n * Path utilities for working with URLs and file paths in a cross-platform way.\n * All paths that are passed in will become normalized to have posix separators.\n * ```js\n * import { path } from 'pixi.js';\n *\n * path.normalize('http://www.example.com/foo/bar/../baz'); // http://www.example.com/foo/baz\n * ```\n * @see {@link utils.Path}\n * @memberof utils\n */\nexport const path: Path = {\n    /**\n     * Converts a path to posix format.\n     * @param path - The path to convert to posix\n     */\n    toPosix(path: string) { return replaceAll(path, '\\\\', '/'); },\n    /**\n     * Checks if the path is a URL e.g. http://, https://\n     * @param path - The path to check\n     */\n    isUrl(path: string) { return (/^https?:/).test(this.toPosix(path)); },\n    /**\n     * Checks if the path is a data URL\n     * @param path - The path to check\n     */\n    isDataUrl(path: string)\n    {\n        // eslint-disable-next-line max-len\n        return (/^data:([a-z]+\\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s<>]*?)$/i)\n            .test(path);\n    },\n    /**\n     * Checks if the path is a blob URL\n     * @param path - The path to check\n     */\n    isBlobUrl(path: string)\n    {\n        // Not necessary to have an exact regex to match the blob URLs\n        return path.startsWith('blob:');\n    },\n    /**\n     * Checks if the path has a protocol e.g. http://, https://, file:///, data:, blob:, C:/\n     * This will return true for windows file paths\n     * @param path - The path to check\n     */\n    hasProtocol(path: string) { return (/^[^/:]+:/).test(this.toPosix(path)); },\n    /**\n     * Returns the protocol of the path e.g. http://, https://, file:///, data:, blob:, C:/\n     * @param path - The path to get the protocol from\n     */\n    getProtocol(path: string)\n    {\n        assertPath(path);\n        path = this.toPosix(path);\n\n        const matchFile = (/^file:\\/\\/\\//).exec(path);\n\n        if (matchFile)\n        {\n            return matchFile[0];\n        }\n\n        const matchProtocol = (/^[^/:]+:\\/{0,2}/).exec(path);\n\n        if (matchProtocol)\n        {\n            return matchProtocol[0];\n        }\n\n        return '';\n    },\n\n    /**\n     * Converts URL to an absolute path.\n     * When loading from a Web Worker, we must use absolute paths.\n     * If the URL is already absolute we return it as is\n     * If it's not, we convert it\n     * @param url - The URL to test\n     * @param customBaseUrl - The base URL to use\n     * @param customRootUrl - The root URL to use\n     */\n    toAbsolute(url: string, customBaseUrl?: string, customRootUrl?: string)\n    {\n        assertPath(url);\n\n        if (this.isDataUrl(url) || this.isBlobUrl(url)) return url;\n\n        const baseUrl = removeUrlParams(this.toPosix(customBaseUrl ?? DOMAdapter.get().getBaseUrl()));\n        const rootUrl = removeUrlParams(this.toPosix(customRootUrl ?? this.rootname(baseUrl)));\n\n        url = this.toPosix(url);\n\n        // root relative url\n        if (url.startsWith('/'))\n        {\n            return path.join(rootUrl, url.slice(1));\n        }\n\n        const absolutePath = this.isAbsolute(url) ? url : this.join(baseUrl, url);\n\n        return absolutePath;\n    },\n\n    /**\n     * Normalizes the given path, resolving '..' and '.' segments\n     * @param path - The path to normalize\n     */\n    normalize(path: string)\n    {\n        assertPath(path);\n\n        if (path.length === 0) return '.';\n        if (this.isDataUrl(path) || this.isBlobUrl(path)) return path;\n\n        path = this.toPosix(path);\n\n        let protocol = '';\n        const isAbsolute = path.startsWith('/');\n\n        if (this.hasProtocol(path))\n        {\n            protocol = this.rootname(path);\n            path = path.slice(protocol.length);\n        }\n\n        const trailingSeparator = path.endsWith('/');\n\n        // Normalize the path\n        path = normalizeStringPosix(path, false);\n\n        if (path.length > 0 && trailingSeparator) path += '/';\n        if (isAbsolute) return `/${path}`;\n\n        return protocol + path;\n    },\n\n    /**\n     * Determines if path is an absolute path.\n     * Absolute paths can be urls, data urls, or paths on disk\n     * @param path - The path to test\n     */\n    isAbsolute(path: string)\n    {\n        assertPath(path);\n        path = this.toPosix(path);\n\n        if (this.hasProtocol(path)) return true;\n\n        return path.startsWith('/');\n    },\n\n    /**\n     * Joins all given path segments together using the platform-specific separator as a delimiter,\n     * then normalizes the resulting path\n     * @param segments - The segments of the path to join\n     */\n    join(...segments: string[])\n    {\n        if (segments.length === 0)\n        { return '.'; }\n        let joined;\n\n        for (let i = 0; i < segments.length; ++i)\n        {\n            const arg = segments[i];\n\n            assertPath(arg);\n            if (arg.length > 0)\n            {\n                if (joined === undefined) joined = arg;\n                else\n                {\n                    const prevArg = segments[i - 1] ?? '';\n\n                    if (this.joinExtensions.includes(this.extname(prevArg).toLowerCase()))\n                    {\n                        joined += `/../${arg}`;\n                    }\n                    else\n                    {\n                        joined += `/${arg}`;\n                    }\n                }\n            }\n        }\n        if (joined === undefined) { return '.'; }\n\n        return this.normalize(joined);\n    },\n\n    /**\n     * Returns the directory name of a path\n     * @param path - The path to parse\n     */\n    dirname(path: string)\n    {\n        assertPath(path);\n        if (path.length === 0) return '.';\n        path = this.toPosix(path);\n        let code = path.charCodeAt(0);\n        const hasRoot = code === 47;\n        let end = -1;\n        let matchedSlash = true;\n\n        const proto = this.getProtocol(path);\n        const origpath = path;\n\n        path = path.slice(proto.length);\n\n        for (let i = path.length - 1; i >= 1; --i)\n        {\n            code = path.charCodeAt(i);\n            if (code === 47)\n            {\n                if (!matchedSlash)\n                {\n                    end = i;\n                    break;\n                }\n            }\n            else\n            {\n                // We saw the first non-path separator\n                matchedSlash = false;\n            }\n        }\n\n        // if end is -1 and its a url then we need to add the path back\n        // eslint-disable-next-line no-nested-ternary\n        if (end === -1) return hasRoot ? '/' : this.isUrl(origpath) ? proto + path : proto;\n        if (hasRoot && end === 1) return '//';\n\n        return proto + path.slice(0, end);\n    },\n\n    /**\n     * Returns the root of the path e.g. /, C:/, file:///, http://domain.com/\n     * @param path - The path to parse\n     */\n    rootname(path: string)\n    {\n        assertPath(path);\n        path = this.toPosix(path);\n\n        let root = '';\n\n        if (path.startsWith('/')) root = '/';\n        else\n        {\n            root = this.getProtocol(path);\n        }\n\n        if (this.isUrl(path))\n        {\n            // need to find the first path separator\n            const index = path.indexOf('/', root.length);\n\n            if (index !== -1)\n            {\n                root = path.slice(0, index);\n            }\n            else root = path;\n\n            if (!root.endsWith('/')) root += '/';\n        }\n\n        return root;\n    },\n\n    /**\n     * Returns the last portion of a path\n     * @param path - The path to test\n     * @param ext - Optional extension to remove\n     */\n    basename(path: string, ext?: string)\n    {\n        assertPath(path);\n        if (ext) assertPath(ext);\n\n        path = removeUrlParams(this.toPosix(path));\n\n        let start = 0;\n        let end = -1;\n        let matchedSlash = true;\n        let i: number;\n\n        if (ext !== undefined && ext.length > 0 && ext.length <= path.length)\n        {\n            if (ext.length === path.length && ext === path) return '';\n            let extIdx = ext.length - 1;\n            let firstNonSlashEnd = -1;\n\n            for (i = path.length - 1; i >= 0; --i)\n            {\n                const code = path.charCodeAt(i);\n\n                if (code === 47)\n                {\n                    // If we reached a path separator that was not part of a set of path\n                    // separators at the end of the string, stop now\n                    if (!matchedSlash)\n                    {\n                        start = i + 1;\n                        break;\n                    }\n                }\n                else\n                {\n                    if (firstNonSlashEnd === -1)\n                    {\n                        // We saw the first non-path separator, remember this index in case\n                        // we need it if the extension ends up not matching\n                        matchedSlash = false;\n                        firstNonSlashEnd = i + 1;\n                    }\n                    if (extIdx >= 0)\n                    {\n                        // Try to match the explicit extension\n                        if (code === ext.charCodeAt(extIdx))\n                        {\n                            if (--extIdx === -1)\n                            {\n                                // We matched the extension, so mark this as the end of our path\n                                // component\n                                end = i;\n                            }\n                        }\n                        else\n                        {\n                            // Extension does not match, so our result is the entire path\n                            // component\n                            extIdx = -1;\n                            end = firstNonSlashEnd;\n                        }\n                    }\n                }\n            }\n\n            if (start === end) end = firstNonSlashEnd; else if (end === -1) end = path.length;\n\n            return path.slice(start, end);\n        }\n        for (i = path.length - 1; i >= 0; --i)\n        {\n            if (path.charCodeAt(i) === 47)\n            {\n                // If we reached a path separator that was not part of a set of path\n                // separators at the end of the string, stop now\n                if (!matchedSlash)\n                {\n                    start = i + 1;\n                    break;\n                }\n            }\n            else if (end === -1)\n            {\n                // We saw the first non-path separator, mark this as the end of our\n                // path component\n                matchedSlash = false;\n                end = i + 1;\n            }\n        }\n\n        if (end === -1) return '';\n\n        return path.slice(start, end);\n    },\n\n    /**\n     * Returns the extension of the path, from the last occurrence of the . (period) character to end of string in the last\n     * portion of the path. If there is no . in the last portion of the path, or if there are no . characters other than\n     * the first character of the basename of path, an empty string is returned.\n     * @param path - The path to parse\n     */\n    extname(path: string)\n    {\n        assertPath(path);\n        path = removeUrlParams(this.toPosix(path));\n\n        let startDot = -1;\n        let startPart = 0;\n        let end = -1;\n        let matchedSlash = true;\n        // Track the state of characters (if any) we see before our first dot and\n        // after any path separator we find\n        let preDotState = 0;\n\n        for (let i = path.length - 1; i >= 0; --i)\n        {\n            const code = path.charCodeAt(i);\n\n            if (code === 47)\n            {\n                // If we reached a path separator that was not part of a set of path\n                // separators at the end of the string, stop now\n                if (!matchedSlash)\n                {\n                    startPart = i + 1;\n                    break;\n                }\n                continue;\n            }\n            if (end === -1)\n            {\n                // We saw the first non-path separator, mark this as the end of our\n                // extension\n                matchedSlash = false;\n                end = i + 1;\n            }\n            if (code === 46)\n            {\n                // If this is our first dot, mark it as the start of our extension\n                if (startDot === -1) startDot = i;\n                else if (preDotState !== 1) preDotState = 1;\n            }\n            else if (startDot !== -1)\n            {\n                // We saw a non-dot and non-path separator before our dot, so we should\n                // have a good chance at having a non-empty extension\n                preDotState = -1;\n            }\n        }\n\n        if (\n            startDot === -1 || end === -1\n            // We saw a non-dot character immediately before the dot\n            || preDotState === 0\n            // The (right-most) trimmed path component is exactly '..'\n            // eslint-disable-next-line no-mixed-operators, no-mixed-operators/no-mixed-operators\n            || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1\n        )\n        {\n            return '';\n        }\n\n        return path.slice(startDot, end);\n    },\n\n    /**\n     * Parses a path into an object containing the 'root', `dir`, `base`, `ext`, and `name` properties.\n     * @param path - The path to parse\n     */\n    parse(path: string)\n    {\n        assertPath(path);\n\n        const ret = { root: '', dir: '', base: '', ext: '', name: '' };\n\n        if (path.length === 0) return ret;\n        path = removeUrlParams(this.toPosix(path));\n\n        let code = path.charCodeAt(0);\n        const isAbsolute = this.isAbsolute(path);\n        let start: number;\n        const protocol = '';\n\n        ret.root = this.rootname(path);\n\n        if (isAbsolute || this.hasProtocol(path))\n        {\n            start = 1;\n        }\n        else\n        {\n            start = 0;\n        }\n        let startDot = -1;\n        let startPart = 0;\n        let end = -1;\n        let matchedSlash = true;\n        let i = path.length - 1;\n\n        // Track the state of characters (if any) we see before our first dot and\n        // after any path separator we find\n        let preDotState = 0;\n\n        // Get non-dir info\n        for (; i >= start; --i)\n        {\n            code = path.charCodeAt(i);\n            if (code === 47)\n            {\n                // If we reached a path separator that was not part of a set of path\n                // separators at the end of the string, stop now\n                if (!matchedSlash)\n                {\n                    startPart = i + 1;\n                    break;\n                }\n                continue;\n            }\n            if (end === -1)\n            {\n                // We saw the first non-path separator, mark this as the end of our\n                // extension\n                matchedSlash = false;\n                end = i + 1;\n            }\n            if (code === 46)\n            {\n                // If this is our first dot, mark it as the start of our extension\n                if (startDot === -1) startDot = i;\n                else if (preDotState !== 1) preDotState = 1;\n            }\n            else if (startDot !== -1)\n            {\n                // We saw a non-dot and non-path separator before our dot, so we should\n                // have a good chance at having a non-empty extension\n                preDotState = -1;\n            }\n        }\n\n        if (\n            startDot === -1 || end === -1\n            // We saw a non-dot character immediately before the dot\n            || preDotState === 0\n            // The (right-most) trimmed path component is exactly '..'\n            // eslint-disable-next-line no-mixed-operators, no-mixed-operators/no-mixed-operators\n            || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1\n        )\n        {\n            if (end !== -1)\n            {\n                if (startPart === 0 && isAbsolute) ret.base = ret.name = path.slice(1, end);\n                else ret.base = ret.name = path.slice(startPart, end);\n            }\n        }\n        else\n        {\n            if (startPart === 0 && isAbsolute)\n            {\n                ret.name = path.slice(1, startDot);\n                ret.base = path.slice(1, end);\n            }\n            else\n            {\n                ret.name = path.slice(startPart, startDot);\n                ret.base = path.slice(startPart, end);\n            }\n            ret.ext = path.slice(startDot, end);\n        }\n\n        ret.dir = this.dirname(path);\n        if (protocol) ret.dir = protocol + ret.dir;\n\n        return ret;\n    },\n\n    sep: '/',\n    delimiter: ':',\n    joinExtensions: ['.html'],\n} as Path;\n","/**\n * A generic class for managing a pool of items.\n * @template T The type of items in the pool. Must implement {@link utils.PoolItem}.\n * @memberof utils\n */\nexport class Pool<T extends PoolItem>\n{\n    public readonly _classType: PoolItemConstructor<T>;\n    private readonly _pool: T[] = [];\n    private _count = 0;\n    private _index = 0;\n\n    /**\n     * Constructs a new Pool.\n     * @param ClassType - The constructor of the items in the pool.\n     * @param {number} [initialSize] - The initial size of the pool.\n     */\n    constructor(ClassType: PoolItemConstructor<T>, initialSize?: number)\n    {\n        this._classType = ClassType;\n\n        if (initialSize)\n        {\n            this.prepopulate(initialSize);\n        }\n    }\n\n    /**\n     * Prepopulates the pool with a given number of items.\n     * @param total - The number of items to add to the pool.\n     */\n    public prepopulate(total: number): void\n    {\n        for (let i = 0; i < total; i++)\n        {\n            this._pool[this._index++] = new this._classType();\n        }\n\n        this._count += total;\n    }\n\n    /**\n     * Gets an item from the pool. Calls the item's `init` method if it exists.\n     * If there are no items left in the pool, a new one will be created.\n     * @param {unknown} [data] - Optional data to pass to the item's constructor.\n     * @returns {T} The item from the pool.\n     */\n    public get(data?: unknown): T\n    {\n        let item;\n\n        if (this._index > 0)\n        {\n            item = this._pool[--this._index];\n        }\n        else\n        {\n            item = new this._classType();\n        }\n\n        item.init?.(data);\n\n        return item;\n    }\n\n    /**\n     * Returns an item to the pool. Calls the item's `reset` method if it exists.\n     * @param {T} item - The item to return to the pool.\n     */\n    public return(item: T): void\n    {\n        item.reset?.();\n\n        this._pool[this._index++] = item;\n    }\n\n    /**\n     * Gets the number of items in the pool.\n     * @readonly\n     * @member {number}\n     */\n    get totalSize(): number\n    {\n        return this._count;\n    }\n\n    /**\n     * Gets the number of items in the pool that are free to use without needing to create more.\n     * @readonly\n     * @member {number}\n     */\n    get totalFree(): number\n    {\n        return this._index;\n    }\n\n    /**\n     * Gets the number of items in the pool that are currently in use.\n     * @readonly\n     * @member {number}\n     */\n    get totalUsed(): number\n    {\n        return this._count - this._index;\n    }\n}\n\n/**\n * An object that can be stored in a {@link utils.Pool}.\n * @memberof utils\n */\nexport type PoolItem = {\n    init?: (data?: any) => void;\n    reset?: () => void;\n    [key: string]: any;\n};\n\n/**\n * The constructor of an object that can be stored in a {@link utils.Pool}.\n * @typeParam K - The type of the object that can be stored in a {@link utils.Pool}.\n * @memberof utils\n */\nexport type PoolItemConstructor<K extends PoolItem> = new () => K;\n","import { Pool } from './Pool';\n\nimport type { PoolItem, PoolItemConstructor } from './Pool';\n\n/**\n * A type alias for a constructor of a Pool.\n * @template T The type of items in the pool. Must extend PoolItem.\n * @memberof utils\n */\nexport type PoolConstructor<T extends PoolItem> = new () => Pool<T>;\n\n/**\n * A group of pools that can be used to store objects of different types.\n * @memberof utils\n */\nexport class PoolGroupClass\n{\n    /**\n     * A map to store the pools by their class type.\n     * @private\n     */\n    private readonly _poolsByClass: Map<PoolItemConstructor<PoolItem>, Pool<PoolItem>> = new Map();\n\n    /**\n     * Prepopulates a specific pool with a given number of items.\n     * @template T The type of items in the pool. Must extend PoolItem.\n     * @param {PoolItemConstructor<T>} Class - The constructor of the items in the pool.\n     * @param {number} total - The number of items to add to the pool.\n     */\n    public prepopulate<T extends PoolItem>(Class: PoolItemConstructor<T>, total: number): void\n    {\n        const classPool = this.getPool(Class);\n\n        classPool.prepopulate(total);\n    }\n\n    /**\n     * Gets an item from a specific pool.\n     * @template T The type of items in the pool. Must extend PoolItem.\n     * @param {PoolItemConstructor<T>} Class - The constructor of the items in the pool.\n     * @param {unknown} [data] - Optional data to pass to the item's constructor.\n     * @returns {T} The item from the pool.\n     */\n    public get<T extends PoolItem>(Class: PoolItemConstructor<T>, data?: unknown): T\n    {\n        const pool = this.getPool(Class);\n\n        return pool.get(data) as T;\n    }\n\n    /**\n     * Returns an item to its respective pool.\n     * @param {PoolItem} item - The item to return to the pool.\n     */\n    public return(item: PoolItem): void\n    {\n        const pool = this.getPool(item.constructor as PoolItemConstructor<PoolItem>);\n\n        pool.return(item);\n    }\n\n    /**\n     * Gets a specific pool based on the class type.\n     * @template T The type of items in the pool. Must extend PoolItem.\n     * @param {PoolItemConstructor<T>} ClassType - The constructor of the items in the pool.\n     * @returns {Pool<T>} The pool of the given class type.\n     */\n    public getPool<T extends PoolItem>(ClassType: PoolItemConstructor<T>): Pool<T>\n    {\n        if (!this._poolsByClass.has(ClassType))\n        {\n            this._poolsByClass.set(ClassType, new Pool(ClassType));\n        }\n\n        return this._poolsByClass.get(ClassType) as Pool<T>;\n    }\n\n    /** gets the usage stats of each pool in the system */\n    public stats(): Record<string, {free: number; used: number; size: number}>\n    {\n        const stats = {} as Record<string, {free: number; used: number; size: number}>;\n\n        this._poolsByClass.forEach((pool) =>\n        {\n            // TODO: maybe we should allow the name to be set when `createEntity` is called\n            const name = stats[pool._classType.name]\n                ? pool._classType.name + (pool._classType as any).ID : pool._classType.name;\n\n            stats[name] = {\n                free: pool.totalFree,\n                used: pool.totalUsed,\n                size: pool.totalSize,\n            };\n        });\n\n        return stats;\n    }\n}\n\nexport const BigPool = new PoolGroupClass();\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + {\"83\":\"e86d40de\",\"90\":\"76be0158\",\"258\":\"01213f59\",\"298\":\"1d98bf52\",\"372\":\"73d56d18\",\"627\":\"122f2c6c\",\"929\":\"85e46c61\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"game-dev-assessment:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/rps-spinbattle/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkgame_dev_assessment\"] = self[\"webpackChunkgame_dev_assessment\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","import IRenderer from \"../Interfaces/IRenderer\";\r\n\r\n// root class of all types\r\nexport default abstract class BaseObject {\r\n    // dependencies\r\n    public readonly Renderer: IRenderer;\r\n\r\n    // required methods in implementations\r\n    public abstract Update(deltaTime: number): void;\r\n    public abstract Dispose(): void;\r\n\r\n    // initialization\r\n    public constructor(renderer: IRenderer) {\r\n        this.Renderer = renderer;\r\n    }\r\n}\r\n","import IRenderer from \"../Interfaces/IRenderer\";\r\nimport BaseObject from \"./BaseObject\";\r\n\r\n// base class for view types\r\nexport default abstract class Component extends BaseObject {\r\n    // protected members \r\n    protected _id: string;\r\n\r\n    // required methods in implementations\r\n    public abstract Transform(x: number, y: number, width: number, height: number): void;\r\n\r\n    // initialization\r\n    public constructor(renderer: IRenderer, id: string) {\r\n        super(renderer);\r\n        this._id = id;\r\n    }\r\n}","import IGoContainer from \"../Interfaces/IGoContainer\";\r\nimport IRenderer from \"../Interfaces/IRenderer\";\r\nimport Component from \"./Component\";\r\n\r\n// base class for container types\r\nexport default abstract class GameObject extends Component {\r\n    // protected members \r\n    protected _container?: IGoContainer;\r\n    protected _disabled: boolean;\r\n\r\n    // properties\r\n    public get Disabled(): boolean { \r\n        return this._disabled; \r\n    }\r\n    public set Disabled(value: boolean) { \r\n        this._disabled = value;\r\n        if(!this._container) return;\r\n        this._container.tint = value ? 0xbbbbbb : 0xffffff;\r\n    }\r\n    public get GoContainer(): IGoContainer | undefined { \r\n        return this._container; \r\n    }\r\n\r\n    // initialization\r\n    public constructor(renderer: IRenderer, id: string) {\r\n        super(renderer, id);\r\n        this._container = undefined;\r\n        this._disabled = false;\r\n    }\r\n\r\n    // abstract implementations\r\n    public Transform(x: number, y: number, width: number, height: number): void {\r\n        if(!this._container) return;\r\n        this._container.width = width;\r\n        this._container.height = height;\r\n        this._container.x = x;\r\n        this._container.y = y;\r\n    } \r\n\r\n    public Dispose(): void {\r\n        if(!this._container) return;\r\n        this._container = undefined;\r\n        this.Renderer.Remove(this._id);\r\n    }\r\n\r\n    // public methods\r\n    public Hide(): void {\r\n        if(!this._container) return;\r\n        this._container.visible = false;\r\n    }\r\n\r\n    public Show(): void {\r\n        if(!this._container) return;\r\n        this._container.visible = true;\r\n    }\r\n}","import IRenderer from \"../Interfaces/IRenderer\";\r\nimport GameObject from \"../Abstracts/GameObject\";\r\n\r\n// display an interactive button \r\nexport default class GoButton extends GameObject {\r\n    // constants\r\n    private readonly _pressedSize: number = 0.9;\r\n    private readonly _pressedFrames: number = 3;\r\n\r\n    // private members \r\n    private _pressed: number = 0;\r\n    private _transform?: [x: number, y: number, w: number, h:number];\r\n    private _pressedHandler?: () => void;\r\n\r\n    // initialization\r\n    public constructor(renderer: IRenderer, id: string, asset: string, pressHandler: () => void) {\r\n        super(renderer, id);\r\n        this._container = renderer.StageSpriteButton(this._id, asset, () =>  { \r\n            if (!this._container) return; \r\n            if (this._pressed !== 0) return;\r\n            if (this._disabled) return;\r\n            this._transform = [this._container.x, this._container.y, this._container.width, this._container.height];\r\n            this._pressed = this._pressedFrames; \r\n            this._pressedHandler = pressHandler;\r\n        });\r\n    }\r\n    \r\n    // abstract implementations\r\n    public Update(deltaTime: number): void {\r\n        if (!this._container) return;\r\n        if (this._pressed !== 0) {\r\n            if (this._pressed === 1) {\r\n                this._pressed = 0;\r\n                if (this._transform) {\r\n                    this.Transform(this._transform[0], this._transform[1], this._transform[2], this._transform[3]);\r\n                    if (this._pressedHandler) {\r\n                        this._pressedHandler(); \r\n                    }\r\n                }\r\n                return;\r\n            }\r\n            const w: number = this._container.width * this._pressedSize * deltaTime;\r\n            const h: number = this._container.height * this._pressedSize * deltaTime;\r\n            const x: number = this._container.x + (this._container.width - w) / 2;\r\n            const y: number = this._container.y + (this._container.height - h) / 2;\r\n            this.Transform(x, y, w, h);\r\n            this._pressed--;\r\n        }\r\n    }\r\n}","import IRenderer from \"../Interfaces/IRenderer\";\r\nimport GameObject from \"../Abstracts/GameObject\";\r\n\r\n// display an animating sprite\r\nexport default class GoImage extends GameObject {\r\n    // constants\r\n    private readonly _maxSize: number = 1.05;\r\n    private readonly _minSize: number = 0.95;\r\n    private readonly _velocityStart: number = 0.01;\r\n    private readonly _fade: number = 0.1;\r\n\r\n    // private members\r\n    private _velocity: number;\r\n    private _speed: number;\r\n    private _orgWidth: number;\r\n    private _orgHeight: number;\r\n    private _pivotX: number;\r\n    private _pivotY: number;\r\n    private _hide: boolean;\r\n    private _factor: number;\r\n\r\n    // initialization\r\n    public constructor(renderer: IRenderer, id: string, asset: string, speed: number) {\r\n        super(renderer, id);\r\n        this._container = renderer.StageSprite(this._id, asset);\r\n\r\n        this._orgWidth = this._container.width;\r\n        this._orgHeight = this._container.height;\r\n        this._pivotX = this._container.x + this._orgWidth / 2;\r\n        this._pivotY = this._container.y + this._orgHeight / 2;\r\n        this._velocity = this._velocityStart;\r\n        this._speed = speed;\r\n        this._hide = false;\r\n        this._factor = 1;\r\n    }\r\n\r\n    // abstract implementations\r\n    public Update(deltaTime: number): void {\r\n        if (!this._container) return;\r\n        if (!this._container.visible) return;\r\n\r\n        this._container.width = this._orgWidth * this._factor;\r\n        this._container.height = this._orgHeight * this._factor;\r\n        this._container.x = this._pivotX - this._container.width / 2;\r\n        this._container.y = this._pivotY - this._container.height / 2;\r\n\r\n        this._factor += this._velocity * this._speed * deltaTime;\r\n        if (this._factor > this._maxSize) {\r\n            this._factor = this._maxSize;\r\n            this._velocity = -this._velocity;\r\n        }\r\n        else if(this._factor < this._minSize) {\r\n            this._factor = this._minSize;\r\n            this._velocity = -this._velocity;\r\n        }\r\n\r\n        if (this._hide) {\r\n            const alpha = this._container.alpha - this._fade * deltaTime;\r\n            this._container.alpha = alpha > 0 ? alpha : 0;\r\n            if (this._container.alpha === 0) {\r\n                this._container.visible = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    // base overrides\r\n    public Transform(x: number, y: number, width: number, height: number): void {\r\n        super.Transform(x, y, width, height);\r\n        this._orgWidth = width;\r\n        this._orgHeight = height;\r\n        this._pivotX = x + width / 2;\r\n        this._pivotY = y + height / 2;\r\n    }\r\n\r\n    public Hide(): void {\r\n        this._hide = true;\r\n    }\r\n\r\n    public Show(): void {\r\n        this._hide = false;\r\n        if (!this._container) return;\r\n        this._container.alpha = 1;\r\n        this._container.visible = true;\r\n    }\r\n}\r\n","import IConfig from \"../Interfaces/IConfig\";\r\nimport IRenderer from \"../Interfaces/IRenderer\";\r\nimport BaseObject from \"./BaseObject\";\r\n\r\n// base class for manager types\r\nexport default abstract class Manager extends BaseObject {\r\n    // dependencies\r\n    public readonly Config: IConfig;\r\n\r\n    // required methods in implementations\r\n    public abstract UpdateLayout(scaleX: number, scaleY: number, canvasWidth: number, canvasHeight: number, portrait: boolean): void;\r\n    public abstract DisableInteraction(): void;\r\n    public abstract EnableInteraction(): void;\r\n\r\n    // initialization\r\n    public constructor(config: IConfig, renderer: IRenderer) {\r\n        super(renderer);\r\n        this.Config = config;\r\n    }\r\n\r\n    // helpers\r\n    protected static AnchorTiledCenterMiddle(canvasWidth: number, canvasHeight: number, tileSize: number, tileScale: number): [x: number, y: number, w: number, h: number] {\r\n        const ts: number = tileSize * tileScale;\r\n        const countX: number = Math.ceil(canvasWidth / ts);\r\n        const countY = Math.ceil(canvasHeight / ts);\r\n        const w: number = countX * ts;\r\n        const h: number = countY * ts;\r\n        const x: number = (canvasWidth - w) / 2;\r\n        const y: number = (canvasHeight - h) / 2;\r\n        return [x, y, w, h];\r\n    }\r\n\r\n    protected static AnchorObjectCenterTop(canvasWidth: number, width: number, height: number, scale: number, offsetX: number, offsetY: number): [x: number, y: number, w: number, h: number] {\r\n        const w: number = width * scale;\r\n        const h: number = height * scale;\r\n        const x: number = canvasWidth / 2 - w / 2 + offsetX;\r\n        const y: number = offsetY * scale;\r\n        return [x, y, w, h];\r\n    }\r\n\r\n    protected static AnchorObjectCenterMiddle(canvasWidth: number, canvasHeight: number, width: number, height: number, scale: number, offsetX: number, offsetY: number): [x: number, y: number, w: number, h: number] {\r\n        const w: number = width * scale;\r\n        const h: number = height * scale;\r\n        const x: number = canvasWidth / 2 - w / 2 + offsetX * scale;\r\n        const y: number = canvasHeight / 2 - h / 2 + offsetY * scale;\r\n        return [x, y, w, h];\r\n    }\r\n\r\n    protected static AnchorObjectCenterBottom(canvasWidth: number, canvasHeight: number, width: number, height: number, scale: number, offsetX: number, offsetY: number): [x: number, y: number, w: number, h: number] {\r\n        const w: number = width * scale;\r\n        const h: number = height * scale;\r\n        const x: number = canvasWidth / 2 - w / 2 + offsetX * scale;\r\n        const y: number = canvasHeight - h + offsetY * scale;\r\n        return [x, y, w, h];\r\n    }\r\n\r\n    protected static AnchorObjectRightBottom(canvasWidth: number, canvasHeight: number, width: number, height: number, scale: number, offsetX: number, offsetY: number): [x: number, y: number, w: number, h: number] {\r\n        const w: number = width * scale;\r\n        const h: number = height * scale;\r\n        const x: number = canvasWidth - w + offsetX * scale;\r\n        const y: number = canvasHeight - h + offsetY * scale;\r\n        return [x, y, w, h];\r\n    }\r\n\r\n    protected static AnchorObjectRightTop(canvasWidth: number, width: number, height: number, scale: number, offsetX: number, offsetY: number): [x: number, y: number, w: number, h: number] {\r\n        const w: number = width * scale;\r\n        const h: number = height * scale;\r\n        const x: number = canvasWidth - w + offsetX * scale;\r\n        const y: number = offsetY * scale;\r\n        return [x, y, w, h];\r\n    }\r\n\r\n    protected static AnchorObjectLeftTop(width: number, height: number, scale: number, offsetX: number, offsetY: number): [x: number, y: number, w: number, h: number] {\r\n        const w: number = width * scale;\r\n        const h: number = height * scale;\r\n        const x: number = offsetX * scale;\r\n        const y: number = offsetY * scale;\r\n        return [x, y, w, h];\r\n    }\r\n\r\n    protected static AnchorObjectLeftBottom(canvasHeight: number, width: number, height: number, scale: number, offsetX: number, offsetY: number): [x: number, y: number, w: number, h: number] {\r\n        const w: number = width * scale;\r\n        const h: number = height * scale;\r\n        const x: number = offsetX * scale;\r\n        const y: number = canvasHeight - h + offsetY * scale;\r\n        return [x, y, w, h];\r\n    }\r\n}","import IConfig from \"../Interfaces/IConfig\";\r\nimport IRenderer from \"../Interfaces/IRenderer\";\r\nimport GoButton from \"./GoButton\";\r\nimport GameObject from \"../Abstracts/GameObject\";\r\nimport GoImage from \"./GoImage\";\r\nimport Manager from \"../Abstracts/Manager\";\r\n\r\n// display menu graphics\r\nexport default class ViewMenu extends Manager {\r\n    // constants\r\n    private readonly _titleOffsetY: number = -100;\r\n    private readonly _buttonOffsetY: number = 276;\r\n    private readonly _buttonWidth: number = 512;\r\n    private readonly _buttonHeight: number = 128;\r\n    private readonly _titleSize: number = 512;\r\n    private readonly _titleSpeed: number = 0.1;\r\n\r\n    // private members\r\n    private readonly _title: GoImage;\r\n    private readonly _playButton: GameObject;\r\n\r\n    // initialization\r\n    public constructor(config: IConfig, renderer: IRenderer, playHandler: () => void) {\r\n        super(config, renderer);\r\n        this._playButton = new GoButton(this.Renderer, this.Config.SpriteButtonPlay, this.Config.SpriteButtonPlay, playHandler);\r\n        this._title = new GoImage(this.Renderer, this.Config.SpriteTitle, this.Config.SpriteTitle, this._titleSpeed);\r\n    }\r\n    \r\n    // abstract implementations\r\n    public DisableInteraction(): void {\r\n        this._playButton.Disabled = true;\r\n    }\r\n    \r\n    public EnableInteraction(): void {\r\n        this._playButton.Disabled = false;\r\n    }\r\n\r\n    public Update(deltaTime: number): void {\r\n        this._playButton.Update(deltaTime);\r\n        this._title.Update(deltaTime);\r\n    }\r\n\r\n    public Dispose(): void {\r\n        this._playButton.Dispose();\r\n        this._title.Dispose();\r\n    }\r\n\r\n    public UpdateLayout(scaleX: number, scaleY: number, canvasWidth: number, canvasHeight: number, portrait: boolean): void {\r\n        const scale: number = portrait ? scaleY : scaleX;\r\n        let xywh: [x: number, y: number, w: number, h: number];\r\n        \r\n        xywh = Manager.AnchorObjectCenterMiddle(canvasWidth, canvasHeight, this._buttonWidth, this._buttonHeight, scale, 0, this._buttonOffsetY);\r\n        this._playButton.Transform(xywh[0], xywh[1], xywh[2], xywh[3]);\r\n        \r\n        xywh = Manager.AnchorObjectCenterMiddle(canvasWidth, canvasHeight, this._titleSize, this._titleSize, scale, 0, this._titleOffsetY);\r\n        this._title.Transform(xywh[0], xywh[1], xywh[2], xywh[3]);\r\n    }\r\n}\r\n","import IConfig from \"../Interfaces/IConfig\";\r\nimport IRenderer from \"../Interfaces/IRenderer\";\r\nimport Manager from \"../Abstracts/Manager\";\r\nimport IGoContainer from \"../Interfaces/IGoContainer\";\r\n\r\n// display and animate a game background\r\nexport default class ViewBack extends Manager {\r\n    // constants\r\n    private readonly _alpha: number = 0.5;\r\n    private readonly _alphaVariation: number = 0.1;\r\n    private readonly _tileSize: number = 256;\r\n    private readonly _maxFlashFrames: number = 30;\r\n\r\n    // private members\r\n    private _tileContainer?: IGoContainer;\r\n    private _flashFrames: number;\r\n\r\n    // initialization\r\n    public constructor(config: IConfig, renderer: IRenderer) {\r\n        super(config, renderer);\r\n        this._tileContainer = renderer.StageSpriteRepeat(this.Config.SpriteBackTile, this.Config.SpriteBackTile, this.Config.ReferenceWidth, this.Config.ReferenceHeight);\r\n        this._tileContainer.alpha = this._alpha;\r\n        this._flashFrames = 0;\r\n    }\r\n\r\n    // abstract implementations\r\n    public DisableInteraction(): void {\r\n        if (!this._tileContainer) return;\r\n        this._flashFrames = 0;\r\n    }\r\n    \r\n    public EnableInteraction(): void {\r\n        if (!this._tileContainer) return;\r\n        this._flashFrames = this._maxFlashFrames;\r\n    }\r\n\r\n    public UpdateLayout(scaleX: number, scaleY: number, canvasWidth: number, canvasHeight: number, portrait: boolean): void {\r\n        if (!this._tileContainer) return;\r\n        const scale = portrait ? scaleY : scaleX;\r\n        const xywh = Manager.AnchorTiledCenterMiddle(canvasWidth, canvasHeight, this._tileSize, scale);\r\n        this._tileContainer = this.Renderer.RestageSpriteRepeat(this.Config.SpriteBackTile, xywh[2], xywh[3], scale);\r\n        this._tileContainer.x = xywh[0];\r\n        this._tileContainer.y = xywh[1];\r\n        this._tileContainer.alpha = this._alpha;\r\n    }\r\n\r\n    public Update(deltaTime: number): void {\r\n        if (!this._tileContainer) return; \r\n        if (this._flashFrames === 0) return;\r\n        const sign = Math.random() >= 0.5 ? -1 : 1;\r\n        this._tileContainer.alpha = this._alpha + Math.random() * this._alphaVariation * deltaTime * sign;\r\n        this._flashFrames--;\r\n    }\r\n\r\n    public Dispose(): void {\r\n        if (!this._tileContainer) return;\r\n        this.Renderer.Remove(this.Config.SpriteBackTile);\r\n        this._tileContainer = undefined;\r\n    }\r\n}","import IRenderer from \"../Interfaces/IRenderer\";\r\nimport GameObject from \"../Abstracts/GameObject\";\r\n\r\n// display text on screen \r\nexport default class GoText extends GameObject {\r\n    // constants\r\n    private readonly _fade: number = 0.2;\r\n\r\n    // private members\r\n    private _textHeight: number;\r\n    private _textWidth: number;\r\n    private _hide: boolean;\r\n\r\n    // public properties\r\n    public get TextHeight(): number { \r\n        return this._textHeight; \r\n    }\r\n    public get TextWidth(): number { \r\n        return this._textWidth; \r\n    }\r\n    public set Text(value: string) { \r\n        this.Renderer.UpdateText(this._id, value); \r\n    }\r\n\r\n    // initialization\r\n    public constructor(renderer: IRenderer, id: string, text: string, fonts: Array<string>, size:number, color:number, strokeColor:number, strokeSize:number) {\r\n        super(renderer, id);\r\n        this._container = this.Renderer.StageText(this._id, text, fonts, size, color, strokeColor, strokeSize, true);\r\n        this._textWidth = this._container.width;\r\n        this._textHeight = this._container.height;\r\n        this._hide = false;\r\n    }\r\n\r\n    // abstract implementations\r\n    public Update(deltaTime: number): void {\r\n        if (!this._container) return;\r\n        if (!this._container.visible) return;\r\n        if (!this._hide) return;\r\n\r\n        const alpha = this._container.alpha - this._fade * deltaTime;\r\n        this._container.alpha = alpha > 0 ? alpha : 0;\r\n        if (this._container.alpha === 0) {\r\n            this._container.visible = false;\r\n        }\r\n    }\r\n\r\n    // base overrides\r\n    public Hide(): void {\r\n        this._hide = true;\r\n    }\r\n\r\n    public Show(): void {\r\n        this._hide = false;\r\n        if (!this._container) return;\r\n        this._container.alpha = 1;\r\n        this._container.visible = true;\r\n    }\r\n}","import Component from \"../Abstracts/Component\";\r\nimport IGoContainer from \"../Interfaces/IGoContainer\";\r\nimport IRenderer from \"../Interfaces/IRenderer\";\r\n\r\n// display a slot machine reel\r\nexport default class CompReel extends Component {\r\n    // constants\r\n    private readonly _minSpinFrames: number = 180;\r\n    private readonly _spinVelocityStart: number = 0.01;\r\n    private readonly _spinVelocityInc: number = 0.01;\r\n    private readonly _spinVelocityMax: number = 0.5;\r\n    private readonly _spinBounceMax: number = 0.025;\r\n    private readonly _bounceFrames: number = 15;\r\n\r\n    // private members\r\n    private readonly _maskId: string;\r\n    private readonly _symbolData: Map<string, string>;\r\n    private readonly _reelData: Array<string>;\r\n    private readonly _symbols: Array<IGoContainer>;\r\n    private _endingSpin: boolean;\r\n    private _spinVelocity: number;\r\n    private _spinFrames: number;\r\n    private _bounce: boolean;  \r\n    private _stopIndex: number;\r\n    private _visibleSymbols: number;\r\n    private _maskWidth: number;\r\n    private _maskHeight: number;\r\n    private _endCallback?: () => void;\r\n    \r\n    // public properties\r\n    public get IsSpinning(): boolean { \r\n        return this._spinVelocity > 0; \r\n    }\r\n    public get IsEnding(): boolean { \r\n        return this._endingSpin; \r\n    }\r\n    public set StopIndex(value: number) {\r\n        this._stopIndex = value;\r\n    }\r\n\r\n    // initialization\r\n    public constructor(renderer: IRenderer, id: string, reelData: Array<string>, symbolsData: Map<string, string>, stopIndex: number, width: number, height: number) {\r\n        super(renderer, id);\r\n        \r\n        this._maskId = id;\r\n        this._symbols = new Array<IGoContainer>();\r\n        this._reelData = reelData.concat(reelData); // double the symbols for infinite scrolling\r\n        this._symbolData = symbolsData;\r\n        this._stopIndex = stopIndex;\r\n        this._spinVelocity = 0;\r\n        this._spinFrames = 0;\r\n        this._bounce = false;\r\n        this._endingSpin = false;\r\n        this._maskWidth = width;\r\n        this._maskHeight = height;\r\n        this._endCallback = undefined;\r\n        \r\n        this._visibleSymbols = Math.ceil(height / width);\r\n        this.Renderer.StageMask(this._maskId, 0, 0, width, height);\r\n        \r\n        this.PopulateSymbols();\r\n        this.PlaceSymbols(this._stopIndex);\r\n    }\r\n    \r\n    // abstract implementations\r\n    public Update(deltaTime: number): void {\r\n        const symSize: number = this.GetSymbolSize(); \r\n        this.Bounce(deltaTime, symSize);\r\n\r\n        if (this._spinVelocity === 0) return;\r\n\r\n        this._spinFrames++;\r\n        const stopSymbol: IGoContainer = this._symbols[this._stopIndex];\r\n        const stopEntering = stopSymbol.y <= 0;\r\n\r\n        this._spinVelocity += this._spinVelocityInc * deltaTime; \r\n        if (this._spinVelocity > this._spinVelocityMax) {\r\n            this._spinVelocity = this._spinVelocityMax;\r\n        }\r\n \r\n        let change: number = symSize * this._spinVelocity * deltaTime;\r\n        let diff = stopSymbol.y < 0 ? Math.abs(stopSymbol.y) : change;\r\n        this.MoveSymbols(change < diff ? change : diff, symSize);\r\n\r\n        const stopEntered = stopSymbol.y >= 0;\r\n        if (stopEntering && stopEntered) {\r\n            if (this._spinFrames > this._minSpinFrames && this._endingSpin) {\r\n                this._spinVelocity = 0;\r\n                this._spinFrames = 0;\r\n                this._endingSpin = false;\r\n                this.PlaceSymbols(this._stopIndex);\r\n                if (this._endCallback) { \r\n                    this._endCallback(); \r\n                }\r\n                this._bounce = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    public Transform(x: number, y: number, width: number, height: number): void {\r\n        this._maskWidth = width;\r\n        this._maskHeight = height;\r\n        this.Renderer.MoveMask(this._maskId, x, y, width, height);\r\n        this.PlaceSymbols(this._stopIndex);\r\n    }\r\n\r\n    public Dispose(): void {\r\n        this.Renderer.Remove(this._maskId);\r\n    }\r\n\r\n    // public methods \r\n    public StartSpin(): void {\r\n        if (this._endingSpin) return;\r\n        this._spinVelocity = this._spinVelocityStart;\r\n        this._spinFrames = 0;\r\n    }\r\n\r\n    public EndSpin(stop: number, callback: () => void): void { \r\n        if (this._endingSpin) return;\r\n        this._stopIndex = stop;\r\n        this._endingSpin = true;\r\n        this._endCallback = callback;\r\n    }\r\n\r\n    // helpers\r\n    private GetSymbolSize(): number {\r\n        return this._maskWidth; \r\n    }\r\n\r\n    private GetSymbolsMinY(): number {\r\n        let pos:number = this._symbols[0].y;\r\n        this._symbols.forEach((container) => {\r\n            if (container.y < pos) pos = container.y;\r\n        }); \r\n        return pos;\r\n    }\r\n\r\n    private PopulateSymbols(): void {\r\n        this._reelData.forEach((symbolId) => {\r\n            const symbolAsset = this._symbolData.get(symbolId);\r\n            if (symbolAsset) {\r\n                const container: IGoContainer | undefined = this.Renderer.NestSprite(symbolAsset, this._maskId);\r\n                if (container) this._symbols.push(container);\r\n            }\r\n        });\r\n    }\r\n\r\n    private PlaceSymbols(stop: number): void {\r\n        const symSize: number = this.GetSymbolSize();  \r\n        const stopOffset: number = stop * symSize * -1; \r\n        // placement starts at stopOffset \r\n        this._symbols.forEach((container, index) => { \r\n            container.width = symSize;\r\n            container.height = symSize;\r\n            container.x = 0;\r\n            container.y = stopOffset + symSize * index;\r\n        });\r\n        this.MoveSymbols(0, symSize);\r\n    }\r\n\r\n    private MoveSymbols(change: number, symSize: number): void {\r\n        const edgeBottom = this._maskHeight + symSize * this._visibleSymbols;\r\n        let minPosY = this.GetSymbolsMinY();\r\n        this._symbols.forEach((container) => { \r\n            container.y += change; \r\n            if (container.y > edgeBottom) {\r\n                minPosY -= symSize;\r\n                container.y = minPosY + change;\r\n            }\r\n        });\r\n    }\r\n\r\n    private Bounce(deltaTime: number, symSize: number): void {\r\n        if (!this._bounce) return;\r\n\r\n        this._spinFrames++;\r\n        if (this._spinFrames >= this._bounceFrames) {\r\n            this._bounce = false;\r\n            this._spinFrames = 0;\r\n            if (this._symbols[this._stopIndex].y !== 0) {\r\n                this.MoveSymbols(-this._symbols[this._stopIndex].y, symSize);\r\n            }\r\n            return;\r\n        }\r\n\r\n        const bounceDirection = Math.random() >= 0.5 ? -1 : 1;\r\n        const bounce = symSize * Math.random() * this._spinBounceMax * bounceDirection * deltaTime;\r\n        this.MoveSymbols(bounce, symSize);\r\n    }\r\n}\r\n","import IRenderer from \"../Interfaces/IRenderer\";\r\nimport GameObject from \"../Abstracts/GameObject\";\r\nimport IGoContainer from \"../Interfaces/IGoContainer\";\r\n\r\n// display a slot machine win box\r\nexport default class GoWinBox extends GameObject {\r\n    // constants\r\n    private readonly _fillId: string = \"Fill\";\r\n    private readonly _fadeMinFactor: number = 0.5;\r\n    private readonly _fadeSpeed: number = 0.025;\r\n    private readonly _lineAlphaMultiplier: number = 3;\r\n\r\n    // private members\r\n    private readonly _fillAlpha: number;\r\n    private readonly _flash: boolean;\r\n    private _fill?: IGoContainer;\r\n    private _cell: [x: number, y: number];\r\n\r\n    // properties\r\n    public set Cell(value: [x: number, y: number]) {\r\n        this._cell = value;\r\n    }\r\n    public get Cell(): [x: number, y: number] {\r\n        return this._cell;\r\n    }\r\n\r\n    // initialization\r\n    public constructor(renderer: IRenderer, id: string, size: number, lineSize: number, lineColor: number, fillColor: number, fillAlpha: number, flash: boolean) {\r\n        super(renderer, id);\r\n\r\n        this._fillAlpha = fillAlpha;\r\n        this._flash = flash;\r\n        this._fill = this.Renderer.StageRectangle(this.GetFillId(), size, size, fillColor, this._fillAlpha);\r\n        \r\n        const lineAlpha: number = this._fillAlpha * this._lineAlphaMultiplier;\r\n        this._container = this.Renderer.StageFrame(this._id, size, size, lineSize, lineColor, lineAlpha > 1 ? 1 : lineAlpha);\r\n        this._cell = [0, 0]; \r\n    }\r\n\r\n    // public methods\r\n    public SetPosition(x: number, y: number): void {\r\n        if(this._container) {\r\n            this._container.x = x;\r\n            this._container.y = y;\r\n        }\r\n        if (this._fill && this._fill) {\r\n            this._fill.x = x;\r\n            this._fill.y = y;\r\n        }\r\n    }\r\n\r\n    // abstract implementations\r\n    public Update(deltaTime: number): void {\r\n        if (!this._flash) return;\r\n        if (!this._fill) return;\r\n        this._fill.alpha -= this._fadeSpeed * deltaTime;\r\n        \r\n        const min = this._fillAlpha * this._fadeMinFactor;\r\n        if (this._fill.alpha <= min) {\r\n            this._fill.alpha = this._fillAlpha; \r\n        }\r\n    }\r\n\r\n    // base overrides\r\n    public Transform(x: number, y: number, width: number, height: number): void {\r\n        super.Transform(x, y, width, height);\r\n        if (this._fill) {\r\n            this._fill.x = x;\r\n            this._fill.y = y;\r\n            this._fill.width = width;\r\n            this._fill.height = height;\r\n        }\r\n    }\r\n\r\n    public Dispose(): void {\r\n        super.Dispose();\r\n        if (this._fill) {\r\n            this.Renderer.Remove(this.GetFillId());\r\n            this._fill = undefined;\r\n        }\r\n    }\r\n\r\n    // helpers\r\n    private GetFillId() {\r\n        return this._id + this._fillId;\r\n    }\r\n}\r\n","import Component from \"../Abstracts/Component\";\r\nimport IGoContainer from \"../Interfaces/IGoContainer\";\r\nimport IRenderer from \"../Interfaces/IRenderer\";\r\nimport CompReel from \"./CompReel\";\r\nimport GoWinBox from \"./GoWinBox\";\r\n\r\n// display a slot machine\r\nexport default class CompSlot extends Component {\r\n    // constants\r\n    private readonly _borderId: string = \"Border\";\r\n    private readonly _coverId: string = \"Cover\";\r\n    private readonly _reelId: string = \"Reel\";\r\n    private readonly _winBoxId: string = \"WinBox\";\r\n    private readonly _symbolSize: number = 128;\r\n    private readonly _colorCover: number = 0xffffff;\r\n    private readonly _colorBorder: number = 0x000000;\r\n    private readonly _alphaCover: number = 0.5\r\n    private readonly _alphaBorder: number = 1;\r\n    private readonly _sizeBorderLine: number = 6;\r\n\r\n    // private members\r\n    private readonly _border: IGoContainer;\r\n    private readonly _cover: IGoContainer;\r\n    private readonly _reels: Array<CompReel>;\r\n    private _machineHeight: number;\r\n    private _machineWidth: number;\r\n    private _machineRows: number;\r\n    private _borderWidth: number;\r\n    private _stops: Array<number>;\r\n    private _winBoxes: Array<GoWinBox>;\r\n    private _x: number;\r\n    private _y: number;\r\n\r\n    // public properties\r\n    public get MachineHeight(): number { \r\n        return this._machineHeight; \r\n    }\r\n    public get MachineWidth(): number { \r\n        return this._machineWidth; \r\n    }\r\n    public get IsSpinning(): boolean { \r\n        return this._reels.some(reel => reel.IsSpinning); \r\n    }\r\n    public get BorderWidthOriginal() { \r\n        return this._sizeBorderLine; \r\n    }\r\n    public set BorderWidth(value: number) { \r\n        this._borderWidth = value; \r\n    }\r\n\r\n    // initialization\r\n    public constructor(renderer: IRenderer, id: string, reelData: Array<Array<string>>, symbolsData: Map<string, string>, stops: Array<number>, rows: number) {\r\n        super(renderer, id);\r\n        this._machineRows = rows;\r\n        this._machineHeight = this._machineRows * this._symbolSize;\r\n        this._machineWidth = reelData.length * this._symbolSize;\r\n        this._borderWidth = this._sizeBorderLine;\r\n        this._stops = stops;\r\n        this._x = 0;\r\n        this._y = 0;\r\n        this._winBoxes = new Array<GoWinBox>();\r\n        \r\n        // reels\r\n        this._reels = new Array<CompReel>();\r\n        for (let i = 0; i < reelData.length; i++) {\r\n            const width = this._symbolSize;\r\n            const height = this._machineHeight;\r\n            const reelId = this.GetReelId(i);\r\n            const reel = new CompReel(this.Renderer, reelId, reelData[i], symbolsData, this._stops[i], width, height);\r\n            this._reels.push(reel);\r\n        }\r\n\r\n        // frame\r\n        this._cover = this.Renderer.StageRectangle(this.GetCCoverId(), this._machineWidth, this._machineHeight, this._colorCover, this._alphaCover);\r\n        this._border = this.Renderer.StageFrame(this.GetBorderId(), this._machineWidth, this._machineHeight, this._borderWidth, this._colorBorder, this._alphaBorder);\r\n    }\r\n    \r\n    // abstract implementations\r\n    public Update(deltaTime: number): void {\r\n        this._reels.forEach(reel => { reel.Update(deltaTime); });\r\n        this._winBoxes.forEach((box) => { box.Update(deltaTime); });\r\n    }\r\n    \r\n    public Transform(x: number, y: number, width: number, height: number): void {\r\n        this._machineWidth = width;\r\n        this._machineHeight = height;\r\n        this._reels.forEach((reel, i) => {\r\n            const w = Math.floor(this._machineHeight / this._machineRows);\r\n            const h = this._machineHeight;\r\n            reel.Transform(x + w * i, y, w, h); \r\n        });\r\n        this._winBoxes.forEach((box) => {\r\n            const size = Math.floor(this._machineHeight / this._machineRows);\r\n            const cell = box.Cell;\r\n            box.Transform(x + size * cell[0], y + size * cell[1], size, size); \r\n        });\r\n\r\n        this._x = x;\r\n        this._y = y;\r\n\r\n        this._border.x = x\r\n        this._border.y = y; \r\n        this._border.width = width + this._borderWidth; \r\n        this._border.height = height + this._borderWidth;\r\n        \r\n        this._cover.x = x;\r\n        this._cover.y = y;\r\n        this._cover.width = width;\r\n        this._cover.height = height;\r\n    }\r\n\r\n    public Dispose(): void {\r\n        this.Renderer.Remove(this._id);\r\n        this.Renderer.Remove(this.GetCCoverId());\r\n        this.Renderer.Remove(this.GetBorderId());\r\n        this._winBoxes.forEach((box) => { box.Dispose(); });\r\n        this._winBoxes.length = 0;\r\n        this._reels.forEach(reel => { reel.Dispose(); });\r\n        this._reels.length = 0;\r\n    }\r\n\r\n    // public methods \r\n    public StartSpin(): void {\r\n        this._cover.visible = false;\r\n        this._winBoxes.forEach((box) => { box.Dispose(); });\r\n        this._winBoxes.length = 0;\r\n        this._reels.forEach(reel => { reel.StartSpin(); });\r\n    }\r\n\r\n    public EndSpin(stops: Array<number>, callbackPerReel: (reel: number) => void): void { \r\n        this._stops = stops;\r\n        this.EndReelSpin(0, this._stops[0], callbackPerReel);\r\n    }\r\n\r\n    public ShowWinBoxes(winMatches: Array<[x:number, y:number]>, lineSize: number, lineColor: number, color: number, alpha: number, flash: boolean) {\r\n        const symSize: number = Math.floor(this._machineHeight / this._machineRows);\r\n        winMatches.forEach((match) => {\r\n            const id: string = `${this._id}_${this._winBoxId}${match[0]}_${match[1]}`; \r\n            const box: GoWinBox = new GoWinBox(this.Renderer, id, symSize, lineSize, lineColor, color, alpha, flash);\r\n            box.Cell = match;\r\n            box.SetPosition(this._x + symSize * match[0], this._y + symSize * match[1]);\r\n            this._winBoxes.push(box);\r\n        });\r\n    }\r\n\r\n    // helpers\r\n    private GetReelId(index: number): string {\r\n        return `${this._id}${this._reelId}${index}`;\r\n   }\r\n\r\n    private GetBorderId(): string {\r\n        return this._id + this._borderId;\r\n    }\r\n\r\n    private GetCCoverId(): string {\r\n        return this._id + this._coverId;\r\n    }\r\n\r\n    private EndReelSpin(reel: number, stop: number, callbackPerReel: (reel: number) => void) {\r\n        if (reel >= this._reels.length) return;\r\n        this._reels[reel].EndSpin(stop, () => {\r\n            callbackPerReel(reel);\r\n            this.EndReelSpin(reel+1, this._stops[reel+1], callbackPerReel);\r\n        });\r\n    }\r\n}\r\n","import IGoContainer from \"../Interfaces/IGoContainer\";\r\nimport IRenderer from \"../Interfaces/IRenderer\";\r\nimport GameObject from \"../Abstracts/GameObject\";\r\n\r\n// display a ui panel\r\nexport default class GoPanel extends GameObject {\r\n    // constants\r\n    private readonly _alphaStart: number = 0.95;\r\n    private readonly _alphaMin: number = 0.75;\r\n    private readonly _alphaMax: number = 1.0;\r\n    private readonly _alphaChange: number = 0.00125;\r\n\r\n    // private members\r\n    private _alphaDir: number;\r\n\r\n    // initialization\r\n    public constructor(renderer: IRenderer, id: string, width: number, height: number, color: number, alpha: number, lineSize: number, lineColor: number, lineAlpha: number) {\r\n        super(renderer, id);\r\n        this._alphaDir = -1;\r\n\r\n        this._container = this.Renderer.StageRectangle(this._id, width, height, color, alpha); \r\n        this._container.alpha = this._alphaStart;\r\n\r\n        let lines: IGoContainer | undefined = this.Renderer.NestRectangle(this._id, width, lineSize, lineColor, lineAlpha);\r\n        if (lines) lines.y = width - lineSize; \r\n        this.Renderer.NestRectangle(this._id, width, lineSize, lineColor, lineAlpha);\r\n    }\r\n\r\n    // abstract implementations\r\n    public Update(deltaTime: number): void {\r\n        if (!this._container) return;\r\n        this._container.alpha += this._alphaChange * deltaTime * this._alphaDir;\r\n        if (this._container.alpha <= this._alphaMin) {\r\n            this._container.alpha = this._alphaMin;\r\n            this._alphaDir = 1;\r\n        }\r\n        else if(this._container.alpha >= this._alphaMax) {\r\n            this._container.alpha = this._alphaMax;\r\n            this._alphaDir = -1;\r\n        }\r\n    }\r\n}\r\n","import IConfig from \"../Interfaces/IConfig\";\r\nimport IRenderer from \"../Interfaces/IRenderer\";\r\nimport GoButton from \"./GoButton\";\r\nimport GoText from \"./GoText\";\r\nimport GameObject from \"../Abstracts/GameObject\";\r\nimport CompSlot from \"./CompSlot\";\r\nimport GoPanel from \"./GoPanel\";\r\nimport GoImage from \"./GoImage\";\r\nimport Manager from \"../Abstracts/Manager\";\r\n\r\n// display slot game graphics\r\nexport default class ViewGame extends Manager {\r\n    // constants\r\n    private readonly _betId: string = \"BetText\";\r\n    private readonly _playerId: string = \"PLAYER\";\r\n    private readonly _houseId: string = \"HOUSE\";\r\n    private readonly _balanceId: string = \"BalanceText\";\r\n    private readonly _winningsId: string = \"WinningsText\";\r\n    private readonly _machinePlayerId: string = \"MachinePlayer\";\r\n    private readonly _machineHouseId: string = \"MachineHouse\";\r\n    private readonly _headerId: string = \"SlotHeader\";\r\n    private readonly _footerId: string = \"SlotFooter\";\r\n    private readonly _machineOffsetPortrait: number = 16;\r\n    private readonly _machineOffsetLandscape: number = 48;\r\n    private readonly _buttonSize: number = 96;\r\n    private readonly _spinButtonWidth: number = 384;\r\n    private readonly _panelSize: number = 120;\r\n    private readonly _VersusSize: number = 256;\r\n    private readonly _VersusSpeed: number = 0.9;\r\n\r\n    // private members\r\n    private readonly _machineWidth: number;\r\n    private readonly _machineHeight: number;\r\n    private readonly _balanceTextWidth: number;\r\n    private readonly _balanceTextHeight: number;\r\n    private readonly _betTextWidth: number;\r\n    private readonly _betTextHeight: number;\r\n    private readonly _winningsTextWidth: number;\r\n    private readonly _winningsTextHeight: number;\r\n    private readonly _machinePlayer: CompSlot;\r\n    private readonly _machineHouse: CompSlot;\r\n    private readonly _balanceText: GoText;\r\n    private readonly _betText: GoText;\r\n    private readonly _winningsText: GoText;\r\n    private readonly _playerText: GoText;\r\n    private readonly _houseText: GoText;\r\n    private readonly _versus: GoImage;\r\n    private readonly _spinButton: GameObject;\r\n    private readonly _exitButton: GameObject;\r\n    private readonly _infoButton: GameObject;\r\n    private readonly _plusButton: GameObject;\r\n    private readonly _minusButton: GameObject;\r\n    private readonly _header: GameObject;\r\n    private readonly _footer: GameObject; \r\n    private _portrait: boolean;  \r\n    private _gameOver: boolean;  \r\n    private _spinCallback?: () => void;\r\n\r\n    // properties\r\n    public get IsSpinning(): boolean { \r\n        return this._machinePlayer.IsSpinning || this._machineHouse.IsSpinning; \r\n    }\r\n\r\n    // initialization\r\n    public constructor(config: IConfig, renderer: IRenderer, spinHandler: () => void, exitHandler: () => void, infoHandler: () => void, betHandler: (direction: number) => [bet: number, balance: number]) {\r\n        super(config, renderer);\r\n        this._spinCallback = undefined;\r\n        this._portrait = false;\r\n        this._gameOver = false; \r\n        \r\n        // slot machines\r\n        this._machinePlayer = new CompSlot(this.Renderer, this._machinePlayerId, this.Config.Reelset, this.Config.SymbolAssets, this.Config.InitialPlayerStops, this.Config.MachineRows); \r\n        this._machineHouse = new CompSlot(this.Renderer, this._machineHouseId, this.Config.Reelset, this.Config.SymbolAssets, this.Config.InitialHouseStops, this.Config.MachineRows); \r\n        this._machineWidth = this._machinePlayer.MachineWidth;\r\n        this._machineHeight = this._machinePlayer.MachineHeight;\r\n\r\n        // images \r\n        this._versus = new GoImage(this.Renderer, this.Config.SpriteVersus, this.Config.SpriteVersus, this._VersusSpeed);\r\n\r\n        // ui panels \r\n        this._header = new GoPanel(this.Renderer, this._headerId, this._panelSize, this._panelSize, this.Config.ColorSlotPanelFill, this.Config.AlphaSlotPanelFill, this.Config.SizeSlotPanelLine, this.Config.ColorSlotPanelLine, this.Config.AlphaSlotPanelLine);\r\n        this._footer = new GoPanel(this.Renderer, this._footerId, this._panelSize, this._panelSize, this.Config.ColorSlotPanelFill, this.Config.AlphaSlotPanelFill, this.Config.SizeSlotPanelLine, this.Config.ColorSlotPanelLine, this.Config.AlphaSlotPanelLine);\r\n\r\n        // balance text\r\n        this._balanceText = new GoText(this.Renderer, this._balanceId, this.GetBalanceText(this.Config.BalanceStart-this.Config.BetMin), this.Config.TextFonts, this.Config.SizeSlotText, this.Config.ColorSlotText, this.Config.ColorSlotTextStroke, this.Config.SizeSlotTextStroke);\r\n        this._balanceTextWidth = this._balanceText.TextWidth;\r\n        this._balanceTextHeight = this._balanceText.TextHeight;\r\n\r\n        // bet text\r\n        this._betText = new GoText(this.Renderer, this._betId, this.GetBetText(this.Config.BetMin), this.Config.TextFonts, this.Config.SizeSlotText, this.Config.ColorSlotText, this.Config.ColorSlotTextStroke, this.Config.SizeSlotTextStroke);\r\n        this._betTextWidth = this._betText.TextWidth;\r\n        this._betTextHeight = this._betText.TextHeight;\r\n\r\n        // winnings text\r\n        this._winningsText = new GoText(this.Renderer, this._winningsId, this.GetWinningsText(0), this.Config.TextFonts, this.Config.SizeSlotText, this.Config.ColorSlotText, this.Config.ColorSlotTextStroke, this.Config.SizeSlotTextStroke);\r\n        this._winningsTextWidth = this._winningsText.TextWidth;\r\n        this._winningsTextHeight = this._winningsText.TextHeight;\r\n        if (this._winningsText.GoContainer) this._winningsText.GoContainer.renderable = false;\r\n\r\n        // labels\r\n        this._playerText = new GoText(this.Renderer, this._playerId, this._playerId, this.Config.LabelFonts, this.Config.SizeLabelText, this.Config.ColorLabelText, this.Config.ColorLabelTextStroke, this.Config.SizeLabelTextStroke);\r\n        this._houseText = new GoText(this.Renderer, this._houseId, this._houseId, this.Config.LabelFonts, this.Config.SizeLabelText, this.Config.ColorLabelText, this.Config.ColorLabelTextStroke, this.Config.SizeLabelTextStroke);\r\n\r\n        // buttons\r\n        this._spinButton = new GoButton(this.Renderer, this.Config.SpriteButtonSpin, this.Config.SpriteButtonSpin, spinHandler);\r\n        this._exitButton = new GoButton(this.Renderer, this.Config.SpriteButtonClose, this.Config.SpriteButtonClose, exitHandler);\r\n        this._infoButton = new GoButton(this.Renderer, this.Config.SpriteButtonInfo, this.Config.SpriteButtonInfo, infoHandler);\r\n        this._plusButton = new GoButton(this.Renderer, this.Config.SpriteButtonPlus, this.Config.SpriteButtonPlus, () => { this.BetChangeHandler.apply(this, [1, betHandler]); });\r\n        this._minusButton = new GoButton(this.Renderer, this.Config.SpriteButtonMinus, this.Config.SpriteButtonMinus, () => { this.BetChangeHandler.apply(this, [-1, betHandler]); });      \r\n    }\r\n\r\n    // public methods\r\n    public StartSpin(): void {\r\n        this._machinePlayer.StartSpin();\r\n        this._machineHouse.StartSpin();\r\n        this._versus.Hide();\r\n        this._playerText.Hide();\r\n        this._houseText.Hide();\r\n        if (this._winningsText.GoContainer) {\r\n            this._winningsText.GoContainer.renderable = false;\r\n        }\r\n    }\r\n\r\n    public EndSpin(stopsPlayer: Array<number>, stopsHouse: Array<number>, callbackPerReel: (reel: number) => void, callback: () => void) {\r\n        this._machinePlayer.EndSpin(stopsPlayer, callbackPerReel);\r\n        this._machineHouse.EndSpin(stopsHouse, callbackPerReel);\r\n        this._spinCallback = callback;\r\n    }\r\n\r\n    public SpinResults(winnings: number, winMatches: Array<[x: number, y: number]>, balance: number, bet: number): void {\r\n        this._balanceText.Text = this.GetBalanceText(balance);\r\n        this._betText.Text = this.GetBetText(bet);\r\n        this._winningsText.Text = this.GetWinningsText(winnings);\r\n        \r\n        this._machinePlayer.ShowWinBoxes(winMatches, this.Config.SizeWinBoxLine, this.Config.ColorWinBoxLine, this.Config.ColorWinBox, this.Config.AlphaWinBox, true);\r\n        this._machineHouse.ShowWinBoxes(winMatches, this.Config.SizeWinBoxLine, this.Config.ColorFailWinBoxLine, this.Config.ColorFailWinBox, this.Config.AlphaFailWinBox, false);\r\n        if (this._winningsText.GoContainer) {\r\n            this._winningsText.GoContainer.renderable = winnings > 0;\r\n        }\r\n        \r\n        this.PositionBalanceText();\r\n        if (balance <= 0 && bet <= 0) {\r\n            this._spinButton.Disabled = true;\r\n            this._plusButton.Disabled = true;\r\n            this._minusButton.Disabled = true;\r\n            this._gameOver = true;\r\n        }\r\n    }\r\n\r\n    // abstract implementations\r\n    public DisableInteraction(): void {\r\n        this._infoButton.Disabled = true;\r\n        this._exitButton.Disabled = true;\r\n        this._spinButton.Disabled = true;\r\n        this._plusButton.Disabled = true;\r\n        this._minusButton.Disabled = true;\r\n    }\r\n    \r\n    public EnableInteraction(): void {\r\n        this._infoButton.Disabled = false;\r\n        this._exitButton.Disabled = false;\r\n        if (this._gameOver) return;\r\n        this._spinButton.Disabled = false;\r\n        this._plusButton.Disabled = false;\r\n        this._minusButton.Disabled = false;\r\n    }\r\n\r\n    public UpdateLayout(scaleX: number, scaleY: number, canvasWidth: number, canvasHeight: number, portrait: boolean): void {\r\n        const scale: number = portrait ? scaleY : scaleX;\r\n\r\n        let offset: number;\r\n        let xywh: [x: number, y:number, w:number, h:number];\r\n        this._portrait = portrait;\r\n\r\n        // info button\r\n        offset = (this._panelSize - this._buttonSize) / 2;\r\n        xywh = Manager.AnchorObjectRightBottom(canvasWidth, canvasHeight, this._buttonSize, this._buttonSize, scale, -offset, -offset);\r\n        this._infoButton.Transform(xywh[0], xywh[1], xywh[2], xywh[3]);\r\n\r\n        // minus button \r\n        xywh = Manager.AnchorObjectLeftTop(this._buttonSize, this._buttonSize, scale, offset, offset);\r\n        this._minusButton.Transform(xywh[0], xywh[1], xywh[2], xywh[3]);\r\n\r\n        // plus button\r\n        const playOffsetX: number = offset + this._buttonSize + offset;\r\n        xywh = Manager.AnchorObjectLeftTop(this._buttonSize, this._buttonSize, scale, playOffsetX, offset);\r\n        this._plusButton.Transform(xywh[0], xywh[1], xywh[2], xywh[3]);\r\n\r\n        // exit button\r\n        xywh = Manager.AnchorObjectRightTop(canvasWidth, this._buttonSize, this._buttonSize, scale, -offset, offset);\r\n        this._exitButton.Transform(xywh[0], xywh[1], xywh[2], xywh[3]);\r\n        const exitButtonX = xywh[0];\r\n        const exitButtonOffset = offset;\r\n\r\n        // slot machines, spin button, panels, and text\r\n        const w: number = this._machineWidth;\r\n        const h: number = this._machineHeight;\r\n        let xywhPlayer: [x: number, y:number, w:number, h:number];\r\n        let xywhHouse: [x: number, y:number, w:number, h:number];\r\n\r\n        if (portrait) {\r\n            // spin button\r\n            xywh = Manager.AnchorObjectLeftBottom(canvasHeight, this._spinButtonWidth, this._buttonSize, scale, offset, -offset);\r\n            this._spinButton.Transform(xywh[0], xywh[1], xywh[2], xywh[3]);\r\n\r\n            // panels\r\n            const portraitPanelSize: number = (this._panelSize + this._balanceTextHeight + exitButtonOffset);\r\n            const panelSizeScaled: number = portraitPanelSize * scale;\r\n            this._header.Transform(0, 0, canvasWidth, panelSizeScaled);\r\n            this._footer.Transform(0, canvasHeight - panelSizeScaled, canvasWidth, panelSizeScaled);\r\n\r\n            // balance text\r\n            offset = this._panelSize;\r\n            xywh = Manager.AnchorObjectRightTop(canvasWidth, this._balanceTextWidth, this._balanceTextHeight, scale, -exitButtonOffset, offset);\r\n            this._balanceText.Transform(xywh[0], xywh[1], xywh[2], xywh[3]);\r\n\r\n            // bet text\r\n            xywh = Manager.AnchorObjectLeftTop(this._betTextWidth, this._betTextHeight, scale, exitButtonOffset, offset);\r\n            this._betText.Transform(xywh[0], xywh[1], xywh[2], xywh[3]);\r\n\r\n            // winnings text\r\n            const wVis: boolean = this.GetRenderable(this._winningsText);\r\n            this.SetRenderable(this._winningsText, true);\r\n\r\n            xywh = Manager.AnchorObjectLeftBottom(canvasHeight, this._winningsTextWidth, this._winningsTextHeight, scale, 0, -offset); \r\n            this._winningsText.Transform(xywh[0], xywh[1], xywh[2], xywh[3]);\r\n            this.SetRenderable(this._winningsText, wVis);\r\n            \r\n            // slot machines\r\n            offset = h / 2 + this._machineOffsetPortrait;\r\n            xywhPlayer = Manager.AnchorObjectCenterMiddle(canvasWidth, canvasHeight, w, h, scale, 0, -offset);\r\n            xywhHouse = Manager.AnchorObjectCenterMiddle(canvasWidth, canvasHeight, w, h, scale, 0, offset);\r\n        }\r\n        else {\r\n            // spin button\r\n            offset = (this._panelSize - this._buttonSize) / 2;\r\n            xywh = Manager.AnchorObjectCenterBottom(canvasWidth, canvasHeight, this._spinButtonWidth, this._buttonSize, scale, 0, -offset);\r\n            this._spinButton.Transform(xywh[0], xywh[1], xywh[2], xywh[3]);\r\n\r\n            // panels\r\n            const panelSizeScaled: number = this._panelSize * scale;\r\n            this._header.Transform(0, 0, canvasWidth, panelSizeScaled);\r\n            this._footer.Transform(0, canvasHeight - panelSizeScaled, canvasWidth, panelSizeScaled);\r\n\r\n            // balance text\r\n            offset = (this._panelSize - this._balanceTextHeight) / 2;\r\n            xywh = Manager.AnchorObjectRightTop(canvasWidth, this._balanceTextWidth, this._balanceTextHeight, scale, 0, offset);\r\n            this._balanceText.Transform(exitButtonX-xywh[2], xywh[1], xywh[2], xywh[3]);\r\n\r\n            // bet text\r\n            const betOffsetX = offset + this._buttonSize + offset + this._buttonSize;\r\n            offset = (this._panelSize - this._betTextHeight) / 2;\r\n            xywh = Manager.AnchorObjectLeftTop(this._betTextWidth, this._betTextHeight, scale, betOffsetX, offset);\r\n            this._betText.Transform(xywh[0], xywh[1], xywh[2], xywh[3]);\r\n\r\n            // winnings text\r\n            const wVis: boolean = this.GetRenderable(this._winningsText);\r\n            this.SetRenderable(this._winningsText, true);\r\n\r\n            offset = (this._panelSize - this._winningsTextHeight) / 2;\r\n            xywh = Manager.AnchorObjectLeftBottom(canvasHeight, this._winningsTextWidth, this._winningsTextHeight, scale, 0, -offset); \r\n            this._winningsText.Transform(xywh[0], xywh[1], xywh[2], xywh[3]);\r\n            this.SetRenderable(this._winningsText, wVis);\r\n\r\n            // slot machines\r\n            offset = w / 2 + this._machineOffsetLandscape;\r\n            xywhPlayer = Manager.AnchorObjectCenterMiddle(canvasWidth, canvasHeight, w, h, scale, -offset, 0);\r\n            xywhHouse = Manager.AnchorObjectCenterMiddle(canvasWidth, canvasHeight, w, h, scale, offset, 0);\r\n        }\r\n\r\n        const sSize: number = xywhPlayer[3] / this.Config.MachineRows;\r\n        const mW: number = Math.floor(sSize) * this.Config.Reelset.length;\r\n        const mH: number = Math.floor(sSize) * this.Config.MachineRows;\r\n        this._machinePlayer.BorderWidth = this._machinePlayer.BorderWidthOriginal * scale;\r\n        this._machinePlayer.Transform(Math.floor(xywhPlayer[0]), Math.floor(xywhPlayer[1]), mW, mH);\r\n\r\n        this._machineHouse.BorderWidth = this._machineHouse.BorderWidthOriginal * scale;\r\n        this._machineHouse.Transform(Math.floor(xywhHouse[0]), Math.floor(xywhHouse[1]), mW, mH);\r\n\r\n        // labels\r\n        const playerCenter = xywhPlayer[0] + xywhPlayer[2] / 2 - this._playerText.TextWidth * scale / 2;\r\n        const playerMiddle = xywhPlayer[1] + xywhPlayer[3] / 2 - this._playerText.TextHeight * scale / 2;\r\n        this._playerText.Transform(playerCenter, playerMiddle, this._playerText.TextWidth * scale, this._playerText.TextHeight * scale);\r\n\r\n        const houseCenter = xywhHouse[0] + xywhHouse[2] / 2 - this._houseText.TextWidth * scale / 2;\r\n        const houseMiddle = xywhHouse[1] + xywhHouse[3] / 2 - this._houseText.TextHeight * scale / 2;\r\n        this._houseText.Transform(houseCenter, houseMiddle, this._playerText.TextWidth * scale, this._playerText.TextHeight * scale);\r\n\r\n        // images\r\n        xywh = Manager.AnchorObjectCenterMiddle(canvasWidth, canvasHeight, this._VersusSize, this._VersusSize, scale, 0, 0);\r\n        this._versus.Transform(xywh[0], xywh[1], xywh[2], xywh[3]); \r\n    }\r\n    \r\n    public Update(deltaTime: number): void {\r\n        this._machinePlayer.Update(deltaTime);\r\n        this._machineHouse.Update(deltaTime);\r\n        this._spinButton.Update(deltaTime);\r\n        this._exitButton.Update(deltaTime);\r\n        this._infoButton.Update(deltaTime);\r\n        this._balanceText.Update(deltaTime);\r\n        this._betText.Update(deltaTime);\r\n        this._winningsText.Update(deltaTime);\r\n        this._plusButton.Update(deltaTime);\r\n        this._minusButton.Update(deltaTime);\r\n        this._header.Update(deltaTime);\r\n        this._footer.Update(deltaTime);\r\n        this._versus.Update(deltaTime);\r\n        this._playerText.Update(deltaTime);\r\n        this._houseText.Update(deltaTime);\r\n        \r\n        if (!this._spinCallback) return;\r\n        if (!this.IsSpinning) {\r\n            this._spinCallback();\r\n            this._spinCallback = undefined;\r\n        }\r\n    }\r\n\r\n    public Dispose(): void {\r\n        this._machinePlayer.Dispose();\r\n        this._machineHouse.Dispose();\r\n        this._spinButton.Dispose();\r\n        this._exitButton.Dispose();\r\n        this._infoButton.Dispose();\r\n        this._balanceText.Dispose();\r\n        this._betText.Dispose();\r\n        this._winningsText.Dispose();\r\n        this._plusButton.Dispose();\r\n        this._minusButton.Dispose();\r\n        this._header.Dispose();\r\n        this._footer.Dispose();\r\n        this._versus.Dispose();\r\n        this._playerText.Dispose();\r\n        this._houseText.Dispose();\r\n    }\r\n\r\n    // handlers \r\n    private BetChangeHandler(direction: number, handler: (direction: number) => [bet: number, balance: number]): void {\r\n        const newBetBalance: [bet: number, balance: number] = handler(direction);\r\n        this._betText.Text = this.GetBetText(newBetBalance[0]);\r\n        this._balanceText.Text = this.GetBalanceText(newBetBalance[1]);\r\n        this.PositionBalanceText();\r\n    }\r\n\r\n    // helpers\r\n    private PositionBalanceText(): void {\r\n        if (!this._balanceText.GoContainer || !this._exitButton.GoContainer) return;\r\n        if (this._portrait) {\r\n            this._balanceText.GoContainer.x = this._exitButton.GoContainer.x + this._exitButton.GoContainer.width - this._balanceText.GoContainer.width;   \r\n        } else {\r\n            this._balanceText.GoContainer.x = this._exitButton.GoContainer.x - this._balanceText.GoContainer.width;\r\n        }\r\n    }\r\n\r\n    private FormatFunds(value: number): string {\r\n        return Math.floor(value).toLocaleString();\r\n    }\r\n\r\n    private GetRenderable(object: GameObject): boolean {\r\n        return object.GoContainer ? object.GoContainer.renderable : false;\r\n    }\r\n\r\n    private SetRenderable(object: GameObject, value: boolean): void {\r\n         if(!object.GoContainer) return;\r\n        object.GoContainer.renderable = value;\r\n    }\r\n\r\n    private GetBalanceText(value: number): string {\r\n        return `  ${this.Config.TextBalance}${this.FormatFunds(value)} `;\r\n    }\r\n\r\n    private GetBetText(value: number): string {\r\n        return ` ${this.Config.TextBet}${this.FormatFunds(value)}  `;\r\n    }\r\n\r\n    private GetWinningsText(value: number): string {\r\n        return ` ${this.Config.TextWinnings}${this.FormatFunds(value)}  `;\r\n    }\r\n}\r\n","import IConfig from \"../Interfaces/IConfig\";\r\nimport IRenderer from \"../Interfaces/IRenderer\";\r\nimport GoButton from \"./GoButton\";\r\nimport GameObject from \"../Abstracts/GameObject\";\r\nimport Manager from \"../Abstracts/Manager\";\r\nimport IGoContainer from \"../Interfaces/IGoContainer\";\r\nimport GoText from \"./GoText\";\r\nimport GoPanel from \"./GoPanel\";\r\n\r\n// display info page graphics\r\nexport default class ViewInfo extends Manager {\r\n    // constants\r\n    private readonly _closeId: string = \"ViewInfoExitButton\";\r\n    private readonly _logoId: string = \"ViewInfoLogo\";\r\n    private readonly _coverId: string = \"ViewInfoBackCover\";\r\n    private readonly _descId: string = \"ViewInfoDescText\";\r\n    private readonly _headerId: string = \"ViewInfoHeaderPanel\";\r\n    private readonly _reelId: string = \"ViewInfoReel\";\r\n    private readonly _nextId: string = \"ViewInfoNextButton\";\r\n    private readonly _prevId: string = \"ViewInfoPrevButton\";\r\n    private readonly _upId: string = \"ViewInfoUpButton\";\r\n    private readonly _downId: string = \"ViewInfoDownButton\";\r\n    private readonly _selectId: string = \"ViewInfoSelect\";\r\n    private readonly _nextStopsId: string = \"ViewInfoNextStops\";\r\n    private readonly _zeroStopsId: string = \"ViewInfoZeroStops\";\r\n    private readonly _randomStopsId: string = \"ViewInfoRandomStops\";\r\n    private readonly _nextStopsInfo: string = \"NEXT: \";\r\n    private readonly _logoSize: number = 384;\r\n    private readonly _edgeOffset: number = 12;\r\n    private readonly _exitSize: number = 96;\r\n    private readonly _navSize: number = 48;\r\n    private readonly _coverColor: number = 0xdddddd;\r\n    private readonly _coverAlpha: number = 0.95;\r\n    private readonly _panelSize: number = 640;\r\n    private readonly _portraitDescFactor: number = 0.7;\r\n    private readonly _stopsTextFactor: number = 0.7;\r\n\r\n    // private members\r\n    private readonly _exitButton: GameObject;\r\n    private readonly _prevButton: GameObject;\r\n    private readonly _nextButton: GameObject;\r\n    private readonly _upButton: GameObject;\r\n    private readonly _downButton: GameObject;\r\n    private readonly _zeroButton: GameObject;\r\n    private readonly _randButton: GameObject;\r\n    private readonly _selectBox: IGoContainer;\r\n    private readonly _descText: GoText;\r\n    private readonly _stopsText: GoText;\r\n    private readonly _reels: Array<IGoContainer>;\r\n    private readonly _reelset: Array<Array<string>>;\r\n    private readonly _cover: IGoContainer;\r\n    private readonly _logo: IGoContainer;\r\n    private readonly _header: GameObject;\r\n    private readonly _descTextWidth: number;\r\n    private readonly _descTextHeight: number;\r\n    private readonly _stopsTextWidth: number;\r\n    private readonly _stopsTextHeight: number;\r\n    private readonly _reelTextWidth: number;\r\n    private readonly _reelTextHeight: number;\r\n    private readonly _stops: Array<number>;\r\n    private readonly _gaffeHandler: (stops: Array<number>) => void;\r\n    private _selectedReel: number;\r\n\r\n    // initialization\r\n    public constructor(config: IConfig, renderer: IRenderer, gaffeHandler: (stops: Array<number>) => void, returnHandler: () => void) {\r\n        super(config, renderer);\r\n        this._gaffeHandler = gaffeHandler;\r\n\r\n        // back cover and header panel\r\n        this._cover = this.Renderer.StageRectangle(this._coverId, this.Config.ReferenceWidth, this.Config.ReferenceHeight, this._coverColor, this._coverAlpha);        \r\n        this._header = new GoPanel(this.Renderer, this._headerId, this._panelSize, this._panelSize, this.Config.ColorSlotPanelFill, this.Config.AlphaSlotPanelFill, this.Config.SizeSlotPanelLine, this.Config.ColorSlotPanelLine, this.Config.AlphaSlotPanelLine);\r\n        \r\n        // logo \r\n        this._logo = this.Renderer.StageSprite(this._logoId, this.Config.SpriteTitle);\r\n\r\n        // description text\r\n        this._descText = new GoText(this.Renderer, this._descId, this.Config.GameDescription, this.Config.DescTextFonts, this.Config.DescTextSize, this.Config.DescTextColor, this.Config.DescTextStrokeColor, this.Config.DescTextStrokeSize);\r\n        this._descTextWidth = this._descText.TextWidth;\r\n        this._descTextHeight = this._descText.TextHeight;\r\n\r\n        // reels (for setting gaffes)\r\n        this._reelTextWidth = 0;\r\n        this._reelTextHeight = 0;\r\n        this._stops = new Array<number>();\r\n        this._reels = new Array<IGoContainer>();\r\n        this._reelset = this.Config.Reelset.concat(this.Config.Reelset);\r\n        for (let index = 0; index < this._reelset.length; index++) {\r\n            const reelString: string = this.GetReelString(this._reelset[index], index, 0);\r\n            this._stops.push(0);\r\n            const text: IGoContainer = this.Renderer.StageText(this.GetReelId(index), reelString, this.Config.DescTextFonts, this.Config.DescTextSize, this.Config.DescTextColor, this.Config.DescTextStrokeColor, this.Config.DescTextStrokeSize, false);\r\n            this._reels.push(text);\r\n        };\r\n        this._reelTextWidth = this._reels[0].width;\r\n        this._reelTextHeight = this._reels[0].height;\r\n\r\n        // selection indicator\r\n        this._selectBox = this.Renderer.StageRectangle(this._selectId, this._reelTextWidth, this._reelTextHeight, this.Config.ColorSlotPanelFill, this.Config.AlphaSlotPanelFill);\r\n        this._selectedReel = 0;\r\n\r\n        // stops text\r\n        this._stopsText = new GoText(this.Renderer, this._nextStopsId, this.GetStopsText(), this.Config.DescTextFonts, this.Config.DescTextSize * this._stopsTextFactor, this.Config.DescTextColor, this.Config.DescTextStrokeColor, this.Config.DescTextStrokeSize);\r\n        this._stopsTextWidth = this._stopsText.TextWidth;\r\n        this._stopsTextHeight = this._stopsText.TextHeight;\r\n\r\n        // edit gaffe buttons\r\n        this._nextButton = new GoButton(this.Renderer, this._nextId, this.Config.SpriteButtonRight, () => { \r\n            this._selectedReel = (this._selectedReel + 1) % this._reels.length; \r\n            this.UpdateSelectionIndicator();\r\n        });\r\n        this._prevButton = new GoButton(this.Renderer, this._prevId, this.Config.SpriteButtonLeft, () => {\r\n            this._selectedReel = this._selectedReel - 1 < 0 ? this._reels.length - 1 : this._selectedReel - 1; \r\n            this.UpdateSelectionIndicator();\r\n        });\r\n        this._upButton = new GoButton(this.Renderer, this._upId, this.Config.SpriteButtonUp, () => {\r\n            this.MoveStop(1);\r\n        });\r\n        this._downButton = new GoButton(this.Renderer, this._downId, this.Config.SpriteButtonDown, () => {\r\n            this.MoveStop(-1);\r\n        });\r\n        this._zeroButton = new GoButton(this.Renderer, this._zeroStopsId, this.Config.SpriteButtonZero, () => {\r\n            this.ZeroAllStops();\r\n        });\r\n        this._randButton = new GoButton(this.Renderer, this._randomStopsId, this.Config.SpriteButtonRandom, () => {\r\n            this.RandomAllStops();\r\n        });\r\n\r\n        // exit button\r\n        this._exitButton = new GoButton(this.Renderer, this._closeId, this.Config.SpriteButtonClose, () => {\r\n            this._gaffeHandler(this._stops);\r\n            returnHandler();\r\n        });\r\n    }\r\n    \r\n    // abstract implementations\r\n    public DisableInteraction(): void {\r\n        this._exitButton.Disabled = true;\r\n        this._descText.Disabled = true;\r\n        this._stopsText.Disabled = true;\r\n        this._header.Disabled = true;\r\n        this._nextButton.Disabled = true;\r\n        this._prevButton.Disabled = true;\r\n        this._upButton.Disabled = true;\r\n        this._downButton.Disabled = true;\r\n        this._zeroButton.Disabled = true;\r\n        this._randButton.Disabled = true;\r\n    }\r\n    \r\n    public EnableInteraction(): void {\r\n        this._exitButton.Disabled = false;\r\n        this._descText.Disabled = false;\r\n        this._stopsText.Disabled = false;\r\n        this._header.Disabled = false;\r\n        this._nextButton.Disabled = false;\r\n        this._prevButton.Disabled = false;\r\n        this._upButton.Disabled = false;\r\n        this._downButton.Disabled = false;\r\n        this._zeroButton.Disabled = false;\r\n        this._randButton.Disabled = false;\r\n    }\r\n\r\n    public Update(deltaTime: number): void {\r\n        this._exitButton.Update(deltaTime);\r\n        this._descText.Update(deltaTime);\r\n        this._stopsText.Update(deltaTime);\r\n        this._header.Update(deltaTime);\r\n        this._nextButton.Update(deltaTime);\r\n        this._prevButton.Update(deltaTime);\r\n        this._upButton.Update(deltaTime);\r\n        this._downButton.Update(deltaTime);\r\n        this._zeroButton.Update(deltaTime);\r\n        this._randButton.Update(deltaTime);\r\n    }\r\n\r\n    public Dispose(): void {\r\n        this._exitButton.Dispose();\r\n        this._descText.Dispose();\r\n        this._stopsText.Dispose();\r\n        this._header.Dispose();\r\n        this._nextButton.Dispose();\r\n        this._prevButton.Dispose();\r\n        this._upButton.Dispose();\r\n        this._downButton.Dispose();\r\n        this._zeroButton.Dispose();\r\n        this._randButton.Dispose();\r\n\r\n        for (let i: number = 0; i < this._reels.length; i++) { \r\n            this.Renderer.Remove(this.GetReelId(i)); \r\n        }\r\n        this.Renderer.Remove(this._logoId);\r\n        this.Renderer.Remove(this._coverId);\r\n        this.Renderer.Remove(this._selectId);\r\n    }\r\n\r\n    public UpdateLayout(scaleX: number, scaleY: number, canvasWidth: number, canvasHeight: number, portrait: boolean): void {\r\n        const scale: number = portrait ? scaleY : scaleX;\r\n        \r\n        let xywh: [x: number, y: number, w: number, h: number];\r\n        let stopsTextY: number;\r\n\r\n        // exit button\r\n        xywh = Manager.AnchorObjectRightBottom(canvasWidth, canvasHeight, this._exitSize, this._exitSize, scale, -this._edgeOffset, -this._edgeOffset);\r\n        this._exitButton.Transform(xywh[0], xywh[1], xywh[2], xywh[3]);\r\n\r\n        if (!portrait) {\r\n            // logo\r\n            xywh = Manager.AnchorObjectLeftTop(this._logoSize, this._logoSize, scale, this._edgeOffset, (this._descTextHeight-this._logoSize)/2);\r\n            this._logo.width = xywh[2];\r\n            this._logo.height = xywh[3];\r\n            this._logo.x = xywh[0];\r\n            this._logo.y = xywh[1];\r\n\r\n            // description\r\n            xywh = Manager.AnchorObjectLeftTop(this._descTextWidth, this._descTextHeight, scale, this._logoSize+this._edgeOffset, this._edgeOffset);\r\n            this._descText.Transform(xywh[0], xywh[1], xywh[2], xywh[3]);\r\n\r\n            // next stops text\r\n            xywh = Manager.AnchorObjectLeftBottom(canvasHeight, this._stopsTextWidth, this._stopsTextHeight, scale, this._edgeOffset, -this._edgeOffset);\r\n            this._stopsText.Transform(xywh[0], xywh[1], xywh[2], xywh[3]);\r\n            stopsTextY = xywh[1];\r\n        }\r\n        else {\r\n            // logo\r\n            const ls: number = this._logoSize;\r\n            xywh = Manager.AnchorObjectCenterTop(canvasWidth, ls, ls, scale, 0, this._edgeOffset);\r\n            this._logo.width = xywh[2];\r\n            this._logo.height = xywh[3];\r\n            this._logo.x = xywh[0];\r\n            this._logo.y = xywh[1];\r\n\r\n            // description\r\n            const h: number = this._descTextHeight * this._portraitDescFactor;\r\n            const w: number = this._descTextWidth * this._portraitDescFactor;\r\n            xywh = Manager.AnchorObjectCenterTop(canvasWidth, w, h, scale, 0, ls + this._edgeOffset + this._edgeOffset);\r\n            this._descText.Transform(xywh[0], xywh[1], xywh[2], xywh[3]);\r\n\r\n            // next stops text\r\n            xywh = Manager.AnchorObjectLeftBottom(canvasHeight, this._stopsTextWidth, this._stopsTextHeight, scale, this._edgeOffset, -this._edgeOffset);\r\n            this._stopsText.Transform(xywh[0], xywh[1], xywh[2], xywh[3]);\r\n            stopsTextY = xywh[1];\r\n        }\r\n\r\n        // selection buttons\r\n        const s: number = this._navSize * scale;\r\n        const y: number = stopsTextY - s;\r\n        this._prevButton.Transform(xywh[0], y, s, s);\r\n        this._upButton.Transform(xywh[0] + s, y, s, s);\r\n        this._downButton.Transform(xywh[0] + s * 2, y, s, s);\r\n        this._nextButton.Transform(xywh[0] + s * 3, y, s, s);\r\n        this._zeroButton.Transform(xywh[0] + s * 4, y, s, s);\r\n        this._randButton.Transform(xywh[0] + s * 5, y, s, s);\r\n\r\n        // panel\r\n        const edgeOffsetScaled: number = this._edgeOffset * scale;\r\n        const b: number = this._descText.GoContainer!.y + this._descText.GoContainer!.height;\r\n        this._header.Transform(0, 0, canvasWidth, b + edgeOffsetScaled + edgeOffsetScaled);\r\n\r\n        // reels\r\n        const reelsOffsetY: number = portrait ? edgeOffsetScaled + edgeOffsetScaled : 0;\r\n        this._reels.forEach((reel, index) => {\r\n            xywh = Manager.AnchorObjectCenterBottom(canvasWidth, canvasHeight, this._reelTextWidth, this._reelTextHeight, scale, 0, 0);\r\n            reel.x = xywh[0] - (xywh[2] * this._reels.length) / 2 + xywh[2] * index + xywh[2] / 2;\r\n            reel.y = this._header.GoContainer!.height + (canvasHeight - this._header.GoContainer!.height) / 2 - xywh[3] / 2 - reelsOffsetY;\r\n            reel.width = xywh[2];\r\n            reel.height = xywh[3];\r\n        });\r\n        this.UpdateSelectionIndicator();\r\n        \r\n        // back cover\r\n        this._cover.x = 0;\r\n        this._cover.y = 0;\r\n        this._cover.width = canvasWidth;\r\n        this._cover.height = canvasHeight;\r\n    }\r\n\r\n    // helpers\r\n    private GetReelId(index: number): string {\r\n        return `${this._reelId}_${index}`;\r\n    }\r\n\r\n    private GetStopsText(): string {\r\n        return `${this._nextStopsInfo}${this._stops}`;\r\n    }\r\n\r\n    private MoveStop(sign: number) {\r\n        const reel: Array<string> = this._reelset[this._selectedReel];\r\n        \r\n        let inputStop: number = this._stops[this._selectedReel] + sign;\r\n        if (inputStop < 0) {\r\n            inputStop = reel.length + inputStop;\r\n        }\r\n\r\n        const stop: number = inputStop % reel.length;\r\n        const reelString: string = this.GetReelString(reel, this._selectedReel, stop);\r\n        \r\n        this._stops[this._selectedReel] = stop;\r\n        this.Renderer.UpdateText(this.GetReelId(this._selectedReel), reelString);\r\n        this.Renderer.UpdateText(this._nextStopsId, this.GetStopsText());\r\n    }\r\n\r\n    private ZeroAllStops() {\r\n        this._reelset.forEach((reel, index) => {\r\n            const reelString: string = this.GetReelString(reel, index, 0);\r\n\r\n            this._stops[index] = 0;\r\n            this.Renderer.UpdateText(this.GetReelId(index), reelString);\r\n            this.Renderer.UpdateText(this._nextStopsId, this.GetStopsText());\r\n        });\r\n    }\r\n\r\n    private RandomAllStops() {\r\n        this._reelset.forEach((reel, index) => {\r\n            const stop: number = Math.floor(Math.random() * reel.length);\r\n            const reelString: string = this.GetReelString(reel, index, stop);\r\n\r\n            this._stops[index] = stop;\r\n            this.Renderer.UpdateText(this.GetReelId(index), reelString);\r\n            this.Renderer.UpdateText(this._nextStopsId, this.GetStopsText());\r\n        });\r\n    }\r\n\r\n    private GetReelString(reel: Array<string>, reelIndex: number, stop: number): string {\r\n        let text: string = reel[stop];\r\n        for (let i = 1; i < this.Config.MachineRows; i++) { \r\n            const next: number = (stop + i) % reel.length;\r\n            text += `\\n${reel[next]}`;\r\n        }\r\n        return `${reelIndex}\\n-\\n${text}`;\r\n    }\r\n\r\n    private UpdateSelectionIndicator() {\r\n        const selReel = this._reels[this._selectedReel];\r\n        this._selectBox.x = selReel.x;\r\n        this._selectBox.y = selReel.y;\r\n        this._selectBox.width = selReel.width;\r\n        this._selectBox.height = selReel.height;\r\n    }\r\n}\r\n","import IGameController from '../Interfaces/IGameController';\r\nimport IConfig from \"../Interfaces/IConfig\";\r\nimport IRenderer from \"../Interfaces/IRenderer\";\r\nimport IAudio from \"../Interfaces/IAudio\";\r\nimport ISlotEngine from '../Interfaces/ISlotEngine';\r\nimport ILogger from '../Interfaces/ILogger';\r\nimport ViewMenu from '../Aritifacts/ViewMenu';\r\nimport ViewBack from '../Aritifacts/ViewBack';\r\nimport ViewGame from '../Aritifacts/ViewGame';\r\nimport Manager from '../Abstracts/Manager';\r\nimport ViewInfo from '../Aritifacts/ViewInfo';\r\n\r\n// controls game flow\r\nexport default class GameController implements IGameController {\r\n    // private memebers\r\n    private _background?: ViewBack;\r\n    private _menuView?: ViewMenu;\r\n    private _slotView?: ViewGame;\r\n    private _infoView?: ViewInfo;\r\n    private _betAmount: number;\r\n\r\n    // dependencies\r\n    public readonly Config: IConfig;\r\n    public readonly Renderer: IRenderer;\r\n    public readonly Audio: IAudio;\r\n    public readonly Engine: ISlotEngine;\r\n    public readonly Logger: ILogger;\r\n\r\n    // initialization\r\n    public constructor(config: IConfig, renderer: IRenderer, audio: IAudio, slotEngine: ISlotEngine, logger: ILogger) {\r\n        this.Config = config;\r\n        this.Renderer = renderer;\r\n        this.Audio = audio;\r\n        this.Engine = slotEngine;\r\n        this.Logger = logger;\r\n        this._betAmount = this.Config.BetMin;\r\n    }\r\n\r\n    // interface implementations\r\n    public async Start(): Promise<void> {\r\n        await this.Renderer.Initialize(this.Config.ColorBackground).catch((error) => {\r\n            this.Logger.error(`Failed to Initialize renderer: ${error}`);\r\n        });\r\n        await this.Renderer.LoadSprites(this.Config.AllSprites).catch((error) => {\r\n            this.Logger.error(`Failed to load sprite assets: ${error}`);\r\n        });\r\n        await this.Engine.Initialize(this.Config.DefaultUserId).catch((error) => {\r\n            this.Logger.error(`Failed to initioalize slot engine: ${error}`);\r\n        });\r\n\r\n        this._background = new ViewBack(this.Config, this.Renderer);\r\n        this._menuView = new ViewMenu(this.Config, this.Renderer, this.PlayRequest.bind(this));\r\n        this.Resize();\r\n\r\n        this.Renderer.SetTicker(this.Config.MaxFps, this.Update.bind(this));\r\n        window.onresize = this.Resize.bind(this);\r\n        window.onfocus = this.Focus.bind(this);\r\n    }\r\n\r\n    public Update(deltaTime: number): void {\r\n        const objs: Array<Manager | undefined> = [this._background, this._menuView, this._slotView, this._infoView];\r\n        for (const obj of objs) {\r\n            if (!obj) continue;\r\n            obj.Update(deltaTime);\r\n        }\r\n    }\r\n\r\n    public Resize(): void {\r\n        const wwidth: number = window.innerWidth;\r\n        const wheight: number = window.innerHeight;\r\n        const portrait: boolean = wwidth < wheight;\r\n\r\n        let minW: number, minH: number, sFactor: number;\r\n        if (portrait) {\r\n            minW = this.Config.MinWidthPortrait;\r\n            minH = this.Config.MinHeightPortrait;\r\n            sFactor = this.Config.PortraitScaleFactor;\r\n        }\r\n        else {\r\n            minW = this.Config.MinWidthLandscape;\r\n            minH = this.Config.MinHeightLandscape;\r\n            sFactor = 1.0;\r\n        }\r\n\r\n        const cwidth: number = wwidth < minW ? minW : wwidth;\r\n        const cheight: number = wheight < minH ? minH : wheight;\r\n        const scaleX: number = (cwidth / this.Config.ReferenceWidth) * sFactor;\r\n        const scaleY: number = (cheight / this.Config.ReferenceHeight) * sFactor;\r\n\r\n        const objs: Array<Manager | undefined> = [this._background, this._menuView, this._slotView, this._infoView];\r\n        for (const obj of objs) {\r\n            if (!obj) continue;\r\n            obj.UpdateLayout(scaleX, scaleY, cwidth, cheight, portrait);\r\n        }\r\n    }\r\n\r\n    public Focus(): void {\r\n        if (!this._slotView) return;\r\n        if (!this._slotView.IsSpinning) {\r\n            this.Audio.Stop(this.Config.AudioSpinLoop);\r\n        }\r\n    }\r\n\r\n    // helpers\r\n    private ProcessSpinResults(stopsPlayer: Array<number>, stopsHouse: Array<number>) {\r\n        // get qualified matches\r\n        let winMatches: Array<[x: number, y: number]>; \r\n        winMatches = this.Engine.GetWinMatches();\r\n        \r\n        // winnings\r\n        let winnings: number;\r\n        winnings = this.Engine.GetWinnings(this._betAmount);\r\n\r\n        // balance\r\n        let newBalance: number = this.Engine.GetUserBalance();\r\n        if (this._betAmount <= newBalance) {\r\n            newBalance -= this._betAmount;\r\n        } \r\n        else {\r\n            this._betAmount = newBalance;\r\n            newBalance = 0;\r\n            if (this._betAmount < 0) {\r\n                this._betAmount = 0;\r\n            }\r\n        }\r\n\r\n        // logging\r\n        this.Logger.log(`Win matches: ${winMatches.length}`);\r\n        this.Logger.log(`Bet: ${this._betAmount}`);\r\n        this.Logger.log(`Player winnings: ${winnings}`);\r\n        \r\n        // audio\r\n        if (winnings > 0) {\r\n            this.Audio.Play(this.Config.AudioWinner);\r\n            this.Audio.Play(this.Config.AudioSpinWon);\r\n        }\r\n        else {\r\n            this.Audio.Play(this.Config.AudioSpinLost);\r\n        }\r\n\r\n        // display\r\n        if (!this._slotView) return; \r\n        this._slotView.SpinResults(winnings, winMatches, newBalance, this._betAmount); \r\n    }\r\n\r\n    // handlers\r\n    private PlayRequest(): void {\r\n        if (this._menuView) this._menuView.DisableInteraction();\r\n        this.Audio.LoadSounds(this.Config.AllAudio).then(this.Play.bind(this)).catch((error) => {\r\n            this.Logger.error(`Failed to load audio assets: ${error}`);\r\n        }); \r\n    }\r\n\r\n    private SpinRequest(): void {\r\n        if (!this._slotView) return;\r\n\r\n        this._slotView.StartSpin();\r\n        this._slotView.DisableInteraction();\r\n        this.Audio.PlayLoop(this.Config.AudioSpinLoop);\r\n        \r\n        this.Engine.GenerateStops().then((stops: Array<number>) => {\r\n            if (!this._slotView) return; \r\n            \r\n            this.Logger.log(`Generated stops: ${stops}`);\r\n            const playerStops: Array<number> = stops.splice(0, this.Config.Reelset.length);\r\n            const houseStops: Array<number> = stops;\r\n            this._slotView.EndSpin(playerStops, stops, (reel) => this.SpinReelComplete.call(this, reel), () => this.SpinComplete.call(this, playerStops, houseStops));\r\n        }).catch((error) => {\r\n            this.Logger.error(`Failed to generate stops: ${error}`);\r\n        });\r\n    }\r\n\r\n    private Play(): void {\r\n        if (!this._menuView) return; \r\n        this._menuView.Dispose();\r\n        this._menuView = undefined;\r\n\r\n        this._betAmount = this.Config.BetMin;\r\n        this.Audio.Play(this.Config.AudioTransition);\r\n        this._slotView = new ViewGame(this.Config, this.Renderer, this.SpinRequest.bind(this), this.Return.bind(this), this.Info.bind(this), this.BetChange.bind(this));\r\n        this.Resize();\r\n\r\n        if (!this._background) return;\r\n        this._background.EnableInteraction();\r\n    }\r\n\r\n    private Return(): void {\r\n        if (!this._slotView) return; \r\n        this._slotView.Dispose();\r\n        this._slotView = undefined;\r\n        this.Engine.Reset(); \r\n\r\n        this.Audio.Stop(this.Config.AudioSpinLoop);\r\n        this.Audio.Play(this.Config.AudioTransition);\r\n        this._menuView = new ViewMenu(this.Config, this.Renderer, this.PlayRequest.bind(this));\r\n        this.Resize();\r\n\r\n        if (!this._background) return;\r\n        this._background.EnableInteraction();\r\n    }\r\n\r\n    private Info(): void {\r\n        this.Audio.Play(this.Config.AudioClick);\r\n        if (this._slotView) {\r\n            this._slotView.DisableInteraction();\r\n        }\r\n        this._infoView = new ViewInfo(this.Config, this.Renderer, this.Engine.SetGaffe.bind(this.Engine), () => {\r\n            if (!this._infoView) return;\r\n            this._infoView.Dispose();\r\n            this._infoView = undefined;\r\n            if (this._slotView) {\r\n                this._slotView.EnableInteraction();\r\n                this.Audio.Play(this.Config.AudioClick);\r\n            }\r\n        });\r\n        this.Resize();\r\n    }\r\n\r\n    private BetChange(direction: number): [bet: number, balance: number] {\r\n        if (direction > 0) {\r\n            const newBet: number = this._betAmount + this.Config.BetIncrement;\r\n            const newBalance: number = this.Engine.GetUserBalance() - newBet;\r\n            if (newBet <= this.Config.BetMax && newBalance >= 0) { this._betAmount = newBet; }\r\n        } \r\n        else {\r\n            const newBet: number = this._betAmount - this.Config.BetIncrement;\r\n            if (newBet >= this.Config.BetMin) { this._betAmount = newBet; }\r\n        }\r\n        this.Audio.Play(this.Config.AudioClick);\r\n        return [this._betAmount, this.Engine.GetUserBalance()  - this._betAmount];\r\n    }\r\n\r\n    private SpinComplete(playerStops: Array<number>, stops: Array<number>): void {\r\n        this.Audio.Stop(this.Config.AudioSpinLoop);\r\n        this.ProcessSpinResults(playerStops, stops);\r\n        if (!this._slotView) return; \r\n        this._slotView.EnableInteraction();\r\n    }\r\n\r\n    private SpinReelComplete(reel: number): void {\r\n        this.Audio.Play(this.Config.AudioStop);\r\n    }\r\n}\r\n","import IConfig from \"../Interfaces/IConfig\";\r\n\r\n// game configuration \r\nexport default class DefaultConfig implements IConfig {\r\n    // constants\r\n    private readonly _sprites: string = './game/Sprites/';\r\n    private readonly _sound: string = './game/Sound/';\r\n\r\n    // interface implementations\r\n    public readonly MaxFps: number = 60;\r\n    public readonly ReferenceWidth: number = 1920;\r\n    public readonly ReferenceHeight: number = 1080;\r\n    public readonly MinWidthLandscape: number = 320;\r\n    public readonly MinHeightLandscape: number = 240;\r\n    public readonly MinWidthPortrait: number = 240;\r\n    public readonly MinHeightPortrait: number = 320;\r\n    public readonly PortraitScaleFactor: number = 0.75;\r\n    public readonly BalanceStart: number = 10000;\r\n    public readonly BetMin: number = 5;\r\n    public readonly BetMax: number = 1000;\r\n    public readonly BetIncrement: number = 5;\r\n    public readonly DefaultUserId: number = 0;\r\n\r\n    public readonly TextBalance: string = \"$\";\r\n    public readonly TextBet: string = \"$\";\r\n    public readonly TextWinnings: string = \"+ $\";\r\n    public readonly TextFonts: Array<string> = ['Brush Script MT', 'Georgia', 'Arial'];\r\n    public readonly LabelFonts: Array<string> = ['Arial Black', 'Arial'];\r\n\r\n    public readonly SizeLabelText: number = 80;\r\n    public readonly SizeLabelTextStroke: number = 16;\r\n    public readonly SizeSlotText: number = 58;\r\n    public readonly SizeSlotTextStroke: number = 6;\r\n    public readonly SizeSlotPanelLine: number = 6;\r\n    public readonly SizeWinBoxLine: number = 2;\r\n\r\n    public readonly ColorFailWinBoxLine: number = 0x000000;\r\n    public readonly ColorFailWinBox: number = 0x000000;\r\n    public readonly ColorWinBoxLine: number = 0x000000;\r\n    public readonly ColorWinBox: number = 0xff0000;\r\n    public readonly ColorLabelText: number = 0xff0000;\r\n    public readonly ColorLabelTextStroke: number = 0x000000;\r\n    public readonly ColorSlotText: number = 0x000000;\r\n    public readonly ColorSlotTextStroke: number = 0xffffff;\r\n    public readonly ColorBackground: number = 0xffffff;\r\n    public readonly ColorSlotPanelFill: number = 0xff0000;\r\n    public readonly ColorSlotPanelLine: number = 0xffffff;\r\n\r\n    public readonly AlphaWinBox: number = 0.5;\r\n    public readonly AlphaFailWinBox: number = 0.2;\r\n    public readonly AlphaSlotPanelFill: number = 0.25;\r\n    public readonly AlphaSlotPanelLine: number = 1;\r\n\r\n    public readonly SpriteBackTile: string = `${this._sprites}Back.png`;\r\n    public readonly SpriteTitle: string = `${this._sprites}Title.png`;\r\n    public readonly SpriteVersus: string = `${this._sprites}Versus.png`;\r\n    public readonly SpriteSymbolRock: string = `${this._sprites}Rock.png`;\r\n    public readonly SpriteSymbolPaper: string = `${this._sprites}Paper.png`;\r\n    public readonly SpriteSymbolScissors: string = `${this._sprites}Scissors.png`;\r\n    public readonly SpriteButtonInfo: string = `${this._sprites}Info.png`;\r\n    public readonly SpriteButtonClose: string = `${this._sprites}Close.png`;\r\n    public readonly SpriteButtonSpin: string = `${this._sprites}Spin.png`;\r\n    public readonly SpriteButtonPlay: string = `${this._sprites}Play.png`;\r\n    public readonly SpriteButtonPlus: string = `${this._sprites}Plus.png`;\r\n    public readonly SpriteButtonMinus: string = `${this._sprites}Minus.png`;\r\n    public readonly SpriteButtonUp: string = `${this._sprites}Up.png`;\r\n    public readonly SpriteButtonDown: string = `${this._sprites}Down.png`;\r\n    public readonly SpriteButtonLeft: string = `${this._sprites}Left.png`;\r\n    public readonly SpriteButtonRight: string = `${this._sprites}Right.png`;\r\n    public readonly SpriteButtonZero: string = `${this._sprites}Zero.png`;\r\n    public readonly SpriteButtonRandom: string = `${this._sprites}Random.png`;\r\n    public readonly AllSprites: Array<string> = [\r\n        this.SpriteBackTile,\r\n        this.SpriteTitle,\r\n        this.SpriteVersus,\r\n        this.SpriteSymbolRock,\r\n        this.SpriteSymbolPaper,\r\n        this.SpriteSymbolScissors,\r\n        this.SpriteButtonInfo,\r\n        this.SpriteButtonClose,\r\n        this.SpriteButtonSpin,\r\n        this.SpriteButtonPlay,\r\n        this.SpriteButtonPlus,\r\n        this.SpriteButtonMinus,\r\n        this.SpriteButtonUp,\r\n        this.SpriteButtonDown,\r\n        this.SpriteButtonLeft,\r\n        this.SpriteButtonRight,\r\n        this.SpriteButtonZero,\r\n        this.SpriteButtonRandom\r\n    ];\r\n\r\n    public readonly AudioTransition: string = `${this._sound}Transition.mp3`;\r\n    public readonly AudioWinner: string = `${this._sound}Winner.mp3`;\r\n    public readonly AudioSpinWon: string = `${this._sound}SpinWon.mp3`;\r\n    public readonly AudioSpinLost: string = `${this._sound}SpinLost.mp3`;\r\n    public readonly AudioClick: string = `${this._sound}Click.mp3`;\r\n    public readonly AudioSpinLoop: string = `${this._sound}SpinLoop.mp3`;\r\n    public readonly AudioStop: string = `${this._sound}Stop.mp3`;\r\n    public readonly AllAudio: Array<string> = [\r\n        this.AudioTransition,\r\n        this.AudioWinner,\r\n        this.AudioSpinWon,\r\n        this.AudioSpinLost,\r\n        this.AudioClick,\r\n        this.AudioSpinLoop,\r\n        this.AudioStop\r\n    ];\r\n\r\n    public readonly R: string = 'R';\r\n    public readonly P: string = 'P';\r\n    public readonly S: string = 'S';\r\n    public readonly SymbolAssets: Map<string, string> = new Map<string, string>([\r\n        [this.R, this.SpriteSymbolRock],\r\n        [this.P, this.SpriteSymbolPaper],\r\n        [this.S, this.SpriteSymbolScissors]\r\n    ]);\r\n\r\n    public readonly MachineRows: number = 3;\r\n    public readonly Reelset: Array<Array<string>> = [\r\n        ['R','P','S','R','P','S','R','P','S','R','R','P','S','R','P','S','R','P','S','R','R','P','S','R','P','S','R','P','S','R'],\r\n        ['P','S','R','P','S','R','P','S','R','P','P','S','R','P','S','R','P','S','R','P','P','S','R','P','S','R','P','S','R','P'],\r\n        ['S','R','P','S','R','P','S','R','P','S','S','R','P','S','R','P','S','R','P','S','S','R','P','S','R','P','S','R','P','S'],\r\n        ['P','S','R','P','S','R','P','S','R','P','P','S','R','P','S','R','P','S','R','P','P','S','R','P','S','R','P','S','R','P'],\r\n        ['R','P','S','R','P','S','R','P','S','R','R','P','S','R','P','S','R','P','S','R','R','P','S','R','P','S','R','P','S','R']\r\n    ];\r\n\r\n    public readonly InitialPlayerStops: Array<number> = [12, 17, 18, 20, 6];\r\n    public readonly InitialHouseStops: Array<number> = [8, 10, 12, 23, 15];\r\n\r\n    // no Paylines, for each win above WinMatchMin bet multiplier increases by BetMultiplierIncrease\r\n    // for example 4 matches = BetMultiplier, 5 matches = BetMultiplier + BetMultiplierInc, etc.\r\n    public readonly WinMatchMin: number = 4;\r\n    public readonly BetMultiplier = 2;\r\n    public readonly BetMultiplierInc = 2;\r\n    public readonly Combinations: Map<string, string> = new Map([\r\n        ['R', 'S'],\r\n        ['P', 'R'],\r\n        ['S', 'P']\r\n    ]);\r\n\r\n    public readonly DescTextFonts: Array<string> = ['Courier New', 'Arial'];\r\n    public readonly DescTextSize: number = 34;\r\n    public readonly DescTextColor: number = 0x000000;\r\n    public readonly DescTextStrokeColor: number = 0xaaaaaa;\r\n    public readonly DescTextStrokeSize: number = 2;\r\n    public readonly GameDescription: string = `RULES:\r\n    - Select your bet amount\r\n    - Press the spin button\r\n    - Match symbols to win\r\n    - A match is when player beats the house\r\n        - Rock beats Scissors\r\n        - Paper beats Rock\r\n        - Scissors beats Paper\r\n    - ${this.WinMatchMin} or more matches wins\r\n    - Each match increases bet multiplier by ${this.BetMultiplier}\r\n        - ${this.WinMatchMin} matches has a bet bultiplier of ${this.BetMultiplier}\r\n        - ${this.WinMatchMin+1} matches has a bet bultiplier of ${this.BetMultiplier*2}\r\n        - ${this.WinMatchMin+2} matches has a bet bultiplier of ${this.BetMultiplier*3}\r\n        - Etc...\r\n    - Bet multiplier resets on each spin\r\n    - Have fun and good luck!`;\r\n}\r\n","import { ExtensionType } from '../extensions/Extensions';\n\n/**\n * Extension for the browser environment.\n * @memberof environment\n */\nexport const browserExt = {\n    extension: {\n        type: ExtensionType.Environment,\n        name: 'browser',\n        priority: -1,\n    },\n    test: () => true,\n    load: async () =>\n    {\n        await import('./browserAll');\n    },\n};\n","import { ExtensionType } from '../extensions/Extensions';\n\n/**\n * Extension for the webworker environment.\n * @memberof environment\n */\nexport const webworkerExt = {\n    extension: {\n        type: ExtensionType.Environment,\n        name: 'webworker',\n        priority: 0,\n    },\n    test: () => typeof self !== 'undefined' && self.WorkerGlobalScope !== undefined,\n    load: async () =>\n    {\n        await import('./webworkerAll');\n    },\n};\n","import { DOMAdapter } from '../../environment/adapter';\nimport { AbstractRenderer } from '../../rendering/renderers/shared/system/AbstractRenderer';\n\nlet _isWebGLSupported: boolean | undefined;\n\n/**\n * Helper for checking for WebGL support.\n * @param failIfMajorPerformanceCaveat - whether to fail if there is a major performance caveat, defaults to false\n * @memberof utils\n * @function isWebGLSupported\n * @returns {boolean} Is WebGL supported.\n */\nexport function isWebGLSupported(\n    failIfMajorPerformanceCaveat?: boolean\n): boolean\n{\n    if (_isWebGLSupported !== undefined) return _isWebGLSupported;\n\n    _isWebGLSupported = ((): boolean =>\n    {\n        const contextOptions = {\n            stencil: true,\n            failIfMajorPerformanceCaveat:\n                failIfMajorPerformanceCaveat\n                ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat,\n        };\n\n        try\n        {\n            if (!DOMAdapter.get().getWebGLRenderingContext())\n            {\n                return false;\n            }\n\n            const canvas = DOMAdapter.get().createCanvas();\n            let gl = canvas.getContext('webgl', contextOptions);\n\n            const success = !!gl?.getContextAttributes()?.stencil;\n\n            if (gl)\n            {\n                const loseContext = gl.getExtension('WEBGL_lose_context');\n\n                if (loseContext)\n                {\n                    loseContext.loseContext();\n                }\n            }\n\n            gl = null;\n\n            return success;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    })();\n\n    return _isWebGLSupported;\n}\n","import { DOMAdapter } from '../../environment/adapter';\n\nlet _isWebGPUSupported: boolean | undefined;\n\n/**\n * Helper for checking for WebGPU support.\n * @param options - The options for requesting a GPU adapter.\n * @memberof utils\n * @function isWebGPUSupported\n * @returns Is WebGPU supported.\n */\nexport async function isWebGPUSupported(options: GPURequestAdapterOptions = {}): Promise<boolean>\n{\n    if (_isWebGPUSupported !== undefined) return _isWebGPUSupported;\n\n    _isWebGPUSupported = await (async (): Promise<boolean> =>\n    {\n        const gpu = DOMAdapter.get().getNavigator().gpu;\n\n        if (!gpu)\n        {\n            return false;\n        }\n\n        try\n        {\n            const adapter = await navigator.gpu.requestAdapter(options) as GPUAdapter;\n\n            // TODO and one of these!\n            await adapter.requestDevice();\n\n            return true;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    })();\n\n    return _isWebGPUSupported;\n}\n","import { isWebGLSupported } from '../../utils/browser/isWebGLSupported';\nimport { isWebGPUSupported } from '../../utils/browser/isWebGPUSupported';\nimport { AbstractRenderer } from './shared/system/AbstractRenderer';\n\nimport type { WebGLOptions } from './gl/WebGLRenderer';\nimport type { WebGPUOptions } from './gpu/WebGPURenderer';\nimport type { Renderer, RendererOptions } from './types';\n\n/**\n * Options for {@link rendering.autoDetectRenderer}.\n * @memberof rendering\n */\nexport interface AutoDetectOptions extends RendererOptions\n{\n    /** The preferred renderer type. WebGPU is recommended as its generally faster than WebGL. */\n    preference?: 'webgl' | 'webgpu'// | 'canvas';\n    /** Optional WebGPUOptions to pass only to WebGPU renderer. */\n    webgpu?: Partial<WebGPUOptions>;\n    /** Optional WebGLOptions to pass only to the WebGL renderer */\n    webgl?: Partial<WebGLOptions>;\n}\n\nconst renderPriority = ['webgl', 'webgpu', 'canvas'];\n\n/**\n * Automatically determines the most appropriate renderer for the current environment.\n *\n * The function will prioritize the WebGL renderer as it is the most tested safe API to use.\n * In the near future as WebGPU becomes more stable and ubiquitous, it will be prioritized over WebGL.\n *\n * The selected renderer's code is then dynamically imported to optimize\n * performance and minimize the initial bundle size.\n *\n * To maximize the benefits of dynamic imports, it's recommended to use a modern bundler\n * that supports code splitting. This will place the renderer code in a separate chunk,\n * which is loaded only when needed.\n * @example\n *\n * // create a renderer\n * const renderer = await autoDetectRenderer({\n *   width: 800,\n *   height: 600,\n *   antialias: true,\n * });\n *\n * // custom for each renderer\n * const renderer = await autoDetectRenderer({\n *   width: 800,\n *   height: 600,\n *   webgpu:{\n *     antialias: true,\n *     backgroundColor: 'red'\n *   },\n *   webgl:{\n *     antialias: true,\n *     backgroundColor: 'green'\n *   }\n *  });\n * @param options - A partial configuration object based on the `AutoDetectOptions` type.\n * @returns A Promise that resolves to an instance of the selected renderer.\n * @memberof rendering\n */\nexport async function autoDetectRenderer(options: Partial<AutoDetectOptions>): Promise<Renderer>\n{\n    let preferredOrder: string[] = [];\n\n    if (options.preference)\n    {\n        preferredOrder.push(options.preference);\n\n        renderPriority.forEach((item) =>\n        {\n            if (item !== options.preference)\n            {\n                preferredOrder.push(item);\n            }\n        });\n    }\n    else\n    {\n        preferredOrder = renderPriority.slice();\n    }\n\n    let RendererClass: new () => Renderer;\n    let finalOptions: Partial<AutoDetectOptions> = {};\n\n    for (let i = 0; i < preferredOrder.length; i++)\n    {\n        const rendererType = preferredOrder[i];\n\n        if (rendererType === 'webgpu' && (await isWebGPUSupported()))\n        {\n            const { WebGPURenderer } = await import('./gpu/WebGPURenderer');\n\n            RendererClass = WebGPURenderer;\n\n            finalOptions = { ...options, ...options.webgpu };\n\n            break;\n        }\n        else if (\n            rendererType === 'webgl'\n            && isWebGLSupported(\n                options.failIfMajorPerformanceCaveat\n                    ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat\n            )\n        )\n        {\n            const { WebGLRenderer } = await import('./gl/WebGLRenderer');\n\n            RendererClass = WebGLRenderer;\n\n            finalOptions = { ...options, ...options.webgl };\n\n            break;\n        }\n        else if (rendererType === 'canvas')\n        {\n            finalOptions = { ...options };\n\n            throw new Error('CanvasRenderer is not yet implemented');\n        }\n    }\n\n    delete finalOptions.webgpu;\n    delete finalOptions.webgl;\n\n    if (!RendererClass)\n    {\n        throw new Error('No available renderer for the current environment');\n    }\n\n    const renderer = new RendererClass();\n\n    await renderer.init(finalOptions);\n\n    return renderer;\n}\n","import { extensions, ExtensionType } from '../extensions/Extensions';\nimport { autoDetectRenderer } from '../rendering/renderers/autoDetectRenderer';\nimport { Container } from '../scene/container/Container';\nimport { deprecation, v8_0_0 } from '../utils/logging/deprecation';\n\nimport type { Rectangle } from '../maths/shapes/Rectangle';\nimport type { AutoDetectOptions } from '../rendering/renderers/autoDetectRenderer';\nimport type { RendererDestroyOptions } from '../rendering/renderers/shared/system/AbstractRenderer';\nimport type { Renderer } from '../rendering/renderers/types';\nimport type { DestroyOptions } from '../scene/container/destroyTypes';\n\n/**\n * The app module provides a set of classes to use as a starting point when building applications.\n *\n * <aside>This module has a mixin for <code>TickerPlugin</code> and <code>ResizePlugin</code>.\n * These will need to be imported if you are managing your own renderer.</aside>\n *\n * ```js\n * import { Application } from 'pixi.js';\n *\n * const app = new Application();\n *\n * await app.init();\n *\n * // don't forget to add the canvas to the DOM\n * document.body.appendChild(app.canvas);\n * ```\n * @namespace app\n */\n\n/**\n * Any plugin that's usable for Application should contain these methods.\n * @example\n * import { ApplicationPlugin } from 'pixi.js';\n *\n * const plugin: ApplicationPlugin = {\n *    init: (options: Partial<ApplicationOptions>) =>\n *    {\n *       // handle init here, use app options if needed\n *    },\n *    destroy: () =>\n *    {\n *       // handle destruction code here\n *    }\n * }\n * @memberof app\n * @see {@link app.ApplicationOptions}\n * @ignore\n */\nexport interface ApplicationPlugin\n{\n    /**\n     * Called when Application is constructed, scoped to Application instance.\n     * Passes in `options` as the only argument, which are Application `init()` options.\n     * @param {object} options - Application options.\n     */\n    init(options: Partial<ApplicationOptions>): void;\n    /** Called when destroying Application, scoped to Application instance. */\n    destroy(): void;\n}\n\n/**\n * Application options supplied to the {@link app.Application#init} method.\n * @memberof app\n * @example\n * import { Application } from 'pixi.js';\n *\n * const app = new Application();\n *\n * await app.init({\n *    autoStart: false,\n *    resizeTo: window,\n *    sharedTicker: true,\n * });\n */\nexport interface ApplicationOptions extends AutoDetectOptions, PixiMixins.ApplicationOptions { }\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface Application extends PixiMixins.Application { }\n\n/**\n * Convenience class to create a new PixiJS application.\n *\n * This class automatically creates the renderer, ticker and root container.\n * @example\n * import { Application, Sprite } from 'pixi.js';\n *\n * // Create the application\n * const app = new Application();\n *\n * await app.init({ width: 800, height: 600 });\n *\n * // Add the view to the DOM\n * document.body.appendChild(app.canvas);\n *\n * // ex, add display objects\n * app.stage.addChild(Sprite.from('something.png'));\n * @memberof app\n */\nexport class Application<R extends Renderer = Renderer>\n{\n    /**\n     * Collection of installed plugins.\n     * @alias _plugins\n     */\n    public static _plugins: ApplicationPlugin[] = [];\n\n    /** The root display container that's rendered. */\n    public stage: Container = new Container();\n\n    /**\n     * WebGL renderer if available, otherwise CanvasRenderer.\n     * @member {Renderer}\n     */\n    public renderer: R;\n\n    /** Create new Application instance */\n    constructor();\n\n    /** @deprecated since 8.0.0 */\n    constructor(options?: Partial<ApplicationOptions>);\n\n    /** @ignore */\n    constructor(...args: [Partial<ApplicationOptions>] | [])\n    {\n        // #if _DEBUG\n        if (args[0] !== undefined)\n        {\n            deprecation(v8_0_0, 'Application constructor options are deprecated, please use Application.init() instead.');\n        }\n        // #endif\n    }\n\n    /**\n     * @param options - The optional application and renderer parameters.\n     */\n    public async init(options?: Partial<ApplicationOptions>)\n    {\n        // The default options\n        options = { ...options };\n\n        this.renderer = await autoDetectRenderer(options as ApplicationOptions) as R;\n\n        // install plugins here\n        Application._plugins.forEach((plugin) =>\n        {\n            plugin.init.call(this, options);\n        });\n    }\n\n    /** Render the current stage. */\n    public render(): void\n    {\n        this.renderer.render({ container: this.stage });\n    }\n\n    /**\n     * Reference to the renderer's canvas element.\n     * @readonly\n     * @member {HTMLCanvasElement}\n     */\n    get canvas(): R['canvas']\n    {\n        return this.renderer.canvas as R['canvas'];\n    }\n\n    /**\n     * Reference to the renderer's canvas element.\n     * @member {HTMLCanvasElement}\n     * @deprecated since 8.0.0\n     */\n    get view(): R['canvas']\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'Application.view is deprecated, please use Application.canvas instead.');\n        // #endif\n\n        return this.renderer.canvas as R['canvas'];\n    }\n\n    /**\n     * Reference to the renderer's screen rectangle. Its safe to use as `filterArea` or `hitArea` for the whole screen.\n     * @readonly\n     */\n    get screen(): Rectangle\n    {\n        return this.renderer.screen;\n    }\n\n    /**\n     * Destroys the application and all of its resources.\n     * @param {object|boolean}[rendererDestroyOptions=false] - The options for destroying the renderer.\n     * @param {boolean}[rendererDestroyOptions.removeView=false] - Removes the Canvas element from the DOM.\n     * @param {object|boolean} [options=false] - The options for destroying the stage.\n     * @param {boolean} [options.children=false] - If set to true, all the children will have their destroy method\n     * called as well. `options` will be passed on to those calls.\n     * @param {boolean} [options.texture=false] - Only used for children with textures e.g. Sprites.\n     * If options.children is set to true,\n     * it should destroy the texture of the child sprite.\n     * @param {boolean} [options.textureSource=false] - Only used for children with textures e.g. Sprites.\n     *  If options.children is set to true,\n     * it should destroy the texture source of the child sprite.\n     * @param {boolean} [options.context=false] - Only used for children with graphicsContexts e.g. Graphics.\n     * If options.children is set to true,\n     * it should destroy the context of the child graphics.\n     */\n    public destroy(rendererDestroyOptions: RendererDestroyOptions = false, options: DestroyOptions = false): void\n    {\n        // Destroy plugins in the opposite order\n        // which they were constructed\n        const plugins = Application._plugins.slice(0);\n\n        plugins.reverse();\n        plugins.forEach((plugin) =>\n        {\n            plugin.destroy.call(this);\n        });\n\n        this.stage.destroy(options);\n        this.stage = null;\n\n        this.renderer.destroy(rendererDestroyOptions);\n        this.renderer = null;\n    }\n}\n\nextensions.handleByList(ExtensionType.Application, Application._plugins);\n","import { Rectangle } from '../../maths/shapes/Rectangle';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { AbstractBitmapFont } from './AbstractBitmapFont';\nimport { BitmapFontManager } from './BitmapFontManager';\n\nimport type { FontMetrics } from '../text/canvas/CanvasTextMetrics';\nimport type { BitmapFontData } from './AbstractBitmapFont';\nimport type { BitmapFontInstallOptions } from './BitmapFontManager';\n\n/**\n * Options for creating a BitmapFont.\n * @memberof text\n */\nexport interface BitmapFontOptions\n{\n    data: BitmapFontData\n    textures: Texture[]\n}\n\n/**\n * A BitmapFont object represents a particular font face, size, and style.\n * @memberof text\n */\nexport class BitmapFont extends AbstractBitmapFont<BitmapFont>\n{\n    /** the url of the font */\n    public url?: string;\n\n    constructor(options: BitmapFontOptions, url?: string)\n    {\n        super();\n\n        const { textures, data } = options;\n\n        Object.keys(data.pages).forEach((key: string) =>\n        {\n            const pageData = data.pages[parseInt(key, 10)];\n\n            const texture = textures[pageData.id];\n\n            this.pages.push({ texture });\n        });\n\n        Object.keys(data.chars).forEach((key: string) =>\n        {\n            const charData = data.chars[key];\n            const {\n                frame: textureFrame,\n                source: textureSource,\n            } = textures[charData.page];\n\n            const frameReal = new Rectangle(\n                charData.x + textureFrame.x,\n                charData.y + textureFrame.y,\n                charData.width,\n                charData.height,\n            );\n\n            const texture = new Texture({\n                source: textureSource,\n                frame: frameReal\n            });\n\n            this.chars[key] = {\n                id: key.codePointAt(0),\n                xOffset: charData.xOffset,\n                yOffset: charData.yOffset,\n                xAdvance: charData.xAdvance,\n                kerning: charData.kerning ?? {},\n                texture,\n            };\n        });\n\n        this.baseRenderedFontSize = data.fontSize;\n\n        (this.baseMeasurementFontSize as number) = data.fontSize;\n        (this.fontMetrics as FontMetrics) = {\n            ascent: 0,\n            descent: 0,\n            fontSize: data.fontSize,\n        };\n        (this.baseLineOffset as number) = data.baseLineOffset;\n        (this.lineHeight as number) = data.lineHeight;\n        (this.fontFamily as string) = data.fontFamily;\n        (this.distanceField as { type: string, range: number }) = data.distanceField ?? {\n            type: 'none',\n            range: 0,\n        };\n\n        this.url = url;\n    }\n\n    /** Destroys the BitmapFont object. */\n    public override destroy(): void\n    {\n        super.destroy();\n\n        for (let i = 0; i < this.pages.length; i++)\n        {\n            const { texture } = this.pages[i];\n\n            texture.destroy(true);\n        }\n\n        (this.pages as null) = null;\n    }\n\n    /**\n     * Generates a bitmap-font for the given style and character set\n     * @param options - Setup options for font generation.\n     * @returns Font generated by style options.\n     * @example\n     * import { BitmapFont, BitmapText } from 'pixi.js';\n     *\n     * BitmapFont.install('TitleFont', {\n     *     fontFamily: 'Arial',\n     *     fontSize: 12,\n     *     strokeThickness: 2,\n     *     fill: 'purple',\n     * });\n     *\n     * const title = new BitmapText({ text: 'This is the title', fontFamily: 'TitleFont' });\n     */\n    public static install(options: BitmapFontInstallOptions)\n    {\n        BitmapFontManager.install(options);\n    }\n    /**\n     * Uninstalls a bitmap font from the cache.\n     * @param {string} name - The name of the bitmap font to uninstall.\n     */\n    public static uninstall(name: string)\n    {\n        BitmapFontManager.uninstall(name);\n    }\n}\n","import type { BitmapFontData, RawCharData } from '../AbstractBitmapFont';\n\n/**\n * Internal data format used to convert to BitmapFontData.\n * @private\n */\nexport interface BitmapFontRawData\n{\n    info: {\n        face: string;\n        size: string;\n    }[];\n    common: { lineHeight: string, base: string }[];\n    page: {\n        id: string;\n        file: string;\n    }[];\n    chars: {\n        count: number;\n    }[];\n    char: {\n        id: string\n        page: string\n        xoffset: string\n        yoffset: string\n        xadvance: string,\n        x: string\n        y: string\n        width: string\n        height: string\n        letter?: string\n        char?: string\n    }[];\n    kernings?: {\n        count: number;\n    }[];\n    kerning?: {\n        first: string;\n        second: string;\n        amount: string;\n    }[];\n    distanceField?: {\n        fieldType: 'sdf' | 'msdf' | 'none';\n        distanceRange: string;\n    }[]\n}\n\nexport const bitmapFontTextParser = {\n    test(data: string | XMLDocument | BitmapFontData): boolean\n    {\n        return typeof data === 'string' && data.startsWith('info face=');\n    },\n\n    parse(txt: string): BitmapFontData\n    {\n        // Retrieve data item\n        const items = txt.match(/^[a-z]+\\s+.+$/gm);\n        const rawData: BitmapFontRawData = {\n            info: [],\n            common: [],\n            page: [],\n            char: [],\n            chars: [],\n            kerning: [],\n            kernings: [],\n            distanceField: [],\n        };\n\n        for (const i in items)\n        {\n            // Extract item name\n            const name = items[i].match(/^[a-z]+/gm)[0] as keyof BitmapFontRawData;\n\n            // Extract item attribute list as string ex.: \"width=10\"\n            const attributeList = items[i].match(/[a-zA-Z]+=([^\\s\"']+|\"([^\"]*)\")/gm);\n\n            // Convert attribute list into an object\n            const itemData: any = {};\n\n            for (const i in attributeList)\n            {\n                // Split key-value pairs\n                const split = attributeList[i].split('=');\n                const key = split[0];\n\n                // Remove eventual quotes from value\n                const strValue = split[1].replace(/\"/gm, '');\n\n                // Try to convert value into float\n                const floatValue = parseFloat(strValue);\n\n                // Use string value case float value is NaN\n                const value = isNaN(floatValue) ? strValue : floatValue;\n\n                itemData[key] = value;\n            }\n\n            // Push current item to the resulting data\n            rawData[name].push(itemData);\n        }\n\n        const font: BitmapFontData = {\n            chars: {},\n            pages: [],\n            lineHeight: 0,\n            fontSize: 0,\n            fontFamily: '',\n            distanceField: null,\n            baseLineOffset: 0,\n        };\n\n        const [info] = rawData.info;\n        const [common] = rawData.common;\n        const [distanceField] = rawData.distanceField ?? [];\n\n        if (distanceField)\n        {\n            font.distanceField = {\n                range: parseInt(distanceField.distanceRange, 10),\n                type: distanceField.fieldType\n            };\n        }\n\n        font.fontSize = parseInt(info.size, 10);\n        font.fontFamily = info.face;\n        font.lineHeight = parseInt(common.lineHeight, 10);\n\n        const page = rawData.page;\n\n        for (let i = 0; i < page.length; i++)\n        {\n            font.pages.push({\n                id: parseInt(page[i].id, 10) || 0,\n                file: page[i].file,\n            });\n        }\n\n        const map: Record<string, string> = {};\n\n        font.baseLineOffset = font.lineHeight - parseInt(common.base, 10);\n\n        const char = rawData.char;\n\n        for (let i = 0; i < char.length; i++)\n        {\n            const charNode = char[i];\n            const id = parseInt(charNode.id, 10);\n\n            let letter = charNode.letter ?? charNode.char ?? String.fromCharCode(id);\n\n            if (letter === 'space')letter = ' ';\n\n            map[id] = letter;\n\n            font.chars[letter] = {\n                id,\n                // texture deets..\n                page: parseInt(charNode.page, 10) || 0,\n                x: parseInt(charNode.x, 10),\n                y: parseInt(charNode.y, 10),\n                width: parseInt(charNode.width, 10),\n                height: parseInt(charNode.height, 10),\n                xOffset: parseInt(charNode.xoffset, 10),\n                yOffset: parseInt(charNode.yoffset, 10),\n                xAdvance: parseInt(charNode.xadvance, 10),\n                kerning: {},\n            } as RawCharData;\n        }\n\n        const kerning = rawData.kerning || [];\n\n        for (let i = 0; i < kerning.length; i++)\n        {\n            const first = parseInt(kerning[i].first, 10);\n            const second = parseInt(kerning[i].second, 10);\n            const amount = parseInt(kerning[i].amount, 10);\n\n            font.chars[map[second]].kerning[map[first]] = amount;\n        }\n\n        return font;\n    }\n};\n","import type { BitmapFontData, RawCharData } from '../AbstractBitmapFont';\n\nexport const bitmapFontXMLParser = {\n    test(data: string | XMLDocument | BitmapFontData): boolean\n    {\n        const xml = data as Document;\n\n        return typeof xml !== 'string'\n            && 'getElementsByTagName' in xml\n            && xml.getElementsByTagName('page').length\n            && xml.getElementsByTagName('info')[0].getAttribute('face') !== null;\n    },\n\n    parse(xml: Document): BitmapFontData\n    {\n        const data: BitmapFontData = {\n            chars: {},\n            pages: [],\n            lineHeight: 0,\n            fontSize: 0,\n            fontFamily: '',\n            distanceField: null,\n            baseLineOffset: 0,\n        };\n\n        const info = xml.getElementsByTagName('info')[0];\n        const common = xml.getElementsByTagName('common')[0];\n        const distanceField = xml.getElementsByTagName('distanceField')[0];\n\n        if (distanceField)\n        {\n            data.distanceField = {\n                type: distanceField.getAttribute('fieldType') as 'sdf' | 'msdf' | 'none',\n                range: parseInt(distanceField.getAttribute('distanceRange'), 10),\n            };\n        }\n\n        // pages and chars:\n        const page = xml.getElementsByTagName('page');\n        const char = xml.getElementsByTagName('char');\n        const kerning = xml.getElementsByTagName('kerning');\n\n        data.fontSize = parseInt(info.getAttribute('size'), 10);\n        data.fontFamily = info.getAttribute('face');\n        data.lineHeight = parseInt(common.getAttribute('lineHeight'), 10);\n\n        for (let i = 0; i < page.length; i++)\n        {\n            data.pages.push({\n                id: parseInt(page[i].getAttribute('id'), 10) || 0,\n                file: page[i].getAttribute('file'),\n            });\n        }\n\n        const map: Record<string, string> = {};\n\n        data.baseLineOffset = data.lineHeight - parseInt(common.getAttribute('base'), 10);\n\n        for (let i = 0; i < char.length; i++)\n        {\n            const charNode = char[i];\n            const id = parseInt(charNode.getAttribute('id'), 10);\n\n            let letter = charNode.getAttribute('letter') ?? charNode.getAttribute('char') ?? String.fromCharCode(id);\n\n            if (letter === 'space')letter = ' ';\n\n            map[id] = letter;\n\n            data.chars[letter] = {\n                id,\n                // texture deets..\n                page: parseInt(charNode.getAttribute('page'), 10) || 0,\n                x: parseInt(charNode.getAttribute('x'), 10),\n                y: parseInt(charNode.getAttribute('y'), 10),\n                width: parseInt(charNode.getAttribute('width'), 10),\n                height: parseInt(charNode.getAttribute('height'), 10),\n\n                // render deets..\n                xOffset: parseInt(charNode.getAttribute('xoffset'), 10),\n                yOffset: parseInt(charNode.getAttribute('yoffset'), 10), // + baseLineOffset,\n                xAdvance: parseInt(charNode.getAttribute('xadvance'), 10),\n                kerning: {},\n            } as RawCharData;\n        }\n\n        for (let i = 0; i < kerning.length; i++)\n        {\n            const first = parseInt(kerning[i].getAttribute('first'), 10);\n            const second = parseInt(kerning[i].getAttribute('second'), 10);\n            const amount = parseInt(kerning[i].getAttribute('amount'), 10);\n\n            data.chars[map[second]].kerning[map[first]] = amount;// * 10000;\n        }\n\n        return data;\n    }\n};\n","import { DOMAdapter } from '../../../environment/adapter';\nimport { bitmapFontXMLParser } from './bitmapFontXMLParser';\n\nimport type { BitmapFontData } from '../AbstractBitmapFont';\n\nexport const bitmapFontXMLStringParser = {\n    test(data: string | XMLDocument | BitmapFontData): boolean\n    {\n        if (typeof data === 'string' && data.includes('<font>'))\n        {\n            return bitmapFontXMLParser.test(DOMAdapter.get().parseXML(data));\n        }\n\n        return false;\n    },\n\n    parse(data: string): BitmapFontData\n    {\n        return bitmapFontXMLParser.parse(DOMAdapter.get().parseXML(data));\n    }\n};\n","import { LoaderParserPriority } from '../../../assets/loader/parsers/LoaderParser';\nimport { copySearchParams } from '../../../assets/utils/copySearchParams';\nimport { DOMAdapter } from '../../../environment/adapter';\nimport { ExtensionType } from '../../../extensions/Extensions';\nimport { path } from '../../../utils/path';\nimport { BitmapFont } from '../BitmapFont';\nimport { bitmapFontTextParser } from './bitmapFontTextParser';\nimport { bitmapFontXMLStringParser } from './bitmapFontXMLStringParser';\n\nimport type { CacheParser } from '../../../assets/cache/CacheParser';\nimport type { Loader } from '../../../assets/loader/Loader';\nimport type { LoaderParserAdvanced } from '../../../assets/loader/parsers/LoaderParser';\nimport type { ResolvedAsset } from '../../../assets/types';\nimport type { Texture } from '../../../rendering/renderers/shared/texture/Texture';\n\nconst validExtensions = ['.xml', '.fnt'];\n\n/** simple loader plugin for loading in bitmap fonts! */\nexport const bitmapFontCachePlugin = {\n    extension: {\n        type: ExtensionType.CacheParser,\n        name: 'cacheBitmapFont',\n    },\n    test: (asset: BitmapFont) => asset instanceof BitmapFont,\n    getCacheableAssets(keys: string[], asset: BitmapFont)\n    {\n        const out: Record<string, BitmapFont> = {};\n\n        keys.forEach((key) =>\n        {\n            out[key] = asset;\n            out[`${key}-bitmap`] = asset;\n        });\n\n        out[`${asset.fontFamily}-bitmap`] = asset;\n\n        return out;\n    }\n} satisfies CacheParser<BitmapFont>;\n\nexport const loadBitmapFont = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Normal,\n    },\n\n    name: 'loadBitmapFont',\n\n    test(url: string): boolean\n    {\n        return validExtensions.includes(path.extname(url).toLowerCase());\n    },\n\n    async testParse(data: string): Promise<boolean>\n    {\n        return bitmapFontTextParser.test(data) || bitmapFontXMLStringParser.test(data);\n    },\n\n    async parse(asset: string, data: ResolvedAsset, loader: Loader): Promise<BitmapFont>\n    {\n        const bitmapFontData = bitmapFontTextParser.test(asset)\n            ? bitmapFontTextParser.parse(asset)\n            : bitmapFontXMLStringParser.parse(asset);\n\n        const { src } = data;\n        const { pages } = bitmapFontData;\n        const textureUrls = [];\n\n        // if we have a distance field - we can assume this is a signed distance field font\n        // and we should use force linear filtering and no alpha premultiply\n        const textureOptions = (bitmapFontData.distanceField) ? {\n            scaleMode: 'linear',\n            alphaMode: 'premultiply-alpha-on-upload',\n            autoGenerateMipmaps: false,\n            resolution: 1,\n        } : {};\n\n        for (let i = 0; i < pages.length; ++i)\n        {\n            const pageFile = pages[i].file;\n            let imagePath = path.join(path.dirname(src), pageFile);\n\n            imagePath = copySearchParams(imagePath, src);\n\n            textureUrls.push({\n                src: imagePath,\n                data: textureOptions\n            });\n        }\n\n        const loadedTextures = await loader.load<Texture>(textureUrls);\n        const textures = textureUrls.map((url) => loadedTextures[url.src]);\n\n        const bitmapFont = new BitmapFont({\n            data: bitmapFontData,\n            textures\n        }, src);\n\n        return bitmapFont;\n    },\n\n    async load(url: string, _options: ResolvedAsset): Promise<string>\n    {\n        const response = await DOMAdapter.get().fetch(url);\n\n        return await response.text();\n    },\n\n    async unload(bitmapFont: BitmapFont, _resolvedAsset, loader): Promise<void>\n    {\n        await Promise.all(bitmapFont.pages.map((page) => loader.unload(page.texture.source._sourceOrigin)));\n\n        bitmapFont.destroy();\n    }\n} satisfies LoaderParserAdvanced<string, BitmapFont, BitmapFont>;\n","import type { Loader } from './loader/Loader';\nimport type { ResolvedAsset } from './types';\n\n/**\n * Quietly Loads assets in the background.\n * @memberof assets\n */\nexport class BackgroundLoader\n{\n    /** Whether or not the loader should continue loading. */\n    private _isActive: boolean;\n\n    /** Assets to load. */\n    private readonly _assetList: ResolvedAsset[];\n\n    /** Whether or not the loader is loading. */\n    private _isLoading: boolean;\n\n    /** Number of assets to load at a time. */\n    private readonly _maxConcurrent: number;\n\n    /** Should the loader log to the console. */\n    public verbose: boolean;\n    private readonly _loader: Loader;\n\n    /**\n     * @param loader\n     * @param verbose - should the loader log to the console\n     */\n    constructor(loader: Loader, verbose = false)\n    {\n        this._loader = loader;\n        this._assetList = [];\n        this._isLoading = false;\n        this._maxConcurrent = 1;\n        this.verbose = verbose;\n    }\n\n    /**\n     * Adds an array of assets to load.\n     * @param assetUrls - assets to load\n     */\n    public add(assetUrls: ResolvedAsset[]): void\n    {\n        assetUrls.forEach((a) =>\n        {\n            this._assetList.push(a);\n        });\n\n        if (this.verbose)\n        {\n            // eslint-disable-next-line no-console\n            console.log('[BackgroundLoader] assets: ', this._assetList);\n        }\n\n        if (this._isActive && !this._isLoading)\n        {\n            void this._next();\n        }\n    }\n\n    /**\n     * Loads the next set of assets. Will try to load as many assets as it can at the same time.\n     *\n     * The max assets it will try to load at one time will be 4.\n     */\n    private async _next(): Promise<void>\n    {\n        if (this._assetList.length && this._isActive)\n        {\n            this._isLoading = true;\n\n            const toLoad = [];\n\n            const toLoadAmount = Math.min(this._assetList.length, this._maxConcurrent);\n\n            for (let i = 0; i < toLoadAmount; i++)\n            {\n                toLoad.push(this._assetList.pop());\n            }\n\n            await this._loader.load(toLoad);\n\n            this._isLoading = false;\n\n            void this._next();\n        }\n    }\n\n    /**\n     * Activate/Deactivate the loading. If set to true then it will immediately continue to load the next asset.\n     * @returns whether the class is active\n     */\n    get active(): boolean\n    {\n        return this._isActive;\n    }\n\n    set active(value: boolean)\n    {\n        if (this._isActive === value) return;\n\n        this._isActive = value;\n\n        if (value && !this._isLoading)\n        {\n            void this._next();\n        }\n    }\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture';\n\nimport type { CacheParser } from '../CacheParser';\n\n/**\n * Returns an object of textures from an array of textures to be cached\n * @memberof assets\n */\nexport const cacheTextureArray: CacheParser<Texture[]> = {\n    extension: {\n        type: ExtensionType.CacheParser,\n        name: 'cacheTextureArray',\n    },\n\n    test: (asset: any[]) => Array.isArray(asset) && asset.every((t) => t instanceof Texture),\n\n    getCacheableAssets: (keys: string[], asset: Texture[]) =>\n    {\n        const out: Record<string, Texture> = {};\n\n        keys.forEach((key: string) =>\n        {\n            asset.forEach((item: Texture, i: number) =>\n            {\n                out[key + (i === 0 ? '' : i + 1)] = item;\n            });\n        });\n\n        return out;\n    }\n};\n","export async function testImageFormat(imageData: string): Promise<boolean>\n{\n    // Some browsers currently do not support createImageBitmap with Blob, so new Image() is preferred when exist.\n    // See https://caniuse.com/createimagebitmap for more information.\n\n    if ('Image' in globalThis)\n    {\n        return new Promise<boolean>((resolve) =>\n        {\n            const image = new Image();\n\n            image.onload = () =>\n            {\n                resolve(true);\n            };\n            image.onerror = () =>\n            {\n                resolve(false);\n            };\n            image.src = imageData;\n        });\n    }\n\n    if ('createImageBitmap' in globalThis && 'fetch' in globalThis)\n    {\n        try\n        {\n            const blob = await (await fetch(imageData)).blob();\n\n            await createImageBitmap(blob);\n        }\n        catch (e)\n        {\n            return false;\n        }\n\n        return true;\n    }\n\n    return false;\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { testImageFormat } from '../utils/testImageFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the AVIF image format.\n * @memberof assets\n */\nexport const detectAvif: FormatDetectionParser = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 1,\n    },\n    test: async (): Promise<boolean> => testImageFormat(\n        // eslint-disable-next-line max-len\n        'data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A='\n    ),\n    add: async (formats) => [...formats, 'avif'],\n    remove: async (formats) => formats.filter((f) => f !== 'avif'),\n};\n","import { ExtensionType } from '../../../extensions/Extensions';\n\nimport type { FormatDetectionParser } from '../types';\n\nconst imageFormats = ['png', 'jpg', 'jpeg'];\n\n/**\n * Adds some default image formats to the detection parser\n * @memberof assets\n */\nexport const detectDefaults = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: -1,\n    },\n    test: (): Promise<boolean> => Promise.resolve(true),\n    add: async (formats) => [...formats, ...imageFormats],\n    remove: async (formats) => formats.filter((f) => !imageFormats.includes(f)),\n} as FormatDetectionParser;\n","const inWorker = 'WorkerGlobalScope' in globalThis\n    && globalThis instanceof (globalThis as any).WorkerGlobalScope;\n\nexport function testVideoFormat(mimeType: string): boolean\n{\n    if (inWorker)\n    {\n        return false;\n    }\n\n    const video = document.createElement('video');\n\n    return video.canPlayType(mimeType) !== '';\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { testVideoFormat } from '../utils/testVideoFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the MP4 video format.\n * @memberof assets\n */\nexport const detectMp4 = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 0,\n    },\n    test: async (): Promise<boolean> => testVideoFormat('video/mp4'),\n    add: async (formats) => [...formats, 'mp4', 'm4v'],\n    remove: async (formats) => formats.filter((f) => f !== 'mp4' && f !== 'm4v'),\n} as FormatDetectionParser;\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { testVideoFormat } from '../utils/testVideoFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the OGV video format.\n * @memberof assets\n */\nexport const detectOgv = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 0,\n    },\n    test: async (): Promise<boolean> => testVideoFormat('video/ogg'),\n    add: async (formats) => [...formats, 'ogv'],\n    remove: async (formats) => formats.filter((f) => f !== 'ogv'),\n} as FormatDetectionParser;\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { testVideoFormat } from '../utils/testVideoFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the WebM video format.\n * @memberof assets\n */\nexport const detectWebm = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 0,\n    },\n    test: async (): Promise<boolean> => testVideoFormat('video/webm'),\n    add: async (formats) => [...formats, 'webm'],\n    remove: async (formats) => formats.filter((f) => f !== 'webm'),\n} as FormatDetectionParser;\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { testImageFormat } from '../utils/testImageFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the WebP image format.\n * @memberof assets\n */\nexport const detectWebp = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 0,\n    },\n    test: async (): Promise<boolean> => testImageFormat(\n        'data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA='\n    ),\n    add: async (formats) => [...formats, 'webp'],\n    remove: async (formats) => formats.filter((f) => f !== 'webp'),\n} as FormatDetectionParser;\n","import { warn } from '../../utils/logging/warn';\nimport { path } from '../../utils/path';\nimport { convertToList } from '../utils/convertToList';\nimport { isSingleItem } from '../utils/isSingleItem';\n\nimport type { ResolvedAsset } from '../types';\nimport type { LoaderParser } from './parsers/LoaderParser';\nimport type { PromiseAndParser } from './types';\n\n/**\n * The Loader is responsible for loading all assets, such as images, spritesheets, audio files, etc.\n * It does not do anything clever with URLs - it just loads stuff!\n * Behind the scenes all things are cached using promises. This means it's impossible to load an asset more than once.\n * Through the use of LoaderParsers, the loader can understand how to load any kind of file!\n *\n * It is not intended that this class is created by developers - its part of the Asset class\n * This is the second major system of PixiJS' main Assets class\n * @memberof assets\n */\nexport class Loader\n{\n    private readonly _parsers: LoaderParser[] = [];\n    private _parserHash: Record<string, LoaderParser>;\n\n    private _parsersValidated = false;\n\n    /**\n     * All loader parsers registered\n     * @type {assets.LoaderParser[]}\n     */\n    public parsers = new Proxy(this._parsers, {\n        set: (target, key, value) =>\n        {\n            this._parsersValidated = false;\n\n            target[key as any as number] = value;\n\n            return true;\n        }\n    });\n\n    /** Cache loading promises that ae currently active */\n    public promiseCache: Record<string, PromiseAndParser> = {};\n\n    /** function used for testing */\n    public reset(): void\n    {\n        this._parsersValidated = false;\n        this.promiseCache = {};\n    }\n\n    /**\n     * Used internally to generate a promise for the asset to be loaded.\n     * @param url - The URL to be loaded\n     * @param data - any custom additional information relevant to the asset being loaded\n     * @returns - a promise that will resolve to an Asset for example a Texture of a JSON object\n     */\n    private _getLoadPromiseAndParser(url: string, data?: ResolvedAsset): PromiseAndParser\n    {\n        const result: PromiseAndParser = {\n            promise: null,\n            parser: null\n        };\n\n        result.promise = (async () =>\n        {\n            let asset = null;\n\n            let parser: LoaderParser = null;\n\n            // first check to see if the user has specified a parser\n            if (data.loadParser)\n            {\n                // they have? lovely, lets use it\n                parser = this._parserHash[data.loadParser];\n\n                if (!parser)\n                {\n                    // #if _DEBUG\n                    // eslint-disable-next-line max-len\n                    warn(`[Assets] specified load parser \"${data.loadParser}\" not found while loading ${url}`);\n                    // #endif\n                }\n            }\n\n            // no parser specified, so lets try and find one using the tests\n            if (!parser)\n            {\n                for (let i = 0; i < this.parsers.length; i++)\n                {\n                    const parserX = this.parsers[i];\n\n                    if (parserX.load && parserX.test?.(url, data, this))\n                    {\n                        parser = parserX;\n                        break;\n                    }\n                }\n\n                if (!parser)\n                {\n                    // #if _DEBUG\n                    // eslint-disable-next-line max-len\n                    warn(`[Assets] ${url} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`);\n                    // #endif\n\n                    return null;\n                }\n            }\n\n            asset = await parser.load(url, data, this);\n            result.parser = parser;\n\n            for (let i = 0; i < this.parsers.length; i++)\n            {\n                const parser = this.parsers[i];\n\n                if (parser.parse)\n                {\n                    if (parser.parse && await parser.testParse?.(asset, data, this))\n                    {\n                        // transform the asset..\n                        asset = await parser.parse(asset, data, this) || asset;\n\n                        result.parser = parser;\n                    }\n                }\n            }\n\n            return asset;\n        })();\n\n        return result;\n    }\n\n    /**\n     * Loads one or more assets using the parsers added to the Loader.\n     * @example\n     * // Single asset:\n     * const asset = await Loader.load('cool.png');\n     * console.log(asset);\n     *\n     * // Multiple assets:\n     * const assets = await Loader.load(['cool.png', 'cooler.png']);\n     * console.log(assets);\n     * @param assetsToLoadIn - urls that you want to load, or a single one!\n     * @param onProgress - For multiple asset loading only, an optional function that is called\n     * when progress on asset loading is made. The function is passed a single parameter, `progress`,\n     * which represents the percentage (0.0 - 1.0) of the assets loaded. Do not use this function\n     * to detect when assets are complete and available, instead use the Promise returned by this function.\n     */\n    public async load<T = any>(\n        assetsToLoadIn: string | ResolvedAsset,\n        onProgress?: (progress: number) => void,\n    ): Promise<T>;\n    public async load<T = any>(\n        assetsToLoadIn: string[] | ResolvedAsset[],\n        onProgress?: (progress: number) => void,\n    ): Promise<Record<string, T>>;\n    public async load<T = any>(\n        assetsToLoadIn: string | string[] | ResolvedAsset | ResolvedAsset[],\n        onProgress?: (progress: number) => void,\n    ): Promise<T | Record<string, T>>\n    {\n        if (!this._parsersValidated)\n        {\n            this._validateParsers();\n        }\n\n        let count = 0;\n\n        const assets: Record<string, Promise<any>> = {};\n\n        const singleAsset = isSingleItem(assetsToLoadIn);\n\n        const assetsToLoad = convertToList<ResolvedAsset>(assetsToLoadIn, (item) => ({\n            alias: [item],\n            src: item,\n        }));\n\n        const total = assetsToLoad.length;\n\n        const promises: Promise<void>[] = assetsToLoad.map(async (asset: ResolvedAsset) =>\n        {\n            const url = path.toAbsolute(asset.src);\n\n            if (!assets[asset.src])\n            {\n                try\n                {\n                    if (!this.promiseCache[url])\n                    {\n                        this.promiseCache[url] = this._getLoadPromiseAndParser(url, asset);\n                    }\n\n                    assets[asset.src] = await this.promiseCache[url].promise;\n\n                    // Only progress if nothing goes wrong\n                    if (onProgress) onProgress(++count / total);\n                }\n                catch (e)\n                {\n                    // Delete eventually registered file and promises from internal cache\n                    // so they can be eligible for another loading attempt\n                    delete this.promiseCache[url];\n                    delete assets[asset.src];\n\n                    // Stop further execution\n                    throw new Error(`[Loader.load] Failed to load ${url}.\\n${e}`);\n                }\n            }\n        });\n\n        await Promise.all(promises);\n\n        return singleAsset ? assets[assetsToLoad[0].src] : assets;\n    }\n\n    /**\n     * Unloads one or more assets. Any unloaded assets will be destroyed, freeing up memory for your app.\n     * The parser that created the asset, will be the one that unloads it.\n     * @example\n     * // Single asset:\n     * const asset = await Loader.load('cool.png');\n     *\n     * await Loader.unload('cool.png');\n     *\n     * console.log(asset.destroyed); // true\n     * @param assetsToUnloadIn - urls that you want to unload, or a single one!\n     */\n    public async unload(\n        assetsToUnloadIn: string | string[] | ResolvedAsset | ResolvedAsset[],\n    ): Promise<void>\n    {\n        const assetsToUnload = convertToList<ResolvedAsset>(assetsToUnloadIn, (item) => ({\n            alias: [item],\n            src: item,\n        }));\n\n        const promises: Promise<void>[] = assetsToUnload.map(async (asset: ResolvedAsset) =>\n        {\n            const url = path.toAbsolute(asset.src);\n\n            const loadPromise = this.promiseCache[url];\n\n            if (loadPromise)\n            {\n                const loadedAsset = await loadPromise.promise;\n\n                delete this.promiseCache[url];\n\n                await loadPromise.parser?.unload?.(loadedAsset, asset, this);\n            }\n        });\n\n        await Promise.all(promises);\n    }\n\n    /** validates our parsers, right now it only checks for name conflicts but we can add more here as required! */\n    private _validateParsers()\n    {\n        this._parsersValidated = true;\n\n        this._parserHash = this._parsers\n            .filter((parser) => parser.name)\n            .reduce((hash, parser) =>\n            {\n                if (!parser.name)\n                {\n                    // #if _DEBUG\n                    warn(`[Assets] loadParser should have a name`);\n                    // #endif\n                }\n                else if (hash[parser.name])\n                {\n                    // #if _DEBUG\n                    warn(`[Assets] loadParser name conflict \"${parser.name}\"`);\n                    // #endif\n                }\n\n                return { ...hash, [parser.name]: parser };\n            }, {} as Record<string, LoaderParser>);\n    }\n}\n","export function checkDataUrl(url: string, mimes: string | string[]): boolean\n{\n    if (Array.isArray(mimes))\n    {\n        for (const mime of mimes)\n        {\n            if (url.startsWith(`data:${mime}`)) return true;\n        }\n\n        return false;\n    }\n\n    return url.startsWith(`data:${mimes}`);\n}\n","import { path } from '../../utils/path';\n\nexport function checkExtension(url: string, extension: string | string[]): boolean\n{\n    const tempURL = url.split('?')[0];\n    const ext = path.extname(tempURL).toLowerCase();\n\n    if (Array.isArray(extension))\n    {\n        return extension.includes(ext);\n    }\n\n    return ext === extension;\n}\n\n","import { DOMAdapter } from '../../../environment/adapter';\nimport { ExtensionType } from '../../../extensions/Extensions';\nimport { checkDataUrl } from '../../utils/checkDataUrl';\nimport { checkExtension } from '../../utils/checkExtension';\nimport { LoaderParserPriority } from './LoaderParser';\n\nimport type { LoaderParser } from './LoaderParser';\n\nconst validJSONExtension = '.json';\nconst validJSONMIME = 'application/json';\n\n/**\n * A simple loader plugin for loading json data\n * @memberof assets\n */\nexport const loadJson = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Low,\n    },\n\n    name: 'loadJson',\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validJSONMIME) || checkExtension(url, validJSONExtension);\n    },\n\n    async load<T>(url: string): Promise<T>\n    {\n        const response = await DOMAdapter.get().fetch(url);\n\n        const json = await response.json();\n\n        return json as T;\n    },\n} satisfies LoaderParser<string>;\n","import { DOMAdapter } from '../../../environment/adapter';\nimport { ExtensionType } from '../../../extensions/Extensions';\nimport { checkDataUrl } from '../../utils/checkDataUrl';\nimport { checkExtension } from '../../utils/checkExtension';\nimport { LoaderParserPriority } from './LoaderParser';\n\nimport type { LoaderParser } from './LoaderParser';\n\nconst validTXTExtension = '.txt';\nconst validTXTMIME = 'text/plain';\n\n/**\n * A simple loader plugin for loading text data\n * @memberof assets\n */\nexport const loadTxt = {\n\n    name: 'loadTxt',\n\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Low,\n        name: 'loadTxt',\n    },\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validTXTMIME) || checkExtension(url, validTXTExtension);\n    },\n\n    async load(url: string): Promise<string>\n    {\n        const response = await DOMAdapter.get().fetch(url);\n\n        const txt = await response.text();\n\n        return txt;\n    },\n} satisfies LoaderParser<string>;\n","import { DOMAdapter } from '../../../environment/adapter';\nimport { ExtensionType } from '../../../extensions/Extensions';\nimport { warn } from '../../../utils/logging/warn';\nimport { path } from '../../../utils/path';\nimport { Cache } from '../../cache/Cache';\nimport { checkDataUrl } from '../../utils/checkDataUrl';\nimport { checkExtension } from '../../utils/checkExtension';\nimport { LoaderParserPriority } from './LoaderParser';\n\nimport type { ResolvedAsset } from '../../types';\nimport type { LoaderParser } from './LoaderParser';\n\nconst validWeights = [\n    'normal', 'bold',\n    '100', '200', '300', '400', '500', '600', '700', '800', '900',\n];\nconst validFontExtensions = ['.ttf', '.otf', '.woff', '.woff2'];\nconst validFontMIMEs = [\n    'font/ttf',\n    'font/otf',\n    'font/woff',\n    'font/woff2',\n];\n\n/**\n * Data for loading a font\n * @memberof assets\n */\nexport type LoadFontData = {\n    /** Font family name */\n    family: string;\n    /** A set of optional descriptors passed as an object. It can contain any of the descriptors available for @font-face: */\n    display: string;\n    /**\n     * The featureSettings property of the FontFace interface retrieves or sets infrequently used\n     * font features that are not available from a font's variant properties.\n     */\n    featureSettings: string;\n    /** The stretch property of the FontFace interface retrieves or sets how the font stretches. */\n    stretch: string;\n    /** The style property of the FontFace interface retrieves or sets the font's style. */\n    style: string;\n    /**\n     * The unicodeRange property of the FontFace interface retrieves or sets the range of\n     * unicode code points encompassing the font.\n     */\n    unicodeRange: string;\n    /** The variant property of the FontFace interface programmatically retrieves or sets font variant values. */\n    variant: string;\n    /** The weight property of the FontFace interface retrieves or sets the weight of the font. */\n    weights: string[];\n};\n\n/**\n * RegExp for matching CSS <ident-token>. It doesn't consider escape and non-ASCII characters, but enough for us.\n * @see {@link https://www.w3.org/TR/css-syntax-3/#ident-token-diagram}\n */\nconst CSS_IDENT_TOKEN_REGEX = /^(--|-?[A-Z_])[0-9A-Z_-]*$/i;\n\n/**\n * Return font face name from a file name\n * Ex.: 'fonts/titan-one.woff' turns into 'Titan One'\n * @param url - File url\n * @memberof assets\n */\nexport function getFontFamilyName(url: string): string\n{\n    const ext = path.extname(url);\n    const name = path.basename(url, ext);\n\n    // Replace dashes by white spaces\n    const nameWithSpaces = name.replace(/(-|_)/g, ' ');\n\n    // Upper case first character of each word\n    const nameTokens = nameWithSpaces.toLowerCase()\n        .split(' ')\n        .map((word) => word.charAt(0).toUpperCase() + word.slice(1));\n\n    let valid = nameTokens.length > 0;\n\n    for (const token of nameTokens)\n    {\n        if (!token.match(CSS_IDENT_TOKEN_REGEX))\n        {\n            valid = false;\n            break;\n        }\n    }\n\n    let fontFamilyName = nameTokens.join(' ');\n\n    if (!valid)\n    {\n        fontFamilyName = `\"${fontFamilyName.replace(/[\\\\\"]/g, '\\\\$&')}\"`;\n    }\n\n    return fontFamilyName;\n}\n\n// See RFC 3986 Chapter 2. Characters\nconst validURICharactersRegex = /^[0-9A-Za-z%:/?#\\[\\]@!\\$&'()\\*\\+,;=\\-._~]*$/;\n\n/**\n * Encode URI only when it contains invalid characters.\n * @param uri - URI to encode.\n */\nfunction encodeURIWhenNeeded(uri: string)\n{\n    if (validURICharactersRegex.test(uri))\n    {\n        return uri;\n    }\n\n    return encodeURI(uri);\n}\n\n/**\n * A loader plugin for handling web fonts\n * @example\n * import { Assets } from 'pixi.js';\n *\n * Assets.load({\n *   alias: 'font',\n *   src: 'fonts/titan-one.woff',\n *   data: {\n *     family: 'Titan One',\n *     weights: ['normal', 'bold'],\n *   }\n * })\n * @memberof assets\n */\nexport const loadWebFont = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Low,\n    },\n\n    name: 'loadWebFont',\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validFontMIMEs) || checkExtension(url, validFontExtensions);\n    },\n\n    async load(url: string, options?: ResolvedAsset<LoadFontData>): Promise<FontFace | FontFace[]>\n    {\n        const fonts = DOMAdapter.get().getFontFaceSet();\n\n        if (fonts)\n        {\n            const fontFaces: FontFace[] = [];\n            const name = options.data?.family ?? getFontFamilyName(url);\n            const weights = options.data?.weights?.filter((weight) => validWeights.includes(weight)) ?? ['normal'];\n            const data = options.data ?? {};\n\n            for (let i = 0; i < weights.length; i++)\n            {\n                const weight = weights[i];\n\n                const font = new FontFace(name, `url(${encodeURIWhenNeeded(url)})`, {\n                    ...data,\n                    weight,\n                });\n\n                await font.load();\n\n                fonts.add(font);\n\n                fontFaces.push(font);\n            }\n\n            Cache.set(`${name}-and-url`, {\n                url,\n                fontFaces,\n            });\n\n            return fontFaces.length === 1 ? fontFaces[0] : fontFaces;\n        }\n\n        // #if _DEBUG\n        warn('[loadWebFont] FontFace API is not supported. Skipping loading font');\n        // #endif\n\n        return null;\n    },\n\n    unload(font: FontFace | FontFace[]): void\n    {\n        (Array.isArray(font) ? font : [font])\n            .forEach((t) =>\n            {\n                Cache.remove(t.family);\n                DOMAdapter.get().getFontFaceSet().delete(t);\n            });\n    }\n} satisfies LoaderParser<FontFace | FontFace[]>;\n","import { Resolver } from '../../assets/resolver/Resolver';\n\n/**\n * get the resolution / device pixel ratio of an asset by looking for the prefix\n * used by spritesheets and image urls\n * @memberof utils\n * @function getResolutionOfUrl\n * @param {string} url - the image path\n * @param {number} [defaultValue=1] - the defaultValue if no filename prefix is set.\n * @returns {number} resolution / device pixel ratio of an asset\n */\nexport function getResolutionOfUrl(url: string, defaultValue = 1): number\n{\n    const resolution = Resolver.RETINA_PREFIX?.exec(url);\n\n    if (resolution)\n    {\n        return parseFloat(resolution[1]);\n    }\n\n    return defaultValue;\n}\n","import { Texture } from '../../../../../rendering/renderers/shared/texture/Texture';\nimport { warn } from '../../../../../utils/logging/warn';\nimport { Cache } from '../../../../cache/Cache';\n\nimport type { TextureSource } from '../../../../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Loader } from '../../../Loader';\n\n/**\n * Creates a texture from a source and adds it to the cache.\n * @param source - source of the texture\n * @param loader - loader\n * @param url - url of the texture\n * @ignore\n */\nexport function createTexture(source: TextureSource, loader: Loader, url: string)\n{\n    source.label = url;\n    source._sourceOrigin = url;\n\n    const texture = new Texture({\n        source,\n        label: url,\n    });\n\n    const unload = () =>\n    {\n        delete loader.promiseCache[url];\n\n        if (Cache.has(url))\n        {\n            Cache.remove(url);\n        }\n    };\n\n    // remove the promise from the loader and the url from the cache when the texture is destroyed\n    texture.source.once('destroy', () =>\n    {\n        if (loader.promiseCache[url])\n        {\n            // #if _DEBUG\n            warn('[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! '\n           + 'Use Assets.unload() instead of destroying the TextureSource.');\n            // #endif\n\n            unload();\n        }\n    });\n\n    texture.once('destroy', () =>\n    {\n        if (!source.destroyed)\n        {\n            // #if _DEBUG\n            warn('[Assets] A Texture managed by Assets was destroyed instead of unloaded! '\n             + 'Use Assets.unload() instead of destroying the Texture.');\n            // #endif\n\n            unload();\n        }\n    });\n\n    return texture;\n}\n","import { DOMAdapter } from '../../../../environment/adapter';\nimport { ExtensionType } from '../../../../extensions/Extensions';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource';\nimport { GraphicsContext } from '../../../../scene/graphics/shared/GraphicsContext';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl';\nimport { checkDataUrl } from '../../../utils/checkDataUrl';\nimport { checkExtension } from '../../../utils/checkExtension';\nimport { type LoaderParser, LoaderParserPriority } from '../LoaderParser';\nimport { createTexture } from './utils/createTexture';\n\nimport type { TextureSourceOptions } from '../../../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport type { ResolvedAsset } from '../../../types';\nimport type { Loader } from '../../Loader';\n\n/**\n * Configuration for the [loadSVG]{@link assets.loadSVG} plugin.\n * @see assets.loadSVG\n * @memberof assets\n */\nexport interface LoadSVGConfig\n{\n    /**\n     * The crossOrigin value to use for loading the SVG as an image.\n     * @default 'anonymous'\n     */\n    crossOrigin: HTMLImageElement['crossOrigin'];\n    /**\n     * When set to `true`, loading and decoding images will happen with `new Image()`,\n     * @default false\n     */\n    parseAsGraphicsContext: boolean;\n}\n\n/**\n * Regular expression for SVG XML document.\n * @example &lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;&lt;!-- image/svg --&gt;&lt;svg\n * @readonly\n */\nconst validSVGExtension = '.svg';\nconst validSVGMIME = 'image/svg+xml';\n\n/**\n * A simple loader plugin for loading json data\n * @memberof assets\n */\nexport const loadSvg: LoaderParser<Texture | GraphicsContext, TextureSourceOptions & LoadSVGConfig, LoadSVGConfig> = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Low,\n        name: 'loadSVG',\n    },\n\n    name: 'loadSVG',\n\n    config: {\n        crossOrigin: 'anonymous',\n        parseAsGraphicsContext: false,\n    },\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validSVGMIME) || checkExtension(url, validSVGExtension);\n    },\n\n    async load(\n        url: string,\n        asset: ResolvedAsset<TextureSourceOptions & LoadSVGConfig>,\n        loader: Loader\n    ): Promise<Texture | GraphicsContext>\n    {\n        if (asset.data.parseAsGraphicsContext ?? this.config.parseAsGraphicsContext)\n        {\n            return loadAsGraphics(url);\n        }\n\n        return loadAsTexture(url, asset, loader, this.config.crossOrigin);\n    },\n\n    unload(asset: Texture | GraphicsContext): void\n    {\n        asset.destroy(true);\n    }\n\n};\n\nasync function loadAsTexture(\n    url: string,\n    asset: ResolvedAsset<TextureSourceOptions & LoadSVGConfig>,\n    loader: Loader,\n    crossOrigin: HTMLImageElement['crossOrigin']\n): Promise<Texture>\n{\n    const response = await DOMAdapter.get().fetch(url);\n\n    const blob = await response.blob();\n\n    const blobUrl = URL.createObjectURL(blob);\n\n    const image = new Image();\n\n    image.src = blobUrl;\n    image.crossOrigin = crossOrigin;\n    await image.decode();\n\n    URL.revokeObjectURL(blobUrl);\n\n    // convert to canvas...\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n\n    const resolution = asset.data?.resolution || getResolutionOfUrl(url);\n\n    const width = asset.data?.width ?? image.width;\n    const height = asset.data?.height ?? image.height;\n\n    canvas.width = width * resolution;\n    canvas.height = height * resolution;\n\n    context.drawImage(image, 0, 0, width * resolution, height * resolution);\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const { parseAsGraphicsContext: _p, ...rest } = asset.data;\n    const base = new ImageSource({\n        resource: canvas,\n        alphaMode: 'premultiply-alpha-on-upload',\n        resolution,\n        ...rest,\n    });\n\n    return createTexture(base, loader, url);\n}\n\nasync function loadAsGraphics(url: string): Promise<GraphicsContext>\n{\n    const response = await DOMAdapter.get().fetch(url);\n    const svgSource = await response.text();\n\n    const context = new GraphicsContext();\n\n    context.svg(svgSource);\n\n    return context;\n}\n","import CheckImageBitmapWorker from 'worker:./checkImageBitmap.worker.ts';\nimport LoadImageBitmapWorker from 'worker:./loadImageBitmap.worker.ts';\n\nlet UUID = 0;\nlet MAX_WORKERS: number;\n\ntype LoadImageBitmapResult = {\n    data?: ImageBitmap,\n    error?: Error,\n    uuid: number,\n    id: string,\n};\n\nclass WorkerManagerClass\n{\n    public worker: Worker;\n    private _resolveHash: {\n        [key: string]: {\n            resolve: (...param: any[]) => void;\n            reject: (...param: any[]) => void;\n        }\n    };\n    private readonly _workerPool: Worker[];\n    private readonly _queue: {\n        id: string;\n        arguments: any[];\n        resolve: (...param: any[]) => void;\n        reject: (...param: any[]) => void;\n    }[];\n    private _initialized = false;\n    private _createdWorkers = 0;\n    private _isImageBitmapSupported?: Promise<boolean>;\n\n    constructor()\n    {\n        this._workerPool = [];\n        this._queue = [];\n\n        this._resolveHash = {};\n    }\n\n    public isImageBitmapSupported(): Promise<boolean>\n    {\n        if (this._isImageBitmapSupported !== undefined) return this._isImageBitmapSupported;\n\n        this._isImageBitmapSupported = new Promise((resolve) =>\n        {\n            const { worker } = new CheckImageBitmapWorker();\n\n            worker.addEventListener('message', (event: MessageEvent<boolean>) =>\n            {\n                worker.terminate();\n                CheckImageBitmapWorker.revokeObjectURL();\n                resolve(event.data);\n            });\n        });\n\n        return this._isImageBitmapSupported;\n    }\n\n    public loadImageBitmap(src: string): Promise<ImageBitmap>\n    {\n        return this._run('loadImageBitmap', [src]) as Promise<ImageBitmap>;\n    }\n\n    private async _initWorkers()\n    {\n        if (this._initialized) return;\n\n        this._initialized = true;\n    }\n\n    private _getWorker(): Worker\n    {\n        if (MAX_WORKERS === undefined)\n        {\n            MAX_WORKERS = navigator.hardwareConcurrency || 4;\n        }\n        let worker = this._workerPool.pop();\n\n        if (!worker && this._createdWorkers < MAX_WORKERS)\n        {\n            // only create as many as MAX_WORKERS allows..\n            this._createdWorkers++;\n            worker = new LoadImageBitmapWorker().worker;\n\n            worker.addEventListener('message', (event: MessageEvent) =>\n            {\n                this._complete(event.data);\n\n                this._returnWorker(event.target as Worker);\n                this._next();\n            });\n        }\n\n        return worker;\n    }\n\n    private _returnWorker(worker: Worker)\n    {\n        this._workerPool.push(worker);\n    }\n\n    private _complete(data: LoadImageBitmapResult): void\n    {\n        if (data.error !== undefined)\n        {\n            this._resolveHash[data.uuid].reject(data.error);\n        }\n        else\n        {\n            this._resolveHash[data.uuid].resolve(data.data);\n        }\n\n        this._resolveHash[data.uuid] = null;\n    }\n\n    private async _run(id: string, args: any[]): Promise<any>\n    {\n        await this._initWorkers();\n        // push into the queue...\n\n        const promise = new Promise((resolve, reject) =>\n        {\n            this._queue.push({ id, arguments: args, resolve, reject });\n        });\n\n        this._next();\n\n        return promise;\n    }\n\n    private _next(): void\n    {\n        // nothing to do\n        if (!this._queue.length) return;\n\n        const worker = this._getWorker();\n\n        // no workers available...\n        if (!worker)\n        {\n            return;\n        }\n\n        const toDo = this._queue.pop();\n\n        const id = toDo.id;\n\n        this._resolveHash[UUID] = { resolve: toDo.resolve, reject: toDo.reject };\n\n        worker.postMessage({\n            data: toDo.arguments,\n            uuid: UUID++,\n            id,\n        });\n    }\n}\n\nconst WorkerManager = new WorkerManagerClass();\n\nexport {\n    WorkerManager,\n};\n","import { DOMAdapter } from '../../../../environment/adapter';\nimport { ExtensionType } from '../../../../extensions/Extensions';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl';\nimport { checkDataUrl } from '../../../utils/checkDataUrl';\nimport { checkExtension } from '../../../utils/checkExtension';\nimport { WorkerManager } from '../../workers/WorkerManager';\nimport { LoaderParserPriority } from '../LoaderParser';\nimport { createTexture } from './utils/createTexture';\n\nimport type { TextureSourceOptions } from '../../../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport type { ResolvedAsset } from '../../../types';\nimport type { Loader } from '../../Loader';\nimport type { LoaderParser } from '../LoaderParser';\n\nconst validImageExtensions = ['.jpeg', '.jpg', '.png', '.webp', '.avif'];\nconst validImageMIMEs = [\n    'image/jpeg',\n    'image/png',\n    'image/webp',\n    'image/avif',\n];\n\n/**\n * Configuration for the [loadTextures]{@link assets.loadTextures} plugin.\n * @see assets.loadTextures\n * @memberof assets\n */\nexport interface LoadTextureConfig\n{\n    /**\n     * When set to `true`, loading and decoding images will happen with Worker thread,\n     * if available on the browser. This is much more performant as network requests\n     * and decoding can be expensive on the CPU. However, not all environments support\n     * Workers, in some cases it can be helpful to disable by setting to `false`.\n     * @default true\n     */\n    preferWorkers: boolean;\n    /**\n     * When set to `true`, loading and decoding images will happen with `createImageBitmap`,\n     * otherwise it will use `new Image()`.\n     * @default true\n     */\n    preferCreateImageBitmap: boolean;\n    /**\n     * The crossOrigin value to use for images when `preferCreateImageBitmap` is `false`.\n     * @default 'anonymous'\n     */\n    crossOrigin: HTMLImageElement['crossOrigin'];\n}\n\n/**\n * Returns a promise that resolves an ImageBitmaps.\n * This function is designed to be used by a worker.\n * Part of WorkerManager!\n * @param url - The image to load an image bitmap for\n * @ignore\n */\nexport async function loadImageBitmap(url: string): Promise<ImageBitmap>\n{\n    const response = await DOMAdapter.get().fetch(url);\n\n    if (!response.ok)\n    {\n        throw new Error(`[loadImageBitmap] Failed to fetch ${url}: `\n            + `${response.status} ${response.statusText}`);\n    }\n\n    const imageBlob = await response.blob();\n    const imageBitmap = await createImageBitmap(imageBlob);\n\n    return imageBitmap;\n}\n\n/**\n * A simple plugin to load our textures!\n * This makes use of imageBitmaps where available.\n * We load the `ImageBitmap` on a different thread using workers if possible.\n * We can then use the `ImageBitmap` as a source for a Pixi texture\n *\n * You can customize the behavior of this loader by setting the `config` property.\n * Which can be found [here]{@link assets.LoadTextureConfig}\n * ```js\n * // Set the config\n * import { loadTextures } from 'pixi.js';\n *\n * loadTextures.config = {\n *    // If true we will use a worker to load the ImageBitmap\n *    preferWorkers: true,\n *    // If false we will use new Image() instead of createImageBitmap,\n *    // we'll also disable the use of workers as it requires createImageBitmap\n *    preferCreateImageBitmap: true,\n *    crossOrigin: 'anonymous',\n * };\n * ```\n * @memberof assets\n */\nexport const loadTextures: LoaderParser<Texture, TextureSourceOptions, LoadTextureConfig> = {\n\n    name: 'loadTextures',\n\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.High,\n        name: 'loadTextures',\n    },\n\n    config: {\n        preferWorkers: true,\n        preferCreateImageBitmap: true,\n        crossOrigin: 'anonymous',\n    },\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validImageMIMEs) || checkExtension(url, validImageExtensions);\n    },\n\n    async load(url: string, asset: ResolvedAsset<TextureSourceOptions>, loader: Loader): Promise<Texture>\n    {\n        let src: any = null;\n\n        if (globalThis.createImageBitmap && this.config.preferCreateImageBitmap)\n        {\n            if (this.config.preferWorkers && await WorkerManager.isImageBitmapSupported())\n            {\n                src = await WorkerManager.loadImageBitmap(url);\n            }\n            else\n            {\n                src = await loadImageBitmap(url);\n            }\n        }\n        else\n        {\n            src = await new Promise((resolve) =>\n            {\n                src = new Image();\n                src.crossOrigin = this.config.crossOrigin;\n\n                src.src = url;\n                if (src.complete)\n                {\n                    resolve(src);\n                }\n                else\n                {\n                    src.onload = (): void =>\n                    {\n                        resolve(src);\n                    };\n                }\n            });\n        }\n\n        const base = new ImageSource({\n            resource: src,\n            alphaMode: 'premultiply-alpha-on-upload',\n            resolution: asset.data?.resolution || getResolutionOfUrl(url),\n            ...asset.data,\n        });\n\n        return createTexture(base, loader, url);\n    },\n\n    unload(texture: Texture): void\n    {\n        texture.destroy(true);\n    }\n};\n","import { ExtensionType } from '../../../../extensions/Extensions';\nimport { VideoSource } from '../../../../rendering/renderers/shared/texture/sources/VideoSource';\nimport { detectVideoAlphaMode } from '../../../../utils/browser/detectVideoAlphaMode';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl';\nimport { checkDataUrl } from '../../../utils/checkDataUrl';\nimport { checkExtension } from '../../../utils/checkExtension';\nimport { createTexture } from './utils/createTexture';\n\nimport type { VideoSourceOptions } from '../../../../rendering/renderers/shared/texture/sources/VideoSource';\nimport type { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport type { ResolvedAsset } from '../../../types';\nimport type { Loader } from '../../Loader';\nimport type { LoaderParser } from '../LoaderParser';\n\nconst validVideoExtensions = ['.mp4', '.m4v', '.webm', '.ogg', '.ogv', '.h264', '.avi', '.mov'];\nconst validVideoMIMEs = validVideoExtensions.map((ext) => `video/${ext.substring(1)}`);\n\n/**\n * Set cross origin based detecting the url and the crossorigin\n * @param element - Element to apply crossOrigin\n * @param url - URL to check\n * @param crossorigin - Cross origin value to use\n * @memberof assets\n */\nexport function crossOrigin(element: HTMLImageElement | HTMLVideoElement, url: string, crossorigin?: boolean | string): void\n{\n    if (crossorigin === undefined && !url.startsWith('data:'))\n    {\n        element.crossOrigin = determineCrossOrigin(url);\n    }\n    else if (crossorigin !== false)\n    {\n        element.crossOrigin = typeof crossorigin === 'string' ? crossorigin : 'anonymous';\n    }\n}\n\n/**\n * Preload a video element\n * @param element - Video element to preload\n */\nexport function preloadVideo(element: HTMLVideoElement): Promise<void>\n{\n    return new Promise((resolve, reject) =>\n    {\n        element.addEventListener('canplaythrough', loaded);\n        element.addEventListener('error', error);\n\n        element.load();\n\n        function loaded(): void\n        {\n            cleanup();\n            resolve();\n        }\n\n        function error(err: ErrorEvent): void\n        {\n            cleanup();\n            reject(err);\n        }\n\n        function cleanup(): void\n        {\n            element.removeEventListener('canplaythrough', loaded);\n            element.removeEventListener('error', error);\n        }\n    });\n}\n\n/**\n * Sets the `crossOrigin` property for this resource based on if the url\n * for this resource is cross-origin. If crossOrigin was manually set, this\n * function does nothing.\n * Nipped from the resource loader!\n * @ignore\n * @param url - The url to test.\n * @param {object} [loc=window.location] - The location object to test against.\n * @returns The crossOrigin value to use (or empty string for none).\n * @memberof assets\n */\nexport function determineCrossOrigin(url: string, loc: Location = globalThis.location): string\n{\n    // data: and javascript: urls are considered same-origin\n    if (url.startsWith('data:'))\n    {\n        return '';\n    }\n\n    // default is window.location\n    loc = loc || globalThis.location;\n\n    const parsedUrl = new URL(url, document.baseURI);\n\n    // if cross origin\n    if (parsedUrl.hostname !== loc.hostname || parsedUrl.port !== loc.port || parsedUrl.protocol !== loc.protocol)\n    {\n        return 'anonymous';\n    }\n\n    return '';\n}\n\n/**\n * A simple plugin to load video textures.\n *\n * You can pass VideoSource options to the loader via the .data property of the asset descriptor\n * when using Asset.load().\n * ```js\n * // Set the data\n * const texture = await Assets.load({\n *     src: './assets/city.mp4',\n *     data: {\n *         preload: true,\n *         autoPlay: true,\n *     },\n * });\n * ```\n * @memberof assets\n */\nexport const loadVideoTextures = {\n\n    name: 'loadVideo',\n\n    extension: {\n        type: ExtensionType.LoadParser,\n        name: 'loadVideo',\n    },\n\n    test(url: string): boolean\n    {\n        const isValidDataUrl = checkDataUrl(url, validVideoMIMEs);\n        const isValidExtension = checkExtension(url, validVideoExtensions);\n\n        return isValidDataUrl || isValidExtension;\n    },\n\n    async load(url: string, asset: ResolvedAsset<VideoSourceOptions>, loader: Loader): Promise<Texture>\n    {\n        // --- Merge default and provided options ---\n        const options: VideoSourceOptions = {\n            ...VideoSource.defaultOptions,\n            resolution: asset.data?.resolution || getResolutionOfUrl(url),\n            alphaMode: asset.data?.alphaMode || await detectVideoAlphaMode(),\n            ...asset.data,\n        };\n\n        // --- Create and configure HTMLVideoElement ---\n        const videoElement = document.createElement('video');\n\n        // Set attributes based on options\n        const attributeMap = {\n            preload: options.autoLoad !== false ? 'auto' : undefined,\n            'webkit-playsinline': options.playsinline !== false ? '' : undefined,\n            playsinline: options.playsinline !== false ? '' : undefined,\n            muted: options.muted === true ? '' : undefined,\n            loop: options.loop === true ? '' : undefined,\n            autoplay: options.autoPlay !== false ? '' : undefined\n        };\n\n        Object.keys(attributeMap).forEach((key) =>\n        {\n            const value = attributeMap[key as keyof typeof attributeMap];\n\n            if (value !== undefined) videoElement.setAttribute(key, value);\n        });\n\n        if (options.muted === true)\n        {\n            videoElement.muted = true;\n        }\n\n        crossOrigin(videoElement, url, options.crossorigin); // Assume crossOrigin is globally available\n\n        // --- Set up source and MIME type ---\n        const sourceElement = document.createElement('source');\n\n        // Determine MIME type\n        let mime: string | undefined;\n\n        if (url.startsWith('data:'))\n        {\n            mime = url.slice(5, url.indexOf(';'));\n        }\n        else if (!url.startsWith('blob:'))\n        {\n            const ext = url.split('?')[0].slice(url.lastIndexOf('.') + 1).toLowerCase();\n\n            mime = VideoSource.MIME_TYPES[ext] || `video/${ext}`;\n        }\n\n        sourceElement.src = url;\n\n        if (mime)\n        {\n            sourceElement.type = mime;\n        }\n\n        // this promise will make sure that video is ready to play - as in we have a valid width, height and it can be\n        // uploaded to the GPU. Our textures are kind of dumb now, and don't want to handle resizing right now.\n        return new Promise((resolve) =>\n        {\n            const onCanPlay = async () =>\n            {\n                const base = new VideoSource({ ...options, resource: videoElement });\n\n                videoElement.removeEventListener('canplay', onCanPlay);\n\n                if (asset.data.preload)\n                {\n                    await preloadVideo(videoElement);\n                }\n\n                resolve(createTexture(base, loader, url));\n            };\n\n            videoElement.addEventListener('canplay', onCanPlay);\n            videoElement.appendChild(sourceElement);\n        });\n    },\n\n    unload(texture: Texture): void\n    {\n        texture.destroy(true);\n    }\n} satisfies LoaderParser<Texture, VideoSourceOptions>;\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { loadTextures } from '../../loader/parsers/textures/loadTextures';\nimport { Resolver } from '../Resolver';\n\nimport type { ResolveURLParser } from '../types';\n\n/**\n * A parser that will resolve a texture url\n * @memberof assets\n */\nexport const resolveTextureUrl = {\n    extension: {\n        type: ExtensionType.ResolveParser,\n        name: 'resolveTexture',\n    },\n    test: loadTextures.test,\n    parse: (value: string) =>\n        ({\n            resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? '1'),\n            format: value.split('.').pop(),\n            src: value,\n        }),\n} satisfies ResolveURLParser;\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { Resolver } from '../Resolver';\nimport { resolveTextureUrl } from './resolveTextureUrl';\n\nimport type { ResolveURLParser } from '../types';\n\n/**\n * A parser that will resolve a json urls resolution for spritesheets\n * e.g. `assets/spritesheet@1x.json`\n * @memberof assets\n */\nexport const resolveJsonUrl = {\n    extension: {\n        type: ExtensionType.ResolveParser,\n        priority: -2,\n        name: 'resolveJson',\n    },\n    test: (value: string): boolean =>\n        Resolver.RETINA_PREFIX.test(value) && value.endsWith('.json'),\n    parse: resolveTextureUrl.parse,\n} satisfies ResolveURLParser;\n","/* eslint-disable max-len */\nimport { extensions, ExtensionType } from '../extensions/Extensions';\nimport { bitmapFontCachePlugin, loadBitmapFont } from '../scene/text-bitmap/asset/loadBitmapFont';\nimport { warn } from '../utils/logging/warn';\nimport { BackgroundLoader } from './BackgroundLoader';\nimport { Cache } from './cache/Cache';\nimport { cacheTextureArray } from './cache/parsers/cacheTextureArray';\nimport { detectAvif } from './detections/parsers/detectAvif';\nimport { detectDefaults } from './detections/parsers/detectDefaults';\nimport { detectMp4 } from './detections/parsers/detectMp4';\nimport { detectOgv } from './detections/parsers/detectOgv';\nimport { detectWebm } from './detections/parsers/detectWebm';\nimport { detectWebp } from './detections/parsers/detectWebp';\nimport { Loader } from './loader/Loader';\nimport { loadJson } from './loader/parsers/loadJson';\nimport { loadTxt } from './loader/parsers/loadTxt';\nimport { loadWebFont } from './loader/parsers/loadWebFont';\nimport { loadSvg } from './loader/parsers/textures/loadSVG';\nimport { type LoadTextureConfig, loadTextures } from './loader/parsers/textures/loadTextures';\nimport { loadVideoTextures } from './loader/parsers/textures/loadVideoTextures';\nimport { resolveJsonUrl } from './resolver/parsers/resolveJsonUrl';\nimport { resolveTextureUrl } from './resolver/parsers/resolveTextureUrl';\nimport { Resolver } from './resolver/Resolver';\nimport { convertToList } from './utils/convertToList';\nimport { isSingleItem } from './utils/isSingleItem';\n\nimport type { AssetExtension } from './AssetExtension';\nimport type { FormatDetectionParser } from './detections/types';\nimport type { LoadSVGConfig } from './loader/parsers/textures/loadSVG';\nimport type { BundleIdentifierOptions } from './resolver/Resolver';\nimport type { ArrayOr, AssetsBundle, AssetsManifest, ResolvedAsset, UnresolvedAsset } from './types';\n\n/**\n * Callback for when progress on asset loading is made.\n * The function is passed a single parameter, `progress`, which represents the percentage (0.0 - 1.0)\n * of the assets loaded.\n * @memberof assets\n * @callback ProgressCallback\n * @param {number} progress - The percentage (0.0 - 1.0) of the assets loaded.\n * @returns {void}\n * @example\n * (progress) => console.log(progress * 100 + '%')\n */\nexport type ProgressCallback = (progress: number) => void;\n\n/**\n * Extensible preferences that can be used, for instance, when configuring loaders.\n * @since 7.2.0\n * @memberof assets\n */\nexport interface AssetsPreferences extends LoadTextureConfig, LoadSVGConfig, PixiMixins.AssetsPreferences {}\n\n/**\n * Initialization options object for the Assets Class.\n * @memberof assets\n */\nexport interface AssetInitOptions\n{\n    // basic...\n    /** a base path for any assets loaded */\n    basePath?: string;\n\n    /** a default URL parameter string to append to all assets loaded */\n    defaultSearchParams?: string | Record<string, any>;\n\n    /**\n     * a manifest to tell the asset loader upfront what all your assets are\n     * this can be the manifest object itself, or a URL to the manifest.\n     */\n    manifest?: string | AssetsManifest;\n    /**\n     * optional preferences for which textures preferences you have when resolving assets\n     * for example you might set the resolution to 0.5 if the user is on a rubbish old phone\n     * or you might set the resolution to 2 if the user is on a retina display\n     */\n    texturePreference?: {\n        /** the resolution order you prefer, can be an array (priority order - first is prefered) or a single resolutions  */\n        resolution?: number | number[];\n        /**\n         * the formats you prefer, by default this will be:\n         * ['avif', 'webp', 'png', 'jpg', 'jpeg', 'webm', 'mp4', 'm4v', 'ogv']\n         */\n        format?: ArrayOr<string>;\n    };\n\n    /**\n     * If true, don't attempt to detect whether browser has preferred formats available.\n     * May result in increased performance as it skips detection step.\n     */\n    skipDetections?: boolean;\n\n    /** advanced - override how bundlesIds are generated */\n    bundleIdentifier?: BundleIdentifierOptions;\n\n    /** Optional loader preferences */\n    preferences?: Partial<AssetsPreferences>;\n}\n\n/**\n * A one stop shop for all Pixi resource management!\n * Super modern and easy to use, with enough flexibility to customize and do what you need!\n * @namespace assets\n *\n * Use the singleton class [Assets]{@link assets.Assets} to easily load and manage all your assets.\n *\n * ```typescript\n * import { Assets, Texture } from 'pixi.js';\n *\n * const bunnyTexture = await Assets.load<Texture>('bunny.png');\n * const sprite = new Sprite(bunnyTexture);\n * ```\n *\n * Check out the sections below for more information on how to deal with assets.\n *\n * <details id=\"assets-loading\">\n *\n * <summary>Asset Loading</summary>\n *\n * Do not be afraid to load things multiple times - under the hood, it will **NEVER** load anything more than once.\n *\n * *For example:*\n *\n * ```js\n * import { Assets } from 'pixi.js';\n *\n * promise1 = Assets.load('bunny.png')\n * promise2 = Assets.load('bunny.png')\n *\n * // promise1 === promise2\n * ```\n *\n * Here both promises will be the same. Once resolved... Forever resolved! It makes for really easy resource management!\n *\n * Out of the box Pixi supports the following files:\n * - Textures (**_avif_**, **_webp_**, **_png_**, **_jpg_**, **_gif_**, **_svg_**) via {@link assets.loadTextures}, {@link assets.loadSvg}\n * - Video Textures (**_mp4_**, **_m4v_**, **_webm_**, **_ogg_**, **_ogv_**, **_h264_**, **_avi_**, **_mov_**) via {@link assets.loadVideoTextures}\n * - Sprite sheets (**_json_**) via {@link assets.spritesheetAsset}\n * - Bitmap fonts (**_xml_**, **_fnt_**, **_txt_**) via {@link assets.loadBitmapFont}\n * - Web fonts (**_ttf_**, **_woff_**, **_woff2_**) via {@link assets.loadWebFont}\n * - JSON files (**_json_**) via {@link assets.loadJson}\n * - Text Files (**_txt_**) via {@link assets.loadTxt}\n * <br/>\n * More types can be added fairly easily by creating additional {@link assets.LoaderParser LoaderParsers}.\n * </details>\n *\n * <details id=\"textures\">\n *\n * <summary>Textures</summary>\n *\n * - Textures are loaded as ImageBitmap on a worker thread where possible. Leading to much less janky load + parse times.\n * - By default, we will prefer to load AVIF and WebP image files if you specify them.\n * But if the browser doesn't support AVIF or WebP we will fall back to png and jpg.\n * - Textures can also be accessed via `Texture.from()` (see {@link core.from|Texture.from})\n * and now use this asset manager under the hood!\n * - Don't worry if you set preferences for textures that don't exist\n * (for example you prefer 2x resolutions images but only 1x is available for that texture,\n * the Assets manager will pick that up as a fallback automatically)\n *\n * #### Sprite sheets\n * - It's hard to know what resolution a sprite sheet is without loading it first, to address this\n * there is a naming convention we have added that will let Pixi understand the image format and resolution\n * of the spritesheet via its file name: `my-spritesheet{resolution}.{imageFormat}.json`\n * <br><br>For example:\n *   - `my-spritesheet@2x.webp.json`* // 2x resolution, WebP sprite sheet*\n *   - `my-spritesheet@0.5x.png.json`* // 0.5x resolution, png sprite sheet*\n * - This is optional! You can just load a sprite sheet as normal.\n * This is only useful if you have a bunch of different res / formatted spritesheets.\n * </details>\n *\n * <details id=\"fonts\">\n *\n * <summary>Fonts</summary>\n *\n * Web fonts will be loaded with all weights.\n * It is possible to load only specific weights by doing the following:\n *\n * ```js\n * import { Assets } from 'pixi.js';\n *\n * // Load specific weights..\n * await Assets.load({\n *     data: {\n *         weights: ['normal'], // Only loads the weight\n *     },\n *     src: `outfit.woff2`,\n * });\n *\n * // Load everything...\n * await Assets.load(`outfit.woff2`);\n * ```\n * </details>\n *\n * <details id=\"background-loading\">\n *\n * <summary>Background Loading</summary>\n *\n * Background loading will load stuff for you passively behind the scenes. To minimize jank,\n * it will only load one asset at a time. As soon as a developer calls `Assets.load(...)` the\n * background loader is paused and requested assets are loaded as a priority.\n * Don't worry if something is in there that's already loaded, it will just get skipped!\n *\n * You still need to call `Assets.load(...)` to get an asset that has been loaded in the background.\n * It's just that this promise will resolve instantly if the asset\n * has already been loaded.\n * </details>\n *\n * <details id=\"manifests-and-bundles\">\n *\n * <summary>Manifest and Bundles</summary>\n *\n * - {@link assets.AssetsManifest Manifest} is a descriptor that contains a list of all assets and their properties.\n * - {@link assets.AssetsBundle Bundles} are a way to group assets together.\n *\n * ```js\n * import { Assets } from 'pixi.js';\n *\n * // Manifest Example\n * const manifest = {\n *     bundles: [\n *         {\n *             name: 'load-screen',\n *             assets: [\n *                 {\n *                     alias: 'background',\n *                     src: 'sunset.png',\n *                 },\n *                 {\n *                     alias: 'bar',\n *                     src: 'load-bar.{png,webp}',\n *                 },\n *             ],\n *         },\n *         {\n *             name: 'game-screen',\n *             assets: [\n *                 {\n *                     alias: 'character',\n *                     src: 'robot.png',\n *                 },\n *                 {\n *                     alias: 'enemy',\n *                     src: 'bad-guy.png',\n *                 },\n *             ],\n *         },\n *     ]\n * };\n *\n * await Assets.init({ manifest });\n *\n * // Load a bundle...\n * loadScreenAssets = await Assets.loadBundle('load-screen');\n * // Load another bundle...\n * gameScreenAssets = await Assets.loadBundle('game-screen');\n * ```\n * </details>\n */\n\n/**\n * The global Assets class, it's a singleton so you don't need to instantiate it.\n *\n * **The `Assets` class has four main responsibilities:**\n * 1. Allows users to map URLs to keys and resolve them according to the user's browser capabilities\n * 2. Loads the resources and transforms them into assets that developers understand.\n * 3. Caches the assets and provides a way to access them.\n * 4. Allow developers to unload assets and clear the cache.\n *\n *\n * **It also has a few advanced features:**\n * 1. Allows developers to provide a {@link assets.Manifest} upfront of all assets and help manage\n * them via {@link assets.AssetsBundles Bundles}.\n * 2. Allows users to background load assets. Shortening (or eliminating) load times and improving UX. With this feature,\n * in-game loading bars can be a thing of the past!\n * @example\n * import { Assets } from 'pixi.js';\n *\n * const bunny = await Assets.load('bunny.png');\n * @memberof assets\n * @class Assets\n */\nexport class AssetsClass\n{\n    /** the resolver to map various urls */\n    public resolver: Resolver;\n    /** The loader, loads stuff! */\n    public loader: Loader;\n    /**\n     * The global cache of all assets within PixiJS\n     * @type {assets.Cache}\n     */\n    public cache: typeof Cache;\n\n    /** takes care of loading assets in the background */\n    private readonly _backgroundLoader: BackgroundLoader;\n\n    private readonly _detections: FormatDetectionParser[] = [];\n\n    private _initialized = false;\n\n    constructor()\n    {\n        this.resolver = new Resolver();\n        this.loader = new Loader();\n        this.cache = Cache;\n\n        this._backgroundLoader = new BackgroundLoader(this.loader);\n        this._backgroundLoader.active = true;\n\n        this.reset();\n    }\n\n    /**\n     * Best practice is to call this function before any loading commences\n     * Initiating is the best time to add any customization to the way things are loaded.\n     *\n     * you do not need to call this for the Assets class to work, only if you want to set any initial properties\n     * @param options - options to initialize the Assets manager with\n     */\n    public async init(options: AssetInitOptions = {}): Promise<void>\n    {\n        if (this._initialized)\n        {\n            // #if _DEBUG\n            warn('[Assets]AssetManager already initialized, did you load before calling this Assets.init()?');\n            // #endif\n\n            return;\n        }\n\n        this._initialized = true;\n\n        if (options.defaultSearchParams)\n        {\n            this.resolver.setDefaultSearchParams(options.defaultSearchParams);\n        }\n\n        if (options.basePath)\n        {\n            this.resolver.basePath = options.basePath;\n        }\n\n        if (options.bundleIdentifier)\n        {\n            this.resolver.setBundleIdentifier(options.bundleIdentifier);\n        }\n\n        if (options.manifest)\n        {\n            let manifest = options.manifest;\n\n            if (typeof manifest === 'string')\n            {\n                manifest = await this.load<AssetsManifest>(manifest);\n            }\n\n            this.resolver.addManifest(manifest);\n        }\n\n        const resolutionPref = options.texturePreference?.resolution ?? 1;\n        const resolution = (typeof resolutionPref === 'number') ? [resolutionPref] : resolutionPref;\n\n        const formats = await this._detectFormats({\n            preferredFormats: options.texturePreference?.format,\n            skipDetections: options.skipDetections,\n            detections: this._detections\n        });\n\n        this.resolver.prefer({\n            params: {\n                format: formats,\n                resolution,\n            },\n        });\n\n        if (options.preferences)\n        {\n            this.setPreferences(options.preferences);\n        }\n    }\n\n    /**\n     * Allows you to specify how to resolve any assets load requests.\n     * There are a few ways to add things here as shown below:\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * // Simple\n     * Assets.add({alias: 'bunnyBooBoo', src: 'bunny.png'});\n     * const bunny = await Assets.load('bunnyBooBoo');\n     *\n     * // Multiple keys:\n     * Assets.add({alias: ['burger', 'chicken'], src: 'bunny.png'});\n     *\n     * const bunny = await Assets.load('burger');\n     * const bunny2 = await Assets.load('chicken');\n     *\n     * // passing options to to the object\n     * Assets.add({\n     *     alias: 'bunnyBooBooSmooth',\n     *     src: 'bunny{png,webp}',\n     *     data: { scaleMode: SCALE_MODES.NEAREST }, // Base texture options\n     * });\n     *\n     * // Multiple assets\n     *\n     * // The following all do the same thing:\n     *\n     * Assets.add({alias: 'bunnyBooBoo', src: 'bunny{png,webp}'});\n     *\n     * Assets.add({\n     *     alias: 'bunnyBooBoo',\n     *     src: [\n     *         'bunny.png',\n     *         'bunny.webp',\n     *    ],\n     * });\n     *\n     * const bunny = await Assets.load('bunnyBooBoo'); // Will try to load WebP if available\n     * @param assets - the unresolved assets to add to the resolver\n     */\n    public add(assets: (ArrayOr<UnresolvedAsset>)): void\n    {\n        this.resolver.add(assets);\n    }\n\n    /**\n     * Loads your assets! You pass in a key or URL and it will return a promise that\n     * resolves to the loaded asset. If multiple assets a requested, it will return a hash of assets.\n     *\n     * Don't worry about loading things multiple times, behind the scenes assets are only ever loaded\n     * once and the same promise reused behind the scenes so you can safely call this function multiple\n     * times with the same key and it will always return the same asset.\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * // Load a URL:\n     * const myImageTexture = await Assets.load('http://some.url.com/image.png'); // => returns a texture\n     *\n     * Assets.add('thumper', 'bunny.png');\n     * Assets.add('chicko', 'chicken.png');\n     *\n     * // Load multiple assets:\n     * const textures = await Assets.load(['thumper', 'chicko']); // => {thumper: Texture, chicko: Texture}\n     * @param urls - the urls to load\n     * @param onProgress - optional function that is called when progress on asset loading is made.\n     * The function is passed a single parameter, `progress`, which represents the percentage\n     * (0.0 - 1.0) of the assets loaded.\n     * @returns - the assets that were loaded, either a single asset or a hash of assets\n     */\n    public async load<T = any>(\n        urls: string | UnresolvedAsset,\n        onProgress?: ProgressCallback,\n    ): Promise<T>;\n    public async load<T = any>(\n        urls: string[] | UnresolvedAsset[],\n        onProgress?: ProgressCallback,\n    ): Promise<Record<string, T>>;\n    public async load<T = any>(\n        urls: ArrayOr<string> | ArrayOr<UnresolvedAsset>,\n        onProgress?: ProgressCallback\n    ): Promise<T | Record<string, T>>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        const singleAsset = isSingleItem(urls);\n\n        const urlArray: string[] = convertToList<UnresolvedAsset | string>(urls)\n            .map((url) =>\n            {\n                if (typeof url !== 'string')\n                {\n                    const aliases = this.resolver.getAlias(url);\n\n                    if (aliases.some((alias) => !this.resolver.hasKey(alias)))\n                    {\n                        this.add(url);\n                    }\n\n                    return Array.isArray(aliases) ? aliases[0] : aliases;\n                }\n\n                // if it hasn't been added, add it now\n                if (!this.resolver.hasKey(url)) this.add({ alias: url, src: url });\n\n                return url;\n            }) as string[];\n\n        // check cache first...\n        const resolveResults = this.resolver.resolve(urlArray);\n\n        // remap to the keys used..\n        const out: Record<string, T> = await this._mapLoadToResolve<T>(resolveResults, onProgress);\n\n        return singleAsset ? out[urlArray[0] as string] : out;\n    }\n\n    /**\n     * This adds a bundle of assets in one go so that you can load them as a group.\n     * For example you could add a bundle for each screen in you pixi app\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * Assets.addBundle('animals', [\n     *  { alias: 'bunny', src: 'bunny.png' },\n     *  { alias: 'chicken', src: 'chicken.png' },\n     *  { alias: 'thumper', src: 'thumper.png' },\n     * ]);\n     * // or\n     * Assets.addBundle('animals', {\n     *     bunny: 'bunny.png',\n     *     chicken: 'chicken.png',\n     *     thumper: 'thumper.png',\n     * });\n     *\n     * const assets = await Assets.loadBundle('animals');\n     * @param bundleId - the id of the bundle to add\n     * @param assets - a record of the asset or assets that will be chosen from when loading via the specified key\n     */\n    public addBundle(bundleId: string, assets: AssetsBundle['assets']): void\n    {\n        this.resolver.addBundle(bundleId, assets);\n    }\n\n    /**\n     * Bundles are a way to load multiple assets at once.\n     * If a manifest has been provided to the init function then you can load a bundle, or bundles.\n     * you can also add bundles via `addBundle`\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * // Manifest Example\n     * const manifest = {\n     *     bundles: [\n     *         {\n     *             name: 'load-screen',\n     *             assets: [\n     *                 {\n     *                     alias: 'background',\n     *                     src: 'sunset.png',\n     *                 },\n     *                 {\n     *                     alias: 'bar',\n     *                     src: 'load-bar.{png,webp}',\n     *                 },\n     *             ],\n     *         },\n     *         {\n     *             name: 'game-screen',\n     *             assets: [\n     *                 {\n     *                     alias: 'character',\n     *                     src: 'robot.png',\n     *                 },\n     *                 {\n     *                     alias: 'enemy',\n     *                     src: 'bad-guy.png',\n     *                 },\n     *             ],\n     *         },\n     *     ]\n     * };\n     *\n     * await Assets.init({ manifest });\n     *\n     * // Load a bundle...\n     * loadScreenAssets = await Assets.loadBundle('load-screen');\n     * // Load another bundle...\n     * gameScreenAssets = await Assets.loadBundle('game-screen');\n     * @param bundleIds - the bundle id or ids to load\n     * @param onProgress - Optional function that is called when progress on asset loading is made.\n     * The function is passed a single parameter, `progress`, which represents the percentage (0.0 - 1.0)\n     * of the assets loaded. Do not use this function to detect when assets are complete and available,\n     * instead use the Promise returned by this function.\n     * @returns all the bundles assets or a hash of assets for each bundle specified\n     */\n    public async loadBundle(bundleIds: ArrayOr<string>, onProgress?: ProgressCallback): Promise<any>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        let singleAsset = false;\n\n        if (typeof bundleIds === 'string')\n        {\n            singleAsset = true;\n            bundleIds = [bundleIds];\n        }\n\n        const resolveResults = this.resolver.resolveBundle(bundleIds);\n\n        const out: Record<string, Record<string, any>> = {};\n\n        const keys = Object.keys(resolveResults);\n        let count = 0;\n        let total = 0;\n        const _onProgress = () =>\n        {\n            onProgress?.(++count / total);\n        };\n        const promises = keys.map((bundleId) =>\n        {\n            const resolveResult = resolveResults[bundleId];\n\n            total += Object.keys(resolveResult).length;\n\n            return this._mapLoadToResolve(resolveResult, _onProgress)\n                .then((resolveResult) =>\n                {\n                    out[bundleId] = resolveResult;\n                });\n        });\n\n        await Promise.all(promises);\n\n        return singleAsset ? out[bundleIds[0]] : out;\n    }\n\n    /**\n     * Initiate a background load of some assets. It will passively begin to load these assets in the background.\n     * So when you actually come to loading them you will get a promise that resolves to the loaded assets immediately\n     *\n     * An example of this might be that you would background load game assets after your inital load.\n     * then when you got to actually load your game screen assets when a player goes to the game - the loading\n     * would already have stared or may even be complete, saving you having to show an interim load bar.\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * Assets.backgroundLoad('bunny.png');\n     *\n     * // later on in your app...\n     * await Assets.loadBundle('bunny.png'); // Will resolve quicker as loading may have completed!\n     * @param urls - the url / urls you want to background load\n     */\n    public async backgroundLoad(urls: ArrayOr<string>): Promise<void>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        if (typeof urls === 'string')\n        {\n            urls = [urls];\n        }\n\n        const resolveResults = this.resolver.resolve(urls);\n\n        this._backgroundLoader.add(Object.values(resolveResults));\n    }\n\n    /**\n     * Initiate a background of a bundle, works exactly like backgroundLoad but for bundles.\n     * this can only be used if the loader has been initiated with a manifest\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * await Assets.init({\n     *     manifest: {\n     *         bundles: [\n     *             {\n     *                 name: 'load-screen',\n     *                 assets: [...],\n     *             },\n     *             ...\n     *         ],\n     *     },\n     * });\n     *\n     * Assets.backgroundLoadBundle('load-screen');\n     *\n     * // Later on in your app...\n     * await Assets.loadBundle('load-screen'); // Will resolve quicker as loading may have completed!\n     * @param bundleIds - the bundleId / bundleIds you want to background load\n     */\n    public async backgroundLoadBundle(bundleIds: ArrayOr<string>): Promise<void>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        if (typeof bundleIds === 'string')\n        {\n            bundleIds = [bundleIds];\n        }\n\n        const resolveResults = this.resolver.resolveBundle(bundleIds);\n\n        Object.values(resolveResults).forEach((resolveResult) =>\n        {\n            this._backgroundLoader.add(Object.values(resolveResult));\n        });\n    }\n\n    /**\n     * Only intended for development purposes.\n     * This will wipe the resolver and caches.\n     * You will need to reinitialize the Asset\n     */\n    public reset(): void\n    {\n        this.resolver.reset();\n        this.loader.reset();\n        this.cache.reset();\n\n        this._initialized = false;\n    }\n\n    /**\n     * Instantly gets an asset already loaded from the cache. If the asset has not yet been loaded,\n     * it will return undefined. So it's on you! When in doubt just use `Assets.load` instead.\n     * (Remember, the loader will never load things more than once!)\n     * @param keys - The key or keys for the assets that you want to access\n     * @returns - The assets or hash of assets requested\n     */\n    public get<T = any>(keys: string): T;\n    public get<T = any>(keys: string[]): Record<string, T>;\n    public get<T = any>(keys: ArrayOr<string>): T | Record<string, T>\n    {\n        if (typeof keys === 'string')\n        {\n            return Cache.get(keys);\n        }\n\n        const assets: Record<string, T> = {};\n\n        for (let i = 0; i < keys.length; i++)\n        {\n            assets[i] = Cache.get(keys[i]);\n        }\n\n        return assets;\n    }\n\n    /**\n     * helper function to map resolved assets back to loaded assets\n     * @param resolveResults - the resolve results from the resolver\n     * @param onProgress - the progress callback\n     */\n    private async _mapLoadToResolve<T>(\n        resolveResults: ResolvedAsset | Record<string, ResolvedAsset>,\n        onProgress?: ProgressCallback\n    ): Promise<Record<string, T>>\n    {\n        const resolveArray = [...new Set(Object.values(resolveResults))] as ResolvedAsset[];\n\n        // pause background loader...\n        this._backgroundLoader.active = false;\n\n        const loadedAssets = await this.loader.load<T>(resolveArray, onProgress);\n\n        // resume background loader...\n        this._backgroundLoader.active = true;\n\n        // remap to the keys used..\n\n        const out: Record<string, T> = {};\n\n        resolveArray.forEach((resolveResult) =>\n        {\n            const asset = loadedAssets[resolveResult.src];\n\n            const keys = [resolveResult.src];\n\n            if (resolveResult.alias)\n            {\n                keys.push(...resolveResult.alias);\n            }\n\n            keys.forEach((key) =>\n            {\n                out[key] = asset;\n            });\n\n            Cache.set(keys, asset);\n        });\n\n        return out;\n    }\n\n    /**\n     * Unload an asset or assets. As the Assets class is responsible for creating the assets via the `load` function\n     * this will make sure to destroy any assets and release them from memory.\n     * Once unloaded, you will need to load the asset again.\n     *\n     * Use this to help manage assets if you find that you have a large app and you want to free up memory.\n     *\n     * - it's up to you as the developer to make sure that textures are not actively being used when you unload them,\n     * Pixi won't break but you will end up with missing assets. Not a good look for the user!\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * // Load a URL:\n     * const myImageTexture = await Assets.load('http://some.url.com/image.png'); // => returns a texture\n     *\n     * await Assets.unload('http://some.url.com/image.png')\n     *\n     * // myImageTexture will be destroyed now.\n     *\n     * // Unload multiple assets:\n     * const textures = await Assets.unload(['thumper', 'chicko']);\n     * @param urls - the urls to unload\n     */\n    public async unload(\n        urls: ArrayOr<string> | ResolvedAsset | ResolvedAsset[]\n    ): Promise<void>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        const urlArray = convertToList<string | ResolvedAsset>(urls)\n            .map((url) =>\n                ((typeof url !== 'string') ? url.src : url));\n\n        // check cache first...\n        const resolveResults = this.resolver.resolve(urlArray);\n\n        await this._unloadFromResolved(resolveResults);\n    }\n\n    /**\n     * Bundles are a way to manage multiple assets at once.\n     * this will unload all files in a bundle.\n     *\n     * once a bundle has been unloaded, you need to load it again to have access to the assets.\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * Assets.addBundle({\n     *     'thumper': 'http://some.url.com/thumper.png',\n     * })\n     *\n     * const assets = await Assets.loadBundle('thumper');\n     *\n     * // Now to unload...\n     *\n     * await Assets.unloadBundle('thumper');\n     *\n     * // All assets in the assets object will now have been destroyed and purged from the cache\n     * @param bundleIds - the bundle id or ids to unload\n     */\n    public async unloadBundle(bundleIds: ArrayOr<string>): Promise<void>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        bundleIds = convertToList<string>(bundleIds);\n\n        const resolveResults = this.resolver.resolveBundle(bundleIds);\n\n        const promises = Object.keys(resolveResults).map((bundleId) =>\n            this._unloadFromResolved(resolveResults[bundleId]));\n\n        await Promise.all(promises);\n    }\n\n    private async _unloadFromResolved(resolveResult: ResolvedAsset | Record<string, ResolvedAsset>)\n    {\n        const resolveArray = Object.values(resolveResult);\n\n        resolveArray.forEach((resolveResult) =>\n        {\n            Cache.remove(resolveResult.src);\n        });\n\n        await this.loader.unload(resolveArray);\n    }\n\n    /**\n     * Detects the supported formats for the browser, and returns an array of supported formats, respecting\n     * the users preferred formats order.\n     * @param options - the options to use when detecting formats\n     * @param options.preferredFormats - the preferred formats to use\n     * @param options.skipDetections - if we should skip the detections altogether\n     * @param options.detections - the detections to use\n     * @returns - the detected formats\n     */\n    private async _detectFormats(options: {\n        preferredFormats: string | string[],\n        skipDetections: boolean,\n        detections: FormatDetectionParser[]\n    }): Promise<string[]>\n    {\n        let formats: string[] = [];\n\n        // set preferred formats\n        if (options.preferredFormats)\n        {\n            formats = Array.isArray(options.preferredFormats)\n                ? options.preferredFormats : [options.preferredFormats];\n        }\n\n        // we should add any formats that are supported by the browser\n        for (const detection of options.detections)\n        {\n            if (options.skipDetections || await detection.test())\n            {\n                formats = await detection.add(formats);\n            }\n            else if (!options.skipDetections)\n            {\n                formats = await detection.remove(formats);\n            }\n        }\n\n        // remove any duplicates\n        formats = formats.filter((format, index) => formats.indexOf(format) === index);\n\n        return formats;\n    }\n\n    /** All the detection parsers currently added to the Assets class. */\n    public get detections(): FormatDetectionParser[]\n    {\n        return this._detections;\n    }\n\n    /**\n     * General setter for preferences. This is a helper function to set preferences on all parsers.\n     * @param preferences - the preferences to set\n     */\n    public setPreferences(preferences: Partial<AssetsPreferences>): void\n    {\n        // Find matching config keys in loaders with preferences\n        // and set the values\n        this.loader.parsers.forEach((parser) =>\n        {\n            if (!parser.config) return;\n\n            (Object.keys(parser.config) as (keyof AssetsPreferences)[])\n                .filter((key) => key in preferences)\n                .forEach((key) =>\n                {\n                    parser.config[key] = preferences[key];\n                });\n        });\n    }\n}\n\nexport const Assets = new AssetsClass();\n\n// Handle registration of extensions\nextensions\n    .handleByList(ExtensionType.LoadParser, Assets.loader.parsers)\n    .handleByList(ExtensionType.ResolveParser, Assets.resolver.parsers)\n    .handleByList(ExtensionType.CacheParser, Assets.cache.parsers)\n    .handleByList(ExtensionType.DetectionParser, Assets.detections);\nextensions.add(\n    cacheTextureArray,\n\n    detectDefaults,\n    detectAvif,\n    detectWebp,\n    detectMp4,\n    detectOgv,\n    detectWebm,\n\n    loadJson,\n    loadTxt,\n    loadWebFont,\n    loadSvg,\n    loadTextures,\n    loadVideoTextures,\n    loadBitmapFont,\n\n    bitmapFontCachePlugin,\n\n    resolveTextureUrl,\n    resolveJsonUrl\n);\n\nconst assetKeyMap = {\n    loader: ExtensionType.LoadParser,\n    resolver: ExtensionType.ResolveParser,\n    cache: ExtensionType.CacheParser,\n    detection: ExtensionType.DetectionParser,\n};\n\ntype AssetType = keyof typeof assetKeyMap;\n\n// Split the Asset extension into it's various parts\n// these are handled in the Assets.ts file\nextensions.handle(ExtensionType.Asset, (extension) =>\n{\n    const ref = extension.ref as AssetExtension;\n\n    Object.entries(assetKeyMap)\n        .filter(([key]) => !!ref[key as AssetType])\n        .forEach(([key, type]) => extensions.add(Object.assign(\n            ref[key as AssetType],\n            // Allow the function to optionally define it's own\n            // ExtensionMetadata, the use cases here is priority for LoaderParsers\n            { extension: ref[key as AssetType].extension ?? type },\n        )));\n}, (extension) =>\n{\n    const ref = extension.ref as AssetExtension;\n\n    Object.keys(assetKeyMap)\n        .filter((key) => !!ref[key as AssetType])\n        .forEach((key) => extensions.remove(ref[key as AssetType]));\n});\n","import { Matrix } from '../../maths/matrix/Matrix';\nimport { ObservablePoint } from '../../maths/point/ObservablePoint';\n\nimport type { Observer } from '../../maths/point/ObservablePoint';\n\n/**\n * Options for the {@link utils.Transform} constructor.\n * @memberof utils.Transform\n */\nexport interface TransformOptions\n{\n    /** The matrix to use. */\n    matrix?: Matrix;\n    /** The observer to use. */\n    observer?: {_onUpdate: (transform: Transform) => void}\n}\n\n/**\n * The Transform class facilitates the manipulation of a 2D transformation matrix through\n * user-friendly properties: position, scale, rotation, skew, and pivot.\n * @memberof utils\n */\nexport class Transform\n{\n    /**\n     * The local transformation matrix.\n     * @internal\n     * @private\n     */\n    public _matrix: Matrix;\n\n    /** The coordinate of the object relative to the local coordinates of the parent. */\n    public position: ObservablePoint;\n\n    /** The scale factor of the object. */\n    public scale: ObservablePoint;\n\n    /** The pivot point of the container that it rotates around. */\n    public pivot: ObservablePoint;\n\n    /** The skew amount, on the x and y axis. */\n    public skew: ObservablePoint;\n\n    /** The rotation amount. */\n    protected _rotation: number;\n\n    /**\n     * The X-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     */\n    protected _cx: number;\n\n    /**\n     * The Y-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     */\n    protected _sx: number;\n\n    /**\n     * The X-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     */\n    protected _cy: number;\n\n    /**\n     * The Y-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     */\n    protected _sy: number;\n\n    protected dirty = true;\n    protected observer: Observer<Transform>;\n\n    /**\n     * @param options - Options for the transform.\n     * @param options.matrix - The matrix to use.\n     * @param options.observer - The observer to use.\n     */\n    constructor({ matrix, observer }: TransformOptions = {})\n    {\n        this._matrix = matrix ?? new Matrix();\n        this.observer = observer;\n\n        this.position = new ObservablePoint(this, 0, 0);\n        this.scale = new ObservablePoint(this, 1, 1);\n        this.pivot = new ObservablePoint(this, 0, 0);\n        this.skew = new ObservablePoint(this, 0, 0);\n\n        this._rotation = 0;\n        this._cx = 1;\n        this._sx = 0;\n        this._cy = 0;\n        this._sy = 1;\n    }\n\n    /**\n     * This matrix is computed by combining this Transforms position, scale, rotation, skew, and pivot\n     * properties into a single matrix.\n     * @readonly\n     */\n    get matrix(): Matrix\n    {\n        const lt = this._matrix;\n\n        if (!this.dirty) return lt;\n\n        lt.a = this._cx * this.scale.x;\n        lt.b = this._sx * this.scale.x;\n        lt.c = this._cy * this.scale.y;\n        lt.d = this._sy * this.scale.y;\n\n        lt.tx = this.position.x - ((this.pivot.x * lt.a) + (this.pivot.y * lt.c));\n        lt.ty = this.position.y - ((this.pivot.x * lt.b) + (this.pivot.y * lt.d));\n\n        this.dirty = false;\n\n        return lt;\n    }\n    /**\n     * Called when a value changes.\n     * @param point\n     * @internal\n     * @private\n     */\n    public _onUpdate(point?: ObservablePoint): void\n    {\n        this.dirty = true;\n\n        if (point === this.skew)\n        {\n            this.updateSkew();\n        }\n\n        this.observer?._onUpdate(this);\n    }\n\n    /** Called when the skew or the rotation changes. */\n    protected updateSkew(): void\n    {\n        this._cx = Math.cos(this._rotation + this.skew.y);\n        this._sx = Math.sin(this._rotation + this.skew.y);\n        this._cy = -Math.sin(this._rotation - this.skew.x); // cos, added PI/2\n        this._sy = Math.cos(this._rotation - this.skew.x); // sin, added PI/2\n\n        this.dirty = true;\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js/math:Transform `\n            + `position=(${this.position.x}, ${this.position.y}) `\n            + `rotation=${this.rotation} `\n            + `scale=(${this.scale.x}, ${this.scale.y}) `\n            + `skew=(${this.skew.x}, ${this.skew.y}) `\n            + `]`;\n    }\n    // #endif\n\n    /**\n     * Decomposes a matrix and sets the transforms properties based on it.\n     * @param matrix - The matrix to decompose\n     */\n    public setFromMatrix(matrix: Matrix): void\n    {\n        matrix.decompose(this);\n        this.dirty = true;\n    }\n\n    /** The rotation of the object in radians. */\n    get rotation(): number\n    {\n        return this._rotation;\n    }\n\n    set rotation(value: number)\n    {\n        if (this._rotation !== value)\n        {\n            this._rotation = value;\n            this._onUpdate(this.skew);\n        }\n    }\n}\n","import { Cache } from '../../assets/cache/Cache';\nimport { ObservablePoint } from '../../maths/point/ObservablePoint';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\nimport { Transform } from '../../utils/misc/Transform';\nimport { Container } from '../container/Container';\n\nimport type { PointData } from '../../maths/point/PointData';\nimport type { Instruction } from '../../rendering/renderers/shared/instructions/Instruction';\nimport type { View } from '../../rendering/renderers/shared/view/View';\nimport type { Bounds, BoundsData } from '../container/bounds/Bounds';\nimport type { ContainerOptions } from '../container/Container';\nimport type { DestroyOptions } from '../container/destroyTypes';\n\n/**\n * Constructor options used for `TilingSprite` instances. Extends {@link scene.TilingSpriteViewOptions}\n * ```js\n * const tilingSprite = new TilingSprite({\n *    texture: Texture.from('assets/image.png'),\n *    width: 100,\n *    height: 100,\n *    tilePosition: { x: 100, y: 100 },\n *    tileScale: { x: 2, y: 2 },\n * });\n * ```\n * @see {@link scene.TilingSprite}\n * @see {@link scene.TilingSpriteViewOptions}\n * @memberof scene\n */\nexport interface TilingSpriteOptions extends ContainerOptions\n{\n    /**\n     * The anchor point of the sprite\n     * @default {x: 0, y: 0}\n     */\n    anchor?: PointData\n    /**\n     * The offset of the image that is being tiled.\n     * @default {x: 0, y: 0}\n     */\n    tilePosition?: PointData\n    /**\n     * Scaling of the image that is being tiled.\n     * @default {x: 1, y: 1}\n     */\n    tileScale?: PointData\n    /**\n     * The rotation of the image that is being tiled.\n     * @default 0\n     */\n    tileRotation?: number\n    /**\n     * The texture to use for the sprite.\n     * @default Texture.WHITE\n     */\n    texture?: Texture\n    /**\n     * The width of the tiling sprite. #\n     * @default 256\n     */\n    width?: number\n    /**\n     * The height of the tiling sprite.\n     * @default 256\n     */\n    height?: number\n    // TODO needs a better name..\n    /**\n     * @todo\n     * @default false\n     */\n    applyAnchorToTexture?: boolean\n    /** Whether or not to round the x/y position. */\n    roundPixels?: boolean;\n}\n\n/**\n * A tiling sprite is a fast way of rendering a tiling image.\n * @example\n * const tilingSprite = new TilingSprite({\n *    texture: Texture.from('assets/image.png'),\n *    width: 100,\n *    height: 100,\n * });\n *\n * tilingSprite.tilePosition.x = 100;\n * tilingSprite.tilePosition.y = 100;\n *\n * app.stage.addChild(tilingSprite);\n * @memberof scene\n * @extends scene.Container\n */\nexport class TilingSprite extends Container implements View, Instruction\n{\n    /**\n     * Creates a new tiling sprite.\n     * @param source - The source to create the texture from.\n     * @param options - The options for creating the tiling sprite.\n     * @returns A new tiling sprite.\n     */\n    public static from(source: Texture | string, options: TilingSpriteOptions = {})\n    {\n        if (typeof source === 'string')\n        {\n            return new TilingSprite({\n                texture: Cache.get(source),\n                ...options,\n            });\n        }\n\n        return new TilingSprite({\n            texture: source,\n            ...options,\n        });\n    }\n\n    /** default options for the TilingSprite */\n    public static defaultOptions: TilingSpriteOptions = {\n        /** The texture to use for the sprite. */\n        texture: Texture.EMPTY,\n        /** The anchor point of the sprite */\n        anchor: { x: 0, y: 0 },\n        /** The offset of the image that is being tiled. */\n        tilePosition: { x: 0, y: 0 },\n        /** Scaling of the image that is being tiled. */\n        tileScale: { x: 1, y: 1 },\n        /** The rotation of the image that is being tiled. */\n        tileRotation: 0,\n        /** TODO */\n        applyAnchorToTexture: false,\n    };\n\n    public readonly renderPipeId = 'tilingSprite';\n    public readonly canBundle = true;\n    public readonly batched = true;\n\n    public _anchor: ObservablePoint;\n\n    public _tileTransform: Transform;\n    public _texture: Texture;\n    public _applyAnchorToTexture: boolean;\n    public _didTilingSpriteUpdate: boolean;\n\n    public _roundPixels: 0 | 1 = 0;\n\n    private _bounds: BoundsData = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    private _boundsDirty = true;\n    private _width: number;\n    private _height: number;\n\n    /**\n     * @param {rendering.Texture | scene.TilingSpriteOptions} options - The options for creating the tiling sprite.\n     */\n    constructor(options?: Texture | TilingSpriteOptions);\n    /** @deprecated since 8.0.0 */\n    constructor(texture: Texture, width: number, height: number);\n    constructor(...args: [(Texture | TilingSpriteOptions)?] | [Texture, number, number])\n    {\n        let options = args[0] || {};\n\n        if (options instanceof Texture)\n        {\n            options = { texture: options };\n        }\n\n        if (args.length > 1)\n        {\n            // #if _DEBUG\n            deprecation(v8_0_0, 'use new TilingSprite({ texture, width:100, height:100 }) instead');\n            // #endif\n\n            options.width = args[1];\n            options.height = args[2];\n        }\n\n        options = { ...TilingSprite.defaultOptions, ...options };\n\n        const {\n            texture,\n            anchor,\n            tilePosition,\n            tileScale,\n            tileRotation,\n            width,\n            height,\n            applyAnchorToTexture,\n            roundPixels,\n            ...rest\n        } = options ?? {};\n\n        super({\n\n            label: 'TilingSprite',\n            ...rest\n        });\n\n        this.allowChildren = false;\n\n        this._anchor = new ObservablePoint(\n            {\n                _onUpdate: () =>\n                {\n                    this.onViewUpdate();\n                }\n            },\n        );\n\n        this._applyAnchorToTexture = applyAnchorToTexture;\n\n        this.texture = texture;\n        this._width = width ?? texture.width;\n        this._height = height ?? texture.height;\n\n        this._tileTransform = new Transform({\n            observer: {\n                _onUpdate: () => this.onViewUpdate(),\n            }\n        });\n\n        if (anchor) this.anchor = anchor;\n        this.tilePosition = tilePosition;\n        this.tileScale = tileScale;\n        this.tileRotation = tileRotation;\n\n        this.roundPixels = roundPixels ?? false;\n    }\n\n    /**\n     * Changes frame clamping in corresponding textureMatrix\n     * Change to -0.5 to add a pixel to the edge, recommended for transparent trimmed textures in atlas\n     * @default 0.5\n     * @member {number}\n     */\n    get clampMargin()\n    {\n        return this._texture.textureMatrix.clampMargin;\n    }\n\n    set clampMargin(value: number)\n    {\n        this._texture.textureMatrix.clampMargin = value;\n    }\n\n    /**\n     * The anchor sets the origin point of the sprite. The default value is taken from the {@link Texture}\n     * and passed to the constructor.\n     *\n     * The default is `(0,0)`, this means the sprite's origin is the top left.\n     *\n     * Setting the anchor to `(0.5,0.5)` means the sprite's origin is centered.\n     *\n     * Setting the anchor to `(1,1)` would mean the sprite's origin point will be the bottom right corner.\n     *\n     * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.\n     * @example\n     * import { TilingSprite } from 'pixi.js';\n     *\n     * const sprite = new TilingSprite({texture: Texture.WHITE});\n     * sprite.anchor.set(0.5); // This will set the origin to center. (0.5) is same as (0.5, 0.5).\n     */\n    get anchor(): ObservablePoint\n    {\n        return this._anchor;\n    }\n\n    set anchor(value: PointData | number)\n    {\n        typeof value === 'number' ? this._anchor.set(value) : this._anchor.copyFrom(value);\n    }\n\n    /** The offset of the image that is being tiled. */\n    get tilePosition(): ObservablePoint\n    {\n        return this._tileTransform.position;\n    }\n\n    set tilePosition(value: PointData)\n    {\n        this._tileTransform.position.copyFrom(value);\n    }\n\n    /** The scaling of the image that is being tiled. */\n    get tileScale(): ObservablePoint\n    {\n        return this._tileTransform.scale;\n    }\n\n    set tileScale(value: PointData | number)\n    {\n        typeof value === 'number' ? this._tileTransform.scale.set(value) : this._tileTransform.scale.copyFrom(value);\n    }\n\n    set tileRotation(value)\n    {\n        this._tileTransform.rotation = value;\n    }\n\n    /** The rotation of the image that is being tiled. */\n    get tileRotation()\n    {\n        return this._tileTransform.rotation;\n    }\n\n    /** The transform of the image that is being tiled. */\n    get tileTransform()\n    {\n        return this._tileTransform;\n    }\n\n    /**\n     *  Whether or not to round the x/y position of the sprite.\n     * @type {boolean}\n     */\n    get roundPixels()\n    {\n        return !!this._roundPixels;\n    }\n\n    set roundPixels(value: boolean)\n    {\n        this._roundPixels = value ? 1 : 0;\n    }\n\n    /**\n     * The local bounds of the sprite.\n     * @type {rendering.Bounds}\n     */\n    get bounds()\n    {\n        if (this._boundsDirty)\n        {\n            this._updateBounds();\n            this._boundsDirty = false;\n        }\n\n        return this._bounds;\n    }\n\n    set texture(value: Texture)\n    {\n        value ||= Texture.EMPTY;\n\n        const currentTexture = this._texture;\n\n        if (currentTexture === value) return;\n\n        if (currentTexture && currentTexture.dynamic) currentTexture.off('update', this.onViewUpdate, this);\n        if (value.dynamic) value.on('update', this.onViewUpdate, this);\n\n        this._texture = value;\n\n        this.onViewUpdate();\n    }\n\n    /** The texture that the sprite is using. */\n    get texture()\n    {\n        return this._texture;\n    }\n\n    /** The width of the tiling area. */\n    set width(value: number)\n    {\n        this._width = value;\n        this.onViewUpdate();\n    }\n\n    get width()\n    {\n        return this._width;\n    }\n\n    set height(value: number)\n    {\n        this._height = value;\n        this.onViewUpdate();\n    }\n\n    /** The height of the tiling area. */\n    get height()\n    {\n        return this._height;\n    }\n\n    private _updateBounds()\n    {\n        const bounds = this._bounds;\n\n        const anchor = this._anchor;\n\n        const width = this._width;\n        const height = this._height;\n\n        bounds.maxX = -anchor._x * width;\n        bounds.minX = bounds.maxX + width;\n\n        bounds.maxY = -anchor._y * height;\n        bounds.minY = bounds.maxY + height;\n    }\n\n    /**\n     * Adds the bounds of this object to the bounds object.\n     * @param bounds - The output bounds object.\n     */\n    public addBounds(bounds: Bounds)\n    {\n        const _bounds = this.bounds;\n\n        bounds.addFrame(\n            _bounds.minX,\n            _bounds.minY,\n            _bounds.maxX,\n            _bounds.maxY,\n        );\n    }\n\n    /**\n     * Checks if the object contains the given point.\n     * @param point - The point to check\n     */\n    public containsPoint(point: PointData)\n    {\n        const width = this._width;\n        const height = this._height;\n        const x1 = -width * this._anchor._x;\n        let y1 = 0;\n\n        if (point.x >= x1 && point.x <= x1 + width)\n        {\n            y1 = -height * this._anchor._y;\n\n            if (point.y >= y1 && point.y <= y1 + height) return true;\n        }\n\n        return false;\n    }\n\n    public onViewUpdate()\n    {\n        this._boundsDirty = true;\n        this._didTilingSpriteUpdate = true;\n\n        this._didChangeId += 1 << 12;\n\n        if (this.didViewUpdate) return;\n        this.didViewUpdate = true;\n\n        const renderGroup = this.renderGroup || this.parentRenderGroup;\n\n        if (renderGroup)\n        {\n            renderGroup.onChildViewUpdate(this);\n        }\n    }\n\n    /**\n     * Destroys this sprite renderable and optionally its texture.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @param {boolean} [options.texture=false] - Should it destroy the current texture of the renderable as well\n     * @param {boolean} [options.textureSource=false] - Should it destroy the textureSource of the renderable as well\n     */\n    public destroy(options: DestroyOptions = false)\n    {\n        super.destroy(options);\n\n        this._anchor = null;\n        this._tileTransform = null;\n        this._bounds = null;\n\n        const destroyTexture = typeof options === 'boolean' ? options : options?.texture;\n\n        if (destroyTexture)\n        {\n            const destroyTextureSource = typeof options === 'boolean' ? options : options?.textureSource;\n\n            this._texture.destroy(destroyTextureSource);\n        }\n\n        this._texture = null;\n    }\n}\n\n","import { ObservablePoint } from '../../maths/point/ObservablePoint';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\nimport { Bounds } from '../container/bounds/Bounds';\nimport { Container } from '../container/Container';\n\nimport type { Size } from '../../maths/misc/Size';\nimport type { PointData } from '../../maths/point/PointData';\nimport type { View } from '../../rendering/renderers/shared/view/View';\nimport type { ContainerOptions } from '../container/Container';\nimport type { Optional } from '../container/container-mixins/measureMixin';\nimport type { DestroyOptions } from '../container/destroyTypes';\nimport type { HTMLTextStyle, HTMLTextStyleOptions } from '../text-html/HtmlTextStyle';\nimport type { TextStyle, TextStyleOptions } from './TextStyle';\n\n/**\n * A string or number that can be used as text.\n * @memberof text\n */\nexport type TextString = string | number | { toString: () => string };\n/**\n * A union of all text styles, including HTML, Bitmap and Canvas text styles.\n * @memberof text\n * @see text.TextStyle\n * @see text.HTMLTextStyle\n */\nexport type AnyTextStyle = TextStyle | HTMLTextStyle;\n/**\n * A union of all text style options, including HTML, Bitmap and Canvas text style options.\n * @memberof text\n * @see text.TextStyleOptions\n * @see text.HTMLTextStyleOptions\n */\nexport type AnyTextStyleOptions = TextStyleOptions | HTMLTextStyleOptions;\n\n/**\n * Options for the {@link scene.Text} class.\n * @example\n * const text = new Text({\n *    text: 'Hello Pixi!',\n *    style: {\n *       fontFamily: 'Arial',\n *       fontSize: 24,\n *    fill: 0xff1010,\n *    align: 'center',\n *  }\n * });\n * @memberof text\n */\nexport interface TextOptions<\n    TEXT_STYLE extends TextStyle = TextStyle,\n    TEXT_STYLE_OPTIONS extends TextStyleOptions = TextStyleOptions,\n> extends ContainerOptions\n{\n    /** The anchor point of the text. */\n    anchor?: PointData | number;\n    /** The copy for the text object. To split a line you can use '\\n'. */\n    text?: TextString;\n    /** The resolution of the text. */\n    resolution?: number;\n    /**\n     * The text style\n     * @type {\n     * text.TextStyle |\n     * Partial<text.TextStyle> |\n     * text.TextStyleOptions |\n     * text.HTMLTextStyle |\n     * Partial<text.HTMLTextStyle> |\n     * text.HTMLTextStyleOptions\n     * }\n     */\n    style?: TEXT_STYLE | TEXT_STYLE_OPTIONS;\n    /** Whether or not to round the x/y position. */\n    roundPixels?: boolean;\n}\n\n/**\n * An abstract Text class, used by all text type in Pixi. This includes Canvas, HTML, and Bitmap Text.\n * @see scene.Text\n * @see scene.BitmapText\n * @see scene.HTMLText\n * @memberof scene\n */\nexport abstract class AbstractText<\n    TEXT_STYLE extends TextStyle = TextStyle,\n    TEXT_STYLE_OPTIONS extends TextStyleOptions = TextStyleOptions,\n> extends Container implements View\n{\n    public abstract readonly renderPipeId: string;\n    public batched = true;\n    public _anchor: ObservablePoint;\n\n    public _resolution: number = null;\n\n    public _style: TEXT_STYLE;\n    public _didTextUpdate = true;\n    public _roundPixels: 0 | 1 = 0;\n\n    protected _bounds: Bounds = new Bounds();\n    protected _boundsDirty = true;\n    protected _text: string;\n    private readonly _styleClass: new (options: TEXT_STYLE_OPTIONS) => TEXT_STYLE;\n\n    constructor(\n        options: TextOptions<TEXT_STYLE, TEXT_STYLE_OPTIONS>,\n        styleClass: new (options: TEXT_STYLE_OPTIONS) => TEXT_STYLE\n    )\n    {\n        const { text, resolution, style, anchor, width, height, roundPixels, ...rest } = options;\n\n        super({\n            ...rest\n        });\n\n        this._styleClass = styleClass;\n\n        this.text = text ?? '';\n\n        this.style = style;\n\n        this.resolution = resolution ?? null;\n\n        this.allowChildren = false;\n\n        this._anchor = new ObservablePoint(\n            {\n                _onUpdate: () =>\n                {\n                    this.onViewUpdate();\n                },\n            },\n        );\n\n        if (anchor) this.anchor = anchor;\n        this.roundPixels = roundPixels ?? false;\n\n        // needs to be set after the container has initiated\n        if (width) this.width = width;\n        if (height) this.height = height;\n    }\n\n    /**\n     * The anchor sets the origin point of the text.\n     * The default is `(0,0)`, this means the text's origin is the top left.\n     *\n     * Setting the anchor to `(0.5,0.5)` means the text's origin is centered.\n     *\n     * Setting the anchor to `(1,1)` would mean the text's origin point will be the bottom right corner.\n     *\n     * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.\n     * @example\n     * import { Text } from 'pixi.js';\n     *\n     * const text = new Text('hello world');\n     * text.anchor.set(0.5); // This will set the origin to center. (0.5) is same as (0.5, 0.5).\n     */\n    get anchor(): ObservablePoint\n    {\n        return this._anchor;\n    }\n\n    set anchor(value: PointData | number)\n    {\n        typeof value === 'number' ? this._anchor.set(value) : this._anchor.copyFrom(value);\n    }\n\n    /**\n     *  Whether or not to round the x/y position of the text.\n     * @type {boolean}\n     */\n    get roundPixels()\n    {\n        return !!this._roundPixels;\n    }\n\n    set roundPixels(value: boolean)\n    {\n        this._roundPixels = value ? 1 : 0;\n    }\n\n    /** Set the copy for the text object. To split a line you can use '\\n'. */\n    set text(value: TextString)\n    {\n        // check its a string\n        value = value.toString();\n\n        if (this._text === value) return;\n\n        this._text = value as string;\n        this.onViewUpdate();\n    }\n\n    get text(): string\n    {\n        return this._text;\n    }\n\n    /**\n     * The resolution / device pixel ratio of the canvas.\n     * @default 1\n     */\n    set resolution(value: number)\n    {\n        this._resolution = value;\n        this.onViewUpdate();\n    }\n\n    get resolution(): number\n    {\n        return this._resolution;\n    }\n\n    get style(): TEXT_STYLE\n    {\n        return this._style;\n    }\n\n    /**\n     * Set the style of the text.\n     *\n     * Set up an event listener to listen for changes on the style object and mark the text as dirty.\n     *\n     * If setting the `style` can also be partial {@link AnyTextStyleOptions}.\n     * @type {\n     * text.TextStyle |\n     * Partial<text.TextStyle> |\n     * text.TextStyleOptions |\n     * text.HTMLTextStyle |\n     * Partial<text.HTMLTextStyle> |\n     * text.HTMLTextStyleOptions\n     * }\n     */\n    set style(style: TEXT_STYLE | Partial<TEXT_STYLE> | TEXT_STYLE_OPTIONS)\n    {\n        style = style || {};\n\n        this._style?.off('update', this.onViewUpdate, this);\n\n        if (style instanceof this._styleClass)\n        {\n            this._style = style as TEXT_STYLE;\n        }\n        else\n        {\n            this._style = new this._styleClass(style as TEXT_STYLE_OPTIONS);\n        }\n\n        this._style.on('update', this.onViewUpdate, this);\n        this.onViewUpdate();\n    }\n\n    /**\n     * The local bounds of the Text.\n     * @type {rendering.Bounds}\n     */\n    get bounds()\n    {\n        if (this._boundsDirty)\n        {\n            this._updateBounds();\n            this._boundsDirty = false;\n        }\n\n        return this._bounds;\n    }\n\n    /** The width of the sprite, setting this will actually modify the scale to achieve the value set. */\n    override get width(): number\n    {\n        return Math.abs(this.scale.x) * this.bounds.width;\n    }\n\n    override set width(value: number)\n    {\n        this._setWidth(value, this.bounds.width);\n    }\n\n    /** The height of the sprite, setting this will actually modify the scale to achieve the value set. */\n    override get height(): number\n    {\n        return Math.abs(this.scale.y) * this.bounds.height;\n    }\n\n    override set height(value: number)\n    {\n        this._setHeight(value, this.bounds.height);\n    }\n\n    /**\n     * Retrieves the size of the Text as a [Size]{@link Size} object.\n     * This is faster than get the width and height separately.\n     * @param out - Optional object to store the size in.\n     * @returns - The size of the Text.\n     */\n    public override getSize(out?: Size): Size\n    {\n        if (!out)\n        {\n            out = {} as Size;\n        }\n\n        out.width = Math.abs(this.scale.x) * this.bounds.width;\n        out.height = Math.abs(this.scale.y) * this.bounds.height;\n\n        return out;\n    }\n\n    /**\n     * Sets the size of the Text to the specified width and height.\n     * This is faster than setting the width and height separately.\n     * @param value - This can be either a number or a [Size]{@link Size} object.\n     * @param height - The height to set. Defaults to the value of `width` if not provided.\n     */\n    public override setSize(value: number | Optional<Size, 'height'>, height?: number)\n    {\n        let convertedWidth: number;\n        let convertedHeight: number;\n\n        if (typeof value !== 'object')\n        {\n            convertedWidth = value;\n            convertedHeight = height ?? value;\n        }\n        else\n        {\n            convertedWidth = value.width;\n            convertedHeight = value.height ?? value.width;\n        }\n\n        if (convertedWidth !== undefined)\n        {\n            this._setWidth(convertedWidth, this.bounds.width);\n        }\n\n        if (convertedHeight !== undefined)\n        {\n            this._setHeight(convertedHeight, this.bounds.height);\n        }\n    }\n\n    /**\n     * Adds the bounds of this text to the bounds object.\n     * @param bounds - The output bounds object.\n     */\n    public addBounds(bounds: Bounds)\n    {\n        const _bounds = this.bounds;\n\n        bounds.addFrame(\n            _bounds.minX,\n            _bounds.minY,\n            _bounds.maxX,\n            _bounds.maxY,\n        );\n    }\n\n    /**\n     * Checks if the text contains the given point.\n     * @param point - The point to check\n     */\n    public containsPoint(point: PointData)\n    {\n        const width = this.bounds.width;\n        const height = this.bounds.height;\n\n        const x1 = -width * this.anchor.x;\n        let y1 = 0;\n\n        if (point.x >= x1 && point.x <= x1 + width)\n        {\n            y1 = -height * this.anchor.y;\n\n            if (point.y >= y1 && point.y <= y1 + height) return true;\n        }\n\n        return false;\n    }\n\n    public onViewUpdate()\n    {\n        this._didChangeId += 1 << 12;\n        this._boundsDirty = true;\n\n        if (this.didViewUpdate) return;\n        this.didViewUpdate = true;\n\n        this._didTextUpdate = true;\n\n        const renderGroup = this.renderGroup || this.parentRenderGroup;\n\n        if (renderGroup)\n        {\n            renderGroup.onChildViewUpdate(this);\n        }\n    }\n\n    public _getKey(): string\n    {\n        // TODO add a dirty flag...\n        return `${this.text}:${this._style.styleKey}-${this.resolution}`;\n    }\n\n    protected abstract _updateBounds(): void;\n\n    /**\n     * Destroys this text renderable and optionally its style texture.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @param {boolean} [options.texture=false] - Should it destroy the texture of the text style\n     * @param {boolean} [options.textureSource=false] - Should it destroy the textureSource of the text style\n     * @param {boolean} [options.style=false] - Should it destroy the style of the text\n     */\n    public destroy(options: DestroyOptions = false): void\n    {\n        super.destroy(options);\n\n        (this as any).owner = null;\n        this._bounds = null;\n        this._anchor = null;\n\n        if (typeof options === 'boolean' ? options : options?.style)\n        {\n            this._style.destroy(options);\n        }\n\n        this._style = null;\n        this._text = null;\n    }\n}\n\nexport function ensureOptions<\n    TEXT_STYLE extends TextStyle,\n    TEXT_STYLE_OPTIONS extends TextStyleOptions\n>(\n    args: any[],\n    name: string\n): TextOptions<TEXT_STYLE, TEXT_STYLE_OPTIONS>\n{\n    let options = (args[0] ?? {}) as TextOptions<TEXT_STYLE, TEXT_STYLE_OPTIONS>;\n\n    // @deprecated\n    if (typeof options === 'string' || args[1])\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, `use new ${name}({ text: \"hi!\", style }) instead`);\n        // #endif\n\n        options = {\n            text: options,\n            style: args[1],\n        } as TextOptions<TEXT_STYLE, TEXT_STYLE_OPTIONS>;\n    }\n\n    return options;\n}\n","import { AbstractText, ensureOptions } from './AbstractText';\nimport { CanvasTextMetrics } from './canvas/CanvasTextMetrics';\nimport { TextStyle } from './TextStyle';\n\nimport type { View } from '../../rendering/renderers/shared/view/View';\nimport type { TextOptions, TextString } from './AbstractText';\nimport type { TextStyleOptions } from './TextStyle';\n\n/**\n * A Text Object will create a line or multiple lines of text.\n *\n * To split a line you can use '\\n' in your text string, or, on the `style` object,\n * change its `wordWrap` property to true and and givae the `wordWrapWidth` property a value.\n *\n * The primary advantage of this class over BitmapText is that you have great control over the style of the text,\n * which you can change at runtime.\n *\n * The primary disadvantages is that each piece of text has it's own texture, which can use more memory.\n * When text changes, this texture has to be re-generated and re-uploaded to the GPU, taking up time.\n * @example\n * import { Text } from 'pixi.js';\n *\n * const text = new Text({\n *     text: 'Hello Pixi!',\n *     style: {\n *         fontFamily: 'Arial',\n *         fontSize: 24,\n *         fill: 0xff1010,\n *         align: 'center',\n *     }\n * });\n * @memberof scene\n */\nexport class Text\n    extends AbstractText<TextStyle, TextStyleOptions>\n    implements View\n{\n    public readonly renderPipeId: string = 'text';\n\n    /**\n     * @param {text.TextOptions} options - The options of the text.\n     */\n    constructor(options?: TextOptions);\n    /** @deprecated since 8.0.0 */\n    constructor(text?: TextString, options?: Partial<TextStyle>);\n    constructor(...args: [TextOptions?] | [TextString, Partial<TextStyle>])\n    {\n        const options = ensureOptions(args, 'Text');\n\n        super(options, TextStyle);\n    }\n\n    protected _updateBounds()\n    {\n        const bounds = this._bounds;\n        const padding = this._style.padding;\n        const anchor = this._anchor;\n\n        const canvasMeasurement = CanvasTextMetrics.measureText(\n            this._text,\n            this._style\n        );\n\n        const { width, height } = canvasMeasurement;\n\n        bounds.minX = (-anchor._x * width) - padding;\n        bounds.maxX = bounds.minX + width + (padding * 2);\n        bounds.minY = (-anchor._y * height) - padding;\n        bounds.maxY = bounds.minY + height + (padding * 2);\n    }\n}\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck - we dynamically create the other index files, so these will throw errors if we don't ignore them\n\nimport { browserExt } from './environment-browser/browserExt';\nimport { webworkerExt } from './environment-webworker/webworkerExt';\nimport { extensions } from './extensions/Extensions';\nimport './rendering/init';\nimport './spritesheet/init';\n\nexport * from './accessibility';\nexport * from './advanced-blend-modes';\nexport * from './app';\nexport * from './assets';\nexport * from './color';\nexport * from './compressed-textures';\nexport * from './culling';\nexport * from './environment';\nexport * from './environment-browser';\nexport * from './environment-webworker';\nexport * from './events';\nexport * from './extensions';\nexport * from './filters';\nexport * from './maths';\nexport * from './prepare';\nexport * from './rendering';\nexport * from './scene';\nexport * from './spritesheet';\nexport * from './ticker';\nexport * from './utils';\n\nextensions.add(browserExt, webworkerExt);\n","import * as PIXI from 'pixi.js';\r\nimport IRenderer from '../Interfaces/IRenderer';\r\nimport IGoContainer from '../Interfaces/IGoContainer';\r\n\r\n// renderer interface implementation\r\nexport default class PIXIRenderer implements IRenderer {\r\n    // private members \r\n    private _application: PIXI.Application;\r\n    private _containers: Map<string, PIXI.Container>; \r\n    private _tickerCallback?: (ticker: PIXI.Ticker) => void;\r\n    private _zIndex: number;\r\n\r\n    // initialization\r\n    public constructor() {\r\n        this._application = new PIXI.Application();\r\n        this._containers = new Map<string, PIXI.Container>();\r\n        this._tickerCallback = undefined;\r\n        this._zIndex = 0;\r\n    }\r\n\r\n    // interface implementations\r\n    public async Initialize(color: number): Promise<void> {\r\n        await this._application.init({ \r\n            backgroundColor: color,\r\n            width: window.innerWidth,\r\n            height: window.innerHeight,\r\n            resizeTo: window \r\n        });\r\n        document.body.appendChild(this._application.canvas);\r\n    }\r\n\r\n    public async LoadSprites(sprites: Array<string>): Promise<void> {\r\n        for (const name of sprites) {\r\n            await PIXI.Assets.load<PIXI.Sprite>(name);            \r\n        }\r\n    }\r\n\r\n    public SetTicker(maxFps: number, callback: (deltaTime: number) => void): void {\r\n        this._application.ticker.maxFPS = maxFps;\r\n        if (this._tickerCallback !== undefined) {\r\n            this._application.ticker.remove(this._tickerCallback);\r\n        }    \r\n        this._tickerCallback = (ticker: PIXI.Ticker) => {\r\n            callback(ticker.deltaTime);\r\n        };\r\n        this._application.ticker.add(this._tickerCallback);\r\n    }\r\n\r\n    public StageSprite(id: string, asset: string): IGoContainer {\r\n        const sprite: PIXI.Sprite = PIXI.Sprite.from(asset);\r\n        const container: PIXI.Container = this._application.stage.addChild(sprite);\r\n        \r\n        container.zIndex = this.GetIndex();\r\n        this._containers.set(id, container);\r\n        return container;\r\n    }\r\n\r\n    public StageSpriteRepeat(id: string, asset: string, width: number, height: number): IGoContainer {\r\n        const texture: PIXI.Texture = PIXI.Texture.from(asset);\r\n        const sprite = new PIXI.TilingSprite({texture, width: width, height: height});\r\n        const container: PIXI.Container = this._application.stage.addChild(sprite);\r\n\r\n        container.zIndex = this.GetIndex();\r\n        this._containers.set(id, container);\r\n        return container;\r\n    }\r\n\r\n    public StageSpriteButton(id: string, asset: string, handler: () => void): IGoContainer {\r\n        const sprite: PIXI.Sprite = PIXI.Sprite.from(asset);\r\n        const container: PIXI.Container = this._application.stage.addChild(sprite);\r\n        this._containers.set(id, container);\r\n        \r\n        container.zIndex = this.GetIndex();\r\n        container.interactive = true;\r\n        sprite.on('pointerdown', handler);\r\n        return container;\r\n    }\r\n\r\n    public StageRectangle(id: string, width: number, height: number, color: number, alpha: number): IGoContainer {\r\n        const holder: PIXI.Container = new PIXI.Container(); \r\n        const graphics: PIXI.Graphics = new PIXI.Graphics(); \r\n        graphics.rect(0, 0, width, height).fill({color:color, alpha:alpha}); \r\n        holder.addChild(graphics);\r\n\r\n        const container: PIXI.Container = this._application.stage.addChild(holder);\r\n        this._containers.set(id, container);\r\n        container.zIndex = this.GetIndex();\r\n        return container;\r\n    }\r\n\r\n    public StageFrame(id: string, width: number, height: number, thickness: number, color: number, alpha: number): IGoContainer {\r\n        const graphics: PIXI.Graphics = new PIXI.Graphics(); \r\n        graphics.rect(0, 0, width, height).stroke({ width: thickness, color: color, alpha: alpha }); \r\n\r\n        const container: PIXI.Container = this._application.stage.addChild(graphics);\r\n        this._containers.set(id, container);\r\n        container.zIndex = this.GetIndex();\r\n        return container;\r\n    }\r\n\r\n    public StageText(id: string, text: string, fonts: Array<string>, size: number, color: number, strokeColor: number, strokeSize: number, bold: boolean): IGoContainer {\r\n        const weight: PIXI.TextStyleFontWeight = bold ? 'bold' : 'normal';\r\n        const style: PIXI.TextStyle = new PIXI.TextStyle({\r\n            fontFamily: fonts, fontSize: size, fill: color, fontWeight: weight, stroke: {\r\n                width: strokeSize, color: strokeColor\r\n            }\r\n        });\r\n        const graphics: PIXI.Text = new PIXI.Text({text:text, style:style}); \r\n        \r\n        const container: PIXI.Container = this._application.stage.addChild(graphics);\r\n        this._containers.set(id, container);\r\n        container.zIndex = this.GetIndex();\r\n        return container;\r\n    }\r\n\r\n    public StageMask(id: string, x: number, y:number, width: number, height:number): IGoContainer {\r\n        const child: PIXI.Container = new PIXI.Container();\r\n        child.x = x;\r\n        child.y = y;\r\n        child.width = width;\r\n        child.height = height;\r\n\r\n        const container: PIXI.Container = this._application.stage.addChild(child);\r\n        child.mask = new PIXI.Graphics().rect(x, y, width, height).fill({color:0xffffff});\r\n        \r\n        this._containers.set(id, container);\r\n        container.zIndex = this.GetIndex();\r\n        return container;\r\n    }\r\n\r\n    public NestSprite(asset: string, parentId: string): IGoContainer | undefined {\r\n        if (!this._containers.has(parentId)) return undefined;\r\n        const parent: PIXI.Container | undefined = this._containers.get(parentId);\r\n        if (parent) {\r\n            const sprite: PIXI.Sprite = PIXI.Sprite.from(asset);\r\n            const container: PIXI.Container = parent.addChild(sprite);\r\n            container.zIndex = this.GetIndex();\r\n            return container;\r\n        }\r\n    }\r\n\r\n    public NestRectangle(parentId: string, width: number, height: number, color: number, alpha: number): IGoContainer | undefined {\r\n        if (!this._containers.has(parentId)) return undefined;\r\n        const parent: PIXI.Container | undefined = this._containers.get(parentId);\r\n        if (parent) {\r\n            const graphics: PIXI.Graphics = new PIXI.Graphics(); \r\n            graphics.rect(0, 0, width, height).fill({color:color, alpha:alpha}); \r\n\r\n            const container: PIXI.Container = parent.addChild(graphics);\r\n            container.zIndex = this.GetIndex();\r\n            return container;\r\n        }\r\n    }\r\n\r\n    public RestageSpriteRepeat(id: string, width: number, height: number, scaleTile: number): IGoContainer {\r\n        const pre: PIXI.Container | undefined = this._containers.get(id);\r\n        const zIndex: number = pre ? pre.zIndex : this.GetIndex();\r\n        this.Remove(id);\r\n\r\n        const texture: PIXI.Texture = PIXI.Texture.from(id);\r\n        const sprite: PIXI.TilingSprite = new PIXI.TilingSprite({texture, width: width, height: height, tileScale: {x: scaleTile, y: scaleTile}});\r\n        const container: PIXI.Container = this._application.stage.addChild(sprite);\r\n        \r\n        container.zIndex = zIndex;\r\n        this._containers.set(id, container);\r\n        return container;\r\n    }\r\n\r\n    public UpdateText(id: string, text: string): void {\r\n        if (!this._containers.has(id)) return;\r\n        const container: PIXI.Container | undefined = this._containers.get(id);\r\n        if (container && container instanceof PIXI.Text) {\r\n            container.text = text;\r\n        }\r\n    }\r\n\r\n    public MoveMask(id: string, x: number, y:number, width: number, height:number): void {\r\n        if (!this._containers.has(id)) return;\r\n        const container: PIXI.Container | undefined = this._containers.get(id);\r\n        if (container) {\r\n            container.mask = null;\r\n            container.x = x;\r\n            container.y = y;\r\n            container.mask = new PIXI.Graphics().rect(x, y, width, height).fill({color:0xffffff});\r\n        }\r\n    }\r\n\r\n    public Remove(id: string): void {\r\n        if (!this._containers.has(id)) return;\r\n        const container: PIXI.Container | undefined = this._containers.get(id);\r\n        if (container) {\r\n            this._application.stage.removeChild(container);\r\n            this._containers.delete(id);\r\n            container.destroy();\r\n        }\r\n    }\r\n\r\n    // helpers\r\n    private GetIndex(): number {\r\n        return ++this._zIndex;\r\n    }\r\n}\r\n","import { SoundLibrary } from './SoundLibrary';\n\n/**\n * Singleton instance of the SoundLibrary\n */\nlet instance: SoundLibrary;\n\n/**\n * Internal set function for the singleton instance.\n * @ignore\n * @param sound - - Sound library instance\n */\nfunction setInstance(sound: SoundLibrary): SoundLibrary\n{\n    instance = sound;\n\n    return sound;\n}\n\n/**\n * Internal get function for the singleton instance.\n * @ignore\n */\nfunction getInstance(): SoundLibrary\n{\n    return instance;\n}\n\nexport { getInstance, instance, setInstance };\n","/**\n * Represents a single sound element. Can be used to play, pause, etc. sound instances.\n *\n * @memberof filters\n */\nclass Filter\n{\n    /** The node to connect for the filter to the previous filter. */\n    public destination: AudioNode;\n\n    /** The node to connect for the filter to the previous filter. */\n    public source: AudioNode;\n\n    /**\n     * @param {AudioNode} destination - The audio node to use as the destination for the input AudioNode\n     * @param {AudioNode} [source] - Optional output node, defaults to destination node. This is useful\n     *        when creating filters which contains multiple AudioNode elements chained together.\n     */\n    constructor(destination: AudioNode, source?: AudioNode)\n    {\n        this.init(destination, source);\n    }\n\n    /** Reinitialize */\n    protected init(destination: AudioNode, source?: AudioNode): void\n    {\n        this.destination = destination;\n        this.source = source || destination;\n    }\n\n    /**\n     * Connect to the destination.\n     * @param {AudioNode} destination - The destination node to connect the output to\n     */\n    public connect(destination: AudioNode): void\n    {\n        this.source?.connect(destination);\n    }\n\n    /** Completely disconnect filter from destination and source nodes. */\n    public disconnect(): void\n    {\n        this.source?.disconnect();\n    }\n\n    /** Destroy the filter and don't use after this. */\n    public destroy(): void\n    {\n        this.disconnect();\n        this.destination = null;\n        this.source = null;\n    }\n}\n\nexport { Filter };\n","import { getInstance } from '../instance';\nimport { WebAudioContext } from './WebAudioContext';\n\n/**\n * Internal class for Web Audio abstractions and convenience methods.\n * @memberof webaudio\n */\nclass WebAudioUtils\n{\n    /**\n     * Dezippering is removed in the future Web Audio API, instead\n     * we use the `setValueAtTime` method, however, this is not available\n     * in all environments (e.g., Android webview), so we fallback to the `value` setter.\n     * @param param - AudioNode parameter object\n     * @param value - Value to set\n     * @return The value set\n     */\n    public static setParamValue(param: AudioParam, value: number): number\n    {\n        if (param.setValueAtTime)\n        {\n            const context = getInstance().context as WebAudioContext;\n\n            param.setValueAtTime(value, context.audioContext.currentTime);\n        }\n        else\n        {\n            param.value = value;\n        }\n\n        return value;\n    }\n}\n\nexport { WebAudioUtils };\n","import { getInstance } from '../instance';\nimport { WebAudioUtils } from '../webaudio/WebAudioUtils';\nimport { Filter } from './Filter';\n\ninterface Band\n{\n    f: number;\n    type: string;\n    gain: number;\n}\n\n/**\n * Filter for adding equalizer bands.\n *\n * @memberof filters\n */\nclass EqualizerFilter extends Filter\n{\n    /**\n     * Band at 32 Hz\n     * @readonly\n     */\n    public static readonly F32: number = 32;\n\n    /**\n     * Band at 64 Hz\n     * @readonly\n     */\n    public static readonly F64: number = 64;\n\n    /**\n     * Band at 125 Hz\n     * @readonly\n     */\n    public static readonly F125: number = 125;\n\n    /**\n     * Band at 250 Hz\n     * @readonly\n     */\n    public static readonly F250: number = 250;\n\n    /**\n     * Band at 500 Hz\n     * @readonly\n     */\n    public static readonly F500: number = 500;\n\n    /**\n     * Band at 1000 Hz\n     * @readonly\n     */\n    public static readonly F1K: number = 1000;\n\n    /**\n     * Band at 2000 Hz\n     * @readonly\n     */\n    public static readonly F2K: number = 2000;\n\n    /**\n     * Band at 4000 Hz\n     * @readonly\n     */\n    public static readonly F4K: number = 4000;\n\n    /**\n     * Band at 8000 Hz\n     * @readonly\n     */\n    public static readonly F8K: number = 8000;\n\n    /**\n     * Band at 16000 Hz\n     * @readonly\n     */\n    public static readonly F16K: number = 16000;\n\n    /**\n     * The list of bands\n     * @readonly\n     */\n    public readonly bands: BiquadFilterNode[];\n\n    /**\n     * The map of bands to frequency\n     * @readonly\n     */\n    public readonly bandsMap: Record<number, BiquadFilterNode>;\n\n    /**\n     * @param f32 - Default gain for 32 Hz\n     * @param f64 - Default gain for 64 Hz\n     * @param f125 - Default gain for 125 Hz\n     * @param f250 - Default gain for 250 Hz\n     * @param f500 - Default gain for 500 Hz\n     * @param f1k - Default gain for 1000 Hz\n     * @param f2k - Default gain for 2000 Hz\n     * @param f4k - Default gain for 4000 Hz\n     * @param f8k - Default gain for 8000 Hz\n     * @param f16k - Default gain for 16000 Hz\n     */\n    constructor(f32 = 0, f64 = 0, f125 = 0, f250 = 0, f500 = 0,\n        f1k = 0, f2k = 0, f4k = 0, f8k = 0, f16k = 0)\n    {\n        let bands: BiquadFilterNode[] = [];\n\n        const equalizerBands: Band[] = [\n            {\n                f: EqualizerFilter.F32,\n                type: 'lowshelf',\n                gain: f32,\n            },\n            {\n                f: EqualizerFilter.F64,\n                type: 'peaking',\n                gain: f64,\n            },\n            {\n                f: EqualizerFilter.F125,\n                type: 'peaking',\n                gain: f125,\n            },\n            {\n                f: EqualizerFilter.F250,\n                type: 'peaking',\n                gain: f250,\n            },\n            {\n                f: EqualizerFilter.F500,\n                type: 'peaking',\n                gain: f500,\n            },\n            {\n                f: EqualizerFilter.F1K,\n                type: 'peaking',\n                gain: f1k,\n            },\n            {\n                f: EqualizerFilter.F2K,\n                type: 'peaking',\n                gain: f2k,\n            },\n            {\n                f: EqualizerFilter.F4K,\n                type: 'peaking',\n                gain: f4k,\n            },\n            {\n                f: EqualizerFilter.F8K,\n                type: 'peaking',\n                gain: f8k,\n            },\n            {\n                f: EqualizerFilter.F16K,\n                type: 'highshelf',\n                gain: f16k,\n            },\n        ];\n\n        if (!getInstance().useLegacy)\n        {\n            bands = equalizerBands.map((band: Band) =>\n            {\n                const node: BiquadFilterNode = getInstance().context.audioContext.createBiquadFilter();\n\n                node.type = band.type as BiquadFilterType;\n                WebAudioUtils.setParamValue(node.Q, 1);\n                node.frequency.value = band.f; // WebAudioUtils.setParamValue(filter.frequency, band.f);\n                WebAudioUtils.setParamValue(node.gain, band.gain);\n\n                return node;\n            });\n        }\n\n        // Setup the constructor AudioNode, where first is the input, and last is the output\n        super(bands[0], bands[bands.length - 1]);\n\n        // Manipulate the bands\n        this.bands = bands;\n\n        // Create a map\n        this.bandsMap = {};\n\n        for (let i = 0; i < this.bands.length; i++)\n        {\n            const node: BiquadFilterNode = this.bands[i];\n\n            // Connect the previous band to the current one\n            if (i > 0)\n            {\n                this.bands[i - 1].connect(node);\n            }\n            this.bandsMap[node.frequency.value] = node;\n        }\n    }\n\n    /**\n     * Set gain on a specific frequency.\n     * @param frequency - The frequency, see EqualizerFilter.F* for bands\n     * @param gain - Recommended -40 to 40.\n     */\n    public setGain(frequency: number, gain = 0): void\n    {\n        if (!this.bandsMap[frequency])\n        {\n            throw new Error(`No band found for frequency ${frequency}`);\n        }\n        WebAudioUtils.setParamValue(this.bandsMap[frequency].gain, gain);\n    }\n\n    /**\n     * Get gain amount on a specific frequency.\n     * @return The amount of gain set.\n     */\n    public getGain(frequency: number): number\n    {\n        if (!this.bandsMap[frequency])\n        {\n            throw new Error(`No band found for frequency ${frequency}`);\n        }\n\n        return this.bandsMap[frequency].gain.value;\n    }\n\n    /**\n     * Gain at 32 Hz frequencey.\n     * @default 0\n     */\n    public set f32(value: number)\n    {\n        this.setGain(EqualizerFilter.F32, value);\n    }\n    public get f32(): number\n    {\n        return this.getGain(EqualizerFilter.F32);\n    }\n\n    /**\n     * Gain at 64 Hz frequencey.\n     * @default 0\n     */\n    public set f64(value: number)\n    {\n        this.setGain(EqualizerFilter.F64, value);\n    }\n    public get f64(): number\n    {\n        return this.getGain(EqualizerFilter.F64);\n    }\n\n    /**\n     * Gain at 125 Hz frequencey.\n     * @default 0\n     */\n    public set f125(value: number)\n    {\n        this.setGain(EqualizerFilter.F125, value);\n    }\n    public get f125(): number\n    {\n        return this.getGain(EqualizerFilter.F125);\n    }\n\n    /**\n     * Gain at 250 Hz frequencey.\n     * @default 0\n     */\n    public set f250(value: number)\n    {\n        this.setGain(EqualizerFilter.F250, value);\n    }\n    public get f250(): number\n    {\n        return this.getGain(EqualizerFilter.F250);\n    }\n\n    /**\n     * Gain at 500 Hz frequencey.\n     * @default 0\n     */\n    public set f500(value: number)\n    {\n        this.setGain(EqualizerFilter.F500, value);\n    }\n    public get f500(): number\n    {\n        return this.getGain(EqualizerFilter.F500);\n    }\n\n    /**\n     * Gain at 1 KHz frequencey.\n     * @default 0\n     */\n    public set f1k(value: number)\n    {\n        this.setGain(EqualizerFilter.F1K, value);\n    }\n    public get f1k(): number\n    {\n        return this.getGain(EqualizerFilter.F1K);\n    }\n\n    /**\n     * Gain at 2 KHz frequencey.\n     * @default 0\n     */\n    public set f2k(value: number)\n    {\n        this.setGain(EqualizerFilter.F2K, value);\n    }\n    public get f2k(): number\n    {\n        return this.getGain(EqualizerFilter.F2K);\n    }\n\n    /**\n     * Gain at 4 KHz frequencey.\n     * @default 0\n     */\n    public set f4k(value: number)\n    {\n        this.setGain(EqualizerFilter.F4K, value);\n    }\n    public get f4k(): number\n    {\n        return this.getGain(EqualizerFilter.F4K);\n    }\n\n    /**\n     * Gain at 8 KHz frequencey.\n     * @default 0\n     */\n    public set f8k(value: number)\n    {\n        this.setGain(EqualizerFilter.F8K, value);\n    }\n    public get f8k(): number\n    {\n        return this.getGain(EqualizerFilter.F8K);\n    }\n\n    /**\n     * Gain at 16 KHz frequencey.\n     * @default 0\n     */\n    public set f16k(value: number)\n    {\n        this.setGain(EqualizerFilter.F16K, value);\n    }\n    public get f16k(): number\n    {\n        return this.getGain(EqualizerFilter.F16K);\n    }\n\n    /** Reset all frequency bands to have gain of 0 */\n    public reset(): void\n    {\n        this.bands.forEach((band: BiquadFilterNode) =>\n        {\n            WebAudioUtils.setParamValue(band.gain, 0);\n        });\n    }\n\n    public destroy(): void\n    {\n        this.bands.forEach((band: BiquadFilterNode) =>\n        {\n            band.disconnect();\n        });\n        (this as any).bands = null;\n        (this as any).bandsMap = null;\n    }\n}\n\nexport { EqualizerFilter };\n","import { EventEmitter } from 'pixi.js';\nimport { Filter } from '../filters/Filter';\nimport { IMediaContext } from '../interfaces/IMediaContext';\n\n/**\n * The fallback version of WebAudioContext which uses `<audio>` instead of WebAudio API.\n * @memberof htmlaudio\n * @extends PIXI.EventEmitter\n */\nclass HTMLAudioContext extends EventEmitter implements IMediaContext\n{\n    /** Current global speed from 0 to 1 */\n    public speed = 1;\n\n    /** Current muted status of the context */\n    public muted = false;\n\n    /** Current volume from 0 to 1  */\n    public volume = 1;\n\n    /** Current paused status */\n    public paused = false;\n\n    /** Internal trigger when volume, mute or speed changes */\n    public refresh(): void\n    {\n        this.emit('refresh');\n    }\n\n    /** Internal trigger paused changes */\n    public refreshPaused(): void\n    {\n        this.emit('refreshPaused');\n    }\n\n    /**\n     * HTML Audio does not support filters, this is non-functional API.\n     */\n    public get filters(): Filter[]\n    {\n        console.warn('HTML Audio does not support filters');\n\n        return null;\n    }\n    public set filters(_filters: Filter[])\n    {\n        console.warn('HTML Audio does not support filters');\n    }\n\n    /**\n     * HTML Audio does not support `audioContext`\n     * @readonly\n     * @type {AudioContext}\n     */\n    public get audioContext(): AudioContext\n    {\n        console.warn('HTML Audio does not support audioContext');\n\n        return null;\n    }\n\n    /**\n     * Toggles the muted state.\n     * @return The current muted state.\n     */\n    public toggleMute(): boolean\n    {\n        this.muted = !this.muted;\n        this.refresh();\n\n        return this.muted;\n    }\n\n    /**\n     * Toggles the paused state.\n     * @return The current paused state.\n     */\n    public togglePause(): boolean\n    {\n        this.paused = !this.paused;\n        this.refreshPaused();\n\n        return this.paused;\n    }\n\n    /** Destroy and don't use after this */\n    public destroy(): void\n    {\n        this.removeAllListeners();\n    }\n}\n\nexport { HTMLAudioContext };\n","import { EventEmitter, Ticker } from 'pixi.js';\nimport { Filter } from '../filters/Filter';\nimport { IMediaInstance } from '../interfaces/IMediaInstance';\nimport { PlayOptions } from '../Sound';\nimport { HTMLAudioMedia } from './HTMLAudioMedia';\n\nlet id = 0;\n\n/**\n * Instance which wraps the `<audio>` element playback.\n * @memberof htmlaudio\n * @extends PIXI.EventEmitter\n */\nclass HTMLAudioInstance extends EventEmitter implements IMediaInstance\n{\n    /** Extra padding, in seconds, to deal with low-latecy of HTMLAudio. */\n    public static readonly PADDING: number = 0.1;\n\n    /** The current unique ID for this instance. */\n    public readonly id: number;\n\n    /** The instance of the Audio element. */\n    private _source: HTMLAudioElement;\n\n    /** The instance of the Audio media element. */\n    private _media: HTMLAudioMedia;\n\n    /** Playback rate, where 1 is 100%. */\n    private _end: number;\n\n    /** Current instance paused state. */\n    private _paused: boolean;\n\n    /** Current instance muted state. */\n    private _muted: boolean;\n\n    /** Current actual paused state. */\n    private _pausedReal: boolean;\n\n    /** Total length of the audio. */\n    private _duration: number;\n\n    /** Playback rate, where 1 is 100%. */\n    private _start: number;\n\n    /** `true` if the audio is actually playing. */\n    private _playing: boolean;\n\n    /** Volume for the instance. */\n    private _volume: number;\n\n    /** Speed for the instance. */\n    private _speed: number;\n\n    /** `true` for looping the playback */\n    private _loop: boolean;\n\n    /** @param parent - Parent element */\n    constructor(parent: HTMLAudioMedia)\n    {\n        super();\n\n        this.id = id++;\n\n        this.init(parent);\n    }\n\n    /**\n     * Set a property by name, this makes it easy to chain values\n     * @param name - Name of the property to set\n     * @param value - Value to set property to\n     */\n    public set(name: 'speed' | 'volume' | 'muted' | 'loop' | 'paused', value: number | boolean): this\n    {\n        if (this[name] === undefined)\n        {\n            throw new Error(`Property with name ${name} does not exist.`);\n        }\n        else\n        {\n            switch (name)\n            {\n                case 'speed': this.speed = value as number; break;\n                case 'volume': this.volume = value as number; break;\n                case 'paused': this.paused = value as boolean; break;\n                case 'loop': this.loop = value as boolean; break;\n                case 'muted': this.muted = value as boolean; break;\n            }\n        }\n\n        return this;\n    }\n\n    /** The current playback progress from 0 to 1. */\n    public get progress(): number\n    {\n        const { currentTime } = this._source;\n\n        return currentTime / this._duration;\n    }\n\n    /** Pauses the sound. */\n    public get paused(): boolean\n    {\n        return this._paused;\n    }\n    public set paused(paused: boolean)\n    {\n        this._paused = paused;\n        this.refreshPaused();\n    }\n\n    /**\n     * Reference: http://stackoverflow.com/a/40370077\n     * @private\n     */\n    private _onPlay(): void\n    {\n        this._playing = true;\n    }\n\n    /**\n     * Reference: http://stackoverflow.com/a/40370077\n     * @private\n     */\n    private _onPause(): void\n    {\n        this._playing = false;\n    }\n\n    /**\n     * Initialize the instance.\n     * @param {htmlaudio.HTMLAudioMedia} media - Same as constructor\n     */\n    public init(media: HTMLAudioMedia): void\n    {\n        this._playing = false;\n        this._duration = media.source.duration;\n        const source = this._source = media.source.cloneNode(false) as HTMLAudioElement;\n\n        source.src = media.parent.url;\n        source.onplay = this._onPlay.bind(this);\n        source.onpause = this._onPause.bind(this);\n        media.context.on('refresh', this.refresh, this);\n        media.context.on('refreshPaused', this.refreshPaused, this);\n        this._media = media;\n    }\n\n    /**\n     * Stop the sound playing\n     * @private\n     */\n    private _internalStop(): void\n    {\n        if (this._source && this._playing)\n        {\n            this._source.onended = null;\n            this._source.pause();\n        }\n    }\n\n    /** Stop the sound playing */\n    public stop(): void\n    {\n        this._internalStop();\n\n        if (this._source)\n        {\n            this.emit('stop');\n        }\n    }\n\n    /** Set the instance speed from 0 to 1 */\n    public get speed(): number\n    {\n        return this._speed;\n    }\n    public set speed(speed: number)\n    {\n        this._speed = speed;\n        this.refresh();\n    }\n\n    /** Get the set the volume for this instance from 0 to 1 */\n    public get volume(): number\n    {\n        return this._volume;\n    }\n    public set volume(volume: number)\n    {\n        this._volume = volume;\n        this.refresh();\n    }\n\n    /** If the sound instance should loop playback */\n    public get loop(): boolean\n    {\n        return this._loop;\n    }\n    public set loop(loop: boolean)\n    {\n        this._loop = loop;\n        this.refresh();\n    }\n\n    /** `true` if the sound is muted */\n    public get muted(): boolean\n    {\n        return this._muted;\n    }\n    public set muted(muted: boolean)\n    {\n        this._muted = muted;\n        this.refresh();\n    }\n\n    /**\n     * HTML Audio does not support filters, this is non-functional API.\n     */\n    public get filters(): Filter[]\n    {\n        console.warn('HTML Audio does not support filters');\n\n        return null;\n    }\n    public set filters(_filters: Filter[])\n    {\n        console.warn('HTML Audio does not support filters');\n    }\n\n    /** Call whenever the loop, speed or volume changes */\n    public refresh(): void\n    {\n        const global = this._media.context;\n        const sound = this._media.parent;\n\n        // Update the looping\n        this._source.loop = this._loop || sound.loop;\n\n        // Update the volume\n        const globalVolume = global.volume * (global.muted ? 0 : 1);\n        const soundVolume = sound.volume * (sound.muted ? 0 : 1);\n        const instanceVolume = this._volume * (this._muted ? 0 : 1);\n\n        this._source.volume = instanceVolume * globalVolume * soundVolume;\n\n        // Update the speed\n        this._source.playbackRate = this._speed * global.speed * sound.speed;\n    }\n\n    /** Handle changes in paused state, either globally or sound or instance */\n    public refreshPaused(): void\n    {\n        const global = this._media.context;\n        const sound = this._media.parent;\n\n        // Handle the paused state\n        const pausedReal = this._paused || sound.paused || global.paused;\n\n        if (pausedReal !== this._pausedReal)\n        {\n            this._pausedReal = pausedReal;\n\n            if (pausedReal)\n            {\n                this._internalStop();\n\n                /**\n                 * The sound is paused.\n                 * @event paused\n                 */\n                this.emit('paused');\n            }\n            else\n            {\n                /**\n                 * The sound is unpaused.\n                 * @event resumed\n                 */\n                this.emit('resumed');\n\n                // resume the playing with offset\n                this.play({\n                    start: this._source.currentTime,\n                    end: this._end,\n                    volume: this._volume,\n                    speed: this._speed,\n                    loop: this._loop,\n                });\n            }\n\n            /**\n             * The sound is paused or unpaused.\n             * @event pause\n             * @property {boolean} paused - If the instance was paused or not.\n             */\n            this.emit('pause', pausedReal);\n        }\n    }\n\n    /** Start playing the sound/ */\n    public play(options: PlayOptions): void\n    {\n        const { start, end, speed, loop, volume, muted } = options;\n\n        if (end)\n        {\n            // eslint-disable-next-line no-console\n            console.assert(end > start, 'End time is before start time');\n        }\n\n        this._speed = speed;\n        this._volume = volume;\n        this._loop = !!loop;\n        this._muted = muted;\n        this.refresh();\n\n        // WebAudio doesn't support looping when a duration is set\n        // we'll set this just for the heck of it\n        if (this.loop && end !== null)\n        {\n            console.warn('Looping not support when specifying an \"end\" time');\n            this.loop = false;\n        }\n\n        this._start = start;\n        this._end = end || this._duration;\n\n        // Lets expand the start and end a little\n        // to deal with the low-latecy of playing audio this way\n        // this is a little fudge-factor\n        this._start = Math.max(0, this._start - HTMLAudioInstance.PADDING);\n        this._end = Math.min(this._end + HTMLAudioInstance.PADDING, this._duration);\n\n        this._source.onloadedmetadata = () =>\n        {\n            if (this._source)\n            {\n                this._source.currentTime = start;\n                this._source.onloadedmetadata = null;\n                this.emit('progress', start, this._duration);\n                Ticker.shared.add(this._onUpdate, this);\n            }\n        };\n        this._source.onended = this._onComplete.bind(this);\n        this._source.play();\n\n        /**\n         * The sound is started.\n         * @event start\n         */\n        this.emit('start');\n    }\n\n    /**\n     * Handle time update on sound.\n     * @private\n     */\n    private _onUpdate(): void\n    {\n        this.emit('progress', this.progress, this._duration);\n        if (this._source.currentTime >= this._end && !this._source.loop)\n        {\n            this._onComplete();\n        }\n    }\n\n    /**\n     * Callback when completed.\n     * @private\n     */\n    private _onComplete(): void\n    {\n        Ticker.shared.remove(this._onUpdate, this);\n        this._internalStop();\n        this.emit('progress', 1, this._duration);\n        /**\n         * The sound ends, don't use after this\n         * @event end\n         */\n        this.emit('end', this);\n    }\n\n    /** Don't use after this. */\n    public destroy(): void\n    {\n        Ticker.shared.remove(this._onUpdate, this);\n        this.removeAllListeners();\n\n        const source = this._source;\n\n        if (source)\n        {\n            // Remove the listeners\n            source.onended = null;\n            source.onplay = null;\n            source.onpause = null;\n\n            this._internalStop();\n        }\n\n        this._source = null;\n        this._speed = 1;\n        this._volume = 1;\n        this._loop = false;\n        this._end = null;\n        this._start = 0;\n        this._duration = 0;\n        this._playing = false;\n        this._pausedReal = false;\n        this._paused = false;\n        this._muted = false;\n\n        if (this._media)\n        {\n            this._media.context.off('refresh', this.refresh, this);\n            this._media.context.off('refreshPaused', this.refreshPaused, this);\n            this._media = null;\n        }\n    }\n\n    /**\n     * To string method for instance.\n     * @return The string representation of instance.\n     */\n    public toString(): string\n    {\n        return `[HTMLAudioInstance id=${this.id}]`;\n    }\n}\n\nexport { HTMLAudioInstance };\n","import { EventEmitter } from 'pixi.js';\nimport { Filter } from '../filters/Filter';\nimport { IMedia } from '../interfaces/IMedia';\nimport { LoadedCallback, Sound } from '../Sound';\nimport { HTMLAudioContext } from './HTMLAudioContext';\nimport { HTMLAudioInstance } from './HTMLAudioInstance';\n\n/**\n * The fallback version of Sound which uses `<audio>` instead of WebAudio API.\n * @memberof htmlaudio\n * @extends PIXI.EventEmitter\n */\nclass HTMLAudioMedia extends EventEmitter implements IMedia\n{\n    public parent: Sound;\n    private _source: HTMLAudioElement;\n\n    public init(parent: Sound): void\n    {\n        this.parent = parent;\n        this._source = parent.options.source as HTMLAudioElement || new Audio();\n        if (parent.url)\n        {\n            this._source.src = parent.url;\n        }\n    }\n\n    // Implement create\n    public create(): HTMLAudioInstance\n    {\n        return new HTMLAudioInstance(this);\n    }\n\n    /**\n     * If the audio media is playable (ready).\n     * @readonly\n     */\n    public get isPlayable(): boolean\n    {\n        return !!this._source && this._source.readyState === 4;\n    }\n\n    /**\n     * THe duration of the media in seconds.\n     * @readonly\n     */\n    public get duration(): number\n    {\n        return this._source.duration;\n    }\n\n    /**\n     * Reference to the context.\n     * @readonly\n     */\n    public get context(): HTMLAudioContext\n    {\n        return this.parent.context as HTMLAudioContext;\n    }\n\n    /** The collection of filters, does not apply to HTML Audio. */\n    public get filters(): Filter[]\n    {\n        return null;\n    }\n    public set filters(_filters: Filter[])\n    {\n        console.warn('HTML Audio does not support filters');\n    }\n\n    // Override the destroy\n    public destroy(): void\n    {\n        this.removeAllListeners();\n\n        this.parent = null;\n\n        if (this._source)\n        {\n            this._source.src = '';\n            this._source.load();\n            this._source = null;\n        }\n    }\n\n    /**\n     * Get the audio source element.\n     * @type {HTMLAudioElement}\n     * @readonly\n     */\n    public get source(): HTMLAudioElement\n    {\n        return this._source;\n    }\n\n    // Implement the method to being preloading\n    public load(callback?: LoadedCallback): void\n    {\n        const source = this._source;\n        const sound = this.parent;\n\n        // See if the source is already loaded\n        if (source.readyState === 4)\n        {\n            sound.isLoaded = true;\n            const instance = sound.autoPlayStart();\n\n            if (callback)\n            {\n                setTimeout(() =>\n                {\n                    callback(null, sound, instance);\n                }, 0);\n            }\n\n            return;\n        }\n\n        // If there's no source, we cannot load\n        if (!sound.url)\n        {\n            callback(new Error('sound.url or sound.source must be set'));\n\n            return;\n        }\n\n        // Set the source\n        source.src = sound.url;\n\n        const onLoad = () =>\n        {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            removeListeners();\n            sound.isLoaded = true;\n            const instance = sound.autoPlayStart();\n\n            if (callback)\n            {\n                callback(null, sound, instance);\n            }\n        };\n\n        const onAbort = () =>\n        {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            removeListeners();\n            if (callback)\n            {\n                callback(new Error('Sound loading has been aborted'));\n            }\n        };\n\n        const onError = () =>\n        {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            removeListeners();\n            const message = `Failed to load audio element (code: ${source.error.code})`;\n\n            if (callback)\n            {\n                callback(new Error(message));\n            }\n            else\n            {\n                console.error(message);\n            }\n        };\n\n        // Remove all event listeners\n        const removeListeners = () =>\n        {\n            // Listen for callback\n            source.removeEventListener('canplaythrough', onLoad);\n            source.removeEventListener('load', onLoad);\n            source.removeEventListener('abort', onAbort);\n            source.removeEventListener('error', onError);\n        };\n\n        // Listen for callback\n        source.addEventListener('canplaythrough', onLoad, false);\n        source.addEventListener('load', onLoad, false);\n        source.addEventListener('abort', onAbort, false);\n        source.addEventListener('error', onError, false);\n\n        // Begin the loading\n        source.load();\n    }\n}\n\nexport { HTMLAudioMedia };\n","import { IMediaInstance } from './interfaces';\nimport { CompleteCallback, Sound } from './Sound';\n\n/** Data for adding new sound sprites. */\ninterface SoundSpriteData\n{\n    /** The start time in seconds. */\n    start: number;\n    /** The end time in seconds. */\n    end: number;\n    /** The optional speed, if not speed, uses the default speed of the parent. */\n    speed?: number;\n}\n\n// Collection of sound sprites\ntype SoundSprites = Record<string, SoundSprite>;\n\n/**\n * Object that represents a single Sound's sprite. To add sound sprites\n * use the {@link Sound#addSprites} method.\n * @example\n * import { sound } from '@pixi/sound';\n * sound.add('alias', {\n *   url: 'path/to/file.ogg',\n *   sprites: {\n *     blast: { start: 0, end: 0.2 },\n *     boom: { start: 0.3, end: 0.5 },\n *   },\n *   loaded() {\n *     sound.play('alias', 'blast');\n *   }\n * );\n *\n */\nclass SoundSprite\n{\n    /**\n     * The reference sound\n     * @readonly\n     */\n    public parent: Sound;\n\n    /**\n     * The starting location in seconds.\n     * @readonly\n     */\n    public start: number;\n\n    /**\n     * The ending location in seconds\n     * @readonly\n     */\n    public end: number;\n\n    /**\n     * The speed override where 1 is 100% speed playback.\n     * @readonly\n     */\n    public speed: number;\n\n    /**\n     * The duration of the sound in seconds.\n     * @readonly\n     */\n    public duration: number;\n\n    /**\n     * Whether to loop the sound sprite.\n     * @readonly\n     */\n    public loop: boolean;\n\n    /**\n     * @param parent - The parent sound\n     * @param options - Data associated with object.\n     */\n    constructor(parent: Sound, options: SoundSpriteData)\n    {\n        this.parent = parent;\n        Object.assign(this, options);\n        this.duration = this.end - this.start;\n\n        // eslint-disable-next-line no-console\n        console.assert(this.duration > 0, 'End time must be after start time');\n    }\n\n    /**\n     * Play the sound sprite.\n     * @param {Function} [complete] - Function call when complete\n     * @return Sound instance being played.\n     */\n    public play(complete?: CompleteCallback): IMediaInstance | Promise<IMediaInstance>\n    {\n        return this.parent.play({\n            complete,\n            speed: this.speed || this.parent.speed,\n            end: this.end,\n            start: this.start,\n            loop: this.loop\n        });\n    }\n\n    /** Destroy and don't use after this */\n    public destroy(): void\n    {\n        this.parent = null;\n    }\n}\n\nexport type { SoundSpriteData, SoundSprites };\nexport { SoundSprite };\n","type ExtensionMap = Record<string, boolean>;\n\n/**\n * The list of extensions that can be played. This is the preferred order of playback.\n * If you want to priority the order of playback, you can use this array to do so.\n * @readonly\n * @memberof utils\n */\nconst extensions: string[] = [\n    'ogg',\n    'oga',\n    'opus',\n    'm4a',\n    'mp3',\n    'mpeg',\n    'wav',\n    'aiff',\n    'wma',\n    'mid',\n    'caf',\n];\n\nconst mimes: string[] = [\n    'audio/mpeg',\n    'audio/ogg',\n];\n\n/**\n * The list of browser supported audio formats.\n * @readonly\n * @memberof utils\n * @property {boolean} mp3 - `true` if file-type is supported\n * @property {boolean} ogg - `true` if file-type is supported\n * @property {boolean} oga - `true` if file-type is supported\n * @property {boolean} opus - `true` if file-type is supported\n * @property {boolean} mpeg - `true` if file-type is supported\n * @property {boolean} wav - `true` if file-type is supported\n * @property {boolean} aiff - `true` if file-type is supported\n * @property {boolean} wma - `true` if file-type is supported\n * @property {boolean} mid - `true` if file-type is supported\n * @property {boolean} caf - `true` if file-type is supported. Note that for this we check if the\n *                             'opus' codec is supported inside the caf container.\n */\nconst supported: ExtensionMap = {};\n\n/**\n * Function to validate file type formats. This is called when the library initializes, but can\n * be called again if you need to recognize a format not listed in `utils.extensions` at\n * initialization.\n * @memberof utils\n * @param typeOverrides - - Dictionary of type overrides (inputs for\n *                                 AudioElement.canPlayType()), keyed by extension from the\n *                                 utils.extensions array.\n */\nfunction validateFormats(typeOverrides?: Record<string, string>): void\n{\n    const overrides: Record<string, string> = {\n        m4a: 'audio/mp4',\n        oga: 'audio/ogg',\n        opus: 'audio/ogg; codecs=\"opus\"',\n        caf: 'audio/x-caf; codecs=\"opus\"', ...(typeOverrides || {})\n    };\n    const audio = document.createElement('audio');\n    const formats: ExtensionMap = {};\n    const no = /^no$/;\n\n    extensions.forEach((ext) =>\n    {\n        const canByExt = audio.canPlayType(`audio/${ext}`).replace(no, '');\n        const canByType = overrides[ext] ? audio.canPlayType(overrides[ext]).replace(no, '') : '';\n\n        formats[ext] = !!canByExt || !!canByType;\n    });\n    Object.assign(supported, formats);\n}\n\n// initialize supported\nvalidateFormats();\n\nexport {\n    extensions,\n    mimes,\n    supported,\n    validateFormats,\n};\n","import { EventEmitter, Ticker } from 'pixi.js';\nimport { Filter } from '../filters/Filter';\nimport { IMediaInstance } from '../interfaces';\nimport { PlayOptions } from '../Sound';\nimport { WebAudioMedia } from './WebAudioMedia';\nimport { WebAudioUtils } from './WebAudioUtils';\n\nlet id = 0;\n\n/**\n * A single play instance that handles the AudioBufferSourceNode.\n * @memberof webaudio\n * @extends PIXI.EventEmitter\n */\nclass WebAudioInstance extends EventEmitter implements IMediaInstance\n{\n    /**\n     * The current unique ID for this instance.\n     * @readonly\n     */\n    public readonly id: number;\n\n    /** The source Sound. */\n    private _media: WebAudioMedia;\n\n    /** true if paused. */\n    private _paused: boolean;\n\n    /** true if muted. */\n    private _muted: boolean;\n\n    /** true if paused. */\n    private _pausedReal: boolean;\n\n    /** The instance volume */\n    private _volume: number;\n\n    /** Last update frame number. */\n    private _lastUpdate: number;\n\n    /** The total number of seconds elapsed in playback. */\n    private _elapsed: number;\n\n    /** Playback rate, where 1 is 100%. */\n    private _speed: number;\n\n    /** Playback rate, where 1 is 100%. */\n    private _end: number;\n\n    /** `true` if should be looping. */\n    private _loop: boolean;\n\n    /** Gain node for controlling volume of instance */\n    private _gain: GainNode;\n\n    /** Length of the sound in seconds. */\n    private _duration: number;\n\n    /** The progress of the sound from 0 to 1. */\n    private _progress: number;\n\n    /** Audio buffer source clone from Sound object. */\n    private _source: AudioBufferSourceNode;\n\n    /** The filters */\n    private _filters: Filter[];\n\n    constructor(media: WebAudioMedia)\n    {\n        super();\n\n        this.id = id++;\n        this._media = null;\n        this._paused = false;\n        this._muted = false;\n        this._elapsed = 0;\n\n        // Initialize\n        this.init(media);\n    }\n\n    /**\n     * Set a property by name, this makes it easy to chain values\n     * @param name - Name of the property to set.\n     * @param value - Value to set property to.\n     */\n    public set(name: 'speed' | 'volume' | 'muted' | 'loop' | 'paused', value: number | boolean): this\n    {\n        if (this[name] === undefined)\n        {\n            throw new Error(`Property with name ${name} does not exist.`);\n        }\n        else\n        {\n            switch (name)\n            {\n                case 'speed': this.speed = value as number; break;\n                case 'volume': this.volume = value as number; break;\n                case 'muted': this.muted = value as boolean; break;\n                case 'loop': this.loop = value as boolean; break;\n                case 'paused': this.paused = value as boolean; break;\n            }\n        }\n\n        return this;\n    }\n\n    /** Stops the instance, don't use after this. */\n    public stop(): void\n    {\n        if (this._source)\n        {\n            this._internalStop();\n            this.emit('stop');\n        }\n    }\n\n    /** Set the instance speed from 0 to 1 */\n    public get speed(): number\n    {\n        return this._speed;\n    }\n    public set speed(speed: number)\n    {\n        this._speed = speed;\n        this.refresh();\n        this._update(true); // update progress\n    }\n\n    /** Get the set the volume for this instance from 0 to 1 */\n    public get volume(): number\n    {\n        return this._volume;\n    }\n    public set volume(volume: number)\n    {\n        this._volume = volume;\n        this.refresh();\n    }\n\n    /** `true` if the sound is muted */\n    public get muted(): boolean\n    {\n        return this._muted;\n    }\n    public set muted(muted: boolean)\n    {\n        this._muted = muted;\n        this.refresh();\n    }\n\n    /** If the sound instance should loop playback */\n    public get loop(): boolean\n    {\n        return this._loop;\n    }\n    public set loop(loop: boolean)\n    {\n        this._loop = loop;\n        this.refresh();\n    }\n\n    /** The collection of filters. */\n    public get filters(): Filter[]\n    {\n        return this._filters;\n    }\n    public set filters(filters: Filter[])\n    {\n        if (this._filters)\n        {\n            this._filters?.filter((filter) => filter).forEach((filter) => filter.disconnect());\n            this._filters = null;\n            // Reconnect direct path\n            this._source.connect(this._gain);\n        }\n        this._filters = filters?.length ? filters.slice(0) : null;\n        this.refresh();\n    }\n\n    /** Refresh loop, volume and speed based on changes to parent */\n    public refresh(): void\n    {\n        // Sound could be paused\n        if (!this._source)\n        {\n            return;\n        }\n        const global = this._media.context;\n        const sound = this._media.parent;\n\n        // Updating looping\n        this._source.loop = this._loop || sound.loop;\n\n        // Update the volume\n        const globalVolume = global.volume * (global.muted ? 0 : 1);\n        const soundVolume = sound.volume * (sound.muted ? 0 : 1);\n        const instanceVolume = this._volume * (this._muted ? 0 : 1);\n\n        WebAudioUtils.setParamValue(this._gain.gain, instanceVolume * soundVolume * globalVolume);\n\n        // Update the speed\n        WebAudioUtils.setParamValue(this._source.playbackRate, this._speed * sound.speed * global.speed);\n\n        this.applyFilters();\n    }\n\n    /** Connect filters nodes to audio context */\n    private applyFilters(): void\n    {\n        if (this._filters?.length)\n        {\n            // Disconnect direct path before inserting filters\n            this._source.disconnect();\n\n            // Connect each filter\n            let source: { connect: (node: AudioNode) => void } = this._source;\n\n            this._filters.forEach((filter: Filter) =>\n            {\n                source.connect(filter.destination);\n                source = filter;\n            });\n            source.connect(this._gain);\n        }\n    }\n\n    /** Handle changes in paused state, either globally or sound or instance */\n    public refreshPaused(): void\n    {\n        const global = this._media.context;\n        const sound = this._media.parent;\n\n        // Consider global and sound paused\n        const pausedReal = this._paused || sound.paused || global.paused;\n\n        if (pausedReal !== this._pausedReal)\n        {\n            this._pausedReal = pausedReal;\n\n            if (pausedReal)\n            {\n                // pause the sounds\n                this._internalStop();\n\n                /**\n                 * The sound is paused.\n                 * @event paused\n                 */\n                this.emit('paused');\n            }\n            else\n            {\n                /**\n                 * The sound is unpaused.\n                 * @event resumed\n                 */\n                this.emit('resumed');\n\n                // resume the playing with offset\n                this.play({\n                    start: this._elapsed % this._duration,\n                    end: this._end,\n                    speed: this._speed,\n                    loop: this._loop,\n                    volume: this._volume,\n                });\n            }\n\n            /**\n             * The sound is paused or unpaused.\n             * @event pause\n             * @property {boolean} paused - If the instance was paused or not.\n             */\n            this.emit('pause', pausedReal);\n        }\n    }\n\n    /**\n     * Plays the sound.\n     * @param options - Play options.\n     */\n    public play(options: PlayOptions): void\n    {\n        const { start, end, speed, loop, volume, muted, filters } = options;\n\n        if (end)\n        {\n            // eslint-disable-next-line no-console\n            console.assert(end > start, 'End time is before start time');\n        }\n        this._paused = false;\n        const { source, gain } = this._media.nodes.cloneBufferSource();\n\n        this._source = source;\n        this._gain = gain;\n        this._speed = speed;\n        this._volume = volume;\n        this._loop = !!loop;\n        this._muted = muted;\n        this._filters = filters;\n        this.refresh();\n\n        const duration: number = this._source.buffer.duration;\n\n        this._duration = duration;\n        this._end = end;\n        this._lastUpdate = this._now();\n        this._elapsed = start;\n        this._source.onended = this._onComplete.bind(this);\n\n        if (this._loop)\n        {\n            this._source.loopEnd = end;\n            this._source.loopStart = start;\n            this._source.start(0, start);\n        }\n        else if (end)\n        {\n            this._source.start(0, start, end - start);\n        }\n        else\n        {\n            this._source.start(0, start);\n        }\n\n        /**\n         * The sound is started.\n         * @event start\n         */\n        this.emit('start');\n\n        // Do an update for the initial progress\n        this._update(true);\n\n        // Start handling internal ticks\n        this.enableTicker(true);\n    }\n\n    /** Start the update progress. */\n    private enableTicker(enabled: boolean): void\n    {\n        Ticker.shared.remove(this._updateListener, this);\n        if (enabled)\n        {\n            Ticker.shared.add(this._updateListener, this);\n        }\n    }\n\n    /** The current playback progress from 0 to 1. */\n    public get progress(): number\n    {\n        return this._progress;\n    }\n\n    /** Pauses the sound. */\n    public get paused(): boolean\n    {\n        return this._paused;\n    }\n\n    public set paused(paused: boolean)\n    {\n        this._paused = paused;\n        this.refreshPaused();\n    }\n\n    /** Don't use after this. */\n    public destroy(): void\n    {\n        this.removeAllListeners();\n        this._internalStop();\n        if (this._gain)\n        {\n            this._gain.disconnect();\n            this._gain = null;\n        }\n        if (this._media)\n        {\n            this._media.context.events.off('refresh', this.refresh, this);\n            this._media.context.events.off('refreshPaused', this.refreshPaused, this);\n            this._media = null;\n        }\n        this._filters?.forEach((filter) => filter.disconnect());\n        this._filters = null;\n        this._end = null;\n        this._speed = 1;\n        this._volume = 1;\n        this._loop = false;\n        this._elapsed = 0;\n        this._duration = 0;\n        this._paused = false;\n        this._muted = false;\n        this._pausedReal = false;\n    }\n\n    /**\n     * To string method for instance.\n     * @return The string representation of instance.\n     */\n    public toString(): string\n    {\n        return `[WebAudioInstance id=${this.id}]`;\n    }\n\n    /**\n     * Get the current time in seconds.\n     * @return Seconds since start of context\n     */\n    private _now(): number\n    {\n        return this._media.context.audioContext.currentTime;\n    }\n\n    /** Callback for update listener */\n    private _updateListener()\n    {\n        this._update();\n    }\n\n    /** Internal update the progress. */\n    private _update(force = false): void\n    {\n        if (this._source)\n        {\n            const now: number = this._now();\n            const delta: number = now - this._lastUpdate;\n\n            if (delta > 0 || force)\n            {\n                const speed: number = this._source.playbackRate.value;\n\n                this._elapsed += delta * speed;\n                this._lastUpdate = now;\n                const duration: number = this._duration;\n                let progress: number;\n\n                if (this._source.loopStart)\n                {\n                    const soundLength = this._source.loopEnd - this._source.loopStart;\n\n                    progress = (this._source.loopStart + (this._elapsed % soundLength)) / duration;\n                }\n                else\n                {\n                    progress = (this._elapsed % duration) / duration;\n                }\n\n                // Update the progress\n                this._progress = progress;\n\n                /**\n                 * The sound progress is updated.\n                 * @event progress\n                 * @property {number} progress - Amount progressed from 0 to 1\n                 * @property {number} duration - The total playback in seconds\n                 */\n                this.emit('progress', this._progress, duration);\n            }\n        }\n    }\n\n    /** Initializes the instance. */\n    public init(media: WebAudioMedia): void\n    {\n        this._media = media;\n        media.context.events.on('refresh', this.refresh, this);\n        media.context.events.on('refreshPaused', this.refreshPaused, this);\n    }\n\n    /** Stops the instance. */\n    private _internalStop(): void\n    {\n        if (this._source)\n        {\n            this.enableTicker(false);\n            this._source.onended = null;\n            this._source.stop(0); // param needed for iOS 8 bug\n            this._source.disconnect();\n            try\n            {\n                this._source.buffer = null;\n            }\n            catch (err)\n            {\n                // try/catch workaround for bug in older Chrome versions\n                console.warn('Failed to set AudioBufferSourceNode.buffer to null:', err);\n            }\n            this._source = null;\n        }\n    }\n\n    /** Callback when completed. */\n    private _onComplete(): void\n    {\n        if (this._source)\n        {\n            this.enableTicker(false);\n            this._source.onended = null;\n            this._source.disconnect();\n            try\n            {\n                this._source.buffer = null;\n            }\n            catch (err)\n            {\n                // try/catch workaround for bug in older Chrome versions\n                console.warn('Failed to set AudioBufferSourceNode.buffer to null:', err);\n            }\n        }\n        this._source = null;\n        this._progress = 1;\n        this.emit('progress', 1, this._duration);\n        /**\n         * The sound ends, don't use after this\n         * @event end\n         */\n        this.emit('end', this);\n    }\n}\n\nexport { WebAudioInstance };\n","import { Filter } from './filters/Filter';\n\n/**\n * Abstract class which SoundNodes and SoundContext\n * both extend. This provides the functionality for adding\n * dynamic filters.\n */\nclass Filterable\n{\n    /** Get the gain node */\n    private _input: AudioNode;\n\n    /** The destination output audio node */\n    private _output: AudioNode;\n\n    /** Collection of filters. */\n    private _filters: Filter[];\n\n    /**\n     * @param input - The source audio node\n     * @param output - The output audio node\n     */\n    constructor(input: AudioNode, output: AudioNode)\n    {\n        this._output = output;\n        this._input = input;\n    }\n\n    /** The destination output audio node */\n    get destination(): AudioNode\n    {\n        return this._input;\n    }\n\n    /** The collection of filters. */\n    get filters(): Filter[]\n    {\n        return this._filters;\n    }\n    set filters(filters: Filter[])\n    {\n        if (this._filters)\n        {\n            this._filters.forEach((filter: Filter) =>\n            {\n                if (filter)\n                {\n                    filter.disconnect();\n                }\n            });\n            this._filters = null;\n            // Reconnect direct path\n            this._input.connect(this._output);\n        }\n\n        if (filters && filters.length)\n        {\n            this._filters = filters.slice(0);\n\n            // Disconnect direct path before inserting filters\n            this._input.disconnect();\n\n            // Connect each filter\n            let prevFilter: Filter = null;\n\n            filters.forEach((filter: Filter) =>\n            {\n                if (prevFilter === null)\n                {\n                    // first filter is the destination\n                    // for the analyser\n                    this._input.connect(filter.destination);\n                }\n                else\n                {\n                    prevFilter.connect(filter.destination);\n                }\n                prevFilter = filter;\n            });\n            prevFilter.connect(this._output);\n        }\n    }\n\n    /** Cleans up. */\n    public destroy(): void\n    {\n        this.filters = null;\n        this._input = null;\n        this._output = null;\n    }\n}\n\nexport { Filterable };\n","import { Filterable } from '../Filterable';\nimport { WebAudioContext } from './WebAudioContext';\nimport { WebAudioUtils } from './WebAudioUtils';\n\n/** Output for cloning source node. */\ninterface SourceClone\n{\n    /** Cloned audio buffer source */\n    source: AudioBufferSourceNode;\n    /** Independent volume control */\n    gain: GainNode;\n}\n\n/**\n * @memberof webaudio\n */\nclass WebAudioNodes extends Filterable\n{\n    /**\n     * The buffer size for script processor, default is `0` which auto-detects. If you plan to use\n     * script node on iOS, you'll need to provide a non-zero amount.\n     * @default 0\n     */\n    public static BUFFER_SIZE = 0;\n\n    /**\n     * Get the buffer source node\n     * @readonly\n     */\n    public bufferSource: AudioBufferSourceNode;\n\n    /**\n     * Get the gain node\n     * @readonly\n     */\n    public gain: GainNode;\n\n    /**\n     * Get the analyser node\n     * @readonly\n     */\n    public analyser: AnalyserNode;\n\n    /**\n     * Reference to the SoundContext\n     * @readonly\n     */\n    public context: WebAudioContext;\n\n    /** Private reference to the script processor node. */\n    private _script: ScriptProcessorNode;\n\n    /**\n     * @param context - The audio context.\n     */\n    constructor(context: WebAudioContext)\n    {\n        const audioContext: AudioContext = context.audioContext;\n\n        const bufferSource: AudioBufferSourceNode = audioContext.createBufferSource();\n        const gain: GainNode = audioContext.createGain();\n        const analyser: AnalyserNode = audioContext.createAnalyser();\n\n        bufferSource.connect(analyser);\n        analyser.connect(gain);\n        gain.connect(context.destination);\n\n        super(analyser, gain);\n\n        this.context = context;\n        this.bufferSource = bufferSource;\n        this.gain = gain;\n        this.analyser = analyser;\n    }\n\n    /**\n     * Get the script processor node.\n     * @readonly\n     */\n    public get script(): ScriptProcessorNode\n    {\n        if (!this._script)\n        {\n            this._script = this.context.audioContext.createScriptProcessor(WebAudioNodes.BUFFER_SIZE);\n            this._script.connect(this.context.destination);\n        }\n\n        return this._script;\n    }\n\n    /** Cleans up. */\n    public destroy(): void\n    {\n        super.destroy();\n\n        this.bufferSource.disconnect();\n        if (this._script)\n        {\n            this._script.disconnect();\n        }\n        this.gain.disconnect();\n        this.analyser.disconnect();\n\n        this.bufferSource = null;\n        this._script = null;\n        this.gain = null;\n        this.analyser = null;\n\n        this.context = null;\n    }\n\n    /**\n     * Clones the bufferSource. Used just before playing a sound.\n     * @returns {SourceClone} The clone AudioBufferSourceNode.\n     */\n    public cloneBufferSource(): SourceClone\n    {\n        const orig: AudioBufferSourceNode = this.bufferSource;\n        const source: AudioBufferSourceNode = this.context.audioContext.createBufferSource();\n\n        source.buffer = orig.buffer;\n        WebAudioUtils.setParamValue(source.playbackRate, orig.playbackRate.value);\n        source.loop = orig.loop;\n\n        const gain: GainNode = this.context.audioContext.createGain();\n\n        source.connect(gain);\n        gain.connect(this.destination);\n\n        return { source, gain };\n    }\n\n    /**\n     * Get buffer size of `ScriptProcessorNode`.\n     * @readonly\n     */\n    get bufferSize(): number\n    {\n        return this.script.bufferSize;\n    }\n}\n\nexport type { SourceClone };\nexport { WebAudioNodes };\n","import { DOMAdapter } from 'pixi.js';\nimport { Filter } from '../filters/Filter';\nimport { IMedia } from '../interfaces/IMedia';\nimport { LoadedCallback, Sound } from '../Sound';\nimport { WebAudioContext } from './WebAudioContext';\nimport { WebAudioInstance } from './WebAudioInstance';\nimport { WebAudioNodes } from './WebAudioNodes';\n\n/**\n * Represents a single sound element. Can be used to play, pause, etc. sound instances.\n * @memberof webaudio\n */\nclass WebAudioMedia implements IMedia\n{\n    /**\n     * Reference to the parent Sound container.\n     * @readonly\n     */\n    public parent: Sound;\n\n    /**\n     * The file buffer to load.\n     * @readonly\n     */\n    public source: ArrayBuffer | AudioBuffer;\n\n    /** Instance of the chain builder. */\n    private _nodes: WebAudioNodes;\n\n    /** Instance of the source node. */\n    private _source: AudioBufferSourceNode;\n\n    /**\n     * Re-initialize without constructing.\n     * @param parent - - Instance of parent Sound container\n     */\n    public init(parent: Sound): void\n    {\n        this.parent = parent;\n        this._nodes = new WebAudioNodes(this.context);\n        this._source = this._nodes.bufferSource;\n        this.source = parent.options.source as ArrayBuffer | AudioBuffer;\n    }\n\n    /** Destructor, safer to use `SoundLibrary.remove(alias)` to remove this sound. */\n    public destroy(): void\n    {\n        this.parent = null;\n        this._nodes.destroy();\n        this._nodes = null;\n        try\n        {\n            this._source.buffer = null;\n        }\n        catch (err)\n        {\n            // try/catch workaround for bug in older Chrome versions\n            console.warn('Failed to set AudioBufferSourceNode.buffer to null:', err);\n        }\n        this._source = null;\n        this.source = null;\n    }\n\n    // Implement create\n    public create(): WebAudioInstance\n    {\n        return new WebAudioInstance(this);\n    }\n\n    // Implement context\n    public get context(): WebAudioContext\n    {\n        return this.parent.context as WebAudioContext;\n    }\n\n    // Implement isPlayable\n    public get isPlayable(): boolean\n    {\n        return !!this._source && !!this._source.buffer;\n    }\n\n    // Implement filters\n    public get filters(): Filter[]\n    {\n        return this._nodes.filters;\n    }\n    public set filters(filters: Filter[])\n    {\n        this._nodes.filters = filters;\n    }\n\n    // Implements duration\n    public get duration(): number\n    {\n        // eslint-disable-next-line no-console\n        console.assert(this.isPlayable, 'Sound not yet playable, no duration');\n\n        return this._source.buffer.duration;\n    }\n\n    /** Gets and sets the buffer. */\n    public get buffer(): AudioBuffer\n    {\n        return this._source.buffer;\n    }\n    public set buffer(buffer: AudioBuffer)\n    {\n        this._source.buffer = buffer;\n    }\n\n    /** Get the current chained nodes object */\n    public get nodes(): WebAudioNodes\n    {\n        return this._nodes;\n    }\n\n    // Implements load\n    public load(callback?: LoadedCallback): void\n    {\n        // Load from the arraybuffer, incase it was loaded outside\n        if (this.source)\n        {\n            this._decode(this.source, callback);\n        }\n        // Load from the file path\n        else if (this.parent.url)\n        {\n            this._loadUrl(callback);\n        }\n        else if (callback)\n        {\n            callback(new Error('sound.url or sound.source must be set'));\n        }\n        else\n        {\n            console.error('sound.url or sound.source must be set');\n        }\n    }\n\n    /** Loads a sound using XHMLHttpRequest object. */\n    private async _loadUrl(callback?: LoadedCallback): Promise<void>\n    {\n        const url: string = this.parent.url;\n        const response = await DOMAdapter.get().fetch(url);\n\n        this._decode(await response.arrayBuffer(), callback);\n    }\n\n    /**\n     * Decodes the array buffer.\n     * @param arrayBuffer - From load.\n     * @param {Function} callback - Callback optional\n     */\n    private _decode(arrayBuffer: ArrayBuffer | AudioBuffer, callback?: LoadedCallback): void\n    {\n        const audioBufferReadyFn = (err: Error, buffer: AudioBuffer) =>\n        {\n            if (err)\n            {\n                if (callback)\n                {\n                    callback(err);\n                }\n            }\n            else\n            {\n                this.parent.isLoaded = true;\n                this.buffer = buffer;\n                const instance = this.parent.autoPlayStart();\n\n                if (callback)\n                {\n                    callback(null, this.parent, instance);\n                }\n            }\n        };\n\n        if (arrayBuffer instanceof AudioBuffer)\n        {\n            audioBufferReadyFn(null, arrayBuffer);\n        }\n        else\n        {\n            const context = this.parent.context as WebAudioContext;\n\n            context.decode(arrayBuffer, audioBufferReadyFn);\n        }\n    }\n}\n\nexport { WebAudioMedia };\n","import { path } from 'pixi.js';\nimport { Filter } from './filters/Filter';\nimport { HTMLAudioMedia } from './htmlaudio/HTMLAudioMedia';\nimport { getInstance } from './instance';\nimport { IMedia, IMediaContext, IMediaInstance } from './interfaces';\nimport { SoundSprite, SoundSpriteData, SoundSprites } from './SoundSprite';\nimport { extensions, supported } from './utils/supported';\nimport { WebAudioMedia } from './webaudio/WebAudioMedia';\n\n/**\n * Options to use for creating sounds.\n */\ninterface Options\n{\n    /**\n     * `true` to immediately start preloading.\n     * @default false\n     */\n    autoPlay?: boolean;\n    /**\n     * `true` to disallow playing multiple layered instances at once.\n     * @default false\n     */\n    singleInstance?: boolean;\n    /**\n     * The amount of volume 1 = 100%.\n     * @default 1\n     */\n    volume?: number;\n    /**\n     * The playback rate where 1 is 100% speed.\n     * @default 1\n     */\n    speed?: number;\n    /**\n     * Global complete callback when play is finished.\n     * @type {Function}\n     */\n    complete?: CompleteCallback;\n    /**\n     * Call when finished loading.\n     * @type {Function}\n     */\n    loaded?: LoadedCallback;\n    /**\n     * `true` to immediately start preloading if loading from `url`.\n     */\n    preload?: boolean;\n    /**\n     * Initial loop value, `true` is loop infinitely\n     * @default false\n     */\n    loop?: boolean;\n    /**\n     * The source of the file being loaded\n     */\n    url?: string | string[];\n    /**\n     * If sound is already preloaded, available.\n     */\n    source?: ArrayBuffer | AudioBuffer | HTMLAudioElement;\n    /**\n     * The map of sprite data. Where a sprite is an object\n     * with a `start` and `end`, which are the times in seconds. Optionally, can include\n     * a `speed` amount where 1 is 100% speed.\n     */\n    sprites?: Record<string, SoundSpriteData>;\n}\n\n/**\n * Options used for sound playback.\n */\ninterface PlayOptions\n{\n    /**\n     * Start time offset in seconds.\n     * @default 0\n     */\n    start?: number;\n    /**\n     * End time in seconds.\n     */\n    end?: number;\n    /**\n     * Override default speed, default to the Sound's speed setting.\n     */\n    speed?: number;\n    /**\n    * Override default loop, default to the Sound's loop setting.\n    */\n    loop?: boolean;\n    /**\n     * Override default volume, default to the Sound's volume setting.\n     */\n    volume?: number;\n    /**\n     * The sprite to play.\n     */\n    sprite?: string;\n    /**\n     * If sound instance is muted by default.\n     * @default false\n     */\n    muted?: boolean;\n    /**\n     * Filters that apply to play.\n     * Only supported with WebAudio.\n     */\n    filters?: Filter[];\n    /**\n     * When completed.\n     * @type {Function}\n     */\n    complete?: CompleteCallback;\n    /**\n     * If not already preloaded, callback when finishes load.\n     * @type {Function}\n     */\n    loaded?: LoadedCallback;\n    /**\n     * Setting `true` will stop any playing instances. This is the same as\n     * the singleInstance property on Sound, but is play-specific.\n     */\n    singleInstance?: boolean;\n}\n\n/**\n * Callback when sound is loaded.\n * @ignore\n * @param {Error} err - The callback error.\n * @param {Sound} sound - The instance of new sound.\n * @param {IMediaInstance} instance - The instance of auto-played sound.\n */\ntype LoadedCallback = (err: Error, sound?: Sound, instance?: IMediaInstance) => void;\n\n/**\n * Callback when sound is completed.\n * @ignore\n * @param {Sound} sound - The instance of sound.\n */\ntype CompleteCallback = (sound: Sound) => void;\n\ntype SoundSpriteDataMap = Record<string, SoundSpriteData>;\n\n/**\n * Sound represents a single piece of loaded media. When playing a sound {@link IMediaInstance} objects\n * are created. Properties such a `volume`, `pause`, `mute`, `speed`, etc will have an effect on all instances.\n */\nclass Sound\n{\n    /** Pool of instances */\n    private static _pool: IMediaInstance[] = [];\n\n    /**\n     * `true` if the buffer is loaded.\n     * @default false\n     */\n    public isLoaded: boolean;\n\n    /**\n     * `true` if the sound is currently being played.\n     * @default false\n     * @readonly\n     */\n    public isPlaying: boolean;\n\n    /**\n     * true to start playing immediate after load.\n     * @default false\n     * @readonly\n     */\n    public autoPlay: boolean;\n\n    /**\n     * `true` to disallow playing multiple layered instances at once.\n     * @default false\n     */\n    public singleInstance: boolean;\n\n    /**\n     * `true` to immediately start preloading.\n     * @default false\n     * @readonly\n     */\n    public preload: boolean;\n\n    /**\n     * The file source to load.\n     * @readonly\n     */\n    public url: string;\n\n    /**\n     * The constructor options.\n     * @readonly\n     */\n    public options: Options;\n\n    /** The audio source */\n    public media: IMedia;\n\n    /** The list of play calls while waiting to preload the sound. */\n    private _preloadQueue: (() => void)[] | null;\n\n    /** The collection of instances being played. */\n    private _instances: IMediaInstance[];\n\n    /** The user defined sound sprites. */\n    private _sprites: SoundSprites;\n\n    /** The options when auto-playing. */\n    private _autoPlayOptions: PlayOptions;\n\n    /** The internal volume. */\n    private _volume: number;\n\n    /** The internal paused state. */\n    private _paused: boolean;\n\n    /** The internal muted state. */\n    private _muted: boolean;\n\n    /** The internal volume. */\n    private _loop: boolean;\n\n    /** The internal playbackRate */\n    private _speed: number;\n\n    /**\n     * Create a new sound instance from source.\n     * @param source - Either the path or url to the source file.\n     *        or the object of options to use.\n     * @return Created sound instance.\n     */\n    public static from(source: string | string[] | Options | ArrayBuffer | HTMLAudioElement | AudioBuffer): Sound\n    {\n        let options: Options = {};\n\n        if (typeof source === 'string')\n        {\n            options.url = source as string;\n        }\n        else if (source instanceof ArrayBuffer || source instanceof AudioBuffer || source instanceof HTMLAudioElement)\n        {\n            options.source = source;\n        }\n        else if (Array.isArray(source))\n        {\n            options.url = source;\n        }\n        else\n        {\n            options = source;\n        }\n\n        // Default settings\n        options = {\n            autoPlay: false,\n            singleInstance: false,\n            url: null,\n            source: null,\n            preload: false,\n            volume: 1,\n            speed: 1,\n            complete: null,\n            loaded: null,\n            loop: false, ...options\n        };\n\n        Object.freeze(options);\n\n        const media: IMedia = getInstance().useLegacy\n            ? new HTMLAudioMedia()\n            : new WebAudioMedia();\n\n        return new Sound(media, options);\n    }\n\n    /**\n     * Use `Sound.from`\n     * @ignore\n     */\n    constructor(media: IMedia, options: Options)\n    {\n        this.media = media;\n        this.options = options;\n        this._instances = [];\n        this._sprites = {};\n\n        this.media.init(this);\n\n        const complete = options.complete;\n\n        this._autoPlayOptions = complete ? { complete } : null;\n        this.isLoaded = false;\n        this._preloadQueue = null;\n        this.isPlaying = false;\n        this.autoPlay = options.autoPlay;\n        this.singleInstance = options.singleInstance;\n        this.preload = options.preload || this.autoPlay;\n\n        this.url = Array.isArray(options.url)\n            ? this.preferUrl(options.url)\n            : options.url;\n        this.speed = options.speed;\n        this.volume = options.volume;\n        this.loop = options.loop;\n\n        if (options.sprites)\n        {\n            this.addSprites(options.sprites);\n        }\n\n        if (this.preload)\n        {\n            this._preload(options.loaded);\n        }\n    }\n\n    /**\n     * Internal help for resolving which file to use if there are multiple provide\n     * this is especially helpful for working with bundlers (non Assets loading).\n     */\n    private preferUrl(urls: string[]): string\n    {\n        const [file] = urls\n            .map((url) => ({ url, ext: path.extname(url).slice(1) }))\n            .filter(({ ext }) => supported[ext])\n            .sort((a, b) => extensions.indexOf(a.ext) - extensions.indexOf(b.ext));\n\n        if (!file)\n        {\n            throw new Error('No supported file type found');\n        }\n\n        return file.url;\n    }\n\n    /** Instance of the media context. */\n    public get context(): IMediaContext\n    {\n        return getInstance().context;\n    }\n\n    /** Stops all the instances of this sound from playing. */\n    public pause(): this\n    {\n        this.isPlaying = false;\n        this.paused = true;\n\n        return this;\n    }\n\n    /** Resuming all the instances of this sound from playing */\n    public resume(): this\n    {\n        this.isPlaying = this._instances.length > 0;\n        this.paused = false;\n\n        return this;\n    }\n\n    /** Stops all the instances of this sound from playing. */\n    public get paused(): boolean\n    {\n        return this._paused;\n    }\n    public set paused(paused: boolean)\n    {\n        this._paused = paused;\n        this.refreshPaused();\n    }\n\n    /** The playback rate. */\n    public get speed(): number\n    {\n        return this._speed;\n    }\n    public set speed(speed: number)\n    {\n        this._speed = speed;\n        this.refresh();\n    }\n\n    /** Set the filters. Only supported with WebAudio. */\n    public get filters(): Filter[]\n    {\n        return this.media.filters;\n    }\n    public set filters(filters: Filter[])\n    {\n        this.media.filters = filters;\n    }\n\n    /**\n     * Add a sound sprite, which is a saved instance of a longer sound.\n     * Similar to an image spritesheet.\n     * @param alias - The unique name of the sound sprite.\n     * @param data - Either completed function or play options.\n     */\n    public addSprites(alias: string, data: SoundSpriteData): SoundSprite;\n\n    /**\n     * Convenience method to add more than one sprite add a time.\n     * @param data - Map of sounds to add where the key is the alias,\n     *        and the data are configuration options.\n     * @return The map of sound sprites added.\n     */\n    public addSprites(data: SoundSpriteDataMap): SoundSprites;\n\n    /**\n     * @ignore\n     */\n    public addSprites(source: string | SoundSpriteDataMap, data?: SoundSpriteData): any\n    {\n        if (typeof source === 'object')\n        {\n            const results: SoundSprites = {};\n\n            for (const alias in source)\n            {\n                results[alias] = this.addSprites(alias, source[alias]);\n            }\n\n            return results;\n        }\n\n        // eslint-disable-next-line no-console\n        console.assert(!this._sprites[source], `Alias ${source} is already taken`);\n        const sprite = new SoundSprite(this, data);\n\n        this._sprites[source] = sprite;\n\n        return sprite;\n    }\n\n    /** Destructor, safer to use `SoundLibrary.remove(alias)` to remove this sound. */\n    public destroy(): void\n    {\n        this._removeInstances();\n        this.removeSprites();\n        this.media.destroy();\n        this.media = null;\n        this._sprites = null;\n        this._instances = null;\n    }\n\n    /**\n     * Remove a sound sprite.\n     * @param alias - The unique name of the sound sprite, if alias is omitted, removes all sprites.\n     */\n    public removeSprites(alias?: string): Sound\n    {\n        if (!alias)\n        {\n            for (const name in this._sprites)\n            {\n                this.removeSprites(name);\n            }\n        }\n        else\n        {\n            const sprite: SoundSprite = this._sprites[alias];\n\n            if (sprite !== undefined)\n            {\n                sprite.destroy();\n                delete this._sprites[alias];\n            }\n        }\n\n        return this;\n    }\n\n    /** If the current sound is playable (loaded). */\n    public get isPlayable(): boolean\n    {\n        return this.isLoaded && this.media && this.media.isPlayable;\n    }\n\n    /** Stops all the instances of this sound from playing. */\n    public stop(): this\n    {\n        if (!this.isPlayable)\n        {\n            this.autoPlay = false;\n            this._autoPlayOptions = null;\n\n            return this;\n        }\n        this.isPlaying = false;\n\n        // Go in reverse order so we don't skip items\n        for (let i = this._instances.length - 1; i >= 0; i--)\n        {\n            this._instances[i].stop();\n        }\n\n        return this;\n    }\n\n    /**\n     * Play a sound sprite, which is a saved instance of a longer sound.\n     * Similar to an image spritesheet.\n     * @method play\n     * @instance\n     * @param alias - The unique name of the sound sprite.\n     * @param {Function} callback - Callback when completed.\n     * @return The sound instance,\n     *        this cannot be reused after it is done playing. Returns a Promise if the sound\n     *        has not yet loaded.\n     */\n    public play(alias: string, callback?: CompleteCallback): IMediaInstance | Promise<IMediaInstance>;\n\n    /**\n     * Plays the sound.\n     * @method play\n     * @instance\n     * @param {Function|PlayOptions} source - Either completed function or play options.\n     * @param {Function} callback - Callback when completed.\n     * @return The sound instance,\n     *        this cannot be reused after it is done playing. Returns a Promise if the sound\n     *        has not yet loaded.\n     */\n    public play(source?: string | PlayOptions | CompleteCallback,\n        callback?: CompleteCallback): IMediaInstance | Promise<IMediaInstance>;\n\n    // Overloaded function\n    public play(source?: string | PlayOptions | CompleteCallback,\n        complete?: CompleteCallback): IMediaInstance | Promise<IMediaInstance>\n    {\n        let options: PlayOptions;\n\n        if (typeof source === 'string')\n        {\n            const sprite: string = source as string;\n\n            options = { sprite, loop: this.loop, complete };\n        }\n        else if (typeof source === 'function')\n        {\n            options = {};\n            options.complete = source as CompleteCallback;\n        }\n        else\n        {\n            options = source as PlayOptions;\n        }\n\n        options = {\n            complete: null,\n            loaded: null,\n            sprite: null,\n            end: null,\n            start: 0,\n            volume: 1,\n            speed: 1,\n            muted: false,\n            loop: false, ...(options || {})\n        };\n\n        // A sprite is specified, add the options\n        if (options.sprite)\n        {\n            const alias: string = options.sprite;\n\n            // eslint-disable-next-line no-console\n            console.assert(!!this._sprites[alias], `Alias ${alias} is not available`);\n            const sprite: SoundSprite = this._sprites[alias];\n\n            options.start = sprite.start + (options.start || 0);\n            options.end = sprite.end;\n            options.speed = sprite.speed || 1;\n            options.loop = sprite.loop || options.loop;\n            delete options.sprite;\n        }\n\n        // @deprecated offset option\n        if ((options as any).offset)\n        {\n            options.start = (options as any).offset as number;\n        }\n\n        // if not yet playable, ignore\n        // - usefull when the sound download isnt yet completed\n        if (!this.isLoaded)\n        {\n            // Handle the case when trying to play a sound that is not yet loaded\n            // We'll add it to a queue to play after initial load finishes\n            if (this._preloadQueue)\n            {\n                return new Promise<IMediaInstance>((resolve) =>\n                {\n                    this._preloadQueue.push(() =>\n                    {\n                        resolve(this.play(options));\n                    });\n                });\n            }\n\n            this._preloadQueue = [];\n            this.autoPlay = true;\n            this._autoPlayOptions = options;\n\n            return new Promise<IMediaInstance>((resolve, reject) =>\n            {\n                this._preload((err: Error, sound: Sound, media: IMediaInstance) =>\n                {\n                    this._preloadQueue.forEach((resolve) => resolve());\n                    this._preloadQueue = null;\n\n                    if (err)\n                    {\n                        reject(err);\n                    }\n                    else\n                    {\n                        if (options.loaded)\n                        {\n                            options.loaded(err, sound, media);\n                        }\n                        resolve(media);\n                    }\n                });\n            });\n        }\n\n        // Stop all sounds\n        if (this.singleInstance || options.singleInstance)\n        {\n            this._removeInstances();\n        }\n\n        // clone the bufferSource\n        const instance = this._createInstance();\n\n        this._instances.push(instance);\n        this.isPlaying = true;\n        instance.once('end', () =>\n        {\n            if (options.complete)\n            {\n                options.complete(this);\n            }\n            this._onComplete(instance);\n        });\n        instance.once('stop', () =>\n        {\n            this._onComplete(instance);\n        });\n\n        instance.play(options);\n\n        return instance;\n    }\n\n    /** Internal only, speed, loop, volume change occured. */\n    public refresh(): void\n    {\n        const len = this._instances.length;\n\n        for (let i = 0; i < len; i++)\n        {\n            this._instances[i].refresh();\n        }\n    }\n\n    /** Handle changes in paused state. Internal only. */\n    public refreshPaused(): void\n    {\n        const len = this._instances.length;\n\n        for (let i = 0; i < len; i++)\n        {\n            this._instances[i].refreshPaused();\n        }\n    }\n\n    /** Gets and sets the volume. */\n    public get volume(): number\n    {\n        return this._volume;\n    }\n    public set volume(volume: number)\n    {\n        this._volume = volume;\n        this.refresh();\n    }\n\n    /** Gets and sets the muted flag. */\n    public get muted(): boolean\n    {\n        return this._muted;\n    }\n    public set muted(muted: boolean)\n    {\n        this._muted = muted;\n        this.refresh();\n    }\n\n    /** Gets and sets the looping. */\n    public get loop(): boolean\n    {\n        return this._loop;\n    }\n    public set loop(loop: boolean)\n    {\n        this._loop = loop;\n        this.refresh();\n    }\n\n    /** Starts the preloading of sound. */\n    private _preload(callback?: LoadedCallback): void\n    {\n        this.media.load(callback);\n    }\n\n    /** Gets the list of instances that are currently being played of this sound. */\n    public get instances(): IMediaInstance[]\n    {\n        return this._instances;\n    }\n\n    /** Get the map of sprites. */\n    public get sprites(): SoundSprites\n    {\n        return this._sprites;\n    }\n\n    /** Get the duration of the audio in seconds. */\n    public get duration(): number\n    {\n        return this.media.duration;\n    }\n\n    /** Auto play the first instance. */\n    public autoPlayStart(): IMediaInstance\n    {\n        let instance: IMediaInstance;\n\n        if (this.autoPlay)\n        {\n            instance = this.play(this._autoPlayOptions) as IMediaInstance;\n        }\n\n        return instance;\n    }\n\n    /** Removes all instances. */\n    private _removeInstances(): void\n    {\n        // destroying also stops\n        for (let i = this._instances.length - 1; i >= 0; i--)\n        {\n            this._poolInstance(this._instances[i]);\n        }\n        this._instances.length = 0;\n    }\n\n    /**\n     * Sound instance completed.\n     * @param instance\n     */\n    private _onComplete(instance: IMediaInstance): void\n    {\n        if (this._instances)\n        {\n            const index = this._instances.indexOf(instance);\n\n            if (index > -1)\n            {\n                this._instances.splice(index, 1);\n            }\n            this.isPlaying = this._instances.length > 0;\n        }\n        this._poolInstance(instance);\n    }\n\n    /** Create a new instance. */\n    private _createInstance(): IMediaInstance\n    {\n        if (Sound._pool.length > 0)\n        {\n            const instance: IMediaInstance = Sound._pool.pop();\n\n            instance.init(this.media);\n\n            return instance;\n        }\n\n        return this.media.create();\n    }\n\n    /**\n     * Destroy/recycling the instance object.\n     * @param instance - Instance to recycle\n     */\n    private _poolInstance(instance: IMediaInstance): void\n    {\n        instance.destroy();\n        // Add it if it isn't already added\n        if (Sound._pool.indexOf(instance) < 0)\n        {\n            Sound._pool.push(instance);\n        }\n    }\n}\n\nexport { Sound };\nexport type {\n    CompleteCallback,\n    LoadedCallback,\n    Options,\n    PlayOptions,\n    SoundSpriteDataMap\n};\n","import { EventEmitter } from 'pixi.js';\nimport { Filterable } from '../Filterable';\nimport { IMediaContext } from '../interfaces';\n\n/**\n * Main class to handle WebAudio API. There's a simple chain\n * of AudioNode elements: analyser > compressor > context.destination.\n * any filters that are added are inserted between the analyser and compressor nodes\n * @memberof webaudio\n */\nclass WebAudioContext extends Filterable implements IMediaContext\n{\n    /**\n     * Context Compressor node\n     * @readonly\n     */\n    public compressor: DynamicsCompressorNode;\n\n    /**\n     * Context Analyser node\n     * @readonly\n     */\n    public analyser: AnalyserNode;\n\n    /**\n     * Global speed of all sounds\n     * @readonly\n     */\n    public speed: number;\n\n    /**\n     * Sets the muted state.\n     * @default false\n     */\n    public muted: boolean;\n\n    /**\n     * Sets the volume from 0 to 1.\n     * @default 1\n     */\n    public volume: number;\n\n    /**\n     * Handle global events\n     * @type {PIXI.EventEmitter}\n     */\n    public events: EventEmitter;\n\n    /** The instance of the AudioContext for WebAudio API. */\n    private _ctx: AudioContext;\n\n    /** The instance of the OfflineAudioContext for fast decoding audio. */\n    private _offlineCtx: OfflineAudioContext;\n\n    /** Current paused status */\n    private _paused: boolean;\n\n    /**\n     * Indicated whether audio on iOS has been unlocked, which requires a touchend/mousedown event that plays an\n     * empty sound.\n     */\n    private _locked: boolean;\n\n    /** The paused state when blurring the current window */\n    private _pausedOnBlur: boolean;\n\n    /** Set to false ignore suspending when window is blurred */\n    public autoPause = true;\n\n    constructor()\n    {\n        const win: any = window as any;\n        const ctx = new WebAudioContext.AudioContext();\n        const compressor: DynamicsCompressorNode = ctx.createDynamicsCompressor();\n        const analyser: AnalyserNode = ctx.createAnalyser();\n\n        // setup the end of the node chain\n        analyser.connect(compressor);\n        compressor.connect(ctx.destination);\n\n        super(analyser, compressor);\n\n        this._ctx = ctx;\n        // ios11 safari's webkitOfflineAudioContext allows only 44100 Hz sample rate\n        //\n        // For the sample rate value passed to OfflineAudioContext constructor,\n        // all browsers are required to support a range of 8000 to 96000.\n        // Reference:\n        // https://www.w3.org/TR/webaudio/#dom-offlineaudiocontext-offlineaudiocontext-numberofchannels-length-samplerate\n        this._offlineCtx = new WebAudioContext.OfflineAudioContext(1, 2,\n            (win.OfflineAudioContext) ? Math.max(8000, Math.min(96000, ctx.sampleRate)) : 44100);\n\n        this.compressor = compressor;\n        this.analyser = analyser;\n        this.events = new EventEmitter();\n\n        // Set the defaults\n        this.volume = 1;\n        this.speed = 1;\n        this.muted = false;\n        this.paused = false;\n\n        this._locked = ctx.state === 'suspended' && ('ontouchstart' in globalThis || 'onclick' in globalThis);\n\n        // Listen for document level clicks to unlock WebAudio. See the _unlock method.\n        if (this._locked)\n        {\n            this._unlock(); // When played inside of a touch event, this will enable audio on iOS immediately.\n            this._unlock = this._unlock.bind(this);\n            document.addEventListener('mousedown', this._unlock, true);\n            document.addEventListener('touchstart', this._unlock, true);\n            document.addEventListener('touchend', this._unlock, true);\n        }\n\n        this.onFocus = this.onFocus.bind(this);\n        this.onBlur = this.onBlur.bind(this);\n        globalThis.addEventListener('focus', this.onFocus);\n        globalThis.addEventListener('blur', this.onBlur);\n    }\n\n    /** Handle mobile WebAudio context resume */\n    private onFocus(): void\n    {\n        if (!this.autoPause)\n        {\n            return;\n        }\n        // Safari uses the non-standard \"interrupted\" state in some cases\n        // such as when the app loses focus because the screen is locked\n        // or when the user switches to another app.\n        const state = this._ctx.state as 'suspended' | 'interrupted';\n\n        if (state === 'suspended' || state === 'interrupted' || !this._locked)\n        {\n            this.paused = this._pausedOnBlur;\n            this.refreshPaused();\n        }\n    }\n\n    /** Handle mobile WebAudio context suspend */\n    private onBlur(): void\n    {\n        if (!this.autoPause)\n        {\n            return;\n        }\n        if (!this._locked)\n        {\n            this._pausedOnBlur = this._paused;\n            this.paused = true;\n            this.refreshPaused();\n        }\n    }\n\n    /**\n     * Try to unlock audio on iOS. This is triggered from either WebAudio plugin setup (which will work if inside of\n     * a `mousedown` or `touchend` event stack), or the first document touchend/mousedown event. If it fails (touchend\n     * will fail if the user presses for too long, indicating a scroll event instead of a click event.\n     *\n     * Note that earlier versions of iOS supported `touchstart` for this, but iOS9 removed this functionality. Adding\n     * a `touchstart` event to support older platforms may preclude a `mousedown` even from getting fired on iOS9, so we\n     * stick with `mousedown` and `touchend`.\n     */\n    private _unlock(): void\n    {\n        if (!this._locked)\n        {\n            return;\n        }\n        this.playEmptySound();\n        if (this._ctx.state === 'running')\n        {\n            document.removeEventListener('mousedown', this._unlock, true);\n            document.removeEventListener('touchend', this._unlock, true);\n            document.removeEventListener('touchstart', this._unlock, true);\n            this._locked = false;\n        }\n    }\n\n    /**\n     * Plays an empty sound in the web audio context.  This is used to enable web audio on iOS devices, as they\n     * require the first sound to be played inside of a user initiated event (touch/click).\n     */\n    public playEmptySound(): void\n    {\n        const source = this._ctx.createBufferSource();\n\n        source.buffer = this._ctx.createBuffer(1, 1, 22050);\n        source.connect(this._ctx.destination);\n        source.start(0, 0, 0);\n        if (source.context.state === 'suspended')\n        {\n            (source.context as AudioContext).resume();\n        }\n    }\n\n    /**\n     * Get AudioContext class, if not supported returns `null`\n     * @type {AudioContext}\n     * @readonly\n     */\n    public static get AudioContext(): typeof AudioContext\n    {\n        const win: any = window as any;\n\n        return (\n            win.AudioContext\n            || win.webkitAudioContext\n            || null\n        );\n    }\n\n    /**\n     * Get OfflineAudioContext class, if not supported returns `null`\n     * @type {OfflineAudioContext}\n     * @readonly\n     */\n    public static get OfflineAudioContext(): typeof OfflineAudioContext\n    {\n        const win: any = window as any;\n\n        return (\n            win.OfflineAudioContext\n            || win.webkitOfflineAudioContext\n            || null\n        );\n    }\n\n    /** Destroy this context. */\n    public destroy(): void\n    {\n        super.destroy();\n\n        const ctx: any = this._ctx as any;\n        // check if browser supports AudioContext.close()\n\n        if (typeof ctx.close !== 'undefined')\n        {\n            ctx.close();\n        }\n        globalThis.removeEventListener('focus', this.onFocus);\n        globalThis.removeEventListener('blur', this.onBlur);\n        this.events.removeAllListeners();\n        this.analyser.disconnect();\n        this.compressor.disconnect();\n        this.analyser = null;\n        this.compressor = null;\n        this.events = null;\n        this._offlineCtx = null;\n        this._ctx = null;\n    }\n\n    /**\n     * The WebAudio API AudioContext object.\n     * @readonly\n     * @type {AudioContext}\n     */\n    public get audioContext(): AudioContext\n    {\n        return this._ctx;\n    }\n\n    /**\n     * The WebAudio API OfflineAudioContext object.\n     * @readonly\n     * @type {OfflineAudioContext}\n     */\n    public get offlineContext(): OfflineAudioContext\n    {\n        return this._offlineCtx;\n    }\n\n    /**\n     * Pauses all sounds, even though we handle this at the instance\n     * level, we'll also pause the audioContext so that the\n     * time used to compute progress isn't messed up.\n     * @default false\n     */\n    public set paused(paused: boolean)\n    {\n        if (paused && this._ctx.state === 'running')\n        {\n            this._ctx.suspend();\n        }\n        else if (!paused && this._ctx.state === 'suspended')\n        {\n            this._ctx.resume();\n        }\n        this._paused = paused;\n    }\n    public get paused(): boolean\n    {\n        return this._paused;\n    }\n\n    /** Emit event when muted, volume or speed changes */\n    public refresh(): void\n    {\n        this.events.emit('refresh');\n    }\n\n    /** Emit event when muted, volume or speed changes */\n    public refreshPaused(): void\n    {\n        this.events.emit('refreshPaused');\n    }\n\n    /**\n     * Toggles the muted state.\n     * @return The current muted state.\n     */\n    public toggleMute(): boolean\n    {\n        this.muted = !this.muted;\n        this.refresh();\n\n        return this.muted;\n    }\n\n    /**\n     * Toggles the paused state.\n     * @return The current muted state.\n     */\n    public togglePause(): boolean\n    {\n        this.paused = !this.paused;\n        this.refreshPaused();\n\n        return this._paused;\n    }\n\n    /**\n     * Decode the audio data\n     * @param arrayBuffer - Buffer from loader\n     * @param callback - When completed, error and audioBuffer are parameters.\n     */\n    public decode(arrayBuffer: ArrayBuffer, callback: (err?: Error, buffer?: AudioBuffer) => void): void\n    {\n        const handleError = (err: Error) =>\n        {\n            callback(new Error(err?.message || 'Unable to decode file'));\n        };\n        const result = this._offlineCtx.decodeAudioData(\n            arrayBuffer, (buffer: AudioBuffer) =>\n            {\n                callback(null, buffer);\n            },\n            handleError,\n        );\n        // Reference: https://developer.mozilla.org/en-US/docs/Web/API/BaseAudioContext/decodeAudioData\n        // decodeAudioData return value: Void, or a Promise object that fulfills with the decodedData.\n\n        if (result)\n        {\n            result.catch(handleError);\n        }\n    }\n}\n\nexport { WebAudioContext };\n","import { AssetExtension, extensions, ExtensionType, LoaderParser, LoaderParserPriority, path, ResolvedAsset } from 'pixi.js';\nimport { getInstance } from './instance';\nimport { Options, Sound } from './Sound';\nimport { extensions as exts, mimes, supported } from './utils/supported';\n\n/** Get the alias for the sound */\nconst getAlias = (asset: ResolvedAsset) =>\n{\n    const src = asset.src;\n    let alias = asset?.alias?.[0];\n\n    if (!alias || asset.src === alias)\n    {\n        alias = path.basename(src, path.extname(src));\n    }\n\n    return alias;\n};\n\n/**\n * Simple loader plugin for loading text data.\n */\nconst soundAsset = {\n    extension: ExtensionType.Asset,\n    detection: {\n        test: async () => true,\n        add: async (formats) => [...formats, ...exts.filter((ext) => supported[ext])],\n        remove: async (formats) => formats.filter((ext) => formats.includes(ext)),\n    },\n    loader: {\n        name: 'sound',\n        extension: {\n            type: [ExtensionType.LoadParser],\n            priority: LoaderParserPriority.High,\n        },\n\n        /** Should we attempt to load this file? */\n        test(url: string): boolean\n        {\n            const ext = path.extname(url).slice(1);\n\n            return !!supported[ext] || mimes.some((mime) => url.startsWith(`data:${mime}`));\n        },\n\n        /** Load the sound file, this is mostly handled by Sound.from() */\n        async load(url: string, asset: ResolvedAsset<Omit<Options, 'url' | 'preload'>>): Promise<Sound>\n        {\n            // We'll use the internal Sound.from to load the asset\n            const sound = await new Promise<Sound>((resolve, reject) => Sound.from({\n                ...asset.data,\n                url,\n                preload: true,\n                loaded(err, sound)\n                {\n                    if (err)\n                    {\n                        reject(err);\n                    }\n                    else\n                    {\n                        resolve(sound);\n                    }\n                    asset.data?.loaded?.(err, sound);\n                },\n            }));\n\n            getInstance().add(getAlias(asset), sound);\n\n            return sound;\n        },\n\n        /** Remove the sound from the library */\n        async unload(_sound: Sound, asset: ResolvedAsset): Promise<void>\n        {\n            getInstance().remove(getAlias(asset));\n        },\n    } as LoaderParser<Sound>,\n} as AssetExtension;\n\nextensions.add(soundAsset);\n\nexport { soundAsset };\n","import * as filters from './filters';\nimport * as htmlaudio from './htmlaudio';\nimport { setInstance } from './instance';\nimport { SoundLibrary } from './SoundLibrary';\nimport * as utils from './utils';\nimport * as webaudio from './webaudio';\n\nconst sound = setInstance(new SoundLibrary());\n\nexport * from './Filterable';\nexport * from './filters/Filter';\nexport * from './interfaces';\nexport * from './Sound';\nexport * from './soundAsset';\nexport * from './SoundLibrary';\nexport * from './SoundSprite';\nexport {\n    filters,\n    htmlaudio,\n    sound,\n    utils,\n    webaudio,\n};\n","import { Filter } from './filters/Filter';\nimport { HTMLAudioContext } from './htmlaudio/HTMLAudioContext';\nimport { IMediaContext } from './interfaces/IMediaContext';\nimport { IMediaInstance } from './interfaces/IMediaInstance';\nimport { CompleteCallback, Options, PlayOptions, Sound } from './Sound';\nimport { WebAudioContext } from './webaudio/WebAudioContext';\n\ntype SoundSourceMap = Record<string, Options | string | ArrayBuffer | AudioBuffer | HTMLAudioElement>;\ntype SoundMap = Record<string, Sound>;\n\n/**\n * Manages the playback of sounds. This is the main class for PixiJS Sound. If you're\n * using the browser-based bundled this is `PIXI.sound`. Otherwise, you can do this:\n * @example\n * import { sound } from '@pixi/sound';\n *\n * // sound is an instance of SoundLibrary\n * sound.add('my-sound', 'path/to/file.mp3');\n * sound.play('my-sound');\n */\nclass SoundLibrary\n{\n    /**\n     * For legacy approach for Audio. Instead of using WebAudio API\n     * for playback of sounds, it will use HTML5 `<audio>` element.\n     */\n    private _useLegacy: boolean;\n\n    /** The global context to use. */\n    private _context: IMediaContext;\n\n    /** The WebAudio specific context */\n    private _webAudioContext: WebAudioContext;\n\n    /** The HTML Audio (legacy) context. */\n    private _htmlAudioContext: HTMLAudioContext;\n\n    /** The map of all sounds by alias. */\n    private _sounds: SoundMap;\n\n    constructor()\n    {\n        this.init();\n    }\n\n    /**\n     * Re-initialize the sound library, this will\n     * recreate the AudioContext. If there's a hardware-failure\n     * call `close` and then `init`.\n     * @return Sound instance\n     */\n    public init(): this\n    {\n        if (this.supported)\n        {\n            this._webAudioContext = new WebAudioContext();\n        }\n        this._htmlAudioContext = new HTMLAudioContext();\n        this._sounds = {};\n        this.useLegacy = !this.supported;\n\n        return this;\n    }\n\n    /**\n     * The global context to use.\n     * @readonly\n     */\n    public get context(): IMediaContext\n    {\n        return this._context;\n    }\n\n    /**\n     * Apply filters to all sounds. Can be useful\n     * for setting global planning or global effects.\n     * **Only supported with WebAudio.**\n     * @example\n     * import { sound, filters } from '@pixi/sound';\n     * // Adds a filter to pan all output left\n     * sound.filtersAll = [\n     *     new filters.StereoFilter(-1)\n     * ];\n     */\n    public get filtersAll(): Filter[]\n    {\n        if (!this.useLegacy)\n        {\n            return this._context.filters;\n        }\n\n        return [];\n    }\n    public set filtersAll(filtersAll: Filter[])\n    {\n        if (!this.useLegacy)\n        {\n            this._context.filters = filtersAll;\n        }\n    }\n\n    /**\n     * `true` if WebAudio is supported on the current browser.\n     */\n    public get supported(): boolean\n    {\n        return WebAudioContext.AudioContext !== null;\n    }\n\n    /**\n     * Register an existing sound with the library cache.\n     * @method add\n     * @instance\n     * @param {string} alias - The sound alias reference.\n     * @param {Sound} sound - Sound reference to use.\n     * @return {Sound} Instance of the Sound object.\n     */\n\n    /**\n     * Adds a new sound by alias.\n     * @param alias - The sound alias reference.\n     * @param {ArrayBuffer|AudioBuffer|String|Options|HTMLAudioElement} options - Either the path or url to the source file.\n     *        or the object of options to use.\n     * @return Instance of the Sound object.\n     */\n    public add(alias: string, options: Options | string | ArrayBuffer | AudioBuffer | HTMLAudioElement | Sound): Sound;\n\n    /**\n     * Adds multiple sounds at once.\n     * @param map - Map of sounds to add, the key is the alias, the value is the\n     *        `string`, `ArrayBuffer`, `AudioBuffer`, `HTMLAudioElement` or the list of options\n     *        (see {@link Options} for full options).\n     * @param globalOptions - The default options for all sounds.\n     *        if a property is defined, it will use the local property instead.\n     * @return Instance to the Sound object.\n     */\n    public add(map: SoundSourceMap, globalOptions?: Options): SoundMap;\n\n    /**\n     * @ignore\n     */\n    public add(source: string | SoundSourceMap,\n        sourceOptions?: Options | string | ArrayBuffer | AudioBuffer | HTMLAudioElement | Sound): any\n    {\n        if (typeof source === 'object')\n        {\n            const results: SoundMap = {};\n\n            for (const alias in source)\n            {\n                const options: Options = this._getOptions(\n                    source[alias],\n                    sourceOptions as Options,\n                );\n\n                results[alias] = this.add(alias, options);\n            }\n\n            return results;\n        }\n\n        // eslint-disable-next-line no-console\n        console.assert(!this._sounds[source], `Sound with alias ${source} already exists.`);\n\n        if (sourceOptions instanceof Sound)\n        {\n            this._sounds[source] = sourceOptions;\n\n            return sourceOptions;\n        }\n\n        const options: Options = this._getOptions(sourceOptions);\n        const sound: Sound = Sound.from(options);\n\n        this._sounds[source] = sound;\n\n        return sound;\n    }\n\n    /**\n     * Internal methods for getting the options object\n     * @private\n     * @param source - The source options\n     * @param overrides - Override default options\n     * @return The construction options\n     */\n    private _getOptions(source: string | ArrayBuffer | AudioBuffer | HTMLAudioElement | Options,\n        overrides?: Options): Options\n    {\n        let options: Options;\n\n        if (typeof source === 'string')\n        {\n            options = { url: source };\n        }\n        else if (Array.isArray(source))\n        {\n            options = { url: source };\n        }\n        else if (source instanceof ArrayBuffer || source instanceof AudioBuffer || source instanceof HTMLAudioElement)\n        {\n            options = { source };\n        }\n        else\n        {\n            options = source as Options;\n        }\n        options = { ...options, ...(overrides || {}) };\n\n        return options;\n    }\n\n    /**\n     * Do not use WebAudio, force the use of legacy. This **must** be called before loading any files.\n     */\n    public get useLegacy(): boolean\n    {\n        return this._useLegacy;\n    }\n    public set useLegacy(legacy: boolean)\n    {\n        this._useLegacy = legacy;\n\n        // Set the context to use\n        this._context = (!legacy && this.supported)\n            ? this._webAudioContext\n            : this._htmlAudioContext;\n    }\n\n    /**\n     * This disables auto-pause all playback when the window blurs (WebAudio only).\n     * This is helpful to keep from playing sounds when the user switches tabs.\n     * However, if you're running content within an iframe, this may be undesirable\n     * and you should disable (set to `true`) this behavior.\n     * @default false\n     */\n    public get disableAutoPause(): boolean\n    {\n        return !this._webAudioContext.autoPause;\n    }\n    public set disableAutoPause(autoPause: boolean)\n    {\n        this._webAudioContext.autoPause = !autoPause;\n    }\n\n    /**\n     * Removes a sound by alias.\n     * @param alias - The sound alias reference.\n     * @return Instance for chaining.\n     */\n    public remove(alias: string): this\n    {\n        this.exists(alias, true);\n        this._sounds[alias].destroy();\n        delete this._sounds[alias];\n\n        return this;\n    }\n\n    /**\n     * Set the global volume for all sounds. To set per-sound volume see {@link SoundLibrary#volume}.\n     */\n    public get volumeAll(): number\n    {\n        return this._context.volume;\n    }\n    public set volumeAll(volume: number)\n    {\n        this._context.volume = volume;\n        this._context.refresh();\n    }\n\n    /**\n     * Set the global speed for all sounds. To set per-sound speed see {@link SoundLibrary#speed}.\n     */\n    public get speedAll(): number\n    {\n        return this._context.speed;\n    }\n    public set speedAll(speed: number)\n    {\n        this._context.speed = speed;\n        this._context.refresh();\n    }\n\n    /**\n     * Toggle paused property for all sounds.\n     * @return `true` if all sounds are paused.\n     */\n    public togglePauseAll(): boolean\n    {\n        return this._context.togglePause();\n    }\n\n    /**\n     * Pauses any playing sounds.\n     * @return Instance for chaining.\n     */\n    public pauseAll(): this\n    {\n        this._context.paused = true;\n        this._context.refreshPaused();\n\n        return this;\n    }\n\n    /**\n     * Resumes any sounds.\n     * @return Instance for chaining.\n     */\n    public resumeAll(): this\n    {\n        this._context.paused = false;\n        this._context.refreshPaused();\n\n        return this;\n    }\n\n    /**\n     * Toggle muted property for all sounds.\n     * @return `true` if all sounds are muted.\n     */\n    public toggleMuteAll(): boolean\n    {\n        return this._context.toggleMute();\n    }\n\n    /**\n     * Mutes all playing sounds.\n     * @return Instance for chaining.\n     */\n    public muteAll(): this\n    {\n        this._context.muted = true;\n        this._context.refresh();\n\n        return this;\n    }\n\n    /**\n     * Unmutes all playing sounds.\n     * @return Instance for chaining.\n     */\n    public unmuteAll(): this\n    {\n        this._context.muted = false;\n        this._context.refresh();\n\n        return this;\n    }\n\n    /**\n     * Stops and removes all sounds. They cannot be used after this.\n     * @return Instance for chaining.\n     */\n    public removeAll(): this\n    {\n        for (const alias in this._sounds)\n        {\n            this._sounds[alias].destroy();\n            delete this._sounds[alias];\n        }\n\n        return this;\n    }\n\n    /**\n     * Stops all sounds.\n     * @return Instance for chaining.\n     */\n    public stopAll(): this\n    {\n        for (const alias in this._sounds)\n        {\n            this._sounds[alias].stop();\n        }\n\n        return this;\n    }\n\n    /**\n     * Checks if a sound by alias exists.\n     * @param alias - Check for alias.\n     * @param assert - Whether enable console.assert.\n     * @return true if the sound exists.\n     */\n    public exists(alias: string, assert = false): boolean\n    {\n        const exists = !!this._sounds[alias];\n\n        if (assert)\n        {\n            // eslint-disable-next-line no-console\n            console.assert(exists, `No sound matching alias '${alias}'.`);\n        }\n\n        return exists;\n    }\n\n    /**\n     * Convenience function to check to see if any sound is playing.\n     * @returns `true` if any sound is currently playing.\n     */\n    public isPlaying(): boolean\n    {\n        for (const alias in this._sounds)\n        {\n            if (this._sounds[alias].isPlaying)\n            {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Find a sound by alias.\n     * @param alias - The sound alias reference.\n     * @return Sound object.\n     */\n    public find(alias: string): Sound\n    {\n        this.exists(alias, true);\n\n        return this._sounds[alias];\n    }\n\n    /**\n     * Plays a sound.\n     * @method play\n     * @instance\n     * @param {string} alias - The sound alias reference.\n     * @param {string} sprite - The alias of the sprite to play.\n     * @return {IMediaInstance|null} The sound instance, this cannot be reused\n     *         after it is done playing. Returns `null` if the sound has not yet loaded.\n     */\n\n    /**\n     * Plays a sound.\n     * @param alias - The sound alias reference.\n     * @param {PlayOptions|Function} options - The options or callback when done.\n     * @return The sound instance,\n     *        this cannot be reused after it is done playing. Returns a Promise if the sound\n     *        has not yet loaded.\n     */\n    public play(\n        alias: string,\n        options?: PlayOptions | CompleteCallback | string): IMediaInstance | Promise<IMediaInstance>\n    {\n        return this.find(alias).play(options);\n    }\n\n    /**\n     * Stops a sound.\n     * @param alias - The sound alias reference.\n     * @return Sound object.\n     */\n    public stop(alias: string): Sound\n    {\n        return this.find(alias).stop();\n    }\n\n    /**\n     * Pauses a sound.\n     * @param alias - The sound alias reference.\n     * @return Sound object.\n     */\n    public pause(alias: string): Sound\n    {\n        return this.find(alias).pause();\n    }\n\n    /**\n     * Resumes a sound.\n     * @param alias - The sound alias reference.\n     * @return Instance for chaining.\n     */\n    public resume(alias: string): Sound\n    {\n        return this.find(alias).resume();\n    }\n\n    /**\n     * Get or set the volume for a sound.\n     * @param alias - The sound alias reference.\n     * @param volume - Optional current volume to set.\n     * @return The current volume.\n     */\n    public volume(alias: string, volume?: number): number\n    {\n        const sound = this.find(alias);\n\n        if (volume !== undefined)\n        {\n            sound.volume = volume;\n        }\n\n        return sound.volume;\n    }\n\n    /**\n     * Get or set the speed for a sound.\n     * @param alias - The sound alias reference.\n     * @param speed - Optional current speed to set.\n     * @return The current speed.\n     */\n    public speed(alias: string, speed?: number): number\n    {\n        const sound = this.find(alias);\n\n        if (speed !== undefined)\n        {\n            sound.speed = speed;\n        }\n\n        return sound.speed;\n    }\n\n    /**\n     * Get the length of a sound in seconds.\n     * @param alias - The sound alias reference.\n     * @return The current duration in seconds.\n     */\n    public duration(alias: string): number\n    {\n        return this.find(alias).duration;\n    }\n\n    /**\n     * Closes the sound library. This will release/destroy\n     * the AudioContext(s). Can be used safely if you want to\n     * initialize the sound library later. Use `init` method.\n     */\n    public close(): this\n    {\n        this.removeAll();\n        this._sounds = null;\n        if (this._webAudioContext)\n        {\n            this._webAudioContext.destroy();\n            this._webAudioContext = null;\n        }\n        if (this._htmlAudioContext)\n        {\n            this._htmlAudioContext.destroy();\n            this._htmlAudioContext = null;\n        }\n        this._context = null;\n\n        return this;\n    }\n}\n\nexport { SoundLibrary };\nexport type { SoundMap, SoundSourceMap };\n","import * as PIXI from 'pixi.js';\r\nimport * as Audio from '@pixi/sound';\r\nimport IAudio from '../Interfaces/IAudio';\r\n\r\n// audio interface implementation \r\nexport default class PIXIAudio implements IAudio {\r\n    // private memebers\r\n    private _sounds: Map<string, Audio.Sound>; \r\n\r\n    // initialization\r\n    public constructor() {\r\n        this._sounds = new Map<string, Audio.Sound>();\r\n    }\r\n\r\n    // interface implementations\r\n    public async LoadSounds(sounds: Array<string>): Promise<void> {\r\n        for (const name of sounds) {\r\n            await PIXI.Assets.load<Audio.Sound>(name);\r\n            const sound: Audio.Sound = Audio.Sound.from(name);\r\n            this._sounds.set(name, sound); \r\n        }\r\n    }\r\n\r\n    public Play(name: string): void {\r\n        const sound: Audio.Sound | undefined = this._sounds.get(name);\r\n        if (sound !== undefined) {\r\n            sound.loop = false;\r\n            sound.play();\r\n        }\r\n    }\r\n\r\n    public PlayLoop(name: string): void {\r\n        const sound: Audio.Sound | undefined = this._sounds.get(name);\r\n        if (sound !== undefined) {\r\n            sound.loop = true;\r\n            sound.play();\r\n        }\r\n    }\r\n\r\n    public Stop(name: string): void {\r\n        const sound: Audio.Sound | undefined = this._sounds.get(name);\r\n        if (sound !== undefined) {\r\n            sound.stop();\r\n        }\r\n    }\r\n}\r\n\r\n","import IConfig from \"../Interfaces/IConfig\";\r\nimport ISlotEngine from \"../Interfaces/ISlotEngine\";\r\n\r\n// simple implamentation of a slot engine\r\nexport default class SlotEngine implements ISlotEngine {\r\n    // private members \r\n    private _gaffe: Array<number>;\r\n    private _reelset: Array<Array<string>>;\r\n    private _combinations: Map<string, string>;\r\n    private _generatedStops: Array<number>;\r\n    private _winMatches: Array<[x:number, y:number]>;\r\n    private _userId: number;\r\n    private _balance: number;  \r\n    private _multiplier: number;\r\n    private _multiplierInc: number;  \r\n    private _winMatchMin: number;  \r\n\r\n    // dependencies\r\n    public readonly Config: IConfig;\r\n\r\n    // initialization\r\n    public constructor(config: IConfig) {\r\n        this.Config = config;\r\n        this._userId = 0;\r\n        this._multiplier = 0;\r\n        this._multiplierInc = 0;\r\n        this._winMatchMin = 0;\r\n        this._balance = 0;\r\n        this._gaffe = new Array<number>();\r\n        this._reelset = new Array<Array<string>>();\r\n        this._combinations = new Map<string, string>();\r\n        this._generatedStops = new Array<number>();\r\n        this._winMatches = new Array<[x:number, y:number]>();\r\n    }\r\n\r\n    // interface implementations\r\n    public GetUserId(): number {\r\n        return this._userId;\r\n    }\r\n\r\n    public GetUserBalance(): number {\r\n        return this._balance;\r\n    }\r\n    \r\n    public SetGaffe(values:Array<number>): void {\r\n        this._gaffe = values;\r\n    }\r\n\r\n    public async Initialize (userId: number): Promise<boolean> { \r\n        return new Promise<boolean>((resolve, reject) => {\r\n            try {\r\n                this._userId = userId;\r\n                this._balance = this.Config.BalanceStart;\r\n                this._combinations = this.Config.Combinations;\r\n                this._reelset = this.Config.Reelset.concat(this.Config.Reelset);\r\n                this._multiplier = this.Config.BetMultiplier;\r\n                this._multiplierInc = this.Config.BetMultiplierInc;\r\n                this._winMatchMin = this.Config.WinMatchMin;\r\n                resolve(true);\r\n            } \r\n            catch (error) {\r\n                reject(error);\r\n            }\r\n        });\r\n    }\r\n\r\n    public Reset(): void {\r\n        this._balance = this.Config.BalanceStart;\r\n    }\r\n\r\n    public async GenerateStops(): Promise<Array<number>> {\r\n        return new Promise<Array<number>>((resolve, reject) => {\r\n            try {\r\n                const stops: Array<number> = new Array<number>();\r\n                this._reelset.forEach((reel) => {\r\n                    const stop: number | undefined = this._gaffe.shift();\r\n                    stops.push(stop !== undefined ? stop % reel.length : Math.floor(Math.random() * reel.length));\r\n                });\r\n                this._generatedStops = stops;\r\n                resolve(Object.assign([], stops));\r\n            } \r\n            catch (error) {\r\n                reject(error);\r\n            }\r\n        });\r\n    }\r\n\r\n    public GetWinMatches(): Array<[x:number, y:number]> {\r\n        if (this._generatedStops.length === 0) {\r\n            return new Array<[x:number, y:number]>();\r\n        }        \r\n        const winBoxes = new Array<[x:number, y:number]>();\r\n        const arSize = Math.floor(this._generatedStops.length / 2);\r\n        const checkStops: Array<number> = this._generatedStops.splice(0, arSize);\r\n        const vsStops: Array<number> = this._generatedStops;\r\n        const reelset: Array<Array<string>> = this._reelset;\r\n\r\n        checkStops.forEach((stop, index) => {\r\n            for (let r: number = 0; r < this.Config.MachineRows; r++) {\r\n                const checkStop: number = stop + r;\r\n                const vsStop: number = vsStops[index] + r;\r\n\r\n                const checkIndex: number = checkStop % reelset[index].length;\r\n                const checkSym: string = reelset[index][checkIndex];\r\n                const vsIndex: number = vsStop % reelset[index].length;\r\n                const vsSym: string = reelset[index][vsIndex];\r\n\r\n                if (this._combinations.has(checkSym) && this._combinations.get(checkSym) === vsSym) {\r\n                    winBoxes.push([index, r]);\r\n                }\r\n            }\r\n        });\r\n        this._winMatches = winBoxes;\r\n        return Object.assign([], winBoxes);\r\n    }\r\n\r\n    public GetWinnings(betAmount: number): number {\r\n        let winnings: number = 0;\r\n        let betMultiplier: number = 0;\r\n        if (this._winMatches.length >= this._winMatchMin) {\r\n            betMultiplier = this._multiplier + (this._multiplierInc * (this._winMatches.length-this._winMatchMin));\r\n            winnings = betAmount * betMultiplier;\r\n        }\r\n\r\n        this._balance = this._balance + winnings - betAmount;\r\n        return winnings;\r\n    }\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import { App } from './app';\r\nimport './index.css';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\n// Create the skills assessment app\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nconst app = new App();\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import IConfig from './game/Interfaces/IConfig';\r\nimport IRenderer from './game/Interfaces/IRenderer';\r\nimport IAudio from './game/Interfaces/IAudio';\r\nimport ISlotEngine from './game/Interfaces/ISlotEngine';\r\nimport GameController from './game/Defaults/GameController';\r\nimport IGameController from './game/Interfaces/IGameController';\r\nimport DefaultConfig from './game/Defaults/DefaultConfig';\r\nimport PIXIRenderer from './game/Defaults/PIXIRenderer';\r\nimport PIXIAudio from './game/Defaults/PIXIAudio';\r\nimport SlotEngine from './game/Defaults/SlotEngine';\r\nimport ILogger from './game/Interfaces/ILogger';\r\n\r\n// bootstrap\r\nexport class App {\r\n    // simple dependency injection \r\n    private _logger: ILogger = console;\r\n    private _config: IConfig = new DefaultConfig();\r\n    private _renderer: IRenderer = new PIXIRenderer();\r\n    private _audio: IAudio = new PIXIAudio();\r\n    private _engine: ISlotEngine = new SlotEngine(this._config);\r\n    private _controller: IGameController = new GameController(this._config, this._renderer, this._audio, this._engine, this._logger);\r\n\r\n    public constructor() {\r\n        // game entry point - root of game specific content: src/game and public/game \r\n        this._controller.Start();\r\n    }\r\n}\r\n"],"names":["earcut","data","holeIndices","dim","minX","minY","maxX","maxY","x","y","invSize","hasHoles","length","outerLen","outerNode","linkedList","triangles","next","prev","i","len","list","queue","steiner","push","getLeftmost","sort","compareX","eliminateHole","eliminateHoles","Math","max","earcutLinked","start","end","clockwise","last","signedArea","insertNode","equals","removeNode","filterPoints","again","p","area","ear","pass","z","zOrder","prevZ","nextZ","q","e","tail","numMerges","pSize","qSize","inSize","sortLinked","indexCurve","stop","isEarHashed","isEar","cureLocalIntersections","splitEarcut","a","b","c","ax","bx","cx","ay","by","cy","x0","y0","x1","y1","pointInTriangle","minZ","maxZ","n","intersects","locallyInside","isValidDiagonal","splitPolygon","hole","bridge","m","hx","hy","qx","Infinity","tan","mx","my","tanMin","abs","sectorContainsSector","findHoleBridge","bridgeReverse","leftmost","px","py","intersectsPolygon","inside","middleInside","r","p1","p2","q1","q2","o1","sign","o2","o3","o4","onSegment","min","num","a2","Node","b2","an","bp","this","sum","j","module","exports","deviation","polygonArea","trianglesArea","flatten","result","vertices","holes","dimensions","holeIndex","d","has","Object","prototype","hasOwnProperty","prefix","Events","EE","fn","context","once","addListener","emitter","event","TypeError","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","events","name","names","call","slice","getOwnPropertySymbols","concat","listeners","handlers","l","ee","Array","listenerCount","emit","a1","a3","a4","a5","args","arguments","removeListener","undefined","apply","on","removeAllListeners","off","prefixed","path","replace","segment","_","command","type","toLowerCase","numbers","match","number","map","Number","parseValues","splice","unshift","Error","h","s","t","v","Cache","constructor","_parsers","_cache","Map","_cacheMap","reset","clear","key","get","warn","set","value","keys","convertToList","cacheableAssets","parsers","parser","test","getCacheableAssets","cacheableMap","entries","forEach","key2","cacheKeys","cachedAssets","val","remove","cacheMap","delete","LoaderParserPriority","LoaderParserPriority2","processX","base","ids","depth","tags","id","createStringVariations","string","vars","split","substring","Resolver","_defaultBundleIdentifierOptions","connector","createBundleAssetId","bundleId","assetId","_bundleIdConnector","extractAssetIdFromBundle","assetBundleId","_createBundleAssetId","_extractAssetIdFromBundle","_assetMap","_preferredOrder","_resolverHash","_bundles","setBundleIdentifier","bundleIdentifier","_bundleIdentifier$con","_bundleIdentifier$cre","_bundleIdentifier$ext","prefer","_len","preferOrders","_key","priority","params","basePath","_basePath","rootPath","_rootPath","_manifest","_defaultSearchParams","setDefaultSearchParams","searchParams","queryValues","encodeURIComponent","join","getAlias","asset","alias","src","isArray","_v$src","addManifest","manifest","bundles","bundle","addBundle","assets","assetNames","convertedAssets","_ref","srcs","aliases","bundleAssetId","bundleIds","add","keyCheck","hasKey","format","loadParser","srcsToUse","src2","aliasesToUse","resolvedAssets","formattedAsset","parse","_src2$data","_src2$format","_src2$loadParser","_buildResolvedAsset","resolveBundle","singleAsset","isSingleItem","out","results","resolve","resolveUrl","preferredOrder","_getPreferredOrder","priorityKey","filteredAssets","filter","hasBundle","preferred","find","preference","includes","_appendDefaultSearchParams","url","paramConnector","_ref2","_ref3","assetData","toAbsolute","pop","shift","RETINA_PREFIX","input","transform","forceTransform","item","copySearchParams","targetUrl","sourceUrl","grad","turn","rad","PI","pow","round","u","isFinite","g","o","toString","floor","f","exec","parseInt","substr","object","N","trim","M","H","$","parsed","rgba","isValid","brightness","isDark","isLight","toHex","toRgb","toRgbString","toHsl","toHslString","toHsv","invert","w","saturate","desaturate","grayscale","lighten","darken","rotate","hue","alpha","isEqual","S","indexOf","extend","white","bisque","blue","cadetblue","chartreuse","chocolate","coral","antiquewhite","aqua","azure","whitesmoke","papayawhip","plum","blanchedalmond","black","gold","goldenrod","gainsboro","cornsilk","cornflowerblue","burlywood","aquamarine","beige","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkkhaki","darkgray","darkgreen","darkgrey","peachpuff","darkmagenta","darkred","darkorchid","darkorange","darkslateblue","gray","darkslategray","darkslategrey","deeppink","deepskyblue","wheat","firebrick","floralwhite","ghostwhite","darkviolet","magenta","green","dodgerblue","grey","honeydew","hotpink","blueviolet","forestgreen","lawngreen","indianred","indigo","fuchsia","brown","maroon","mediumblue","lightcoral","darkturquoise","lightcyan","ivory","lightyellow","lightsalmon","lightseagreen","linen","mediumaquamarine","lemonchiffon","lime","khaki","mediumseagreen","limegreen","mediumspringgreen","lightskyblue","lightblue","midnightblue","lightpink","mistyrose","moccasin","mintcream","lightslategray","lightslategrey","navajowhite","navy","mediumvioletred","powderblue","palegoldenrod","oldlace","paleturquoise","mediumturquoise","mediumorchid","rebeccapurple","lightsteelblue","mediumslateblue","thistle","orchid","mediumpurple","purple","pink","skyblue","springgreen","palegreen","red","yellow","slateblue","lavenderblush","peru","palevioletred","violet","teal","slategray","slategrey","aliceblue","darkseagreen","darkolivegreen","greenyellow","seagreen","seashell","tomato","silver","sienna","lavender","lightgreen","orange","orangered","steelblue","royalblue","turquoise","yellowgreen","salmon","saddlebrown","sandybrown","rosybrown","darksalmon","lightgoldenrodyellow","snow","lightgrey","lightgray","dimgray","dimgrey","olivedrab","olive","toName","closest","_Color","_value","_components","Float32Array","fill","_int","setValue","_cloneSource","_isSourceEqual","_normalize","ArrayBuffer","isView","value1","value2","type1","every","keys1","keys2","toRgba","toRgbaString","toUint8RgbArray","_arrayRgb","toArray","_arrayRgba","toRgbArray","toNumber","toBgrNumber","toLittleEndianNumber","multiply","_temp","_refreshInt","premultiply","toPremultiplied","applyToRGB","hexString","toHexa","alphaString","setAlpha","_clamp","Uint8Array","Uint8ClampedArray","HEX_PATTERN","color","colord","isColorLike","shared","Color","currentAdapter","createCanvas","width","height","canvas","document","createElement","getCanvasRenderingContext2D","CanvasRenderingContext2D","getWebGLRenderingContext","WebGLRenderingContext","getNavigator","navigator","getBaseUrl","_document$baseURI","baseURI","window","location","href","getFontFaceSet","fonts","fetch","options","parseXML","xml","DOMParser","parseFromString","DOMAdapter","adapter","ExtensionType","ExtensionType2","normalizeExtension","ext","extension","ref","normalizeExtensionPriority","defaultPriority","_normalizeExtension$p","extensions","_addHandlers","_removeHandlers","_queue","extensions2","_this$_removeHandlers","_this$_removeHandlers2","_len2","_key2","_handlers$type","_queue$type","handle","onAdd","onRemove","addHandlers","removeHandlers","_queue$type2","handleByMap","handleByNamedList","findIndex","index","handleByList","FilterEffect","pipe","destroy","filters","filterArea","Matrix","tx","ty","array","fromArray","transpose","pos","newPos","Point","applyInverse","translate","scale","angle","cos","sin","c1","tx1","append","matrix","b1","d1","appendFrom","c2","d2","setTransform","pivotX","pivotY","scaleX","scaleY","rotation","skewX","skewY","prepend","decompose","pivot","atan2","delta","PI_2","skew","sqrt","position","isIdentity","identity","clone","copyTo","copyFrom","IDENTITY","identityMatrix","tempMatrix","RAD_TO_DEG","DEG_TO_RAD","nextPow2","isPow2","ObservablePoint","observer","_x","_y","_observer","_onUpdate","tempPoint","tempPoints","Rectangle","left","right","top","bottom","isEmpty","EMPTY","copyFromBounds","bounds","rectangle","contains","strokeContains","strokeWidth","other","x02","y02","lt","lb","rt","rb","nx","ny","n00","n10","n01","n11","m00","m10","m01","m11","pad","paddingX","paddingY","fit","x2","y2","ceil","resolution","eps","enlarge","getBounds","placeHolderBufferData","placeHolderIndexData","Uint32Array","BatchGeometry","Geometry","attributeBuffer","Buffer","label","usage","BufferUsage","VERTEX","COPY_DST","shrinkToFit","attributes","aPosition","buffer","stride","vertexSize","offset","aUV","aColor","aTextureIdAndRound","indexBuffer","INDEX","cachedGroups","getTextureBatchBindGroup","textures","size","uid","bindGroupResources","bindIndex","maxTextures","maxRecommendedTextures","texture","Texture","source","style","bindGroup","BindGroup","generateTextureBatchBindGroup","ViewableBuffer","sizeOrBuffer","rawBinaryData","uint32View","float32View","byteLength","int8View","_int8View","Int8Array","uint8View","_uint8View","int16View","_int16View","Int16Array","int32View","_int32View","Int32Array","float64View","_float64Array","Float64Array","bigUint64View","_bigUint64Array","BigUint64Array","view","uint16View","sizeOf","getAdjustedBlendModeBlend","blendMode","textureSource","alphaMode","BLEND_TO_NPM","BatchTextureArray","count","Batch","renderPipeId","action","canBundle","gpuBindGroup","batcher","BATCH_TICK","_Batcher","dirty","batchIndex","batches","_vertexSize","_elements","_batchPool","_batchPoolIndex","_textureBatchPool","_textureBatchPoolIndex","defaultOptions","indexSize","Uint16Array","_maxTextures","begin","elementSize","elementStart","attributeSize","_batchIndexStart","_batchIndexSize","batchableObject","indexStart","checkAndUpdateTexture","textureId","batch","_source","updateElement","packAttributes","break","instructionSet","elements","textureBatch","firstElement","_resizeAttributeBuffer","_resizeIndexBuffer","f32","u32","iBuffer","element","adjustedBlendMode","blendModeChange","_batchTick","_finishBatch","_textureBindLocation","packIndex","finish","ensureAttributeBuffer","ensureIndexBuffer","newSize","newArrayBuffer","fastCopy","newIndexBuffer","BYTES_PER_ELEMENT","Batcher","tempBounds","Bounds","addMaskBounds","mask","skipUpdateTransform","boundsToMask","measurable","getGlobalBounds","addBoundsMask","addMaskLocalBounds","localRoot","boundsPool","matrixPool","relativeMask","getMatrixRelativeToParent","getLocalBounds","return","target","root","parent","updateLocalTransform","localTransform","AlphaMask","init","renderMaskToTexture","Sprite","renderable","includeInBuild","addBounds","addLocalBounds","containsPoint","point","hitTestFn","MaskEffect","ColorMask","StencilMask","Container","VideoSource","ImageSource","CanvasSource","BufferImageSource","CLEAR","CLEAR2","getTestContext","_context","isContextLost","getContext","resources","_dirty","resource","setResource","_updateKey","keyParts","_resourceId","_resource$on","currentResource","_resource$off","onResourceChange","getResource","_touch","tick","_touched","_resource$off2","destroyed","_size","_data","_resourceType","_updateID","mappedAtCreation","descriptor","setDataWithSize","static","STATIC","syncGPU","_updateSize","oldData","update","sizeInBytes","BufferUsage2","sourceBuffer","destinationBuffer","lengthDouble","sourceFloat64View","remainingBytes","sourceUint8View","ensureIsBuffer","ensureIsAttribute","attribute","topology","_layoutKey","instanceCount","_bounds","_boundsDirty","buffers","onBufferUpdate","getAttribute","getIndex","getBuffer","getSize","geometry","attributeId","byteSize","getGeometryBounds","destroyBuffers","InstructionSet","instructions","instructionSize","instruction","log","console","table","normal","screen","STENCIL_MODES","STENCIL_MODES2","environments","loadEnvironmentExtensions","skip","env","load","Environment","defaultRunners","_AbstractRenderer","config","_this$config$runners","runners","renderPipes","_initOptions","_systemsHash","combinedRunners","_addRunners","_unsafeEvalCheck","skipExtensionImports","manageImports","_addSystems","systems","_addPipes","renderPipeAdaptors","systemName","_roundPixels","roundPixels","items","render","deprecated","container","deprecation","v8_0_0","renderTexture","renderTarget","_lastObjectRendered","clearColor","background","colorRgba","isRGBAArray","prerender","renderStart","renderEnd","postrender","resize","desiredScreenWidth","desiredScreenHeight","_options$clear","ALL","resolutionChange","frame","lastObjectRendered","renderingToScreen","runnerIds","runnerId","SystemRunner","_addSystem","ClassRef","system","pipes","pipeAdaptors","adaptors","reduce","acc","adaptor","PipeClass","Adaptor","reverse","values","runner","generateTexture","textureGenerator","unsafeEvalSupported","failIfMajorPerformanceCaveat","AbstractRenderer","_name","a0","a6","a7","removeAll","empty","CanvasPool","canvasOptions","_canvasPool","enableFullScreen","_createCanvasAndContext","pixelWidth","pixelHeight","getOptimalCanvasAndContext","minWidth","minHeight","canvasAndContext","returnCanvasAndContext","ux","uy","vx","vy","rotationCayley","rotationMatrices","signum","row","_ux","_uy","_vx","_vy","k","mat","groupD8","E","SE","SW","W","NW","NE","MIRROR_VERTICAL","MAIN_DIAGONAL","MIRROR_HORIZONTAL","REVERSE_DIAGONAL","uX","ind","uY","vX","vY","inv","rotationSecond","rotationFirst","sub","rotate180","isVertical","byDirection","dx","dy","matrixAppendRotationInv","NOOP","_source$source","orig","defaultAnchor","defaultBorders","dynamic","uvs","x3","y3","noFrame","isTexture","TextureSource","updateUvs","textureMatrix","_textureMatrix","TextureMatrix","nX","nY","nW","nH","w2","h2","cX","cY","destroySource","baseTexture","WHITE","tempMat","clampMargin","mapCoord","uClampFrame","uClampOffset","_textureID","clampOffset","isSimple","_texture","_this$_texture","multiplyUvs","tex","texBase","margin","_resolution","uploadMethodId","autoDensity","super","resizeCanvas","transparent","didResize","globalThis","HTMLCanvasElement","OffscreenCanvas","HTMLImageElement","drawImage","autoGarbageCollect","ImageBitmap","idHash","_TextureStyle","_options$addressModeU","_options$addressModeV","_options$addressModeW","_options$magFilter","_options$minFilter","_options$mipmapFilter","_options$maxAnisotrop","_maxAnisotropy","addressMode","addressModeU","addressModeV","addressModeW","scaleMode","magFilter","minFilter","mipmapFilter","lodMinClamp","lodMaxClamp","compare","maxAnisotropy","wrapMode","_sharedResourceId","_generateResourceId","bigKey","createResourceIdFromString","TextureStyle","_TextureSource","_options$label","_this$resourceWidth","_this$resourceHeight","sampleCount","mipLevelCount","autoGenerateMipmaps","dimension","antialias","resourceWidth","resourceHeight","obj","definedProps","_refreshPOT","_style","_this$_style","_this$_style2","_onStyleChange","repeatMode","unload","naturalWidth","videoWidth","displayWidth","naturalHeight","videoHeight","displayHeight","newPixelWidth","newPixelHeight","updateMipmaps","isPowerOfTwo","_resource","_VideoSource","_options$alphaMode","isReady","_autoUpdate","_isConnectedToTicker","_updateFPS","updateFPS","_msToNextUpdate","autoPlay","_videoFrameRequestCallback","bind","_videoFrameRequestCallbackHandle","_load","_resolve","_reject","_onCanPlay","_onCanPlayThrough","_onError","_onPlayStart","_onPlayStop","_onSeeked","autoLoad","updateFrame","elapsedMS","Ticker","playbackRate","requestVideoFrameCallback","readyState","HAVE_ENOUGH_DATA","HAVE_FUTURE_DATA","complete","addEventListener","_isSourceReady","_mediaReady","preload","detectVideoAlphaMode","Promise","reject","preloadTimeoutMs","_preloadTimeout","setTimeout","ErrorEvent","removeEventListener","_isSourcePlaying","paused","ended","_configureAutoUpdate","clearTimeout","play","pause","autoUpdate","cancelVideoFrameCallback","HTMLVideoElement","VideoFrame","crossorigin","loop","muted","playsinline","MIME_TYPES","ogv","mov","m4v","maxRecommendedTexturesCache","gl","getParameter","MAX_TEXTURE_IMAGE_UNITS","sources","autoDetectSource","hasResource","res","opts","Source","from","skipCache","resourceToTexture","childrenHelperMixin","allowChildren","removeChildren","beginIndex","endIndex","children","range","removed","child","removeItems","renderGroup","parentRenderGroup","RangeError","removeChildAt","getChildAt","removeChild","setChildIndex","getChildIndex","addChildAt","currentIndex","didChange","didViewUpdate","_updateFlags","addChild","sortableChildren","sortDirty","swapChildren","child2","index1","index2","removeFromParent","_this$parent","MaskEffectManager","_effectClasses","_tests","_initialized","maskClass","getMaskEffect","BigPool","returnMaskEffect","effect","effectsMixin","_maskEffect","_filterEffect","effects","addEffect","structureDidChange","_updateIsSimple","removeEffect","_this$_maskEffect","_effect$filters","hasFilters","_value2","freeze","_this$_filterEffect","_this$_filterEffect2","findMixin","getChildByName","deep","getChildByLabel","RegExp","found","getChildrenByLabel","checkChildrenDidChange","previousData","changeId","_didChangeId","measureMixin","_localBoundsCacheId","_localBoundsCacheData","_setWidth","localWidth","_setHeight","localHeight","localBounds","localBoundsCacheData","skipUpdate","onRenderMixin","_onRender","onRender","func","removeOnRender","addOnRender","sortMixin","_zIndex","zIndex","depthOfChildModified","sortChildren","toLocalGlobalMixin","getGlobalPosition","toGlobal","_position","globalMatrix","updateTransformBackwards","worldTransform","toLocal","RenderGroup","renderGroupParent","renderGroupChildren","worldColorAlpha","worldColor","worldAlpha","childrenToUpdate","updateTick","childrenRenderablesToUpdate","_onRenderContainers","addRenderGroupChild","renderGroupChild","_removeRenderGroupChild","relativeRenderGroupDepth","onChildUpdate","updateRenderable","globalDisplayStatus","onChildViewUpdate","isRenderable","localDisplayStatus","runOnRender","getChildren","_getChildren","defaultSkew","defaultPivot","defaultScale","UPDATE_COLOR","UPDATE_BLEND","UPDATE_VISIBLE","_options$children","_options$parent","parentRenderGroupIndex","relativeGroupTransform","groupTransform","_scale","_pivot","_skew","_cx","_sx","_cy","_sy","_rotation","localColor","localAlpha","groupAlpha","groupColor","groupColorAlpha","localBlendMode","groupBlendMode","_didLocalTransformChangeId","ignore","assignWithIgnore","mixin","defineProperties","getOwnPropertyDescriptors","_updateSkew","isRenderGroup","enableRenderGroup","_worldTransform","setSize","convertedWidth","convertedHeight","_value$height","updateTransform","setFromMatrix","sx","sy","tint","bgr","visible","valueNumber","culled","_this$renderGroup","oldChildren","cullArea","cullable","cullableChildren","defaultMatrix","_rectangle","addFrame","addRect","rect","applyMatrix","fitBounds","isPositive","addVertexData","vertexData","beginOffset","endOffset","localX","localY","parentTransform","pooledMatrix","_getGlobalBounds","parentBounds","preserveBounds","boundsArea","_target$effects$i$add","_target$effects$i","relativeMatrix","_getLocalBounds","rootContainer","isRoot","relativeTransform","Pool","BatchableGraphics","applyTransform","indicesOffset","indices","geometryData","indexOffset","vertexOffset","graphics","positions","vertSize","rgb","argb","color1","color2","wt","textureIdAndRound","gpuBuffer","Graphics","GraphicsContext","rest","_ownedContext","onViewUpdate","_didGraphicsUpdate","_callContextMethod","method","setFillStyle","setStrokeStyle","_len3","_key3","stroke","_len4","_key4","_len5","_key5","beginPath","cut","arc","_len6","_key6","arcTo","_len7","_key7","arcToSvg","_len8","_key8","bezierCurveTo","_len9","_key9","closePath","ellipse","_len10","_key10","circle","_len11","_key11","_len12","_key12","lineTo","_len13","_key13","moveTo","_len14","_key14","quadraticCurveTo","_len15","_key15","_len16","_key16","roundRect","_len17","_key17","poly","_len18","_key18","regularPoly","_len19","_key19","roundPoly","_len20","_key20","roundShape","_len21","_key21","filletRect","_len22","_key22","chamferRect","_len23","_key23","star","_len24","_key24","svg","_len25","_key25","restore","_len26","_key26","save","getTransform","resetTransform","rotateTransform","_len27","_key27","scaleTransform","_len28","_key28","_len29","_key29","_len30","_key30","translateTransform","_len31","_key31","fillStyle","strokeStyle","lineStyle","beginFill","endFill","defaultStrokeStyle","drawCircle","_len32","_key32","drawEllipse","_len33","_key33","drawPolygon","_len34","_key34","drawRect","_len35","_key35","drawRoundedRect","_len36","_key36","drawStar","_len37","_key37","Circle","radius","r2","distance","Ellipse","halfWidth","halfHeight","normx","normy","halfStrokeWidth","innerA","innerB","outerA","outerB","normalizedX","normalizedY","squaredDistanceToLineSegment","lenSq","xx","yy","param","Polygon","points","flat","il","polygon","xi","yi","xj","yj","halfStrokeWidthSqrd","iterationLength","pointsDesc","currentPoint","lastX","lastY","isCornerWithinStroke","pX","pY","cornerX","cornerY","RoundedRectangle","radius2","innerX","innerY","rightBound","bottomBound","RECURSION_LIMIT","FLT_EPSILON","PATH_DISTANCE_EPSILON","curveAngleToleranceEpsilon","mAngleTolerance","mCuspLimit","buildAdaptiveBezier","sX","sY","cp1x","cp1y","cp2x","cp2y","eX","eY","smoothness","smoothing","GraphicsContextSystem","bezierSmoothness","distanceTolerance","recursive","x4","y4","level","pi","x12","y12","x23","y23","x34","y34","x123","y123","x234","y234","x1234","y1234","d3","da1","da2","a23","buildAdaptiveQuadratic","da","buildArc","steps","dist","TAU","centerX","centerY","ang1","ang2","mapToEllipse","rx","ry","cosPhi","sinPhi","out2","xp","yp","approxUnitArc","vectorAngle","dot","acos","buildArcToSvg","xAxisRotation","largeArcFlag","sweepFlag","pxp","pyp","lambda","getArcCenter","rxSq","rySq","pxpSq","pypSq","radicant","centerXp","centerYp","vx1","vy1","vx2","vy2","ratio","segments","outCurvePoint","curve","tempRectangle","ShapePath","graphicsPath2D","shapePrimitives","_currentPoly","_graphicsPath2D","startPoly","_ensurePoly","fromX","fromY","startAngle","endAngle","counterclockwise","mm","dd","cc","tt","k1","k2","j1","j2","qy","buildArcTo","currentPoly","endPoly","addPath","drawShape","close","sides","corner","sideLength","internalAngle","useQuadratic","pointLerp","numPoints","_thisPoint$radius","thisPoint","pRadius","lastPoint","nextPoint","lastEdgeLength","nextEdgeLength","roundedShapeQuadraticCurve","vecFrom","pp","sharpCorner","_p2$radius","p3","v1","v2","asin","radDirection","drawDirection","halfAngle","cRadius","lenOut","roundedShapeArc","fillet","maxFillet","inset","dir","chamfer","radiusX","radiusY","shape","lastShape","lx","ly","tempX","buildPath","shapePrimitive","boundsRect","GraphicsPath","_instructions$slice","svgPath","commands","subpaths","currentSubPath","bezierCurveToShort","quadraticCurveToShort","startX","startY","SVGToGraphicsPath","shapePath","_shapePath","getLastPoint","currentX","currentY","cpx1","cpy1","innerRadius","newGraphicsPath2D","cpx2","cpy2","adjustTransform","lastInstruction","currentMatrix","SVGParser","graphicsContext","div","innerHTML","querySelector","renderChildren","session","f1","s1","useFill","useStroke","styleParts","stylePart","parseFloatAttribute","parseStyle","pointsString","graphicsPath","nodeName","info","defaultValue","tmpPoint","_GraphicsContext","batchMode","_activePath","_transform","_fillStyle","defaultFillStyle","_strokeStyle","_stateStack","_tick","toFillStyle","toStrokeStyle","dw","dh","image","onUpdate","_initNextPathLocation","holePath","_this$_activePath","transformedX","transformedY","cpx","cpy","state","padding","hasHit","shapes","transformedPoint","_holes$shapePath","holeShapes","destroyTextureSource","customShader","alignment","miterLimit","cap","transformVertices","buildCircle","build","roundedRect","j3","j4","y22","x22","triangulate","verticesStride","verticesOffset","centerIndex","closePointEps","curveEps","square","innerWeight","outerWeight","verts","exx","eyy","eix","eiy","eox","eoy","ex","ey","cx2p0x","cy2p0y","angle0","angle1","angleDiff","absAngleDiff","segCount","angleInc","triangulateWithHoles","emptyArray","buildPolygon","buildMap","rectData","verticesIndex","triangle","roundedRectangle","tempRect","addTextureToGeometryData","vertOffset","textureUvs","graphicsBatch","addShapePathToGeometryData","isStroke","lastIndex","_shape$closePath","flipAlignment","closed","_verticesStride","_verticesOffset","_indicesOffset","orientation","getOrientationOfPoints","firstPoint","closedShape","closedPath","midPointX","midPointY","indexCount","widthSquared","miterLimitSquared","perpX","perpY","perp1x","perp1y","dx0","dy0","dx1","dy1","cross","pDist","imx","imy","omx","omy","insideWeight","eps2","buildLine","otherPoints","holeArrays","holePrimitives","holePrimitive","holePoints","getHoleArrays","uvsOffset","uvsStride","buildUvs","buildSimpleUvs","GpuGraphicsContext","GraphicsContextRenderData","_GraphicsContextSystem","_activeBatchers","_gpuContextHash","_graphicsDataContextHash","_options$bezierSmooth","_returnActiveBatchers","getContextRenderData","_initContextRenderData","updateGpuContext","gpuContext","_initContext","_cleanGraphicsContextData","buildContextBatches","isBatchable","getGpuContext","graphicsData","drawBatches","onGraphicsContextDestroy","WebGLSystem","WebGPUSystem","CanvasSystem","_FillGradient","gradientStops","_styleKey","addColorStop","buildLinearGradient","defaultSize","defaultTextureSize","ctx","gradient","createLinearGradient","fillRect","styleKey","stops","FillGradient","repetitionMap","repeat","FillPattern","repetition","isFillPattern","isFillGradient","handleFillPattern","defaultStyle","handleFillGradient","objectStyle","temp","handleColorLike","_style$matrix","sourceStyle","handleFillObject","anchor","batched","_didSpriteUpdate","_sourceBounds","_sourceBoundsDirty","_anchor","currentTexture","_width","_height","_updateBounds","sourceBounds","_updateSourceBounds","updateQuadBounds","AbstractBitmapFont","chars","lineHeight","fontFamily","fontMetrics","fontSize","ascent","descent","baseLineOffset","distanceField","pages","baseMeasurementFontSize","baseRenderedFontSize","font","pageTextures","distanceFieldRange","distanceFieldType","destroyTextures","_this$chars$i$texture","page","resolveCharacters","startCode","charCodeAt","endCode","i2","String","fromCharCode","DynamicBitmapFont","_dynamicOptions$skipK","_dynamicOptions$resol","_dynamicOptions$paddi","_padding","_measureCache","_currentChars","_currentX","_currentY","_currentPageIndex","_skipKerning","dynamicOptions","overrideFill","_fill","requestedFontSize","fontStringFromTextStyle","overrideSize","_stroke","skipKerning","CanvasTextMetrics","measureFont","ensureCharacters","charList","char","self","pageData","_nextPage","fontScale","widthScale","fontStyle","maxCharHeight","skipTexture","_style$dropShadow$dis","_style$dropShadow","_style$_stroke$width","_style$_stroke","metrics","measureText","paddedWidth","paddedHeight","pageData2","xAdvance","dropShadow","codePointAt","xOffset","yOffset","kerning","_drawGlyph","_applyKerning","newChars","measureCache","first","second","total","amount","textureResolution","_setupContext","_stroke$width","textBaseline","strokeThickness","lineWidth","lineJoin","getCanvasFillStyle","shadowOptions","dropShadowBlur","blur","dropShadowDistance","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","_stroke$width2","text","fontProperties","strokeText","fillText","BitmapFontManager","ALPHA","NUMERIC","ALPHANUMERIC","ASCII","getFont","_dynamicFont$ensureCh","fontFamilyKey","fnt","dynamicFont","getLayout","bitmapFont","getBitmapTextLayout","install","_options","_ref4","textStyle","TextStyle","flatChars","uninstall","cacheKey","layoutData","offsetY","lines","charPositions","spaceWidth","spacesIndex","currentLine","previousChar","firstWord","currentWord","spaceWord","nextWord","word","nextLine","lastChar","adjustedLetterSpacing","letterSpacing","adjustedWordWrapWidth","wordWrapWidth","isEnd","charData","wordWrap","nextCharWidth","align","measurementData","line","alignCenter","alignRight","indy","spaceIndex","totalSpaces","alignJustify","_TextStyle","oldStyle","_oldStyle$dropShadowA","_oldStyle$dropShadowA2","_oldStyle$dropShadowB","_oldStyle$dropShadowC","_oldStyle$dropShadowD","defaults","defaultDropShadow","dropShadowAlpha","dropShadowAngle","dropShadowColor","fillGradientStops","defaultTextStyle","gradientFill","fills","convertV7Tov8Style","fullStyle","_align","breakWords","_breakWords","_dropShadow","_createProxy","_fontFamily","_fontSize","_fontStyle","fontVariant","_fontVariant","fontWeight","_fontWeight","leading","_leading","_letterSpacing","_lineHeight","_trim","_textBaseline","whiteSpace","_whiteSpace","_wordWrap","_wordWrapWidth","_originalFill","_isFillStyle","_originalStroke","_generateKey","generateTextStyleKey","_this$_fill","_this$_originalFill","_this$_stroke","_this$_originalStroke","cb","Proxy","property","newValue","contextSettings","willReadFrequently","_CanvasTextMetrics","experimentalLetterSpacingSupported","_experimentalLetterSpacingSupported","proto","lineWidths","maxLineWidth","_canvas","textKey","_measurementCache","__context","_measureText","useExperimentalLetterSpacing","experimentalLetterSpacing","textLetterSpacing","graphemeSegmenter","cache","collapseSpaces","_collapseSpaces","collapseNewlines","_collapseNewlines","canPrependSpaces","tokens","_tokenize","token","_isNewline","_addLine","currIsBreakingSpace","isBreakingSpace","lastIsBreakingSpace","tokenWidth","_getFromCache","canBreakWords","characters","wordWrapSplit","nextChar","canBreakChars","characterWidth","isLastToken","newLine","_trimRight","_newlines","_nextChar","_breakingSpaces","_token","_char","_index","_fonts","METRICS_STRING","BASELINE_SYMBOL","properties","actualBoundingBoxAscent","actualBoundingBoxDescent","clearMetrics","__canvas","BASELINE_MULTIPLIER","HEIGHT_MULTIPLIER","_Intl","Intl","Segmenter","segmenter","genericFontFamilies","fontSizeString","fontFamilies","pattern","createPattern","fillPattern","fillGradient","valuesToIterateForKeys","prop","addFillStyleKey","addStokeStyleKey","addDropShadowKey","_fillStyle$fill","_Spritesheet","linkedSheets","animations","metaResolution","parseFloat","meta","_frames","frames","_frameKeys","_batchIndex","_callback","BATCH_SIZE","_processFrames","_processAnimations","_parseComplete","_nextBatch","initialFrameIndex","frameIndex","maxFrames","sourceSize","trimmed","rotated","spriteSourceSize","borders","animName","frameName","callback","destroyBase","Spritesheet","validImages","ignoreMultiPack","dirname","related_multi_packs","assign","spritesheetAsset","Asset","resolver","ResolveParser","_Resolver$RETINA_PREF","_Resolver$RETINA_PREF2","loader","LoadParser","Normal","async","testParse","extname","_options$data","_asset$meta","imageTexture","imageFilename","lastIndexOf","imagePath","spritesheet","multiPacks","promises","_options$data2","itemUrl","all","sp","_resolvedAsset","_sourceOrigin","TickerListener","previous","_destroyed","_fn","_once","ticker","redirect","connect","hard","_Ticker","autoStart","deltaTime","lastTime","speed","started","_requestId","_maxElapsedMS","_minElapsedMS","_protected","_lastFrame","_head","deltaMS","targetFPMS","time","requestAnimationFrame","_requestIfNeeded","performance","now","_cancelIfNeeded","cancelAnimationFrame","_startIfPossible","UPDATE_PRIORITY","NORMAL","_addListener","addOnce","current","currentTime","head","FPS","minFPS","fps","maxFPS","minFPMS","_shared","_system","UPDATE_PRIORITY2","promise","_promise","video","video2","onloadeddata","onerror","autoplay","crossOrigin","createTexture","bindTexture","TEXTURE_2D","framebuffer","createFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_COLORSPACE_CONVERSION_WEBGL","NONE","texImage2D","RGBA","UNSIGNED_BYTE","pixel","readPixels","deleteFramebuffer","deleteTexture","_gl$getExtension","getExtension","loseContext","unsafeEval","Function","arr","startIdx","removeCount","uidCache","default","sourceWidth","sourceHeight","warnings","version","message","ignoreDepth","stack","groupCollapsed","groupEnd","warnCount","maxWarnings","assertPath","path2","JSON","stringify","removeUrlParams","toPosix","isUrl","isDataUrl","isBlobUrl","startsWith","hasProtocol","getProtocol","matchFile","matchProtocol","customBaseUrl","customRootUrl","baseUrl","rootUrl","rootname","isAbsolute","normalize","protocol","trailingSeparator","endsWith","allowAboveRoot","lastSegmentLength","lastSlash","dots","code","lastSlashIndex","normalizeStringPosix","joined","arg","prevArg","joinExtensions","hasRoot","matchedSlash","origpath","basename","extIdx","firstNonSlashEnd","startDot","startPart","preDotState","ret","sep","delimiter","ClassType","initialSize","_pool","_count","_classType","prepopulate","_item$init","_item","_item$reset","totalSize","totalFree","totalUsed","_poolsByClass","Class","getPool","stats","pool","ID","free","used","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","defineProperty","enumerable","chunkId","miniCssF","inProgress","dataWebpackPrefix","done","script","needAttach","scripts","getElementsByTagName","charset","timeout","nc","setAttribute","onScriptComplete","onload","doneFns","parentNode","appendChild","Symbol","toStringTag","installedChunks","installedChunkData","error","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","some","chunkLoadingGlobal","BaseObject","renderer","Renderer","Component","_id","GameObject","Disabled","_disabled","_container","GoContainer","Transform","Dispose","Remove","Hide","Show","GoButton","pressHandler","_pressedSize","_pressedFrames","_pressed","_pressedHandler","StageSpriteButton","Update","GoImage","_maxSize","_minSize","_velocityStart","_fade","_velocity","_speed","_orgWidth","_orgHeight","_pivotX","_pivotY","_hide","_factor","StageSprite","Manager","Config","AnchorTiledCenterMiddle","canvasWidth","canvasHeight","tileSize","tileScale","ts","AnchorObjectCenterTop","offsetX","AnchorObjectCenterMiddle","AnchorObjectCenterBottom","AnchorObjectRightBottom","AnchorObjectRightTop","AnchorObjectLeftTop","AnchorObjectLeftBottom","ViewMenu","playHandler","_titleOffsetY","_buttonOffsetY","_buttonWidth","_buttonHeight","_titleSize","_titleSpeed","_title","_playButton","SpriteButtonPlay","SpriteTitle","DisableInteraction","EnableInteraction","UpdateLayout","portrait","xywh","ViewBack","_alpha","_alphaVariation","_tileSize","_maxFlashFrames","_tileContainer","_flashFrames","StageSpriteRepeat","SpriteBackTile","ReferenceWidth","ReferenceHeight","RestageSpriteRepeat","random","GoText","TextHeight","_textHeight","TextWidth","_textWidth","Text","UpdateText","strokeColor","strokeSize","StageText","CompReel","IsSpinning","_spinVelocity","IsEnding","_endingSpin","StopIndex","_stopIndex","reelData","symbolsData","stopIndex","_minSpinFrames","_spinVelocityStart","_spinVelocityInc","_spinVelocityMax","_spinBounceMax","_bounceFrames","_maskId","_symbolData","_reelData","_symbols","_spinFrames","_bounce","_visibleSymbols","_maskWidth","_maskHeight","_endCallback","StageMask","PopulateSymbols","PlaceSymbols","symSize","GetSymbolSize","Bounce","stopSymbol","stopEntering","change","diff","MoveSymbols","stopEntered","MoveMask","StartSpin","EndSpin","GetSymbolsMinY","symbolId","symbolAsset","NestSprite","stopOffset","edgeBottom","minPosY","bounceDirection","bounce","GoWinBox","Cell","_cell","lineSize","lineColor","fillColor","fillAlpha","flash","_fillId","_fadeMinFactor","_fadeSpeed","_lineAlphaMultiplier","_fillAlpha","_flash","StageRectangle","GetFillId","lineAlpha","StageFrame","SetPosition","CompSlot","MachineHeight","_machineHeight","MachineWidth","_machineWidth","_reels","reel","BorderWidthOriginal","_sizeBorderLine","BorderWidth","_borderWidth","rows","_borderId","_coverId","_reelId","_winBoxId","_symbolSize","_colorCover","_colorBorder","_alphaCover","_alphaBorder","_border","_cover","_machineRows","_stops","_winBoxes","reelId","GetReelId","GetCCoverId","GetBorderId","box","cell","callbackPerReel","EndReelSpin","ShowWinBoxes","winMatches","GoPanel","_alphaStart","_alphaMin","_alphaMax","_alphaChange","_alphaDir","NestRectangle","ViewGame","_machinePlayer","_machineHouse","spinHandler","exitHandler","infoHandler","betHandler","_betId","_playerId","_houseId","_balanceId","_winningsId","_machinePlayerId","_machineHouseId","_headerId","_footerId","_machineOffsetPortrait","_machineOffsetLandscape","_buttonSize","_spinButtonWidth","_panelSize","_VersusSize","_VersusSpeed","_balanceTextWidth","_balanceTextHeight","_betTextWidth","_betTextHeight","_winningsTextWidth","_winningsTextHeight","_balanceText","_betText","_winningsText","_playerText","_houseText","_versus","_spinButton","_exitButton","_infoButton","_plusButton","_minusButton","_header","_footer","_portrait","_gameOver","_spinCallback","Reelset","SymbolAssets","InitialPlayerStops","MachineRows","InitialHouseStops","SpriteVersus","ColorSlotPanelFill","AlphaSlotPanelFill","SizeSlotPanelLine","ColorSlotPanelLine","AlphaSlotPanelLine","GetBalanceText","BalanceStart","BetMin","TextFonts","SizeSlotText","ColorSlotText","ColorSlotTextStroke","SizeSlotTextStroke","GetBetText","GetWinningsText","LabelFonts","SizeLabelText","ColorLabelText","ColorLabelTextStroke","SizeLabelTextStroke","SpriteButtonSpin","SpriteButtonClose","SpriteButtonInfo","SpriteButtonPlus","BetChangeHandler","SpriteButtonMinus","stopsPlayer","stopsHouse","SpinResults","winnings","balance","bet","SizeWinBoxLine","ColorWinBoxLine","ColorWinBox","AlphaWinBox","ColorFailWinBoxLine","ColorFailWinBox","AlphaFailWinBox","PositionBalanceText","playOffsetX","exitButtonX","exitButtonOffset","xywhPlayer","xywhHouse","panelSizeScaled","wVis","GetRenderable","SetRenderable","betOffsetX","sSize","mW","mH","playerCenter","playerMiddle","houseCenter","houseMiddle","direction","handler","newBetBalance","FormatFunds","toLocaleString","TextBalance","TextBet","TextWinnings","ViewInfo","gaffeHandler","returnHandler","_closeId","_logoId","_descId","_nextId","_prevId","_upId","_downId","_selectId","_nextStopsId","_zeroStopsId","_randomStopsId","_nextStopsInfo","_logoSize","_edgeOffset","_exitSize","_navSize","_coverColor","_coverAlpha","_portraitDescFactor","_stopsTextFactor","_prevButton","_nextButton","_upButton","_downButton","_zeroButton","_randButton","_selectBox","_descText","_stopsText","_reelset","_logo","_descTextWidth","_descTextHeight","_stopsTextWidth","_stopsTextHeight","_reelTextWidth","_reelTextHeight","_gaffeHandler","_selectedReel","GameDescription","DescTextFonts","DescTextSize","DescTextColor","DescTextStrokeColor","DescTextStrokeSize","reelString","GetReelString","GetStopsText","SpriteButtonRight","UpdateSelectionIndicator","SpriteButtonLeft","SpriteButtonUp","MoveStop","SpriteButtonDown","SpriteButtonZero","ZeroAllStops","SpriteButtonRandom","RandomAllStops","stopsTextY","ls","edgeOffsetScaled","reelsOffsetY","inputStop","reelIndex","selReel","GameController","audio","slotEngine","logger","_background","_menuView","_slotView","_infoView","_betAmount","Audio","Engine","Logger","Start","Initialize","ColorBackground","catch","LoadSprites","AllSprites","DefaultUserId","PlayRequest","Resize","SetTicker","MaxFps","onresize","onfocus","Focus","objs","wwidth","innerWidth","wheight","innerHeight","minW","minH","sFactor","MinWidthPortrait","MinHeightPortrait","PortraitScaleFactor","MinWidthLandscape","MinHeightLandscape","cwidth","cheight","Stop","AudioSpinLoop","ProcessSpinResults","GetWinMatches","GetWinnings","newBalance","GetUserBalance","Play","AudioWinner","AudioSpinWon","AudioSpinLost","LoadSounds","AllAudio","then","SpinRequest","PlayLoop","GenerateStops","playerStops","houseStops","SpinReelComplete","SpinComplete","AudioTransition","Return","Info","BetChange","Reset","AudioClick","SetGaffe","newBet","BetIncrement","BetMax","AudioStop","DefaultConfig","_sprites","_sound","SpriteSymbolRock","SpriteSymbolPaper","SpriteSymbolScissors","R","P","WinMatchMin","BetMultiplier","BetMultiplierInc","Combinations","browserExt","webworkerExt","WorkerGlobalScope","_isWebGLSupported","_isWebGPUSupported","isWebGPUSupported","gpu","requestAdapter","requestDevice","renderPriority","_Application","stage","RendererClass","finalOptions","_options$failIfMajorP","rendererType","WebGPURenderer","webgpu","contextOptions","stencil","_gl","success","getContextAttributes","WebGLRenderer","webgl","autoDetectRenderer","_plugins","plugin","rendererDestroyOptions","plugins","Application","BitmapFont","_data$distanceField","_charData$kerning","textureFrame","frameReal","bitmapFontTextParser","txt","_rawData$distanceFiel","rawData","common","kernings","attributeList","itemData","strValue","floatValue","isNaN","distanceRange","fieldType","face","file","_charNode$letter","charNode","letter","xoffset","yoffset","xadvance","bitmapFontXMLParser","_charNode$getAttribut","bitmapFontXMLStringParser","validExtensions","bitmapFontCachePlugin","CacheParser","loadBitmapFont","bitmapFontData","textureUrls","textureOptions","pageFile","loadedTextures","response","BackgroundLoader","verbose","_loader","_assetList","_isLoading","_maxConcurrent","assetUrls","_isActive","_next","toLoad","toLoadAmount","active","cacheTextureArray","testImageFormat","imageData","Image","blob","createImageBitmap","detectAvif","DetectionParser","formats","imageFormats","detectDefaults","inWorker","testVideoFormat","mimeType","canPlayType","detectMp4","detectOgv","detectWebm","detectWebp","Loader","_parsersValidated","promiseCache","_getLoadPromiseAndParser","_parserHash","_parserX$test","parserX","parser2","_parser2$testParse","assetsToLoadIn","onProgress","_validateParsers","assetsToLoad","assetsToUnloadIn","loadPromise","_loadPromise$parser","_loadPromise$parser$u","loadedAsset","hash","checkDataUrl","mimes","mime","checkExtension","tempURL","loadJson","Low","json","loadTxt","validWeights","validFontExtensions","validFontMIMEs","CSS_IDENT_TOKEN_REGEX","validURICharactersRegex","loadWebFont","_options$data$family","_options$data$weights","_options$data3","fontFaces","family","nameTokens","charAt","toUpperCase","valid","fontFamilyName","getFontFamilyName","weights","weight","FontFace","uri","encodeURI","getResolutionOfUrl","loadSvg","parseAsGraphicsContext","_asset$data$parseAsGr","svgSource","loadAsGraphics","_asset$data","_asset$data$width","_asset$data2","_asset$data$height","_asset$data3","blobUrl","URL","createObjectURL","decode","revokeObjectURL","_p","loadAsTexture","MAX_WORKERS","UUID","WorkerManager","_createdWorkers","_workerPool","_resolveHash","isImageBitmapSupported","_isImageBitmapSupported","worker","WorkerInstance","terminate","loadImageBitmap","_run","_initWorkers","_getWorker","hardwareConcurrency","WorkerInstance$1","_complete","_returnWorker","uuid","toDo","postMessage","validImageExtensions","validImageMIMEs","loadTextures","High","preferWorkers","preferCreateImageBitmap","ok","status","statusText","imageBlob","validVideoExtensions","validVideoMIMEs","loc","parsedUrl","hostname","port","determineCrossOrigin","loadVideoTextures","isValidDataUrl","isValidExtension","videoElement","attributeMap","sourceElement","onCanPlay","loaded","cleanup","err","resolveTextureUrl","resolveJsonUrl","Assets","_detections","_backgroundLoader","_options$texturePrefe","_options$texturePrefe2","_options$texturePrefe3","defaultSearchParams","resolutionPref","texturePreference","_detectFormats","preferredFormats","skipDetections","detections","preferences","setPreferences","urls","urlArray","resolveResults","_mapLoadToResolve","loadBundle","_onProgress","resolveResult","resolveResult2","backgroundLoad","backgroundLoadBundle","resolveArray","Set","loadedAssets","_unloadFromResolved","unloadBundle","detection","assetKeyMap","_ref$key$extension","_matrix","_this$observer","updateSkew","_TilingSprite","tilePosition","tileRotation","applyAnchorToTexture","_applyAnchorToTexture","_tileTransform","tileTransform","_didTilingSpriteUpdate","TilingSprite","AbstractText","styleClass","_didTextUpdate","_styleClass","_text","_getKey","owner","_args$","ensureOptions","canvasMeasurement","PIXIRenderer","_application","_containers","_tickerCallback","PIXI","backgroundColor","resizeTo","body","sprites","maxFps","sprite","GetIndex","interactive","holder","thickness","bold","parentId","scaleTile","pre","instance","getInstance","Filter","destination","_this$source","disconnect","_this$source2","WebAudioUtils","setParamValue","setValueAtTime","audioContext","_EqualizerFilter","f64","f125","f250","f500","f1k","f2k","f4k","f8k","f16k","bands","equalizerBands","F32","gain","F64","F125","F250","F500","F1K","F2K","F4K","F8K","F16K","useLegacy","band","node","createBiquadFilter","Q","frequency","bandsMap","setGain","getGain","EqualizerFilter","HTMLAudioContext","volume","refresh","refreshPaused","_filters","toggleMute","togglePause","_HTMLAudioInstance","progress","_duration","_paused","_onPlay","_playing","_onPause","media","duration","cloneNode","onplay","onpause","_media","_internalStop","onended","_volume","_loop","_muted","global","sound","globalVolume","soundVolume","instanceVolume","pausedReal","_pausedReal","_end","assert","_start","PADDING","onloadedmetadata","_onComplete","HTMLAudioInstance","HTMLAudioMedia","isPlayable","isLoaded","autoPlayStart","onLoad","removeListeners","onAbort","onError","SoundSprite","supported","typeOverrides","overrides","m4a","oga","opus","caf","no","canByExt","canByType","validateFormats","WebAudioInstance","_elapsed","_update","_this$_filters","_gain","applyFilters","_this$_filters2","nodes","cloneBufferSource","_lastUpdate","_now","loopEnd","loopStart","enableTicker","enabled","_updateListener","_progress","_this$_filters3","force","soundLength","Filterable","output","_output","_input","prevFilter","_WebAudioNodes","bufferSource","createBufferSource","createGain","analyser","createAnalyser","_script","createScriptProcessor","BUFFER_SIZE","bufferSize","WebAudioNodes","WebAudioMedia","_nodes","_decode","_loadUrl","arrayBuffer","audioBufferReadyFn","AudioBuffer","_Sound","HTMLAudioElement","singleInstance","_instances","_autoPlayOptions","_preloadQueue","isPlaying","preferUrl","addSprites","_preload","resume","_removeInstances","removeSprites","resolve2","_createInstance","instances","_poolInstance","Sound","WebAudioContext","win","AudioContext","compressor","createDynamicsCompressor","autoPause","_ctx","_offlineCtx","OfflineAudioContext","sampleRate","_locked","_unlock","onFocus","onBlur","_pausedOnBlur","playEmptySound","createBuffer","webkitAudioContext","webkitOfflineAudioContext","offlineContext","suspend","handleError","decodeAudioData","_asset$alias","soundAsset","sound2","_asset$data$loaded","extensions$1","setInstance","_webAudioContext","_htmlAudioContext","_sounds","filtersAll","sourceOptions","options2","_getOptions","_useLegacy","legacy","disableAutoPause","exists","volumeAll","speedAll","togglePauseAll","pauseAll","resumeAll","toggleMuteAll","muteAll","unmuteAll","stopAll","PIXIAudio","sounds","SlotEngine","_gaffe","_combinations","_generatedStops","_winMatches","_userId","_balance","_multiplier","_multiplierInc","_winMatchMin","GetUserId","userId","winBoxes","arSize","checkStops","vsStops","reelset","checkStop","vsStop","checkIndex","checkSym","vsIndex","vsSym","betAmount","betMultiplier","Boolean","_logger","_config","_renderer","_audio","_engine","_controller","serviceWorker","ready","registration","unregister"],"sourceRoot":""}